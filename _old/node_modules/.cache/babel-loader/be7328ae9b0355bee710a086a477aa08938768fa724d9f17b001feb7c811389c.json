{"ast":null,"code":"import axios from \"axios\";\nconst baseURL = process.env.REACT_APP_skills_api_url;\nconst apiKey = process.env.REACT_APP_cms_api_token;\nasync function fetchFeaturedSkills() {\n  try {\n    const url = `${baseURL}?filters[Featured][$eq]=true&populate=Icon`;\n    // console.log(\"Fetching from URL: \", url); // Log the URL\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${apiKey}` // Ensure Bearer prefix if needed\n      }\n    });\n\n    // console.log(\"Response Data: \", response.data); // Log the entire response\n\n    // Check if the response data is structured as expected\n    if (!response.data.data) {\n      throw new Error(\"Unexpected response structure\");\n    }\n\n    // Map through the response data to extract necessary fields\n    let skills = response.data.data.map(skill => {\n      const name = skill.attributes.Name;\n      const type = skill.attributes.Type;\n      const iconData = skill.attributes.Icon.data;\n\n      // Handle cases where Icon.data might be null\n      const icon = iconData && iconData.attributes.formats && iconData.attributes.formats.thumbnail ? iconData.attributes.formats.thumbnail.url : \"https://res.cloudinary.com/wanghley/image/upload/v1720032994/placeholder_icon.png\";\n      return {\n        name,\n        type,\n        icon\n      };\n    });\n\n    // console.log(\"Mapped Skills: \", skills); // Log the mapped skills\n    return skills;\n  } catch (error) {\n    console.error(\"Error fetching featured skills: \", error);\n    throw error;\n  }\n}\nasync function fetchData(nextPage = 1, prevData = null) {\n  try {\n    const url = `${baseURL}?pagination[page]=${nextPage}`;\n    const response = await axios.get(url);\n\n    // console.log(response.data.data);\n\n    const updatedData = {\n      ...response.data,\n      data: prevData ? [...prevData.data, ...response.data.data] : response.data.data\n    };\n    if (response.data.meta.pagination.pageCount <= nextPage) {\n      return updatedData;\n    } else {\n      return fetchData(nextPage + 1, updatedData);\n    }\n  } catch (e) {\n    console.error(e);\n    throw e; // Rethrow the error for the caller to handle\n  }\n}\nexport async function getUniqueElements() {\n  try {\n    const initialChart = await fetchData();\n    // console.log(initialChart.data);\n    const uniqueElements = initialChart.data.reduce((acc, {\n      id,\n      attributes\n    }) => {\n      acc[id] = attributes;\n      return acc;\n    }, {});\n    /* The line `// console.log(uniqueElements);` is commented out, which means it is not being\n    executed. It is likely used for debugging purposes to log the `uniqueElements` object to the\n    console. By logging the object, you can inspect its contents and verify that it contains the\n    expected data. */\n    // console.log(uniqueElements);\n    return uniqueElements;\n  } catch (e) {\n    console.error(e);\n    return null; // or throw e; depending on your error handling strategy\n  }\n}\nexport { fetchFeaturedSkills };","map":{"version":3,"names":["axios","baseURL","process","env","REACT_APP_skills_api_url","apiKey","REACT_APP_cms_api_token","fetchFeaturedSkills","url","response","get","headers","Authorization","data","Error","skills","map","skill","name","attributes","Name","type","Type","iconData","Icon","icon","formats","thumbnail","error","console","fetchData","nextPage","prevData","updatedData","meta","pagination","pageCount","e","getUniqueElements","initialChart","uniqueElements","reduce","acc","id"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/src/api/skills.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseURL = process.env.REACT_APP_skills_api_url;\nconst apiKey = process.env.REACT_APP_cms_api_token;\n\nasync function fetchFeaturedSkills() {\n  try {\n    const url = `${baseURL}?filters[Featured][$eq]=true&populate=Icon`;\n    // console.log(\"Fetching from URL: \", url); // Log the URL\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${apiKey}` // Ensure Bearer prefix if needed\n      }\n    });\n\n    // console.log(\"Response Data: \", response.data); // Log the entire response\n\n    // Check if the response data is structured as expected\n    if (!response.data.data) {\n      throw new Error(\"Unexpected response structure\");\n    }\n\n    // Map through the response data to extract necessary fields\n    let skills = response.data.data.map((skill) => {\n      const name = skill.attributes.Name;\n      const type = skill.attributes.Type;\n      const iconData = skill.attributes.Icon.data;\n\n      // Handle cases where Icon.data might be null\n      const icon = iconData && iconData.attributes.formats && iconData.attributes.formats.thumbnail\n        ? iconData.attributes.formats.thumbnail.url\n        : \"https://res.cloudinary.com/wanghley/image/upload/v1720032994/placeholder_icon.png\";\n      \n      return { name, type, icon };\n    });\n\n    // console.log(\"Mapped Skills: \", skills); // Log the mapped skills\n    return skills;\n\n  } catch (error) {\n    console.error(\"Error fetching featured skills: \", error);\n    throw error;\n  }\n}\n\n\nasync function fetchData(nextPage = 1, prevData = null) {\n  try {\n    const url = `${baseURL}?pagination[page]=${nextPage}`;\n    const response = await axios.get(url);\n\n    // console.log(response.data.data);\n\n    const updatedData = {\n      ...response.data,\n      data: prevData ? [...prevData.data, ...response.data.data] : response.data.data\n    };\n\n    if (response.data.meta.pagination.pageCount <= nextPage) {\n      return updatedData;\n    } else {\n      return fetchData(nextPage + 1, updatedData);\n    }\n  } catch (e) {\n    console.error(e);\n    throw e; // Rethrow the error for the caller to handle\n  }\n}\n\nexport async function getUniqueElements() {\n  try {\n    const initialChart = await fetchData();\n    // console.log(initialChart.data);\n    const uniqueElements = initialChart.data.reduce((acc, { id, attributes }) => {\n      acc[id] = attributes;\n      return acc;\n    }, {});\n    /* The line `// console.log(uniqueElements);` is commented out, which means it is not being\n    executed. It is likely used for debugging purposes to log the `uniqueElements` object to the\n    console. By logging the object, you can inspect its contents and verify that it contains the\n    expected data. */\n    // console.log(uniqueElements);\n    return uniqueElements;\n  } catch (e) {\n    console.error(e);\n    return null; // or throw e; depending on your error handling strategy\n  }\n}\n\nexport { fetchFeaturedSkills };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}