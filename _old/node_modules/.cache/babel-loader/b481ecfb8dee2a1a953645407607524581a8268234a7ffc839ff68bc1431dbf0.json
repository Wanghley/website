{"ast":null,"code":"var _jsxFileName = \"/Users/wanghley/Workspace/Projects/wanghley.com/src/pages/blog.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { CardGrid } from '../components';\nimport { fetchProjects } from '../api/projects';\nimport { fetchBlogs } from '../api/blog';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\nimport './css/projects.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Blogs = props => {\n  _s();\n  const [projects, setProjects] = useState([]); // Initialize projects state\n  const [loading, setLoading] = useState(true); // Initialize loading state\n  const [page, setPage] = useState(1); // Initialize page state\n  const [hasMore, setHasMore] = useState(true); // Initialize hasMore state\n  const uniqueProjectIds = new Set(); // Initialize a set to store unique project IDs to avoid duplicates\n\n  const loadProjects = async page => {\n    try {\n      setLoading(true);\n      const newProjects = await fetchBlogs(page); // Fetch projects\n\n      if (newProjects && newProjects.length > 0) {\n        const filteredProjects = newProjects.filter(project => !uniqueProjectIds.has(project.attributes.id));\n        filteredProjects.forEach(project => uniqueProjectIds.add(project.attributes.id));\n        setProjects(prevProjects => [...prevProjects, ...filteredProjects]);\n        setPage(page + 1); // Increment page for the next load\n      } else {\n        setHasMore(false); // No more projects to load\n      }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      setHasMore(false); // Set hasMore to false on error\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadProjects(page);\n  }, [page]);\n  const handleScroll = () => {\n    if (loading) return; // If already loading, do not trigger another load\n\n    // Calculate scroll conditions\n    const isBottom = window.innerHeight + window.scrollY >= document.documentElement.offsetHeight;\n\n    // Check if at the bottom\n    if (isBottom && hasMore) {\n      loadProjects(page); // Load next page if hasMore is true\n    }\n  };\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [loading, hasMore]); // Depend on loading and hasMore to update scroll listener\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"projects\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"projects-title\",\n      children: \"Blog\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"projects-subtitle\",\n      children: \"Explore the depths of my mind, you will. A collection of thoughts, this is.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardGrid, {\n        cardData: projects,\n        type: \"blog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(Box, {\n        className: \"loading-container\",\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), !hasMore && !loading && /*#__PURE__*/_jsxDEV(Box, {\n        className: \"no-more-projects\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"End of projects, this is. A new path, seek you must.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(Blogs, \"J9h988njKlylB1NGZEzqIoDZ9UQ=\");\n_c = Blogs;\nexport default Blogs;\nvar _c;\n$RefreshReg$(_c, \"Blogs\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","CardGrid","fetchProjects","fetchBlogs","CircularProgress","Box","jsxDEV","_jsxDEV","Blogs","props","_s","projects","setProjects","loading","setLoading","page","setPage","hasMore","setHasMore","uniqueProjectIds","Set","loadProjects","newProjects","length","filteredProjects","filter","project","has","attributes","id","forEach","add","prevProjects","error","console","handleScroll","isBottom","window","innerHeight","scrollY","document","documentElement","offsetHeight","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","flexGrow","cardData","type","_c","$RefreshReg$"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/src/pages/blog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { CardGrid } from '../components';\nimport { fetchProjects } from '../api/projects';\nimport { fetchBlogs } from '../api/blog';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\nimport './css/projects.css';\n\nconst Blogs = (props) => {\n    const [projects, setProjects] = useState([]); // Initialize projects state\n    const [loading, setLoading] = useState(true); // Initialize loading state\n    const [page, setPage] = useState(1); // Initialize page state\n    const [hasMore, setHasMore] = useState(true); // Initialize hasMore state\n    const uniqueProjectIds = new Set(); // Initialize a set to store unique project IDs to avoid duplicates\n\n    const loadProjects = async (page) => {\n        try {\n            setLoading(true);\n            const newProjects = await fetchBlogs(page); // Fetch projects\n\n            if (newProjects && newProjects.length > 0) {\n                const filteredProjects = newProjects.filter(\n                    (project) => !uniqueProjectIds.has(project.attributes.id)\n                );\n                filteredProjects.forEach((project) => uniqueProjectIds.add(project.attributes.id));\n                setProjects((prevProjects) => [...prevProjects, ...filteredProjects]);\n                setPage(page + 1); // Increment page for the next load\n            } else {\n                setHasMore(false); // No more projects to load\n            }\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n            setHasMore(false); // Set hasMore to false on error\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadProjects(page);\n    }, [page]);\n\n    const handleScroll = () => {\n        if (loading) return; // If already loading, do not trigger another load\n\n        // Calculate scroll conditions\n        const isBottom = window.innerHeight + window.scrollY >= document.documentElement.offsetHeight;\n\n        // Check if at the bottom\n        if (isBottom && hasMore) {\n            loadProjects(page); // Load next page if hasMore is true\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('scroll', handleScroll);\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, [loading, hasMore]); // Depend on loading and hasMore to update scroll listener\n\n    return (\n        <div className=\"projects\">\n            <h1 className=\"projects-title\">Blog</h1>\n            <p className=\"projects-subtitle\">\n                Explore the depths of my mind, you will. A collection of thoughts, this is.\n            </p>\n            <Box sx={{ flexGrow: 1 }}>\n                <CardGrid cardData={projects} type='blog'/>\n                {loading && (\n                    <Box className=\"loading-container\">\n                        <CircularProgress />\n                    </Box>\n                )}\n                {!hasMore && !loading && (\n                    <Box className=\"no-more-projects\">\n                        <p>End of projects, this is. A new path, seek you must.</p>\n                    </Box>\n                )}\n            </Box>\n        </div>\n    );\n};\n\nexport default Blogs;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}