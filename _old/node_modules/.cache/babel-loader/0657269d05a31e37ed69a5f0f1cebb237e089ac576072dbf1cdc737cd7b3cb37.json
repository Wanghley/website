{"ast":null,"code":"\"use client\";\n\nimport { createScope, signal, effect, peek, isString, deferredPromise, listenEvent, isArray } from './vidstack-CH225ns1.js';\nimport { TimeRange, RAFLoop, preconnect, ListSymbol, TextTrack, QualitySymbol } from './vidstack-C-WrcxmD.js';\nimport { EmbedProvider } from './vidstack-CFWvJYI8.js';\nimport { resolveVimeoVideoId, getVimeoVideoInfo } from './vidstack-krOAtKMi.js';\nimport 'react';\nimport '@floating-ui/dom';\nconst trackedVimeoEvents = [\"bufferend\", \"bufferstart\",\n// 'cuechange',\n\"durationchange\", \"ended\", \"enterpictureinpicture\", \"error\", \"fullscreenchange\", \"leavepictureinpicture\", \"loaded\",\n// 'loadeddata',\n// 'loadedmetadata',\n// 'loadstart',\n\"playProgress\", \"loadProgress\", \"pause\", \"play\", \"playbackratechange\",\n// 'progress',\n\"qualitychange\", \"seeked\", \"seeking\",\n// 'texttrackchange',\n\"timeupdate\", \"volumechange\", \"waiting\"\n// 'adstarted',\n// 'adcompleted',\n// 'aderror',\n// 'adskipped',\n// 'adallcompleted',\n// 'adclicked',\n// 'chapterchange',\n// 'chromecastconnected',\n// 'remoteplaybackavailabilitychange',\n// 'remoteplaybackconnecting',\n// 'remoteplaybackconnect',\n// 'remoteplaybackdisconnect',\n// 'liveeventended',\n// 'liveeventstarted',\n// 'livestreamoffline',\n// 'livestreamonline',\n];\nclass VimeoProvider extends EmbedProvider {\n  $$PROVIDER_TYPE = \"VIMEO\";\n  scope = createScope();\n  fullscreen;\n  #ctx;\n  #videoId = signal(\"\");\n  #pro = signal(false);\n  #hash = null;\n  #currentSrc = null;\n  #fullscreenActive = false;\n  #seekableRange = new TimeRange(0, 0);\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #currentCue = null;\n  #chaptersTrack = null;\n  #promises = /* @__PURE__ */new Map();\n  #videoInfoPromise = null;\n  constructor(iframe, ctx) {\n    super(iframe);\n    this.#ctx = ctx;\n    const self = this;\n    this.fullscreen = {\n      get active() {\n        return self.#fullscreenActive;\n      },\n      supported: true,\n      enter: () => this.#remote(\"requestFullscreen\"),\n      exit: () => this.#remote(\"exitFullscreen\")\n    };\n  }\n  /**\n   * Whether tracking session data should be enabled on the embed, including cookies and analytics.\n   * This is turned off by default to be GDPR-compliant.\n   *\n   * @defaultValue `false`\n   */\n  cookies = false;\n  title = true;\n  byline = true;\n  portrait = true;\n  color = \"00ADEF\";\n  get type() {\n    return \"vimeo\";\n  }\n  get currentSrc() {\n    return this.#currentSrc;\n  }\n  get videoId() {\n    return this.#videoId();\n  }\n  get hash() {\n    return this.#hash;\n  }\n  get isPro() {\n    return this.#pro();\n  }\n  preconnect() {\n    preconnect(this.getOrigin());\n  }\n  setup() {\n    super.setup();\n    effect(this.#watchVideoId.bind(this));\n    effect(this.#watchVideoInfo.bind(this));\n    effect(this.#watchPro.bind(this));\n    this.#ctx.notify(\"provider-setup\", this);\n  }\n  destroy() {\n    this.#reset();\n    this.fullscreen = void 0;\n    const message = \"provider destroyed\";\n    for (const promises of this.#promises.values()) {\n      for (const {\n        reject\n      } of promises) reject(message);\n    }\n    this.#promises.clear();\n    this.#remote(\"destroy\");\n  }\n  async play() {\n    return this.#remote(\"play\");\n  }\n  async pause() {\n    return this.#remote(\"pause\");\n  }\n  setMuted(muted) {\n    this.#remote(\"setMuted\", muted);\n  }\n  setCurrentTime(time) {\n    this.#remote(\"seekTo\", time);\n    this.#ctx.notify(\"seeking\", time);\n  }\n  setVolume(volume) {\n    this.#remote(\"setVolume\", volume);\n    this.#remote(\"setMuted\", peek(this.#ctx.$state.muted));\n  }\n  setPlaybackRate(rate) {\n    this.#remote(\"setPlaybackRate\", rate);\n  }\n  async loadSource(src) {\n    if (!isString(src.src)) {\n      this.#currentSrc = null;\n      this.#hash = null;\n      this.#videoId.set(\"\");\n      return;\n    }\n    const {\n      videoId,\n      hash\n    } = resolveVimeoVideoId(src.src);\n    this.#videoId.set(videoId ?? \"\");\n    this.#hash = hash ?? null;\n    this.#currentSrc = src;\n  }\n  #watchVideoId() {\n    this.#reset();\n    const videoId = this.#videoId();\n    if (!videoId) {\n      this.src.set(\"\");\n      return;\n    }\n    this.src.set(`${this.getOrigin()}/video/${videoId}`);\n    this.#ctx.notify(\"load-start\");\n  }\n  #watchVideoInfo() {\n    const videoId = this.#videoId();\n    if (!videoId) return;\n    const promise = deferredPromise(),\n      abort = new AbortController();\n    this.#videoInfoPromise = promise;\n    getVimeoVideoInfo(videoId, abort, this.#hash).then(info => {\n      promise.resolve(info);\n    }).catch(e => {\n      promise.reject();\n      {\n        this.#ctx.logger?.warnGroup(`Failed to fetch vimeo video info for id \\`${videoId}\\`.`).labelledLog(\"Error\", e).dispatch();\n      }\n    });\n    return () => {\n      promise.reject();\n      abort.abort();\n    };\n  }\n  #watchPro() {\n    const isPro = this.#pro(),\n      {\n        $state,\n        qualities\n      } = this.#ctx;\n    $state.canSetPlaybackRate.set(isPro);\n    qualities[ListSymbol.setReadonly](!isPro);\n    if (isPro) {\n      return listenEvent(qualities, \"change\", () => {\n        if (qualities.auto) return;\n        const id = qualities.selected?.id;\n        if (id) this.#remote(\"setQuality\", id);\n      });\n    }\n  }\n  getOrigin() {\n    return \"https://player.vimeo.com\";\n  }\n  buildParams() {\n    const {\n        keyDisabled\n      } = this.#ctx.$props,\n      {\n        playsInline,\n        nativeControls\n      } = this.#ctx.$state,\n      showControls = nativeControls();\n    return {\n      title: this.title,\n      byline: this.byline,\n      color: this.color,\n      portrait: this.portrait,\n      controls: showControls,\n      h: this.hash,\n      keyboard: showControls && !keyDisabled(),\n      transparent: true,\n      playsinline: playsInline(),\n      dnt: !this.cookies\n    };\n  }\n  #onAnimationFrame() {\n    this.#remote(\"getCurrentTime\");\n  }\n  // Embed will sometimes dispatch 0 at end of playback.\n  #preventTimeUpdates = false;\n  #onTimeUpdate(time, trigger) {\n    if (this.#preventTimeUpdates && time === 0) return;\n    const {\n      realCurrentTime,\n      paused,\n      bufferedEnd,\n      seekableEnd,\n      live\n    } = this.#ctx.$state;\n    if (realCurrentTime() === time) return;\n    const prevTime = realCurrentTime();\n    this.#ctx.notify(\"time-change\", time, trigger);\n    if (Math.abs(prevTime - time) > 1.5) {\n      this.#ctx.notify(\"seeking\", time, trigger);\n      if (!paused() && bufferedEnd() < time) {\n        this.#ctx.notify(\"waiting\", void 0, trigger);\n      }\n    }\n    if (!live() && seekableEnd() - time < 0.01) {\n      this.#ctx.notify(\"end\", void 0, trigger);\n      this.#preventTimeUpdates = true;\n      setTimeout(() => {\n        this.#preventTimeUpdates = false;\n      }, 500);\n    }\n  }\n  #onSeeked(time, trigger) {\n    this.#ctx.notify(\"seeked\", time, trigger);\n  }\n  #onLoaded(trigger) {\n    const videoId = this.#videoId();\n    this.#videoInfoPromise?.promise.then(info => {\n      if (!info) return;\n      const {\n        title,\n        poster,\n        duration,\n        pro\n      } = info;\n      this.#pro.set(pro);\n      this.#ctx.notify(\"title-change\", title, trigger);\n      this.#ctx.notify(\"poster-change\", poster, trigger);\n      this.#ctx.notify(\"duration-change\", duration, trigger);\n      this.#onReady(duration, trigger);\n    }).catch(() => {\n      if (videoId !== this.#videoId()) return;\n      this.#remote(\"getVideoTitle\");\n      this.#remote(\"getDuration\");\n    });\n  }\n  #onReady(duration, trigger) {\n    const {\n        nativeControls\n      } = this.#ctx.$state,\n      showEmbedControls = nativeControls();\n    this.#seekableRange = new TimeRange(0, duration);\n    const detail = {\n      buffered: new TimeRange(0, 0),\n      seekable: this.#seekableRange,\n      duration\n    };\n    this.#ctx.delegate.ready(detail, trigger);\n    if (!showEmbedControls) {\n      this.#remote(\"_hideOverlay\");\n    }\n    this.#remote(\"getQualities\");\n    this.#remote(\"getChapters\");\n  }\n  #onMethod(method, data, trigger) {\n    switch (method) {\n      case \"getVideoTitle\":\n        const videoTitle = data;\n        this.#ctx.notify(\"title-change\", videoTitle, trigger);\n        break;\n      case \"getDuration\":\n        const duration = data;\n        if (!this.#ctx.$state.canPlay()) {\n          this.#onReady(duration, trigger);\n        } else {\n          this.#ctx.notify(\"duration-change\", duration, trigger);\n        }\n        break;\n      case \"getCurrentTime\":\n        this.#onTimeUpdate(data, trigger);\n        break;\n      case \"getBuffered\":\n        if (isArray(data) && data.length) {\n          this.#onLoadProgress(data[data.length - 1][1], trigger);\n        }\n        break;\n      case \"setMuted\":\n        this.#onVolumeChange(peek(this.#ctx.$state.volume), data, trigger);\n        break;\n      // case 'getTextTracks':\n      //   this.#onTextTracksChange(data as VimeoTextTrack[], trigger);\n      //   break;\n      case \"getChapters\":\n        this.#onChaptersChange(data);\n        break;\n      case \"getQualities\":\n        this.#onQualitiesChange(data, trigger);\n        break;\n    }\n    this.#getPromise(method)?.resolve();\n  }\n  #attachListeners() {\n    for (const type of trackedVimeoEvents) {\n      this.#remote(\"addEventListener\", type);\n    }\n  }\n  #onPause(trigger) {\n    this.#timeRAF.stop();\n    this.#ctx.notify(\"pause\", void 0, trigger);\n  }\n  #onPlay(trigger) {\n    this.#timeRAF.start();\n    this.#ctx.notify(\"play\", void 0, trigger);\n  }\n  #onPlayProgress(trigger) {\n    const {\n      paused\n    } = this.#ctx.$state;\n    if (!paused() && !this.#preventTimeUpdates) {\n      this.#ctx.notify(\"playing\", void 0, trigger);\n    }\n  }\n  #onLoadProgress(buffered, trigger) {\n    const detail = {\n      buffered: new TimeRange(0, buffered),\n      seekable: this.#seekableRange\n    };\n    this.#ctx.notify(\"progress\", detail, trigger);\n  }\n  #onBufferStart(trigger) {\n    this.#ctx.notify(\"waiting\", void 0, trigger);\n  }\n  #onBufferEnd(trigger) {\n    const {\n      paused\n    } = this.#ctx.$state;\n    if (!paused()) this.#ctx.notify(\"playing\", void 0, trigger);\n  }\n  #onWaiting(trigger) {\n    const {\n      paused\n    } = this.#ctx.$state;\n    if (paused()) {\n      this.#ctx.notify(\"play\", void 0, trigger);\n    }\n    this.#ctx.notify(\"waiting\", void 0, trigger);\n  }\n  #onVolumeChange(volume, muted, trigger) {\n    const detail = {\n      volume,\n      muted\n    };\n    this.#ctx.notify(\"volume-change\", detail, trigger);\n  }\n  // #onTextTrackChange(track: VimeoTextTrack, trigger: Event) {\n  //   const textTrack = this.#ctx.textTracks.toArray().find((t) => t.language === track.language);\n  //   if (textTrack) textTrack.mode = track.mode;\n  // }\n  // #onTextTracksChange(tracks: VimeoTextTrack[], trigger: Event) {\n  //   for (const init of tracks) {\n  //     const textTrack = new TextTrack({\n  //       ...init,\n  //       label: init.label.replace('auto-generated', 'auto'),\n  //     });\n  //     textTrack[TextTrackSymbol.readyState] = 2;\n  //     this.#ctx.textTracks.add(textTrack, trigger);\n  //     textTrack.setMode(init.mode, trigger);\n  //   }\n  // }\n  // #onCueChange(cue: VimeoTextCue, trigger: Event) {\n  //   const { textTracks, $state } = this.#ctx,\n  //     { currentTime } = $state,\n  //     track = textTracks.selected;\n  //   if (this.#currentCue) track?.removeCue(this.#currentCue, trigger);\n  //   this.#currentCue = new window.VTTCue(currentTime(), Number.MAX_SAFE_INTEGER, cue.text);\n  //   track?.addCue(this.#currentCue, trigger);\n  // }\n  #onChaptersChange(chapters) {\n    this.#removeChapters();\n    if (!chapters.length) return;\n    const track = new TextTrack({\n        kind: \"chapters\",\n        default: true\n      }),\n      {\n        seekableEnd\n      } = this.#ctx.$state;\n    for (let i = 0; i < chapters.length; i++) {\n      const chapter = chapters[i],\n        nextChapter = chapters[i + 1];\n      track.addCue(new window.VTTCue(chapter.startTime, nextChapter?.startTime ?? seekableEnd(), chapter.title));\n    }\n    this.#chaptersTrack = track;\n    this.#ctx.textTracks.add(track);\n  }\n  #removeChapters() {\n    if (!this.#chaptersTrack) return;\n    this.#ctx.textTracks.remove(this.#chaptersTrack);\n    this.#chaptersTrack = null;\n  }\n  #onQualitiesChange(qualities, trigger) {\n    this.#ctx.qualities[QualitySymbol.enableAuto] = qualities.some(q => q.id === \"auto\") ? () => this.#remote(\"setQuality\", \"auto\") : void 0;\n    for (const quality of qualities) {\n      if (quality.id === \"auto\") continue;\n      const height = +quality.id.slice(0, -1);\n      if (isNaN(height)) continue;\n      this.#ctx.qualities[ListSymbol.add]({\n        id: quality.id,\n        width: height * (16 / 9),\n        height,\n        codec: \"avc1,h.264\",\n        bitrate: -1\n      }, trigger);\n    }\n    this.#onQualityChange(qualities.find(q => q.active), trigger);\n  }\n  #onQualityChange({\n    id\n  } = {}, trigger) {\n    if (!id) return;\n    const isAuto = id === \"auto\",\n      newQuality = this.#ctx.qualities.getById(id);\n    if (isAuto) {\n      this.#ctx.qualities[QualitySymbol.setAuto](isAuto, trigger);\n      this.#ctx.qualities[ListSymbol.select](void 0, true, trigger);\n    } else {\n      this.#ctx.qualities[ListSymbol.select](newQuality ?? void 0, true, trigger);\n    }\n  }\n  #onEvent(event, payload, trigger) {\n    switch (event) {\n      case \"ready\":\n        this.#attachListeners();\n        break;\n      case \"loaded\":\n        this.#onLoaded(trigger);\n        break;\n      case \"play\":\n        this.#onPlay(trigger);\n        break;\n      case \"playProgress\":\n        this.#onPlayProgress(trigger);\n        break;\n      case \"pause\":\n        this.#onPause(trigger);\n        break;\n      case \"loadProgress\":\n        this.#onLoadProgress(payload.seconds, trigger);\n        break;\n      case \"waiting\":\n        this.#onWaiting(trigger);\n        break;\n      case \"bufferstart\":\n        this.#onBufferStart(trigger);\n        break;\n      case \"bufferend\":\n        this.#onBufferEnd(trigger);\n        break;\n      case \"volumechange\":\n        this.#onVolumeChange(payload.volume, peek(this.#ctx.$state.muted), trigger);\n        break;\n      case \"durationchange\":\n        this.#seekableRange = new TimeRange(0, payload.duration);\n        this.#ctx.notify(\"duration-change\", payload.duration, trigger);\n        break;\n      case \"playbackratechange\":\n        this.#ctx.notify(\"rate-change\", payload.playbackRate, trigger);\n        break;\n      case \"qualitychange\":\n        this.#onQualityChange(payload, trigger);\n        break;\n      case \"fullscreenchange\":\n        this.#fullscreenActive = payload.fullscreen;\n        this.#ctx.notify(\"fullscreen-change\", payload.fullscreen, trigger);\n        break;\n      case \"enterpictureinpicture\":\n        this.#ctx.notify(\"picture-in-picture-change\", true, trigger);\n        break;\n      case \"leavepictureinpicture\":\n        this.#ctx.notify(\"picture-in-picture-change\", false, trigger);\n        break;\n      case \"ended\":\n        this.#ctx.notify(\"end\", void 0, trigger);\n        break;\n      case \"error\":\n        this.#onError(payload, trigger);\n        break;\n      case \"seek\":\n      case \"seeked\":\n        this.#onSeeked(payload.seconds, trigger);\n        break;\n    }\n  }\n  #onError(error, trigger) {\n    const {\n      message,\n      method\n    } = error;\n    if (method === \"setPlaybackRate\") {\n      this.#pro.set(false);\n    }\n    if (method) {\n      this.#getPromise(method)?.reject(message);\n    }\n    {\n      this.#ctx.logger?.errorGroup(`[vimeo]: ${message}`).labelledLog(\"Error\", error).labelledLog(\"Provider\", this).labelledLog(\"Event\", trigger).dispatch();\n    }\n  }\n  onMessage(message, event) {\n    if (message.event) {\n      this.#onEvent(message.event, message.data, event);\n    } else if (message.method) {\n      this.#onMethod(message.method, message.value, event);\n    }\n  }\n  onLoad() {}\n  async #remote(command, arg) {\n    let promise = deferredPromise(),\n      promises = this.#promises.get(command);\n    if (!promises) this.#promises.set(command, promises = []);\n    promises.push(promise);\n    this.postMessage({\n      method: command,\n      value: arg\n    });\n    return promise.promise;\n  }\n  #reset() {\n    this.#timeRAF.stop();\n    this.#seekableRange = new TimeRange(0, 0);\n    this.#videoInfoPromise = null;\n    this.#currentCue = null;\n    this.#pro.set(false);\n    this.#removeChapters();\n  }\n  #getPromise(command) {\n    return this.#promises.get(command)?.shift();\n  }\n}\nexport { VimeoProvider };","map":{"version":3,"names":["createScope","signal","effect","peek","isString","deferredPromise","listenEvent","isArray","TimeRange","RAFLoop","preconnect","ListSymbol","TextTrack","QualitySymbol","EmbedProvider","resolveVimeoVideoId","getVimeoVideoInfo","trackedVimeoEvents","VimeoProvider","$$PROVIDER_TYPE","scope","fullscreen","ctx","videoId","pro","hash","currentSrc","fullscreenActive","seekableRange","timeRAF","onAnimationFrame","bind","currentCue","chaptersTrack","promises","Map","videoInfoPromise","constructor","iframe","self","active","supported","enter","remote","exit","cookies","title","byline","portrait","color","type","isPro","getOrigin","setup","watchVideoId","watchVideoInfo","watchPro","notify","destroy","reset","message","values","reject","clear","play","pause","setMuted","muted","setCurrentTime","time","setVolume","volume","$state","setPlaybackRate","rate","loadSource","src","set","#watchVideoId","#watchVideoInfo","promise","abort","AbortController","then","info","resolve","catch","e","logger","warnGroup","labelledLog","dispatch","#watchPro","qualities","canSetPlaybackRate","setReadonly","auto","id","selected","buildParams","keyDisabled","$props","playsInline","nativeControls","showControls","controls","h","keyboard","transparent","playsinline","dnt","#onAnimationFrame","preventTimeUpdates","onTimeUpdate","#onTimeUpdate","trigger","realCurrentTime","paused","bufferedEnd","seekableEnd","live","prevTime","Math","abs","setTimeout","onSeeked","#onSeeked","onLoaded","#onLoaded","poster","duration","onReady","#onReady","showEmbedControls","detail","buffered","seekable","delegate","ready","onMethod","#onMethod","method","data","videoTitle","canPlay","length","onLoadProgress","onVolumeChange","onChaptersChange","onQualitiesChange","getPromise","attachListeners","#attachListeners","onPause","#onPause","stop","onPlay","#onPlay","start","onPlayProgress","#onPlayProgress","#onLoadProgress","onBufferStart","#onBufferStart","onBufferEnd","#onBufferEnd","onWaiting","#onWaiting","#onVolumeChange","#onChaptersChange","chapters","removeChapters","track","kind","default","i","chapter","nextChapter","addCue","window","VTTCue","startTime","textTracks","add","#removeChapters","remove","#onQualitiesChange","enableAuto","some","q","quality","height","slice","isNaN","width","codec","bitrate","onQualityChange","find","#onQualityChange","isAuto","newQuality","getById","setAuto","select","onEvent","#onEvent","event","payload","seconds","playbackRate","onError","#onError","error","errorGroup","onMessage","value","onLoad","#remote","command","arg","get","push","postMessage","#reset","#getPromise","shift"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/node_modules/@vidstack/react/dev/chunks/vidstack-DF6waG6B.js"],"sourcesContent":["\"use client\"\n\nimport { createScope, signal, effect, peek, isString, deferredPromise, listenEvent, isArray } from './vidstack-CH225ns1.js';\nimport { TimeRange, RAFLoop, preconnect, ListSymbol, TextTrack, QualitySymbol } from './vidstack-C-WrcxmD.js';\nimport { EmbedProvider } from './vidstack-CFWvJYI8.js';\nimport { resolveVimeoVideoId, getVimeoVideoInfo } from './vidstack-krOAtKMi.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nconst trackedVimeoEvents = [\n  \"bufferend\",\n  \"bufferstart\",\n  // 'cuechange',\n  \"durationchange\",\n  \"ended\",\n  \"enterpictureinpicture\",\n  \"error\",\n  \"fullscreenchange\",\n  \"leavepictureinpicture\",\n  \"loaded\",\n  // 'loadeddata',\n  // 'loadedmetadata',\n  // 'loadstart',\n  \"playProgress\",\n  \"loadProgress\",\n  \"pause\",\n  \"play\",\n  \"playbackratechange\",\n  // 'progress',\n  \"qualitychange\",\n  \"seeked\",\n  \"seeking\",\n  // 'texttrackchange',\n  \"timeupdate\",\n  \"volumechange\",\n  \"waiting\"\n  // 'adstarted',\n  // 'adcompleted',\n  // 'aderror',\n  // 'adskipped',\n  // 'adallcompleted',\n  // 'adclicked',\n  // 'chapterchange',\n  // 'chromecastconnected',\n  // 'remoteplaybackavailabilitychange',\n  // 'remoteplaybackconnecting',\n  // 'remoteplaybackconnect',\n  // 'remoteplaybackdisconnect',\n  // 'liveeventended',\n  // 'liveeventstarted',\n  // 'livestreamoffline',\n  // 'livestreamonline',\n];\n\nclass VimeoProvider extends EmbedProvider {\n  $$PROVIDER_TYPE = \"VIMEO\";\n  scope = createScope();\n  fullscreen;\n  #ctx;\n  #videoId = signal(\"\");\n  #pro = signal(false);\n  #hash = null;\n  #currentSrc = null;\n  #fullscreenActive = false;\n  #seekableRange = new TimeRange(0, 0);\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #currentCue = null;\n  #chaptersTrack = null;\n  #promises = /* @__PURE__ */ new Map();\n  #videoInfoPromise = null;\n  constructor(iframe, ctx) {\n    super(iframe);\n    this.#ctx = ctx;\n    const self = this;\n    this.fullscreen = {\n      get active() {\n        return self.#fullscreenActive;\n      },\n      supported: true,\n      enter: () => this.#remote(\"requestFullscreen\"),\n      exit: () => this.#remote(\"exitFullscreen\")\n    };\n  }\n  /**\n   * Whether tracking session data should be enabled on the embed, including cookies and analytics.\n   * This is turned off by default to be GDPR-compliant.\n   *\n   * @defaultValue `false`\n   */\n  cookies = false;\n  title = true;\n  byline = true;\n  portrait = true;\n  color = \"00ADEF\";\n  get type() {\n    return \"vimeo\";\n  }\n  get currentSrc() {\n    return this.#currentSrc;\n  }\n  get videoId() {\n    return this.#videoId();\n  }\n  get hash() {\n    return this.#hash;\n  }\n  get isPro() {\n    return this.#pro();\n  }\n  preconnect() {\n    preconnect(this.getOrigin());\n  }\n  setup() {\n    super.setup();\n    effect(this.#watchVideoId.bind(this));\n    effect(this.#watchVideoInfo.bind(this));\n    effect(this.#watchPro.bind(this));\n    this.#ctx.notify(\"provider-setup\", this);\n  }\n  destroy() {\n    this.#reset();\n    this.fullscreen = void 0;\n    const message = \"provider destroyed\";\n    for (const promises of this.#promises.values()) {\n      for (const { reject } of promises) reject(message);\n    }\n    this.#promises.clear();\n    this.#remote(\"destroy\");\n  }\n  async play() {\n    return this.#remote(\"play\");\n  }\n  async pause() {\n    return this.#remote(\"pause\");\n  }\n  setMuted(muted) {\n    this.#remote(\"setMuted\", muted);\n  }\n  setCurrentTime(time) {\n    this.#remote(\"seekTo\", time);\n    this.#ctx.notify(\"seeking\", time);\n  }\n  setVolume(volume) {\n    this.#remote(\"setVolume\", volume);\n    this.#remote(\"setMuted\", peek(this.#ctx.$state.muted));\n  }\n  setPlaybackRate(rate) {\n    this.#remote(\"setPlaybackRate\", rate);\n  }\n  async loadSource(src) {\n    if (!isString(src.src)) {\n      this.#currentSrc = null;\n      this.#hash = null;\n      this.#videoId.set(\"\");\n      return;\n    }\n    const { videoId, hash } = resolveVimeoVideoId(src.src);\n    this.#videoId.set(videoId ?? \"\");\n    this.#hash = hash ?? null;\n    this.#currentSrc = src;\n  }\n  #watchVideoId() {\n    this.#reset();\n    const videoId = this.#videoId();\n    if (!videoId) {\n      this.src.set(\"\");\n      return;\n    }\n    this.src.set(`${this.getOrigin()}/video/${videoId}`);\n    this.#ctx.notify(\"load-start\");\n  }\n  #watchVideoInfo() {\n    const videoId = this.#videoId();\n    if (!videoId) return;\n    const promise = deferredPromise(), abort = new AbortController();\n    this.#videoInfoPromise = promise;\n    getVimeoVideoInfo(videoId, abort, this.#hash).then((info) => {\n      promise.resolve(info);\n    }).catch((e) => {\n      promise.reject();\n      {\n        this.#ctx.logger?.warnGroup(`Failed to fetch vimeo video info for id \\`${videoId}\\`.`).labelledLog(\"Error\", e).dispatch();\n      }\n    });\n    return () => {\n      promise.reject();\n      abort.abort();\n    };\n  }\n  #watchPro() {\n    const isPro = this.#pro(), { $state, qualities } = this.#ctx;\n    $state.canSetPlaybackRate.set(isPro);\n    qualities[ListSymbol.setReadonly](!isPro);\n    if (isPro) {\n      return listenEvent(qualities, \"change\", () => {\n        if (qualities.auto) return;\n        const id = qualities.selected?.id;\n        if (id) this.#remote(\"setQuality\", id);\n      });\n    }\n  }\n  getOrigin() {\n    return \"https://player.vimeo.com\";\n  }\n  buildParams() {\n    const { keyDisabled } = this.#ctx.$props, { playsInline, nativeControls } = this.#ctx.$state, showControls = nativeControls();\n    return {\n      title: this.title,\n      byline: this.byline,\n      color: this.color,\n      portrait: this.portrait,\n      controls: showControls,\n      h: this.hash,\n      keyboard: showControls && !keyDisabled(),\n      transparent: true,\n      playsinline: playsInline(),\n      dnt: !this.cookies\n    };\n  }\n  #onAnimationFrame() {\n    this.#remote(\"getCurrentTime\");\n  }\n  // Embed will sometimes dispatch 0 at end of playback.\n  #preventTimeUpdates = false;\n  #onTimeUpdate(time, trigger) {\n    if (this.#preventTimeUpdates && time === 0) return;\n    const { realCurrentTime, paused, bufferedEnd, seekableEnd, live } = this.#ctx.$state;\n    if (realCurrentTime() === time) return;\n    const prevTime = realCurrentTime();\n    this.#ctx.notify(\"time-change\", time, trigger);\n    if (Math.abs(prevTime - time) > 1.5) {\n      this.#ctx.notify(\"seeking\", time, trigger);\n      if (!paused() && bufferedEnd() < time) {\n        this.#ctx.notify(\"waiting\", void 0, trigger);\n      }\n    }\n    if (!live() && seekableEnd() - time < 0.01) {\n      this.#ctx.notify(\"end\", void 0, trigger);\n      this.#preventTimeUpdates = true;\n      setTimeout(() => {\n        this.#preventTimeUpdates = false;\n      }, 500);\n    }\n  }\n  #onSeeked(time, trigger) {\n    this.#ctx.notify(\"seeked\", time, trigger);\n  }\n  #onLoaded(trigger) {\n    const videoId = this.#videoId();\n    this.#videoInfoPromise?.promise.then((info) => {\n      if (!info) return;\n      const { title, poster, duration, pro } = info;\n      this.#pro.set(pro);\n      this.#ctx.notify(\"title-change\", title, trigger);\n      this.#ctx.notify(\"poster-change\", poster, trigger);\n      this.#ctx.notify(\"duration-change\", duration, trigger);\n      this.#onReady(duration, trigger);\n    }).catch(() => {\n      if (videoId !== this.#videoId()) return;\n      this.#remote(\"getVideoTitle\");\n      this.#remote(\"getDuration\");\n    });\n  }\n  #onReady(duration, trigger) {\n    const { nativeControls } = this.#ctx.$state, showEmbedControls = nativeControls();\n    this.#seekableRange = new TimeRange(0, duration);\n    const detail = {\n      buffered: new TimeRange(0, 0),\n      seekable: this.#seekableRange,\n      duration\n    };\n    this.#ctx.delegate.ready(detail, trigger);\n    if (!showEmbedControls) {\n      this.#remote(\"_hideOverlay\");\n    }\n    this.#remote(\"getQualities\");\n    this.#remote(\"getChapters\");\n  }\n  #onMethod(method, data, trigger) {\n    switch (method) {\n      case \"getVideoTitle\":\n        const videoTitle = data;\n        this.#ctx.notify(\"title-change\", videoTitle, trigger);\n        break;\n      case \"getDuration\":\n        const duration = data;\n        if (!this.#ctx.$state.canPlay()) {\n          this.#onReady(duration, trigger);\n        } else {\n          this.#ctx.notify(\"duration-change\", duration, trigger);\n        }\n        break;\n      case \"getCurrentTime\":\n        this.#onTimeUpdate(data, trigger);\n        break;\n      case \"getBuffered\":\n        if (isArray(data) && data.length) {\n          this.#onLoadProgress(data[data.length - 1][1], trigger);\n        }\n        break;\n      case \"setMuted\":\n        this.#onVolumeChange(peek(this.#ctx.$state.volume), data, trigger);\n        break;\n      // case 'getTextTracks':\n      //   this.#onTextTracksChange(data as VimeoTextTrack[], trigger);\n      //   break;\n      case \"getChapters\":\n        this.#onChaptersChange(data);\n        break;\n      case \"getQualities\":\n        this.#onQualitiesChange(data, trigger);\n        break;\n    }\n    this.#getPromise(method)?.resolve();\n  }\n  #attachListeners() {\n    for (const type of trackedVimeoEvents) {\n      this.#remote(\"addEventListener\", type);\n    }\n  }\n  #onPause(trigger) {\n    this.#timeRAF.stop();\n    this.#ctx.notify(\"pause\", void 0, trigger);\n  }\n  #onPlay(trigger) {\n    this.#timeRAF.start();\n    this.#ctx.notify(\"play\", void 0, trigger);\n  }\n  #onPlayProgress(trigger) {\n    const { paused } = this.#ctx.$state;\n    if (!paused() && !this.#preventTimeUpdates) {\n      this.#ctx.notify(\"playing\", void 0, trigger);\n    }\n  }\n  #onLoadProgress(buffered, trigger) {\n    const detail = {\n      buffered: new TimeRange(0, buffered),\n      seekable: this.#seekableRange\n    };\n    this.#ctx.notify(\"progress\", detail, trigger);\n  }\n  #onBufferStart(trigger) {\n    this.#ctx.notify(\"waiting\", void 0, trigger);\n  }\n  #onBufferEnd(trigger) {\n    const { paused } = this.#ctx.$state;\n    if (!paused()) this.#ctx.notify(\"playing\", void 0, trigger);\n  }\n  #onWaiting(trigger) {\n    const { paused } = this.#ctx.$state;\n    if (paused()) {\n      this.#ctx.notify(\"play\", void 0, trigger);\n    }\n    this.#ctx.notify(\"waiting\", void 0, trigger);\n  }\n  #onVolumeChange(volume, muted, trigger) {\n    const detail = { volume, muted };\n    this.#ctx.notify(\"volume-change\", detail, trigger);\n  }\n  // #onTextTrackChange(track: VimeoTextTrack, trigger: Event) {\n  //   const textTrack = this.#ctx.textTracks.toArray().find((t) => t.language === track.language);\n  //   if (textTrack) textTrack.mode = track.mode;\n  // }\n  // #onTextTracksChange(tracks: VimeoTextTrack[], trigger: Event) {\n  //   for (const init of tracks) {\n  //     const textTrack = new TextTrack({\n  //       ...init,\n  //       label: init.label.replace('auto-generated', 'auto'),\n  //     });\n  //     textTrack[TextTrackSymbol.readyState] = 2;\n  //     this.#ctx.textTracks.add(textTrack, trigger);\n  //     textTrack.setMode(init.mode, trigger);\n  //   }\n  // }\n  // #onCueChange(cue: VimeoTextCue, trigger: Event) {\n  //   const { textTracks, $state } = this.#ctx,\n  //     { currentTime } = $state,\n  //     track = textTracks.selected;\n  //   if (this.#currentCue) track?.removeCue(this.#currentCue, trigger);\n  //   this.#currentCue = new window.VTTCue(currentTime(), Number.MAX_SAFE_INTEGER, cue.text);\n  //   track?.addCue(this.#currentCue, trigger);\n  // }\n  #onChaptersChange(chapters) {\n    this.#removeChapters();\n    if (!chapters.length) return;\n    const track = new TextTrack({\n      kind: \"chapters\",\n      default: true\n    }), { seekableEnd } = this.#ctx.$state;\n    for (let i = 0; i < chapters.length; i++) {\n      const chapter = chapters[i], nextChapter = chapters[i + 1];\n      track.addCue(\n        new window.VTTCue(\n          chapter.startTime,\n          nextChapter?.startTime ?? seekableEnd(),\n          chapter.title\n        )\n      );\n    }\n    this.#chaptersTrack = track;\n    this.#ctx.textTracks.add(track);\n  }\n  #removeChapters() {\n    if (!this.#chaptersTrack) return;\n    this.#ctx.textTracks.remove(this.#chaptersTrack);\n    this.#chaptersTrack = null;\n  }\n  #onQualitiesChange(qualities, trigger) {\n    this.#ctx.qualities[QualitySymbol.enableAuto] = qualities.some((q) => q.id === \"auto\") ? () => this.#remote(\"setQuality\", \"auto\") : void 0;\n    for (const quality of qualities) {\n      if (quality.id === \"auto\") continue;\n      const height = +quality.id.slice(0, -1);\n      if (isNaN(height)) continue;\n      this.#ctx.qualities[ListSymbol.add](\n        {\n          id: quality.id,\n          width: height * (16 / 9),\n          height,\n          codec: \"avc1,h.264\",\n          bitrate: -1\n        },\n        trigger\n      );\n    }\n    this.#onQualityChange(\n      qualities.find((q) => q.active),\n      trigger\n    );\n  }\n  #onQualityChange({ id } = {}, trigger) {\n    if (!id) return;\n    const isAuto = id === \"auto\", newQuality = this.#ctx.qualities.getById(id);\n    if (isAuto) {\n      this.#ctx.qualities[QualitySymbol.setAuto](isAuto, trigger);\n      this.#ctx.qualities[ListSymbol.select](void 0, true, trigger);\n    } else {\n      this.#ctx.qualities[ListSymbol.select](newQuality ?? void 0, true, trigger);\n    }\n  }\n  #onEvent(event, payload, trigger) {\n    switch (event) {\n      case \"ready\":\n        this.#attachListeners();\n        break;\n      case \"loaded\":\n        this.#onLoaded(trigger);\n        break;\n      case \"play\":\n        this.#onPlay(trigger);\n        break;\n      case \"playProgress\":\n        this.#onPlayProgress(trigger);\n        break;\n      case \"pause\":\n        this.#onPause(trigger);\n        break;\n      case \"loadProgress\":\n        this.#onLoadProgress(payload.seconds, trigger);\n        break;\n      case \"waiting\":\n        this.#onWaiting(trigger);\n        break;\n      case \"bufferstart\":\n        this.#onBufferStart(trigger);\n        break;\n      case \"bufferend\":\n        this.#onBufferEnd(trigger);\n        break;\n      case \"volumechange\":\n        this.#onVolumeChange(payload.volume, peek(this.#ctx.$state.muted), trigger);\n        break;\n      case \"durationchange\":\n        this.#seekableRange = new TimeRange(0, payload.duration);\n        this.#ctx.notify(\"duration-change\", payload.duration, trigger);\n        break;\n      case \"playbackratechange\":\n        this.#ctx.notify(\"rate-change\", payload.playbackRate, trigger);\n        break;\n      case \"qualitychange\":\n        this.#onQualityChange(payload, trigger);\n        break;\n      case \"fullscreenchange\":\n        this.#fullscreenActive = payload.fullscreen;\n        this.#ctx.notify(\"fullscreen-change\", payload.fullscreen, trigger);\n        break;\n      case \"enterpictureinpicture\":\n        this.#ctx.notify(\"picture-in-picture-change\", true, trigger);\n        break;\n      case \"leavepictureinpicture\":\n        this.#ctx.notify(\"picture-in-picture-change\", false, trigger);\n        break;\n      case \"ended\":\n        this.#ctx.notify(\"end\", void 0, trigger);\n        break;\n      case \"error\":\n        this.#onError(payload, trigger);\n        break;\n      case \"seek\":\n      case \"seeked\":\n        this.#onSeeked(payload.seconds, trigger);\n        break;\n    }\n  }\n  #onError(error, trigger) {\n    const { message, method } = error;\n    if (method === \"setPlaybackRate\") {\n      this.#pro.set(false);\n    }\n    if (method) {\n      this.#getPromise(method)?.reject(message);\n    }\n    {\n      this.#ctx.logger?.errorGroup(`[vimeo]: ${message}`).labelledLog(\"Error\", error).labelledLog(\"Provider\", this).labelledLog(\"Event\", trigger).dispatch();\n    }\n  }\n  onMessage(message, event) {\n    if (message.event) {\n      this.#onEvent(message.event, message.data, event);\n    } else if (message.method) {\n      this.#onMethod(message.method, message.value, event);\n    }\n  }\n  onLoad() {\n  }\n  async #remote(command, arg) {\n    let promise = deferredPromise(), promises = this.#promises.get(command);\n    if (!promises) this.#promises.set(command, promises = []);\n    promises.push(promise);\n    this.postMessage({\n      method: command,\n      value: arg\n    });\n    return promise.promise;\n  }\n  #reset() {\n    this.#timeRAF.stop();\n    this.#seekableRange = new TimeRange(0, 0);\n    this.#videoInfoPromise = null;\n    this.#currentCue = null;\n    this.#pro.set(false);\n    this.#removeChapters();\n  }\n  #getPromise(command) {\n    return this.#promises.get(command)?.shift();\n  }\n}\n\nexport { VimeoProvider };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}