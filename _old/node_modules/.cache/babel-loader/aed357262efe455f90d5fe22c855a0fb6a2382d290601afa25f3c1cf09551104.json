{"ast":null,"code":"\"use client\";\n\nimport { TextTrackSymbol, RadioGroupController, useMediaContext, menuContext, Primitive, MediaPlayerInstance, isRemotionProvider, MediaProviderInstance, mediaState, TextTrack, ToggleButtonInstance, PosterInstance, useMediaState, ThumbnailsLoader, updateSliderPreviewPlacement } from './chunks/vidstack-C-WrcxmD.js';\nexport { ARIAKeyShortcuts, AUDIO_EXTENSIONS, AUDIO_TYPES, AirPlayButtonInstance, AudioGainSliderInstance, AudioProviderLoader, AudioTrackList, CaptionButtonInstance, CaptionsInstance, ControlsGroupInstance, ControlsInstance, DASHProviderLoader, DASH_VIDEO_EXTENSIONS, DASH_VIDEO_TYPES, FullscreenButtonInstance, FullscreenController, GestureInstance, GoogleCastButtonInstance, HLSProviderLoader, HLS_VIDEO_EXTENSIONS, HLS_VIDEO_TYPES, List, LiveButtonInstance, LocalMediaStorage, Logger, MEDIA_KEY_SHORTCUTS, MediaAnnouncerInstance, MediaControls, MediaRemoteControl, MenuButtonInstance, MenuInstance, MenuItemInstance, MenuItemsInstance, MenuPortalInstance, MuteButtonInstance, PIPButtonInstance, PlayButtonInstance, QualitySliderInstance, RadioGroupInstance, RadioInstance, ScreenOrientationController, SeekButtonInstance, SliderChaptersInstance, SliderInstance, SliderPreviewInstance, SliderThumbnailInstance, SliderValueInstance, SliderVideoInstance, SpeedSliderInstance, TextRenderers, TextTrackList, ThumbnailInstance, TimeInstance, TimeRange, TimeSliderInstance, TooltipContentInstance, TooltipInstance, TooltipTriggerInstance, VIDEO_EXTENSIONS, VIDEO_TYPES, VideoProviderLoader, VideoQualityList, VimeoProviderLoader, VolumeSliderInstance, YouTubeProviderLoader, boundTime, canChangeVolume, canFullscreen, canGoogleCastSrc, canOrientScreen, canPlayHLSNatively, canRotateScreen, canUsePictureInPicture, canUseVideoPresentation, findActiveCue, formatSpokenTime, formatTime, getDownloadFile, getTimeRangesEnd, getTimeRangesStart, isAudioProvider, isAudioSrc, isCueActive, isDASHProvider, isDASHSrc, isGoogleCastProvider, isHLSProvider, isHLSSrc, isHTMLAudioElement, isHTMLIFrameElement, isHTMLMediaElement, isHTMLVideoElement, isMediaStream, isTrackCaptionKind, isVideoProvider, isVideoQualitySrc, isVideoSrc, isVimeoProvider, isYouTubeProvider, mediaContext, normalizeTimeIntervals, parseJSONCaptionsFile, sliderState, softResetMediaState, sortVideoQualities, updateTimeIntervals, useMediaStore, useSliderState, useSliderStore, watchActiveTextTrack, watchCueTextChange } from './chunks/vidstack-C-WrcxmD.js';\nimport * as React from 'react';\nimport { isString, EventsController, DOMEvent, prop, method, Component, hasProvidedContext, useContext, effect, createReactComponent, useStateContext, useSignal, composeRefs, useSignalRecord, useReactScope, signal } from './chunks/vidstack-CH225ns1.js';\nexport { appendTriggerEvent, findTriggerEvent, hasTriggerEvent, isKeyboardClick, isKeyboardEvent, isPointerEvent, walkTriggerEventChain } from './chunks/vidstack-CH225ns1.js';\nimport { createSignal, useScoped } from './chunks/vidstack-BUd8DcBH.js';\nexport { audioGainSlider as AudioGainSlider, Captions, ChapterTitle, controls as Controls, GoogleCastButton, MediaAnnouncer, qualitySlider as QualitySlider, speedSlider as SpeedSlider, spinner as Spinner, Title, tooltip as Tooltip, useActiveTextCues, useActiveTextTrack, useChapterOptions, useChapterTitle, useTextCues } from './chunks/vidstack-BUd8DcBH.js';\nimport { useMediaContext as useMediaContext$1 } from './chunks/vidstack-Xovmcdt1.js';\nexport { AirPlayButton, CaptionButton, FullscreenButton, Gesture, LiveButton, menu as Menu, MuteButton, PIPButton, PlayButton, radioGroup as RadioGroup, SeekButton, slider as Slider, thumbnail as Thumbnail, Time, timeSlider as TimeSlider, volumeSlider as VolumeSlider, useAudioOptions, useCaptionOptions, useMediaPlayer } from './chunks/vidstack-Xovmcdt1.js';\nimport { Icon } from './chunks/vidstack-CBF7iUqu.js';\nexport { DEFAULT_PLAYBACK_RATES, useMediaRemote, usePlaybackRateOptions, useVideoQualityOptions } from './chunks/vidstack-C4TlCb-3.js';\nimport '@floating-ui/dom';\nimport 'react-dom';\nclass LibASSTextRenderer {\n  constructor(loader, config) {\n    this.loader = loader;\n    this.config = config;\n  }\n  priority = 1;\n  #instance = null;\n  #track = null;\n  #typeRE = /(ssa|ass)$/;\n  canRender(track, video) {\n    return !!video && !!track.src && (isString(track.type) && this.#typeRE.test(track.type) || this.#typeRE.test(track.src));\n  }\n  attach(video) {\n    if (!video) return;\n    this.loader().then(async mod => {\n      this.#instance = new mod.default({\n        ...this.config,\n        video,\n        subUrl: this.#track?.src || \"\"\n      });\n      new EventsController(this.#instance).add(\"ready\", () => {\n        const canvas = this.#instance?._canvas;\n        if (canvas) canvas.style.pointerEvents = \"none\";\n      }).add(\"error\", event => {\n        if (!this.#track) return;\n        this.#track[TextTrackSymbol.readyState] = 3;\n        this.#track.dispatchEvent(new DOMEvent(\"error\", {\n          trigger: event,\n          detail: event.error\n        }));\n      });\n    });\n  }\n  changeTrack(track) {\n    if (!track || track.readyState === 3) {\n      this.#freeTrack();\n    } else if (this.#track !== track) {\n      this.#instance?.setTrackByUrl(track.src);\n      this.#track = track;\n    }\n  }\n  detach() {\n    this.#freeTrack();\n  }\n  #freeTrack() {\n    this.#instance?.freeTrack();\n    this.#track = null;\n  }\n}\nconst DEFAULT_AUDIO_GAINS = [1, 1.25, 1.5, 1.75, 2, 2.5, 3, 4];\nclass AudioGainRadioGroup extends Component {\n  static props = {\n    normalLabel: \"Disabled\",\n    gains: DEFAULT_AUDIO_GAINS\n  };\n  #media;\n  #menu;\n  #controller;\n  get value() {\n    return this.#controller.value;\n  }\n  get disabled() {\n    const {\n        gains\n      } = this.$props,\n      {\n        canSetAudioGain\n      } = this.#media.$state;\n    return !canSetAudioGain() || gains().length === 0;\n  }\n  constructor() {\n    super();\n    this.#controller = new RadioGroupController();\n    this.#controller.onValueChange = this.#onValueChange.bind(this);\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    if (hasProvidedContext(menuContext)) {\n      this.#menu = useContext(menuContext);\n    }\n  }\n  onConnect(el) {\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchHintText.bind(this));\n    effect(this.#watchControllerDisabled.bind(this));\n  }\n  getOptions() {\n    const {\n      gains,\n      normalLabel\n    } = this.$props;\n    return gains().map(gain => ({\n      label: gain === 1 || gain === null ? normalLabel : String(gain * 100) + \"%\",\n      value: gain.toString()\n    }));\n  }\n  #watchValue() {\n    this.#controller.value = this.#getValue();\n  }\n  #watchHintText() {\n    const {\n        normalLabel\n      } = this.$props,\n      {\n        audioGain\n      } = this.#media.$state,\n      gain = audioGain();\n    this.#menu?.hint.set(gain === 1 || gain == null ? normalLabel() : String(gain * 100) + \"%\");\n  }\n  #watchControllerDisabled() {\n    this.#menu?.disable(this.disabled);\n  }\n  #getValue() {\n    const {\n      audioGain\n    } = this.#media.$state;\n    return audioGain()?.toString() ?? \"1\";\n  }\n  #onValueChange(value, trigger) {\n    if (this.disabled) return;\n    const gain = +value;\n    this.#media.remote.changeAudioGain(gain, trigger);\n    this.dispatch(\"change\", {\n      detail: gain,\n      trigger\n    });\n  }\n}\nconst audiogainradiogroup__proto = AudioGainRadioGroup.prototype;\nprop(audiogainradiogroup__proto, \"value\");\nprop(audiogainradiogroup__proto, \"disabled\");\nmethod(audiogainradiogroup__proto, \"getOptions\");\nconst playerCallbacks = [\"onAbort\", \"onAudioTrackChange\", \"onAudioTracksChange\", \"onAutoPlay\", \"onAutoPlayChange\", \"onAutoPlayFail\", \"onCanLoad\", \"onCanPlay\", \"onCanPlayThrough\", \"onControlsChange\", \"onDestroy\", \"onDurationChange\", \"onEmptied\", \"onEnd\", \"onEnded\", \"onError\", \"onFindMediaPlayer\", \"onFullscreenChange\", \"onFullscreenError\", \"onLiveChange\", \"onLiveEdgeChange\", \"onLoadedData\", \"onLoadedMetadata\", \"onLoadStart\", \"onLoopChange\", \"onOrientationChange\", \"onPause\", \"onPictureInPictureChange\", \"onPictureInPictureError\", \"onPlay\", \"onPlayFail\", \"onPlaying\", \"onPlaysInlineChange\", \"onPosterChange\", \"onProgress\", \"onProviderChange\", \"onProviderLoaderChange\", \"onProviderSetup\", \"onQualitiesChange\", \"onQualityChange\", \"onRateChange\", \"onReplay\", \"onSeeked\", \"onSeeking\", \"onSourceChange\", \"onSourceChange\", \"onStalled\", \"onStarted\", \"onStreamTypeChange\", \"onSuspend\", \"onTextTrackChange\", \"onTextTracksChange\", \"onTimeUpdate\", \"onTitleChange\", \"onVdsLog\", \"onVideoPresentationChange\", \"onVolumeChange\", \"onWaiting\"];\nconst MediaPlayerBridge = createReactComponent(MediaPlayerInstance, {\n  events: playerCallbacks,\n  eventsRegex: /^onHls/,\n  domEventsRegex: /^onMedia/\n});\nconst MediaPlayer = React.forwardRef(({\n  aspectRatio,\n  children,\n  ...props\n}, forwardRef) => {\n  return /* @__PURE__ */React.createElement(MediaPlayerBridge, {\n    ...props,\n    src: props.src,\n    ref: forwardRef,\n    style: {\n      aspectRatio,\n      ...props.style\n    }\n  }, props2 => /* @__PURE__ */React.createElement(Primitive.div, {\n    ...props2\n  }, children));\n});\nMediaPlayer.displayName = \"MediaPlayer\";\nconst MediaProviderBridge = createReactComponent(MediaProviderInstance);\nconst MediaProvider = React.forwardRef(({\n  loaders = [],\n  children,\n  iframeProps,\n  mediaProps,\n  ...props\n}, forwardRef) => {\n  const reactLoaders = React.useMemo(() => loaders.map(Loader => new Loader()), loaders);\n  return /* @__PURE__ */React.createElement(MediaProviderBridge, {\n    ...props,\n    loaders: reactLoaders,\n    ref: forwardRef\n  }, (props2, instance) => /* @__PURE__ */React.createElement(\"div\", {\n    ...props2\n  }, /* @__PURE__ */React.createElement(MediaOutlet, {\n    provider: instance,\n    mediaProps,\n    iframeProps\n  }), children));\n});\nMediaProvider.displayName = \"MediaProvider\";\nfunction MediaOutlet({\n  provider,\n  mediaProps,\n  iframeProps\n}) {\n  const {\n      sources,\n      crossOrigin,\n      poster,\n      remotePlaybackInfo,\n      nativeControls,\n      viewType\n    } = useStateContext(mediaState),\n    {\n      loader\n    } = provider.$state,\n    {\n      $provider: $$provider,\n      $providerSetup: $$providerSetup\n    } = useMediaContext$1(),\n    $sources = useSignal(sources),\n    $nativeControls = useSignal(nativeControls),\n    $crossOrigin = useSignal(crossOrigin),\n    $poster = useSignal(poster),\n    $loader = useSignal(loader),\n    $provider = useSignal($$provider),\n    $providerSetup = useSignal($$providerSetup),\n    $remoteInfo = useSignal(remotePlaybackInfo),\n    $mediaType = $loader?.mediaType(),\n    $viewType = useSignal(viewType),\n    isAudioView = $viewType === \"audio\",\n    isYouTubeEmbed = $loader?.name === \"youtube\",\n    isVimeoEmbed = $loader?.name === \"vimeo\",\n    isEmbed = isYouTubeEmbed || isVimeoEmbed,\n    isRemotion = $loader?.name === \"remotion\",\n    isGoogleCast = $loader?.name === \"google-cast\",\n    [googleCastIconPaths, setGoogleCastIconPaths] = React.useState(\"\"),\n    [hasMounted, setHasMounted] = React.useState(false);\n  React.useEffect(() => {\n    if (!isGoogleCast || googleCastIconPaths) return;\n    import('./chunks/vidstack-CH225ns1.js').then(function (n) {\n      return n.chromecast;\n    }).then(mod => {\n      setGoogleCastIconPaths(mod.default);\n    });\n  }, [isGoogleCast]);\n  React.useEffect(() => {\n    setHasMounted(true);\n  }, []);\n  if (isGoogleCast) {\n    return /* @__PURE__ */React.createElement(\"div\", {\n      className: \"vds-google-cast\",\n      ref: el => {\n        provider.load(el);\n      }\n    }, /* @__PURE__ */React.createElement(Icon, {\n      paths: googleCastIconPaths\n    }), $remoteInfo?.deviceName ? /* @__PURE__ */React.createElement(\"span\", {\n      className: \"vds-google-cast-info\"\n    }, \"Google Cast on\", \" \", /* @__PURE__ */React.createElement(\"span\", {\n      className: \"vds-google-cast-device-name\"\n    }, $remoteInfo.deviceName)) : null);\n  }\n  if (isRemotion) {\n    return /* @__PURE__ */React.createElement(\"div\", {\n      \"data-remotion-canvas\": true\n    }, /* @__PURE__ */React.createElement(\"div\", {\n      \"data-remotion-container\": true,\n      ref: el => {\n        provider.load(el);\n      }\n    }, isRemotionProvider($provider) && $providerSetup ? React.createElement($provider.render) : null));\n  }\n  return isEmbed ? React.createElement(React.Fragment, null, React.createElement(\"iframe\", {\n    ...iframeProps,\n    className: (iframeProps?.className ? `${iframeProps.className} ` : \"\") + isYouTubeEmbed ? \"vds-youtube\" : \"vds-vimeo\",\n    suppressHydrationWarning: true,\n    tabIndex: !$nativeControls ? -1 : void 0,\n    \"aria-hidden\": \"true\",\n    \"data-no-controls\": !$nativeControls ? \"\" : void 0,\n    ref(el) {\n      provider.load(el);\n    }\n  }), !$nativeControls && !isAudioView ? React.createElement(\"div\", {\n    className: \"vds-blocker\"\n  }) : null) : $mediaType ? React.createElement($mediaType === \"audio\" ? \"audio\" : \"video\", {\n    ...mediaProps,\n    controls: $nativeControls ? true : null,\n    crossOrigin: typeof $crossOrigin === \"boolean\" ? \"\" : $crossOrigin,\n    poster: $mediaType === \"video\" && $nativeControls && $poster ? $poster : null,\n    suppressHydrationWarning: true,\n    children: !hasMounted ? $sources.map(({\n      src,\n      type\n    }) => isString(src) ? /* @__PURE__ */React.createElement(\"source\", {\n      src,\n      type: type !== \"?\" ? type : void 0,\n      key: src\n    }) : null) : null,\n    ref(el) {\n      provider.load(el);\n    }\n  }) : null;\n}\nMediaOutlet.displayName = \"MediaOutlet\";\nfunction createTextTrack(init) {\n  const media = useMediaContext$1(),\n    track = React.useMemo(() => new TextTrack(init), Object.values(init));\n  React.useEffect(() => {\n    media.textTracks.add(track);\n    return () => void media.textTracks.remove(track);\n  }, [track]);\n  return track;\n}\nfunction Track({\n  lang,\n  ...props\n}) {\n  createTextTrack({\n    language: lang,\n    ...props\n  });\n  return null;\n}\nTrack.displayName = \"Track\";\nconst ToggleButtonBridge = createReactComponent(ToggleButtonInstance);\nconst ToggleButton = React.forwardRef(({\n  children,\n  ...props\n}, forwardRef) => {\n  return /* @__PURE__ */React.createElement(ToggleButtonBridge, {\n    ...props\n  }, props2 => /* @__PURE__ */React.createElement(Primitive.button, {\n    ...props2,\n    ref: composeRefs(props2.ref, forwardRef)\n  }, children));\n});\nToggleButton.displayName = \"ToggleButton\";\nconst PosterBridge = createReactComponent(PosterInstance);\nconst Poster = React.forwardRef(({\n  children,\n  ...props\n}, forwardRef) => {\n  return /* @__PURE__ */React.createElement(PosterBridge, {\n    src: props.asChild && React.isValidElement(children) ? children.props.src : void 0,\n    ...props\n  }, (props2, instance) => /* @__PURE__ */React.createElement(PosterImg, {\n    ...props2,\n    instance,\n    ref: composeRefs(props2.ref, forwardRef)\n  }, children));\n});\nPoster.displayName = \"Poster\";\nconst PosterImg = React.forwardRef(({\n  instance,\n  children,\n  ...props\n}, forwardRef) => {\n  const {\n      src,\n      img,\n      alt,\n      crossOrigin,\n      hidden\n    } = instance.$state,\n    $src = useSignal(src),\n    $alt = useSignal(alt),\n    $crossOrigin = useSignal(crossOrigin),\n    $hidden = useSignal(hidden);\n  return /* @__PURE__ */React.createElement(Primitive.img, {\n    ...props,\n    src: $src || void 0,\n    alt: $alt || void 0,\n    crossOrigin: $crossOrigin || void 0,\n    ref: composeRefs(img.set, forwardRef),\n    style: {\n      display: $hidden ? \"none\" : void 0\n    }\n  }, children);\n});\nPosterImg.displayName = \"PosterImg\";\nconst Root = React.forwardRef(({\n  children,\n  ...props\n}, forwardRef) => {\n  return /* @__PURE__ */React.createElement(Primitive.div, {\n    translate: \"yes\",\n    \"aria-live\": \"off\",\n    \"aria-atomic\": \"true\",\n    ...props,\n    ref: forwardRef\n  }, children);\n});\nRoot.displayName = \"Caption\";\nconst Text = React.forwardRef((props, forwardRef) => {\n  const textTrack = useMediaState(\"textTrack\"),\n    [activeCue, setActiveCue] = React.useState();\n  React.useEffect(() => {\n    if (!textTrack) return;\n    function onCueChange() {\n      setActiveCue(textTrack?.activeCues[0]);\n    }\n    textTrack.addEventListener(\"cue-change\", onCueChange);\n    return () => {\n      textTrack.removeEventListener(\"cue-change\", onCueChange);\n      setActiveCue(void 0);\n    };\n  }, [textTrack]);\n  return /* @__PURE__ */React.createElement(Primitive.span, {\n    ...props,\n    \"data-part\": \"cue\",\n    dangerouslySetInnerHTML: {\n      __html: activeCue?.text || \"\"\n    },\n    ref: forwardRef\n  });\n});\nText.displayName = \"CaptionText\";\nvar caption = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  Root: Root,\n  Text: Text\n});\nfunction useState(ctor, prop, ref) {\n  const initialValue = React.useMemo(() => ctor.state.record[prop], [ctor, prop]);\n  return useSignal(ref.current ? ref.current.$state[prop] : initialValue);\n}\nconst storesCache = /* @__PURE__ */new Map();\nfunction useStore(ctor, ref) {\n  const initialStore = React.useMemo(() => {\n    let store = storesCache.get(ctor);\n    if (!store) {\n      store = new Proxy(ctor.state.record, {\n        get: (_, prop) => () => ctor.state.record[prop]\n      });\n      storesCache.set(ctor, store);\n    }\n    return store;\n  }, [ctor]);\n  return useSignalRecord(ref.current ? ref.current.$state : initialStore);\n}\nfunction useMediaProvider() {\n  const [provider, setProvider] = React.useState(null),\n    context = useMediaContext$1();\n  if (!context) {\n    throw Error(\"[vidstack] no media context was found - was this called outside of `<MediaPlayer>`?\");\n  }\n  React.useEffect(() => {\n    if (!context) return;\n    return effect(() => {\n      setProvider(context.$provider());\n    });\n  }, []);\n  return provider;\n}\nfunction useThumbnails(src, crossOrigin = null) {\n  const scope = useReactScope(),\n    $src = createSignal(src),\n    $crossOrigin = createSignal(crossOrigin),\n    loader = useScoped(() => ThumbnailsLoader.create($src, $crossOrigin));\n  if (!scope) {\n    console.warn(`[vidstack] \\`useThumbnails\\` must be called inside a child component of \\`<MediaPlayer>\\``);\n  }\n  React.useEffect(() => {\n    $src.set(src);\n  }, [src]);\n  React.useEffect(() => {\n    $crossOrigin.set(crossOrigin);\n  }, [crossOrigin]);\n  return useSignal(loader.$images);\n}\nfunction useActiveThumbnail(thumbnails, time) {\n  return React.useMemo(() => {\n    let activeIndex = -1;\n    for (let i = thumbnails.length - 1; i >= 0; i--) {\n      const image = thumbnails[i];\n      if (time >= image.startTime && (!image.endTime || time < image.endTime)) {\n        activeIndex = i;\n        break;\n      }\n    }\n    return thumbnails[activeIndex] || null;\n  }, [thumbnails, time]);\n}\nfunction useSliderPreview({\n  clamp = false,\n  offset = 0,\n  orientation = \"horizontal\"\n} = {}) {\n  const [rootRef, setRootRef] = React.useState(null),\n    [previewRef, setPreviewRef] = React.useState(null),\n    [pointerValue, setPointerValue] = React.useState(0),\n    [isVisible, setIsVisible] = React.useState(false);\n  React.useEffect(() => {\n    if (!rootRef) return;\n    const dragging = signal(false);\n    function updatePointerValue(event) {\n      if (!rootRef) return;\n      setPointerValue(getPointerValue(rootRef, event, orientation));\n    }\n    return effect(() => {\n      if (!dragging()) {\n        new EventsController(rootRef).add(\"pointerenter\", () => {\n          setIsVisible(true);\n          previewRef?.setAttribute(\"data-visible\", \"\");\n        }).add(\"pointerdown\", event => {\n          dragging.set(true);\n          updatePointerValue(event);\n        }).add(\"pointerleave\", () => {\n          setIsVisible(false);\n          previewRef?.removeAttribute(\"data-visible\");\n        }).add(\"pointermove\", updatePointerValue);\n      }\n      previewRef?.setAttribute(\"data-dragging\", \"\");\n      new EventsController(document).add(\"pointerup\", event => {\n        dragging.set(false);\n        previewRef?.removeAttribute(\"data-dragging\");\n        updatePointerValue(event);\n      }).add(\"pointermove\", updatePointerValue).add(\"touchmove\", e => e.preventDefault(), {\n        passive: false\n      });\n    });\n  }, [rootRef]);\n  React.useEffect(() => {\n    if (previewRef) {\n      previewRef.style.setProperty(\"--slider-pointer\", pointerValue + \"%\");\n    }\n  }, [previewRef, pointerValue]);\n  React.useEffect(() => {\n    if (!previewRef) return;\n    const update = () => {\n      updateSliderPreviewPlacement(previewRef, {\n        offset,\n        clamp,\n        orientation\n      });\n    };\n    update();\n    const resize = new ResizeObserver(update);\n    resize.observe(previewRef);\n    return () => resize.disconnect();\n  }, [previewRef, clamp, offset, orientation]);\n  return {\n    previewRootRef: setRootRef,\n    previewRef: setPreviewRef,\n    previewValue: pointerValue,\n    isPreviewVisible: isVisible\n  };\n}\nfunction getPointerValue(root, event, orientation) {\n  let thumbPositionRate,\n    rect = root.getBoundingClientRect();\n  if (orientation === \"vertical\") {\n    const {\n      bottom: trackBottom,\n      height: trackHeight\n    } = rect;\n    thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n  } else {\n    const {\n      left: trackLeft,\n      width: trackWidth\n    } = rect;\n    thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n  }\n  return round(Math.max(0, Math.min(100, 100 * thumbPositionRate)));\n}\nfunction round(num) {\n  return Number(num.toFixed(3));\n}\nfunction useAudioGainOptions({\n  gains = DEFAULT_AUDIO_GAINS,\n  disabledLabel = \"disabled\"\n} = {}) {\n  const media = useMediaContext$1(),\n    {\n      audioGain,\n      canSetAudioGain\n    } = media.$state;\n  useSignal(audioGain);\n  useSignal(canSetAudioGain);\n  return React.useMemo(() => {\n    const options = gains.map(opt => {\n      const label = typeof opt === \"number\" ? opt === 1 && disabledLabel ? disabledLabel : opt * 100 + \"%\" : opt.label,\n        gain = typeof opt === \"number\" ? opt : opt.gain;\n      return {\n        label,\n        value: gain.toString(),\n        gain,\n        get selected() {\n          return audioGain() === gain;\n        },\n        select(trigger) {\n          media.remote.changeAudioGain(gain, trigger);\n        }\n      };\n    });\n    Object.defineProperty(options, \"disabled\", {\n      get() {\n        return !canSetAudioGain() || !options.length;\n      }\n    });\n    Object.defineProperty(options, \"selectedValue\", {\n      get() {\n        return audioGain()?.toString();\n      }\n    });\n    return options;\n  }, [gains]);\n}\nexport { caption as Caption, DEFAULT_AUDIO_GAINS, Icon, LibASSTextRenderer, MediaPlayer, MediaPlayerInstance, MediaProvider, MediaProviderInstance, Poster, PosterInstance, TextTrack, ToggleButton, ToggleButtonInstance, Track, createTextTrack, mediaState, useActiveThumbnail, useAudioGainOptions, useMediaContext$1 as useMediaContext, useMediaProvider, useMediaState, useSliderPreview, useState, useStore, useThumbnails };","map":{"version":3,"names":["TextTrackSymbol","RadioGroupController","useMediaContext","menuContext","Primitive","MediaPlayerInstance","isRemotionProvider","MediaProviderInstance","mediaState","TextTrack","ToggleButtonInstance","PosterInstance","useMediaState","ThumbnailsLoader","updateSliderPreviewPlacement","ARIAKeyShortcuts","AUDIO_EXTENSIONS","AUDIO_TYPES","AirPlayButtonInstance","AudioGainSliderInstance","AudioProviderLoader","AudioTrackList","CaptionButtonInstance","CaptionsInstance","ControlsGroupInstance","ControlsInstance","DASHProviderLoader","DASH_VIDEO_EXTENSIONS","DASH_VIDEO_TYPES","FullscreenButtonInstance","FullscreenController","GestureInstance","GoogleCastButtonInstance","HLSProviderLoader","HLS_VIDEO_EXTENSIONS","HLS_VIDEO_TYPES","List","LiveButtonInstance","LocalMediaStorage","Logger","MEDIA_KEY_SHORTCUTS","MediaAnnouncerInstance","MediaControls","MediaRemoteControl","MenuButtonInstance","MenuInstance","MenuItemInstance","MenuItemsInstance","MenuPortalInstance","MuteButtonInstance","PIPButtonInstance","PlayButtonInstance","QualitySliderInstance","RadioGroupInstance","RadioInstance","ScreenOrientationController","SeekButtonInstance","SliderChaptersInstance","SliderInstance","SliderPreviewInstance","SliderThumbnailInstance","SliderValueInstance","SliderVideoInstance","SpeedSliderInstance","TextRenderers","TextTrackList","ThumbnailInstance","TimeInstance","TimeRange","TimeSliderInstance","TooltipContentInstance","TooltipInstance","TooltipTriggerInstance","VIDEO_EXTENSIONS","VIDEO_TYPES","VideoProviderLoader","VideoQualityList","VimeoProviderLoader","VolumeSliderInstance","YouTubeProviderLoader","boundTime","canChangeVolume","canFullscreen","canGoogleCastSrc","canOrientScreen","canPlayHLSNatively","canRotateScreen","canUsePictureInPicture","canUseVideoPresentation","findActiveCue","formatSpokenTime","formatTime","getDownloadFile","getTimeRangesEnd","getTimeRangesStart","isAudioProvider","isAudioSrc","isCueActive","isDASHProvider","isDASHSrc","isGoogleCastProvider","isHLSProvider","isHLSSrc","isHTMLAudioElement","isHTMLIFrameElement","isHTMLMediaElement","isHTMLVideoElement","isMediaStream","isTrackCaptionKind","isVideoProvider","isVideoQualitySrc","isVideoSrc","isVimeoProvider","isYouTubeProvider","mediaContext","normalizeTimeIntervals","parseJSONCaptionsFile","sliderState","softResetMediaState","sortVideoQualities","updateTimeIntervals","useMediaStore","useSliderState","useSliderStore","watchActiveTextTrack","watchCueTextChange","React","isString","EventsController","DOMEvent","prop","method","Component","hasProvidedContext","useContext","effect","createReactComponent","useStateContext","useSignal","composeRefs","useSignalRecord","useReactScope","signal","appendTriggerEvent","findTriggerEvent","hasTriggerEvent","isKeyboardClick","isKeyboardEvent","isPointerEvent","walkTriggerEventChain","createSignal","useScoped","audioGainSlider","AudioGainSlider","Captions","ChapterTitle","controls","Controls","GoogleCastButton","MediaAnnouncer","qualitySlider","QualitySlider","speedSlider","SpeedSlider","spinner","Spinner","Title","tooltip","Tooltip","useActiveTextCues","useActiveTextTrack","useChapterOptions","useChapterTitle","useTextCues","useMediaContext$1","AirPlayButton","CaptionButton","FullscreenButton","Gesture","LiveButton","menu","Menu","MuteButton","PIPButton","PlayButton","radioGroup","RadioGroup","SeekButton","slider","Slider","thumbnail","Thumbnail","Time","timeSlider","TimeSlider","volumeSlider","VolumeSlider","useAudioOptions","useCaptionOptions","useMediaPlayer","Icon","DEFAULT_PLAYBACK_RATES","useMediaRemote","usePlaybackRateOptions","useVideoQualityOptions","LibASSTextRenderer","constructor","loader","config","priority","instance","track","typeRE","canRender","video","src","type","test","attach","then","mod","default","subUrl","add","canvas","_canvas","style","pointerEvents","event","readyState","dispatchEvent","trigger","detail","error","changeTrack","freeTrack","setTrackByUrl","detach","#freeTrack","DEFAULT_AUDIO_GAINS","AudioGainRadioGroup","props","normalLabel","gains","media","controller","value","disabled","$props","canSetAudioGain","$state","length","onValueChange","bind","onSetup","onConnect","el","watchValue","watchHintText","watchControllerDisabled","getOptions","map","gain","label","String","toString","#watchValue","getValue","#watchHintText","audioGain","hint","set","#watchControllerDisabled","disable","#getValue","#onValueChange","remote","changeAudioGain","dispatch","audiogainradiogroup__proto","prototype","playerCallbacks","MediaPlayerBridge","events","eventsRegex","domEventsRegex","MediaPlayer","forwardRef","aspectRatio","children","createElement","ref","props2","div","displayName","MediaProviderBridge","MediaProvider","loaders","iframeProps","mediaProps","reactLoaders","useMemo","Loader","MediaOutlet","provider","sources","crossOrigin","poster","remotePlaybackInfo","nativeControls","viewType","$provider","$$provider","$providerSetup","$$providerSetup","$sources","$nativeControls","$crossOrigin","$poster","$loader","$remoteInfo","$mediaType","mediaType","$viewType","isAudioView","isYouTubeEmbed","name","isVimeoEmbed","isEmbed","isRemotion","isGoogleCast","googleCastIconPaths","setGoogleCastIconPaths","useState","hasMounted","setHasMounted","useEffect","n","chromecast","className","load","paths","deviceName","render","Fragment","suppressHydrationWarning","tabIndex","key","createTextTrack","init","Object","values","textTracks","remove","Track","lang","language","ToggleButtonBridge","ToggleButton","button","PosterBridge","Poster","asChild","isValidElement","PosterImg","img","alt","hidden","$src","$alt","$hidden","display","Root","translate","Text","textTrack","activeCue","setActiveCue","onCueChange","activeCues","addEventListener","removeEventListener","span","dangerouslySetInnerHTML","__html","text","caption","freeze","__proto__","ctor","initialValue","state","record","current","storesCache","Map","useStore","initialStore","store","get","Proxy","_","useMediaProvider","setProvider","context","Error","useThumbnails","scope","create","console","warn","$images","useActiveThumbnail","thumbnails","time","activeIndex","i","image","startTime","endTime","useSliderPreview","clamp","offset","orientation","rootRef","setRootRef","previewRef","setPreviewRef","pointerValue","setPointerValue","isVisible","setIsVisible","dragging","updatePointerValue","getPointerValue","setAttribute","removeAttribute","document","e","preventDefault","passive","setProperty","update","resize","ResizeObserver","observe","disconnect","previewRootRef","previewValue","isPreviewVisible","root","thumbPositionRate","rect","getBoundingClientRect","bottom","trackBottom","height","trackHeight","clientY","left","trackLeft","width","trackWidth","clientX","round","Math","max","min","num","Number","toFixed","useAudioGainOptions","disabledLabel","options","opt","selected","select","defineProperty","Caption"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/node_modules/@vidstack/react/dev/vidstack.js"],"sourcesContent":["\"use client\"\n\nimport { TextTrackSymbol, RadioGroupController, useMediaContext, menuContext, Primitive, MediaPlayerInstance, isRemotionProvider, MediaProviderInstance, mediaState, TextTrack, ToggleButtonInstance, PosterInstance, useMediaState, ThumbnailsLoader, updateSliderPreviewPlacement } from './chunks/vidstack-C-WrcxmD.js';\nexport { ARIAKeyShortcuts, AUDIO_EXTENSIONS, AUDIO_TYPES, AirPlayButtonInstance, AudioGainSliderInstance, AudioProviderLoader, AudioTrackList, CaptionButtonInstance, CaptionsInstance, ControlsGroupInstance, ControlsInstance, DASHProviderLoader, DASH_VIDEO_EXTENSIONS, DASH_VIDEO_TYPES, FullscreenButtonInstance, FullscreenController, GestureInstance, GoogleCastButtonInstance, HLSProviderLoader, HLS_VIDEO_EXTENSIONS, HLS_VIDEO_TYPES, List, LiveButtonInstance, LocalMediaStorage, Logger, MEDIA_KEY_SHORTCUTS, MediaAnnouncerInstance, MediaControls, MediaRemoteControl, MenuButtonInstance, MenuInstance, MenuItemInstance, MenuItemsInstance, MenuPortalInstance, MuteButtonInstance, PIPButtonInstance, PlayButtonInstance, QualitySliderInstance, RadioGroupInstance, RadioInstance, ScreenOrientationController, SeekButtonInstance, SliderChaptersInstance, SliderInstance, SliderPreviewInstance, SliderThumbnailInstance, SliderValueInstance, SliderVideoInstance, SpeedSliderInstance, TextRenderers, TextTrackList, ThumbnailInstance, TimeInstance, TimeRange, TimeSliderInstance, TooltipContentInstance, TooltipInstance, TooltipTriggerInstance, VIDEO_EXTENSIONS, VIDEO_TYPES, VideoProviderLoader, VideoQualityList, VimeoProviderLoader, VolumeSliderInstance, YouTubeProviderLoader, boundTime, canChangeVolume, canFullscreen, canGoogleCastSrc, canOrientScreen, canPlayHLSNatively, canRotateScreen, canUsePictureInPicture, canUseVideoPresentation, findActiveCue, formatSpokenTime, formatTime, getDownloadFile, getTimeRangesEnd, getTimeRangesStart, isAudioProvider, isAudioSrc, isCueActive, isDASHProvider, isDASHSrc, isGoogleCastProvider, isHLSProvider, isHLSSrc, isHTMLAudioElement, isHTMLIFrameElement, isHTMLMediaElement, isHTMLVideoElement, isMediaStream, isTrackCaptionKind, isVideoProvider, isVideoQualitySrc, isVideoSrc, isVimeoProvider, isYouTubeProvider, mediaContext, normalizeTimeIntervals, parseJSONCaptionsFile, sliderState, softResetMediaState, sortVideoQualities, updateTimeIntervals, useMediaStore, useSliderState, useSliderStore, watchActiveTextTrack, watchCueTextChange } from './chunks/vidstack-C-WrcxmD.js';\nimport * as React from 'react';\nimport { isString, EventsController, DOMEvent, prop, method, Component, hasProvidedContext, useContext, effect, createReactComponent, useStateContext, useSignal, composeRefs, useSignalRecord, useReactScope, signal } from './chunks/vidstack-CH225ns1.js';\nexport { appendTriggerEvent, findTriggerEvent, hasTriggerEvent, isKeyboardClick, isKeyboardEvent, isPointerEvent, walkTriggerEventChain } from './chunks/vidstack-CH225ns1.js';\nimport { createSignal, useScoped } from './chunks/vidstack-BUd8DcBH.js';\nexport { audioGainSlider as AudioGainSlider, Captions, ChapterTitle, controls as Controls, GoogleCastButton, MediaAnnouncer, qualitySlider as QualitySlider, speedSlider as SpeedSlider, spinner as Spinner, Title, tooltip as Tooltip, useActiveTextCues, useActiveTextTrack, useChapterOptions, useChapterTitle, useTextCues } from './chunks/vidstack-BUd8DcBH.js';\nimport { useMediaContext as useMediaContext$1 } from './chunks/vidstack-Xovmcdt1.js';\nexport { AirPlayButton, CaptionButton, FullscreenButton, Gesture, LiveButton, menu as Menu, MuteButton, PIPButton, PlayButton, radioGroup as RadioGroup, SeekButton, slider as Slider, thumbnail as Thumbnail, Time, timeSlider as TimeSlider, volumeSlider as VolumeSlider, useAudioOptions, useCaptionOptions, useMediaPlayer } from './chunks/vidstack-Xovmcdt1.js';\nimport { Icon } from './chunks/vidstack-CBF7iUqu.js';\nexport { DEFAULT_PLAYBACK_RATES, useMediaRemote, usePlaybackRateOptions, useVideoQualityOptions } from './chunks/vidstack-C4TlCb-3.js';\nimport '@floating-ui/dom';\nimport 'react-dom';\n\nclass LibASSTextRenderer {\n  constructor(loader, config) {\n    this.loader = loader;\n    this.config = config;\n  }\n  priority = 1;\n  #instance = null;\n  #track = null;\n  #typeRE = /(ssa|ass)$/;\n  canRender(track, video) {\n    return !!video && !!track.src && (isString(track.type) && this.#typeRE.test(track.type) || this.#typeRE.test(track.src));\n  }\n  attach(video) {\n    if (!video) return;\n    this.loader().then(async (mod) => {\n      this.#instance = new mod.default({\n        ...this.config,\n        video,\n        subUrl: this.#track?.src || \"\"\n      });\n      new EventsController(this.#instance).add(\"ready\", () => {\n        const canvas = this.#instance?._canvas;\n        if (canvas) canvas.style.pointerEvents = \"none\";\n      }).add(\"error\", (event) => {\n        if (!this.#track) return;\n        this.#track[TextTrackSymbol.readyState] = 3;\n        this.#track.dispatchEvent(\n          new DOMEvent(\"error\", {\n            trigger: event,\n            detail: event.error\n          })\n        );\n      });\n    });\n  }\n  changeTrack(track) {\n    if (!track || track.readyState === 3) {\n      this.#freeTrack();\n    } else if (this.#track !== track) {\n      this.#instance?.setTrackByUrl(track.src);\n      this.#track = track;\n    }\n  }\n  detach() {\n    this.#freeTrack();\n  }\n  #freeTrack() {\n    this.#instance?.freeTrack();\n    this.#track = null;\n  }\n}\n\nconst DEFAULT_AUDIO_GAINS = [1, 1.25, 1.5, 1.75, 2, 2.5, 3, 4];\nclass AudioGainRadioGroup extends Component {\n  static props = {\n    normalLabel: \"Disabled\",\n    gains: DEFAULT_AUDIO_GAINS\n  };\n  #media;\n  #menu;\n  #controller;\n  get value() {\n    return this.#controller.value;\n  }\n  get disabled() {\n    const { gains } = this.$props, { canSetAudioGain } = this.#media.$state;\n    return !canSetAudioGain() || gains().length === 0;\n  }\n  constructor() {\n    super();\n    this.#controller = new RadioGroupController();\n    this.#controller.onValueChange = this.#onValueChange.bind(this);\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    if (hasProvidedContext(menuContext)) {\n      this.#menu = useContext(menuContext);\n    }\n  }\n  onConnect(el) {\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchHintText.bind(this));\n    effect(this.#watchControllerDisabled.bind(this));\n  }\n  getOptions() {\n    const { gains, normalLabel } = this.$props;\n    return gains().map((gain) => ({\n      label: gain === 1 || gain === null ? normalLabel : String(gain * 100) + \"%\",\n      value: gain.toString()\n    }));\n  }\n  #watchValue() {\n    this.#controller.value = this.#getValue();\n  }\n  #watchHintText() {\n    const { normalLabel } = this.$props, { audioGain } = this.#media.$state, gain = audioGain();\n    this.#menu?.hint.set(gain === 1 || gain == null ? normalLabel() : String(gain * 100) + \"%\");\n  }\n  #watchControllerDisabled() {\n    this.#menu?.disable(this.disabled);\n  }\n  #getValue() {\n    const { audioGain } = this.#media.$state;\n    return audioGain()?.toString() ?? \"1\";\n  }\n  #onValueChange(value, trigger) {\n    if (this.disabled) return;\n    const gain = +value;\n    this.#media.remote.changeAudioGain(gain, trigger);\n    this.dispatch(\"change\", { detail: gain, trigger });\n  }\n}\nconst audiogainradiogroup__proto = AudioGainRadioGroup.prototype;\nprop(audiogainradiogroup__proto, \"value\");\nprop(audiogainradiogroup__proto, \"disabled\");\nmethod(audiogainradiogroup__proto, \"getOptions\");\n\nconst playerCallbacks = [\n  \"onAbort\",\n  \"onAudioTrackChange\",\n  \"onAudioTracksChange\",\n  \"onAutoPlay\",\n  \"onAutoPlayChange\",\n  \"onAutoPlayFail\",\n  \"onCanLoad\",\n  \"onCanPlay\",\n  \"onCanPlayThrough\",\n  \"onControlsChange\",\n  \"onDestroy\",\n  \"onDurationChange\",\n  \"onEmptied\",\n  \"onEnd\",\n  \"onEnded\",\n  \"onError\",\n  \"onFindMediaPlayer\",\n  \"onFullscreenChange\",\n  \"onFullscreenError\",\n  \"onLiveChange\",\n  \"onLiveEdgeChange\",\n  \"onLoadedData\",\n  \"onLoadedMetadata\",\n  \"onLoadStart\",\n  \"onLoopChange\",\n  \"onOrientationChange\",\n  \"onPause\",\n  \"onPictureInPictureChange\",\n  \"onPictureInPictureError\",\n  \"onPlay\",\n  \"onPlayFail\",\n  \"onPlaying\",\n  \"onPlaysInlineChange\",\n  \"onPosterChange\",\n  \"onProgress\",\n  \"onProviderChange\",\n  \"onProviderLoaderChange\",\n  \"onProviderSetup\",\n  \"onQualitiesChange\",\n  \"onQualityChange\",\n  \"onRateChange\",\n  \"onReplay\",\n  \"onSeeked\",\n  \"onSeeking\",\n  \"onSourceChange\",\n  \"onSourceChange\",\n  \"onStalled\",\n  \"onStarted\",\n  \"onStreamTypeChange\",\n  \"onSuspend\",\n  \"onTextTrackChange\",\n  \"onTextTracksChange\",\n  \"onTimeUpdate\",\n  \"onTitleChange\",\n  \"onVdsLog\",\n  \"onVideoPresentationChange\",\n  \"onVolumeChange\",\n  \"onWaiting\"\n];\n\nconst MediaPlayerBridge = createReactComponent(MediaPlayerInstance, {\n  events: playerCallbacks,\n  eventsRegex: /^onHls/,\n  domEventsRegex: /^onMedia/\n});\nconst MediaPlayer = React.forwardRef(\n  ({ aspectRatio, children, ...props }, forwardRef) => {\n    return /* @__PURE__ */ React.createElement(\n      MediaPlayerBridge,\n      {\n        ...props,\n        src: props.src,\n        ref: forwardRef,\n        style: {\n          aspectRatio,\n          ...props.style\n        }\n      },\n      (props2) => /* @__PURE__ */ React.createElement(Primitive.div, { ...props2 }, children)\n    );\n  }\n);\nMediaPlayer.displayName = \"MediaPlayer\";\n\nconst MediaProviderBridge = createReactComponent(MediaProviderInstance);\nconst MediaProvider = React.forwardRef(\n  ({ loaders = [], children, iframeProps, mediaProps, ...props }, forwardRef) => {\n    const reactLoaders = React.useMemo(() => loaders.map((Loader) => new Loader()), loaders);\n    return /* @__PURE__ */ React.createElement(MediaProviderBridge, { ...props, loaders: reactLoaders, ref: forwardRef }, (props2, instance) => /* @__PURE__ */ React.createElement(\"div\", { ...props2 }, /* @__PURE__ */ React.createElement(MediaOutlet, { provider: instance, mediaProps, iframeProps }), children));\n  }\n);\nMediaProvider.displayName = \"MediaProvider\";\nfunction MediaOutlet({ provider, mediaProps, iframeProps }) {\n  const { sources, crossOrigin, poster, remotePlaybackInfo, nativeControls, viewType } = useStateContext(mediaState), { loader } = provider.$state, { $provider: $$provider, $providerSetup: $$providerSetup } = useMediaContext$1(), $sources = useSignal(sources), $nativeControls = useSignal(nativeControls), $crossOrigin = useSignal(crossOrigin), $poster = useSignal(poster), $loader = useSignal(loader), $provider = useSignal($$provider), $providerSetup = useSignal($$providerSetup), $remoteInfo = useSignal(remotePlaybackInfo), $mediaType = $loader?.mediaType(), $viewType = useSignal(viewType), isAudioView = $viewType === \"audio\", isYouTubeEmbed = $loader?.name === \"youtube\", isVimeoEmbed = $loader?.name === \"vimeo\", isEmbed = isYouTubeEmbed || isVimeoEmbed, isRemotion = $loader?.name === \"remotion\", isGoogleCast = $loader?.name === \"google-cast\", [googleCastIconPaths, setGoogleCastIconPaths] = React.useState(\"\"), [hasMounted, setHasMounted] = React.useState(false);\n  React.useEffect(() => {\n    if (!isGoogleCast || googleCastIconPaths) return;\n    import('./chunks/vidstack-CH225ns1.js').then(function (n) { return n.chromecast; }).then((mod) => {\n      setGoogleCastIconPaths(mod.default);\n    });\n  }, [isGoogleCast]);\n  React.useEffect(() => {\n    setHasMounted(true);\n  }, []);\n  if (isGoogleCast) {\n    return /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        className: \"vds-google-cast\",\n        ref: (el) => {\n          provider.load(el);\n        }\n      },\n      /* @__PURE__ */ React.createElement(Icon, { paths: googleCastIconPaths }),\n      $remoteInfo?.deviceName ? /* @__PURE__ */ React.createElement(\"span\", { className: \"vds-google-cast-info\" }, \"Google Cast on\", \" \", /* @__PURE__ */ React.createElement(\"span\", { className: \"vds-google-cast-device-name\" }, $remoteInfo.deviceName)) : null\n    );\n  }\n  if (isRemotion) {\n    return /* @__PURE__ */ React.createElement(\"div\", { \"data-remotion-canvas\": true }, /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        \"data-remotion-container\": true,\n        ref: (el) => {\n          provider.load(el);\n        }\n      },\n      isRemotionProvider($provider) && $providerSetup ? React.createElement($provider.render) : null\n    ));\n  }\n  return isEmbed ? React.createElement(\n    React.Fragment,\n    null,\n    React.createElement(\"iframe\", {\n      ...iframeProps,\n      className: (iframeProps?.className ? `${iframeProps.className} ` : \"\") + isYouTubeEmbed ? \"vds-youtube\" : \"vds-vimeo\",\n      suppressHydrationWarning: true,\n      tabIndex: !$nativeControls ? -1 : void 0,\n      \"aria-hidden\": \"true\",\n      \"data-no-controls\": !$nativeControls ? \"\" : void 0,\n      ref(el) {\n        provider.load(el);\n      }\n    }),\n    !$nativeControls && !isAudioView ? React.createElement(\"div\", { className: \"vds-blocker\" }) : null\n  ) : $mediaType ? React.createElement($mediaType === \"audio\" ? \"audio\" : \"video\", {\n    ...mediaProps,\n    controls: $nativeControls ? true : null,\n    crossOrigin: typeof $crossOrigin === \"boolean\" ? \"\" : $crossOrigin,\n    poster: $mediaType === \"video\" && $nativeControls && $poster ? $poster : null,\n    suppressHydrationWarning: true,\n    children: !hasMounted ? $sources.map(\n      ({ src, type }) => isString(src) ? /* @__PURE__ */ React.createElement(\"source\", { src, type: type !== \"?\" ? type : void 0, key: src }) : null\n    ) : null,\n    ref(el) {\n      provider.load(el);\n    }\n  }) : null;\n}\nMediaOutlet.displayName = \"MediaOutlet\";\n\nfunction createTextTrack(init) {\n  const media = useMediaContext$1(), track = React.useMemo(() => new TextTrack(init), Object.values(init));\n  React.useEffect(() => {\n    media.textTracks.add(track);\n    return () => void media.textTracks.remove(track);\n  }, [track]);\n  return track;\n}\n\nfunction Track({ lang, ...props }) {\n  createTextTrack({ language: lang, ...props });\n  return null;\n}\nTrack.displayName = \"Track\";\n\nconst ToggleButtonBridge = createReactComponent(ToggleButtonInstance);\nconst ToggleButton = React.forwardRef(\n  ({ children, ...props }, forwardRef) => {\n    return /* @__PURE__ */ React.createElement(ToggleButtonBridge, { ...props }, (props2) => /* @__PURE__ */ React.createElement(\n      Primitive.button,\n      {\n        ...props2,\n        ref: composeRefs(props2.ref, forwardRef)\n      },\n      children\n    ));\n  }\n);\nToggleButton.displayName = \"ToggleButton\";\n\nconst PosterBridge = createReactComponent(PosterInstance);\nconst Poster = React.forwardRef(\n  ({ children, ...props }, forwardRef) => {\n    return /* @__PURE__ */ React.createElement(\n      PosterBridge,\n      {\n        src: props.asChild && React.isValidElement(children) ? children.props.src : void 0,\n        ...props\n      },\n      (props2, instance) => /* @__PURE__ */ React.createElement(\n        PosterImg,\n        {\n          ...props2,\n          instance,\n          ref: composeRefs(props2.ref, forwardRef)\n        },\n        children\n      )\n    );\n  }\n);\nPoster.displayName = \"Poster\";\nconst PosterImg = React.forwardRef(\n  ({ instance, children, ...props }, forwardRef) => {\n    const { src, img, alt, crossOrigin, hidden } = instance.$state, $src = useSignal(src), $alt = useSignal(alt), $crossOrigin = useSignal(crossOrigin), $hidden = useSignal(hidden);\n    return /* @__PURE__ */ React.createElement(\n      Primitive.img,\n      {\n        ...props,\n        src: $src || void 0,\n        alt: $alt || void 0,\n        crossOrigin: $crossOrigin || void 0,\n        ref: composeRefs(img.set, forwardRef),\n        style: { display: $hidden ? \"none\" : void 0 }\n      },\n      children\n    );\n  }\n);\nPosterImg.displayName = \"PosterImg\";\n\nconst Root = React.forwardRef(({ children, ...props }, forwardRef) => {\n  return /* @__PURE__ */ React.createElement(\n    Primitive.div,\n    {\n      translate: \"yes\",\n      \"aria-live\": \"off\",\n      \"aria-atomic\": \"true\",\n      ...props,\n      ref: forwardRef\n    },\n    children\n  );\n});\nRoot.displayName = \"Caption\";\nconst Text = React.forwardRef((props, forwardRef) => {\n  const textTrack = useMediaState(\"textTrack\"), [activeCue, setActiveCue] = React.useState();\n  React.useEffect(() => {\n    if (!textTrack) return;\n    function onCueChange() {\n      setActiveCue(textTrack?.activeCues[0]);\n    }\n    textTrack.addEventListener(\"cue-change\", onCueChange);\n    return () => {\n      textTrack.removeEventListener(\"cue-change\", onCueChange);\n      setActiveCue(void 0);\n    };\n  }, [textTrack]);\n  return /* @__PURE__ */ React.createElement(\n    Primitive.span,\n    {\n      ...props,\n      \"data-part\": \"cue\",\n      dangerouslySetInnerHTML: {\n        __html: activeCue?.text || \"\"\n      },\n      ref: forwardRef\n    }\n  );\n});\nText.displayName = \"CaptionText\";\n\nvar caption = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  Root: Root,\n  Text: Text\n});\n\nfunction useState(ctor, prop, ref) {\n  const initialValue = React.useMemo(() => ctor.state.record[prop], [ctor, prop]);\n  return useSignal(ref.current ? ref.current.$state[prop] : initialValue);\n}\nconst storesCache = /* @__PURE__ */ new Map();\nfunction useStore(ctor, ref) {\n  const initialStore = React.useMemo(() => {\n    let store = storesCache.get(ctor);\n    if (!store) {\n      store = new Proxy(ctor.state.record, {\n        get: (_, prop) => () => ctor.state.record[prop]\n      });\n      storesCache.set(ctor, store);\n    }\n    return store;\n  }, [ctor]);\n  return useSignalRecord(ref.current ? ref.current.$state : initialStore);\n}\n\nfunction useMediaProvider() {\n  const [provider, setProvider] = React.useState(null), context = useMediaContext$1();\n  if (!context) {\n    throw Error(\n      \"[vidstack] no media context was found - was this called outside of `<MediaPlayer>`?\"\n    );\n  }\n  React.useEffect(() => {\n    if (!context) return;\n    return effect(() => {\n      setProvider(context.$provider());\n    });\n  }, []);\n  return provider;\n}\n\nfunction useThumbnails(src, crossOrigin = null) {\n  const scope = useReactScope(), $src = createSignal(src), $crossOrigin = createSignal(crossOrigin), loader = useScoped(() => ThumbnailsLoader.create($src, $crossOrigin));\n  if (!scope) {\n    console.warn(\n      `[vidstack] \\`useThumbnails\\` must be called inside a child component of \\`<MediaPlayer>\\``\n    );\n  }\n  React.useEffect(() => {\n    $src.set(src);\n  }, [src]);\n  React.useEffect(() => {\n    $crossOrigin.set(crossOrigin);\n  }, [crossOrigin]);\n  return useSignal(loader.$images);\n}\nfunction useActiveThumbnail(thumbnails, time) {\n  return React.useMemo(() => {\n    let activeIndex = -1;\n    for (let i = thumbnails.length - 1; i >= 0; i--) {\n      const image = thumbnails[i];\n      if (time >= image.startTime && (!image.endTime || time < image.endTime)) {\n        activeIndex = i;\n        break;\n      }\n    }\n    return thumbnails[activeIndex] || null;\n  }, [thumbnails, time]);\n}\n\nfunction useSliderPreview({\n  clamp = false,\n  offset = 0,\n  orientation = \"horizontal\"\n} = {}) {\n  const [rootRef, setRootRef] = React.useState(null), [previewRef, setPreviewRef] = React.useState(null), [pointerValue, setPointerValue] = React.useState(0), [isVisible, setIsVisible] = React.useState(false);\n  React.useEffect(() => {\n    if (!rootRef) return;\n    const dragging = signal(false);\n    function updatePointerValue(event) {\n      if (!rootRef) return;\n      setPointerValue(getPointerValue(rootRef, event, orientation));\n    }\n    return effect(() => {\n      if (!dragging()) {\n        new EventsController(rootRef).add(\"pointerenter\", () => {\n          setIsVisible(true);\n          previewRef?.setAttribute(\"data-visible\", \"\");\n        }).add(\"pointerdown\", (event) => {\n          dragging.set(true);\n          updatePointerValue(event);\n        }).add(\"pointerleave\", () => {\n          setIsVisible(false);\n          previewRef?.removeAttribute(\"data-visible\");\n        }).add(\"pointermove\", updatePointerValue);\n      }\n      previewRef?.setAttribute(\"data-dragging\", \"\");\n      new EventsController(document).add(\"pointerup\", (event) => {\n        dragging.set(false);\n        previewRef?.removeAttribute(\"data-dragging\");\n        updatePointerValue(event);\n      }).add(\"pointermove\", updatePointerValue).add(\"touchmove\", (e) => e.preventDefault(), { passive: false });\n    });\n  }, [rootRef]);\n  React.useEffect(() => {\n    if (previewRef) {\n      previewRef.style.setProperty(\"--slider-pointer\", pointerValue + \"%\");\n    }\n  }, [previewRef, pointerValue]);\n  React.useEffect(() => {\n    if (!previewRef) return;\n    const update = () => {\n      updateSliderPreviewPlacement(previewRef, {\n        offset,\n        clamp,\n        orientation\n      });\n    };\n    update();\n    const resize = new ResizeObserver(update);\n    resize.observe(previewRef);\n    return () => resize.disconnect();\n  }, [previewRef, clamp, offset, orientation]);\n  return {\n    previewRootRef: setRootRef,\n    previewRef: setPreviewRef,\n    previewValue: pointerValue,\n    isPreviewVisible: isVisible\n  };\n}\nfunction getPointerValue(root, event, orientation) {\n  let thumbPositionRate, rect = root.getBoundingClientRect();\n  if (orientation === \"vertical\") {\n    const { bottom: trackBottom, height: trackHeight } = rect;\n    thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n  } else {\n    const { left: trackLeft, width: trackWidth } = rect;\n    thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n  }\n  return round(Math.max(0, Math.min(100, 100 * thumbPositionRate)));\n}\nfunction round(num) {\n  return Number(num.toFixed(3));\n}\n\nfunction useAudioGainOptions({\n  gains = DEFAULT_AUDIO_GAINS,\n  disabledLabel = \"disabled\"\n} = {}) {\n  const media = useMediaContext$1(), { audioGain, canSetAudioGain } = media.$state;\n  useSignal(audioGain);\n  useSignal(canSetAudioGain);\n  return React.useMemo(() => {\n    const options = gains.map((opt) => {\n      const label = typeof opt === \"number\" ? opt === 1 && disabledLabel ? disabledLabel : opt * 100 + \"%\" : opt.label, gain = typeof opt === \"number\" ? opt : opt.gain;\n      return {\n        label,\n        value: gain.toString(),\n        gain,\n        get selected() {\n          return audioGain() === gain;\n        },\n        select(trigger) {\n          media.remote.changeAudioGain(gain, trigger);\n        }\n      };\n    });\n    Object.defineProperty(options, \"disabled\", {\n      get() {\n        return !canSetAudioGain() || !options.length;\n      }\n    });\n    Object.defineProperty(options, \"selectedValue\", {\n      get() {\n        return audioGain()?.toString();\n      }\n    });\n    return options;\n  }, [gains]);\n}\n\nexport { caption as Caption, DEFAULT_AUDIO_GAINS, Icon, LibASSTextRenderer, MediaPlayer, MediaPlayerInstance, MediaProvider, MediaProviderInstance, Poster, PosterInstance, TextTrack, ToggleButton, ToggleButtonInstance, Track, createTextTrack, mediaState, useActiveThumbnail, useAudioGainOptions, useMediaContext$1 as useMediaContext, useMediaProvider, useMediaState, useSliderPreview, useState, useStore, useThumbnails };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}