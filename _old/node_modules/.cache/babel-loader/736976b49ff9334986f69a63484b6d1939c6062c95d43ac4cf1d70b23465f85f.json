{"ast":null,"code":"\"use client\";\n\nconst videoIdRE = /(?:https:\\/\\/)?(?:player\\.)?vimeo(?:\\.com)?\\/(?:video\\/)?(\\d+)(?:(?:\\?hash=|\\?h=|\\/)(.*))?/;\nconst infoCache = /* @__PURE__ */new Map();\nconst pendingFetch = /* @__PURE__ */new Map();\nfunction resolveVimeoVideoId(src) {\n  const matches = src.match(videoIdRE);\n  return {\n    videoId: matches?.[1],\n    hash: matches?.[2]\n  };\n}\nasync function getVimeoVideoInfo(videoId, abort, videoHash) {\n  if (infoCache.has(videoId)) return infoCache.get(videoId);\n  if (pendingFetch.has(videoId)) return pendingFetch.get(videoId);\n  let oembedSrc = `https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${videoId}`;\n  if (videoHash) {\n    oembedSrc = oembedSrc.concat(`?h=${videoHash}`);\n  }\n  const promise = window.fetch(oembedSrc, {\n    mode: \"cors\",\n    signal: abort.signal\n  }).then(response => response.json()).then(data => {\n    const thumnailRegex = /vimeocdn.com\\/video\\/(.*)?_/,\n      thumbnailId = data?.thumbnail_url?.match(thumnailRegex)?.[1],\n      poster = thumbnailId ? `https://i.vimeocdn.com/video/${thumbnailId}_1920x1080.webp` : \"\",\n      info = {\n        title: data?.title ?? \"\",\n        duration: data?.duration ?? 0,\n        poster,\n        pro: data.account_type !== \"basic\"\n      };\n    infoCache.set(videoId, info);\n    return info;\n  }).finally(() => pendingFetch.delete(videoId));\n  pendingFetch.set(videoId, promise);\n  return promise;\n}\nexport { getVimeoVideoInfo, resolveVimeoVideoId };","map":{"version":3,"names":["videoIdRE","infoCache","Map","pendingFetch","resolveVimeoVideoId","src","matches","match","videoId","hash","getVimeoVideoInfo","abort","videoHash","has","get","oembedSrc","concat","promise","window","fetch","mode","signal","then","response","json","data","thumnailRegex","thumbnailId","thumbnail_url","poster","info","title","duration","pro","account_type","set","finally","delete"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/node_modules/@vidstack/react/dev/chunks/vidstack-krOAtKMi.js"],"sourcesContent":["\"use client\"\n\nconst videoIdRE = /(?:https:\\/\\/)?(?:player\\.)?vimeo(?:\\.com)?\\/(?:video\\/)?(\\d+)(?:(?:\\?hash=|\\?h=|\\/)(.*))?/;\nconst infoCache = /* @__PURE__ */ new Map();\nconst pendingFetch = /* @__PURE__ */ new Map();\nfunction resolveVimeoVideoId(src) {\n  const matches = src.match(videoIdRE);\n  return { videoId: matches?.[1], hash: matches?.[2] };\n}\nasync function getVimeoVideoInfo(videoId, abort, videoHash) {\n  if (infoCache.has(videoId)) return infoCache.get(videoId);\n  if (pendingFetch.has(videoId)) return pendingFetch.get(videoId);\n  let oembedSrc = `https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${videoId}`;\n  if (videoHash) {\n    oembedSrc = oembedSrc.concat(`?h=${videoHash}`);\n  }\n  const promise = window.fetch(oembedSrc, {\n    mode: \"cors\",\n    signal: abort.signal\n  }).then((response) => response.json()).then((data) => {\n    const thumnailRegex = /vimeocdn.com\\/video\\/(.*)?_/, thumbnailId = data?.thumbnail_url?.match(thumnailRegex)?.[1], poster = thumbnailId ? `https://i.vimeocdn.com/video/${thumbnailId}_1920x1080.webp` : \"\", info = {\n      title: data?.title ?? \"\",\n      duration: data?.duration ?? 0,\n      poster,\n      pro: data.account_type !== \"basic\"\n    };\n    infoCache.set(videoId, info);\n    return info;\n  }).finally(() => pendingFetch.delete(videoId));\n  pendingFetch.set(videoId, promise);\n  return promise;\n}\n\nexport { getVimeoVideoInfo, resolveVimeoVideoId };\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,SAAS,GAAG,4FAA4F;AAC9G,MAAMC,SAAS,GAAG,eAAgB,IAAIC,GAAG,CAAC,CAAC;AAC3C,MAAMC,YAAY,GAAG,eAAgB,IAAID,GAAG,CAAC,CAAC;AAC9C,SAASE,mBAAmBA,CAACC,GAAG,EAAE;EAChC,MAAMC,OAAO,GAAGD,GAAG,CAACE,KAAK,CAACP,SAAS,CAAC;EACpC,OAAO;IAAEQ,OAAO,EAAEF,OAAO,GAAG,CAAC,CAAC;IAAEG,IAAI,EAAEH,OAAO,GAAG,CAAC;EAAE,CAAC;AACtD;AACA,eAAeI,iBAAiBA,CAACF,OAAO,EAAEG,KAAK,EAAEC,SAAS,EAAE;EAC1D,IAAIX,SAAS,CAACY,GAAG,CAACL,OAAO,CAAC,EAAE,OAAOP,SAAS,CAACa,GAAG,CAACN,OAAO,CAAC;EACzD,IAAIL,YAAY,CAACU,GAAG,CAACL,OAAO,CAAC,EAAE,OAAOL,YAAY,CAACW,GAAG,CAACN,OAAO,CAAC;EAC/D,IAAIO,SAAS,GAAG,wEAAwEP,OAAO,EAAE;EACjG,IAAII,SAAS,EAAE;IACbG,SAAS,GAAGA,SAAS,CAACC,MAAM,CAAC,MAAMJ,SAAS,EAAE,CAAC;EACjD;EACA,MAAMK,OAAO,GAAGC,MAAM,CAACC,KAAK,CAACJ,SAAS,EAAE;IACtCK,IAAI,EAAE,MAAM;IACZC,MAAM,EAAEV,KAAK,CAACU;EAChB,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CAACF,IAAI,CAAEG,IAAI,IAAK;IACpD,MAAMC,aAAa,GAAG,6BAA6B;MAAEC,WAAW,GAAGF,IAAI,EAAEG,aAAa,EAAErB,KAAK,CAACmB,aAAa,CAAC,GAAG,CAAC,CAAC;MAAEG,MAAM,GAAGF,WAAW,GAAG,gCAAgCA,WAAW,iBAAiB,GAAG,EAAE;MAAEG,IAAI,GAAG;QAClNC,KAAK,EAAEN,IAAI,EAAEM,KAAK,IAAI,EAAE;QACxBC,QAAQ,EAAEP,IAAI,EAAEO,QAAQ,IAAI,CAAC;QAC7BH,MAAM;QACNI,GAAG,EAAER,IAAI,CAACS,YAAY,KAAK;MAC7B,CAAC;IACDjC,SAAS,CAACkC,GAAG,CAAC3B,OAAO,EAAEsB,IAAI,CAAC;IAC5B,OAAOA,IAAI;EACb,CAAC,CAAC,CAACM,OAAO,CAAC,MAAMjC,YAAY,CAACkC,MAAM,CAAC7B,OAAO,CAAC,CAAC;EAC9CL,YAAY,CAACgC,GAAG,CAAC3B,OAAO,EAAES,OAAO,CAAC;EAClC,OAAOA,OAAO;AAChB;AAEA,SAASP,iBAAiB,EAAEN,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}