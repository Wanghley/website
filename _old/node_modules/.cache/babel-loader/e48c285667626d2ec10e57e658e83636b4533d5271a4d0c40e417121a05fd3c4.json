{"ast":null,"code":"import axios from \"axios\";\nconst baseURL = process.env.REACT_APP_timeline_api_url;\nexport async function fetchTimeline(nextPage = 1, prevData = null) {\n  try {\n    const url = `${baseURL}?pagination[page]=${nextPage}&sort=Year:asc`;\n    const response = await axios.get(url);\n    const updatedData = {\n      ...response.data,\n      data: prevData ? [...prevData.data, ...response.data] : response.data\n    };\n    // const updatedData = {\n    //   ...response.data.data,\n    //   data: prevData ? [...prevData.data.data, ...response.data.data] : response.data.data\n    // };\n\n    if (response.data.meta.pagination.pageCount <= nextPage + 1) {\n      // If there are no more pages, return the data\n      return updatedData.data.data;\n    } else {\n      return fetchTimeline(nextPage + 1, updatedData);\n    }\n  } catch (e) {\n    console.error(e);\n    throw e; // Rethrow the error for the caller to handle\n  }\n}\nexport default fetchTimeline;","map":{"version":3,"names":["axios","baseURL","process","env","REACT_APP_timeline_api_url","fetchTimeline","nextPage","prevData","url","response","get","updatedData","data","meta","pagination","pageCount","e","console","error"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/src/api/timeline.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseURL = process.env.REACT_APP_timeline_api_url;\n\nexport async function fetchTimeline(nextPage = 1, prevData = null) {\n  try {\n    const url = `${baseURL}?pagination[page]=${nextPage}&sort=Year:asc`;\n    const response = await axios.get(url);\n\n    const updatedData = {\n        ...response.data,\n        data: prevData ? [...prevData.data, ...response.data] : response.data\n    };\n    // const updatedData = {\n    //   ...response.data.data,\n    //   data: prevData ? [...prevData.data.data, ...response.data.data] : response.data.data\n    // };\n\n    if (response.data.meta.pagination.pageCount <= nextPage+1) { // If there are no more pages, return the data\n        return updatedData.data.data;\n    } else {\n      return fetchTimeline(nextPage + 1, updatedData);\n    }\n  } catch (e) {\n    console.error(e);\n    throw e; // Rethrow the error for the caller to handle\n  }\n}\n\nexport default fetchTimeline;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,0BAA0B;AAEtD,OAAO,eAAeC,aAAaA,CAACC,QAAQ,GAAG,CAAC,EAAEC,QAAQ,GAAG,IAAI,EAAE;EACjE,IAAI;IACF,MAAMC,GAAG,GAAG,GAAGP,OAAO,qBAAqBK,QAAQ,gBAAgB;IACnE,MAAMG,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAACF,GAAG,CAAC;IAErC,MAAMG,WAAW,GAAG;MAChB,GAAGF,QAAQ,CAACG,IAAI;MAChBA,IAAI,EAAEL,QAAQ,GAAG,CAAC,GAAGA,QAAQ,CAACK,IAAI,EAAE,GAAGH,QAAQ,CAACG,IAAI,CAAC,GAAGH,QAAQ,CAACG;IACrE,CAAC;IACD;IACA;IACA;IACA;;IAEA,IAAIH,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACC,UAAU,CAACC,SAAS,IAAIT,QAAQ,GAAC,CAAC,EAAE;MAAE;MACzD,OAAOK,WAAW,CAACC,IAAI,CAACA,IAAI;IAChC,CAAC,MAAM;MACL,OAAOP,aAAa,CAACC,QAAQ,GAAG,CAAC,EAAEK,WAAW,CAAC;IACjD;EACF,CAAC,CAAC,OAAOK,CAAC,EAAE;IACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;IAChB,MAAMA,CAAC,CAAC,CAAC;EACX;AACF;AAEA,eAAeX,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}