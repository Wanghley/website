{"ast":null,"code":"\"use client\";\n\nimport * as React from 'react';\nimport { isString, isNumber, isFunction, isUndefined, waitTimeout, isArray, isBoolean, isNull, deferredPromise, listenEvent, scoped, getScope, EventsTarget, DOMEvent, State, fscreen, tick, createContext, useContext, Component, functionThrottle, setAttribute, effect, isTouchEvent, isDOMNode, EventsController, isKeyboardClick, setStyle, onDispose, untrack, functionDebounce, ViewController, signal, peek, isKeyboardEvent, isNil, createScope, camelToKebabCase, waitIdlePeriod, prop, method, provideContext, animationFrameThrottle, uppercaseFirstChar, computed, noop, ariaBool as ariaBool$1, isWriteSignal, hasProvidedContext, isObject, useState, r, wasEnterKeyPressed, isPointerEvent, isMouseEvent, kebabToCamelCase, composeRefs, useStateContext, useSignal, useSignalRecord } from './vidstack-CH225ns1.js';\nimport { autoUpdate, computePosition, flip, shift } from '@floating-ui/dom';\nfunction isVideoQualitySrc(src) {\n  return !isString(src) && \"width\" in src && \"height\" in src && isNumber(src.width) && isNumber(src.height);\n}\nconst IS_SERVER = typeof document === \"undefined\";\nconst UA = IS_SERVER ? \"\" : navigator?.userAgent.toLowerCase() || \"\";\nconst IS_IOS = !IS_SERVER && /iphone|ipad|ipod|ios|crios|fxios/i.test(UA);\nconst IS_IPHONE = !IS_SERVER && /(iphone|ipod)/gi.test(navigator?.platform || \"\");\nconst IS_CHROME = !IS_SERVER && !!window.chrome;\nconst IS_SAFARI = !IS_SERVER && (!!window.safari || IS_IOS);\nfunction canOrientScreen() {\n  return canRotateScreen() && isFunction(screen.orientation.unlock);\n}\nfunction canRotateScreen() {\n  return !IS_SERVER && !isUndefined(window.screen.orientation) && !isUndefined(window.screen.orientation.lock);\n}\nfunction canPlayAudioType(audio, type) {\n  if (IS_SERVER) return false;\n  if (!audio) audio = document.createElement(\"audio\");\n  return audio.canPlayType(type).length > 0;\n}\nfunction canPlayVideoType(video, type) {\n  if (IS_SERVER) return false;\n  if (!video) video = document.createElement(\"video\");\n  return video.canPlayType(type).length > 0;\n}\nfunction canPlayHLSNatively(video) {\n  if (IS_SERVER) return false;\n  if (!video) video = document.createElement(\"video\");\n  return video.canPlayType(\"application/vnd.apple.mpegurl\").length > 0;\n}\nfunction canUsePictureInPicture(video) {\n  if (IS_SERVER) return false;\n  return !!document.pictureInPictureEnabled && !video?.disablePictureInPicture;\n}\nfunction canUseVideoPresentation(video) {\n  if (IS_SERVER) return false;\n  return isFunction(video?.webkitSupportsPresentationMode) && isFunction(video?.webkitSetPresentationMode);\n}\nasync function canChangeVolume() {\n  const video = document.createElement(\"video\");\n  video.volume = 0.5;\n  await waitTimeout(0);\n  return video.volume === 0.5;\n}\nfunction getMediaSource() {\n  return IS_SERVER ? void 0 : window?.ManagedMediaSource ?? window?.MediaSource ?? window?.WebKitMediaSource;\n}\nfunction getSourceBuffer() {\n  return IS_SERVER ? void 0 : window?.SourceBuffer ?? window?.WebKitSourceBuffer;\n}\nfunction isHLSSupported() {\n  if (IS_SERVER) return false;\n  const MediaSource = getMediaSource();\n  if (isUndefined(MediaSource)) return false;\n  const isTypeSupported = MediaSource && isFunction(MediaSource.isTypeSupported) && MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n  const SourceBuffer = getSourceBuffer();\n  const isSourceBufferValid = isUndefined(SourceBuffer) || !isUndefined(SourceBuffer.prototype) && isFunction(SourceBuffer.prototype.appendBuffer) && isFunction(SourceBuffer.prototype.remove);\n  return !!isTypeSupported && !!isSourceBufferValid;\n}\nfunction isDASHSupported() {\n  return isHLSSupported();\n}\nclass TimeRange {\n  #ranges;\n  get length() {\n    return this.#ranges.length;\n  }\n  constructor(start, end) {\n    if (isArray(start)) {\n      this.#ranges = start;\n    } else if (!isUndefined(start) && !isUndefined(end)) {\n      this.#ranges = [[start, end]];\n    } else {\n      this.#ranges = [];\n    }\n  }\n  start(index) {\n    throwIfEmpty(this.#ranges.length);\n    throwIfOutOfRange(\"start\", index, this.#ranges.length - 1);\n    return this.#ranges[index][0] ?? Infinity;\n  }\n  end(index) {\n    throwIfEmpty(this.#ranges.length);\n    throwIfOutOfRange(\"end\", index, this.#ranges.length - 1);\n    return this.#ranges[index][1] ?? Infinity;\n  }\n}\nfunction getTimeRangesStart(range) {\n  if (!range.length) return null;\n  let min = range.start(0);\n  for (let i = 1; i < range.length; i++) {\n    const value = range.start(i);\n    if (value < min) min = value;\n  }\n  return min;\n}\nfunction getTimeRangesEnd(range) {\n  if (!range.length) return null;\n  let max = range.end(0);\n  for (let i = 1; i < range.length; i++) {\n    const value = range.end(i);\n    if (value > max) max = value;\n  }\n  return max;\n}\nfunction throwIfEmpty(length) {\n  if (!length) throw new Error(\"`TimeRanges` object is empty.\");\n}\nfunction throwIfOutOfRange(fnName, index, end) {\n  if (!isNumber(index) || index < 0 || index > end) {\n    throw new Error(`Failed to execute '${fnName}' on 'TimeRanges': The index provided (${index}) is non-numeric or out of bounds (0-${end}).`);\n  }\n}\nfunction normalizeTimeIntervals(intervals) {\n  if (intervals.length <= 1) {\n    return intervals;\n  }\n  intervals.sort((a, b) => a[0] - b[0]);\n  let normalized = [],\n    current = intervals[0];\n  for (let i = 1; i < intervals.length; i++) {\n    const next = intervals[i];\n    if (current[1] >= next[0] - 1) {\n      current = [current[0], Math.max(current[1], next[1])];\n    } else {\n      normalized.push(current);\n      current = next;\n    }\n  }\n  normalized.push(current);\n  return normalized;\n}\nfunction updateTimeIntervals(intervals, interval, value) {\n  let start = interval[0],\n    end = interval[1];\n  if (value < start) {\n    return [value, -1];\n  } else if (value === start) {\n    return interval;\n  } else if (start === -1) {\n    interval[0] = value;\n    return interval;\n  } else if (value > start) {\n    interval[1] = value;\n    if (end === -1) intervals.push(interval);\n  }\n  normalizeTimeIntervals(intervals);\n  return interval;\n}\nconst AUDIO_EXTENSIONS = /\\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\\?)/i;\nconst AUDIO_TYPES = /* @__PURE__ */new Set([\"audio/mpeg\", \"audio/ogg\", \"audio/3gp\", \"audio/mp3\", \"audio/webm\", \"audio/flac\", \"audio/m4a\", \"audio/m4b\", \"audio/mp4a\", \"audio/mp4\"]);\nconst VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\\d+]+)?($|\\?)/i;\nconst VIDEO_TYPES = /* @__PURE__ */new Set([\"video/mp4\", \"video/webm\", \"video/3gp\", \"video/ogg\", \"video/avi\", \"video/mpeg\"]);\nconst HLS_VIDEO_EXTENSIONS = /\\.(m3u8)($|\\?)/i;\nconst DASH_VIDEO_EXTENSIONS = /\\.(mpd)($|\\?)/i;\nconst HLS_VIDEO_TYPES = /* @__PURE__ */new Set([\n// Apple sanctioned\n\"application/vnd.apple.mpegurl\",\n// Apple sanctioned for backwards compatibility\n\"audio/mpegurl\",\n// Very common\n\"audio/x-mpegurl\",\n// Very common\n\"application/x-mpegurl\",\n// Included for completeness\n\"video/x-mpegurl\", \"video/mpegurl\", \"application/mpegurl\"]);\nconst DASH_VIDEO_TYPES = /* @__PURE__ */new Set([\"application/dash+xml\"]);\nfunction isAudioSrc({\n  src,\n  type\n}) {\n  return isString(src) ? AUDIO_EXTENSIONS.test(src) || AUDIO_TYPES.has(type) || src.startsWith(\"blob:\") && type === \"audio/object\" : type === \"audio/object\";\n}\nfunction isVideoSrc(src) {\n  return isString(src.src) ? VIDEO_EXTENSIONS.test(src.src) || VIDEO_TYPES.has(src.type) || src.src.startsWith(\"blob:\") && src.type === \"video/object\" || isHLSSrc(src) && (IS_SERVER || canPlayHLSNatively()) : src.type === \"video/object\";\n}\nfunction isHLSSrc({\n  src,\n  type\n}) {\n  return isString(src) && HLS_VIDEO_EXTENSIONS.test(src) || HLS_VIDEO_TYPES.has(type);\n}\nfunction isDASHSrc({\n  src,\n  type\n}) {\n  return isString(src) && DASH_VIDEO_EXTENSIONS.test(src) || DASH_VIDEO_TYPES.has(type);\n}\nfunction canGoogleCastSrc(src) {\n  return isString(src.src) && (isAudioSrc(src) || isVideoSrc(src) || isHLSSrc(src));\n}\nfunction isMediaStream(src) {\n  return !IS_SERVER && typeof window.MediaStream !== \"undefined\" && src instanceof window.MediaStream;\n}\nfunction appendParamsToURL(baseUrl, params) {\n  const url = new URL(baseUrl);\n  for (const key of Object.keys(params)) {\n    url.searchParams.set(key, params[key] + \"\");\n  }\n  return url.toString();\n}\nfunction preconnect(url, rel = \"preconnect\") {\n  if (IS_SERVER) return false;\n  const exists = document.querySelector(`link[href=\"${url}\"]`);\n  if (!isNull(exists)) return true;\n  const link = document.createElement(\"link\");\n  link.rel = rel;\n  link.href = url;\n  link.crossOrigin = \"true\";\n  document.head.append(link);\n  return true;\n}\nconst pendingRequests = {};\nfunction loadScript(src) {\n  if (pendingRequests[src]) return pendingRequests[src].promise;\n  const promise = deferredPromise(),\n    exists = document.querySelector(`script[src=\"${src}\"]`);\n  if (!isNull(exists)) {\n    promise.resolve();\n    return promise.promise;\n  }\n  pendingRequests[src] = promise;\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.onload = () => {\n    promise.resolve();\n    delete pendingRequests[src];\n  };\n  script.onerror = () => {\n    promise.reject();\n    delete pendingRequests[src];\n  };\n  setTimeout(() => document.head.append(script), 0);\n  return promise.promise;\n}\nfunction getRequestCredentials(crossOrigin) {\n  return crossOrigin === \"use-credentials\" ? \"include\" : isString(crossOrigin) ? \"same-origin\" : void 0;\n}\nfunction getDownloadFile({\n  title,\n  src,\n  download\n}) {\n  const url = isBoolean(download) || download === \"\" ? src.src : isString(download) ? download : download?.url;\n  if (!isValidFileDownload({\n    url,\n    src,\n    download\n  })) return null;\n  return {\n    url,\n    name: !isBoolean(download) && !isString(download) && download?.filename || title.toLowerCase() || \"media\"\n  };\n}\nfunction isValidFileDownload({\n  url,\n  src,\n  download\n}) {\n  return isString(url) && (download && download !== true || isAudioSrc(src) || isVideoSrc(src));\n}\nconst CROSS_ORIGIN = Symbol(\"TEXT_TRACK_CROSS_ORIGIN\"),\n  READY_STATE = Symbol(\"TEXT_TRACK_READY_STATE\"),\n  UPDATE_ACTIVE_CUES = Symbol(\"TEXT_TRACK_UPDATE_ACTIVE_CUES\"),\n  CAN_LOAD = Symbol(\"TEXT_TRACK_CAN_LOAD\"),\n  ON_MODE_CHANGE = Symbol(\"TEXT_TRACK_ON_MODE_CHANGE\"),\n  NATIVE = Symbol(\"TEXT_TRACK_NATIVE\"),\n  NATIVE_HLS = Symbol(\"TEXT_TRACK_NATIVE_HLS\");\nconst TextTrackSymbol = {\n  crossOrigin: CROSS_ORIGIN,\n  readyState: READY_STATE,\n  updateActiveCues: UPDATE_ACTIVE_CUES,\n  canLoad: CAN_LOAD,\n  onModeChange: ON_MODE_CHANGE,\n  native: NATIVE,\n  nativeHLS: NATIVE_HLS\n};\nfunction findActiveCue(cues, time) {\n  for (let i = 0, len = cues.length; i < len; i++) {\n    if (isCueActive(cues[i], time)) return cues[i];\n  }\n  return null;\n}\nfunction isCueActive(cue, time) {\n  return time >= cue.startTime && time < cue.endTime;\n}\nfunction watchActiveTextTrack(tracks, kind, onChange) {\n  let currentTrack = null,\n    scope = getScope();\n  function onModeChange() {\n    const kinds = isString(kind) ? [kind] : kind,\n      track = tracks.toArray().find(track2 => kinds.includes(track2.kind) && track2.mode === \"showing\");\n    if (track === currentTrack) return;\n    if (!track) {\n      onChange(null);\n      currentTrack = null;\n      return;\n    }\n    if (track.readyState == 2) {\n      onChange(track);\n    } else {\n      onChange(null);\n      scoped(() => {\n        const off = listenEvent(track, \"load\", () => {\n          onChange(track);\n          off();\n        }, {\n          once: true\n        });\n      }, scope);\n    }\n    currentTrack = track;\n  }\n  onModeChange();\n  return listenEvent(tracks, \"mode-change\", onModeChange);\n}\nfunction watchCueTextChange(tracks, kind, callback) {\n  watchActiveTextTrack(tracks, kind, track => {\n    if (!track) {\n      callback(\"\");\n      return;\n    }\n    const onCueChange = () => {\n      const activeCue = track?.activeCues[0];\n      callback(activeCue?.text || \"\");\n    };\n    onCueChange();\n    listenEvent(track, \"cue-change\", onCueChange);\n  });\n}\nclass TextTrack extends EventsTarget {\n  static createId(track) {\n    return `vds-${track.type}-${track.kind}-${track.src ?? track.label ?? \"?\"}`;\n  }\n  src;\n  content;\n  type;\n  encoding;\n  id = \"\";\n  label = \"\";\n  language = \"\";\n  kind;\n  default = false;\n  #canLoad = false;\n  #currentTime = 0;\n  #mode = \"disabled\";\n  #metadata = {};\n  #regions = [];\n  #cues = [];\n  #activeCues = [];\n  /** @internal */\n  [TextTrackSymbol.readyState] = 0;\n  /** @internal */\n  [TextTrackSymbol.crossOrigin];\n  /** @internal */\n  [TextTrackSymbol.onModeChange] = null;\n  /** @internal */\n  [TextTrackSymbol.native] = null;\n  get metadata() {\n    return this.#metadata;\n  }\n  get regions() {\n    return this.#regions;\n  }\n  get cues() {\n    return this.#cues;\n  }\n  get activeCues() {\n    return this.#activeCues;\n  }\n  /**\n   * - 0: Not Loading\n   * - 1: Loading\n   * - 2: Ready\n   * - 3: Error\n   */\n  get readyState() {\n    return this[TextTrackSymbol.readyState];\n  }\n  get mode() {\n    return this.#mode;\n  }\n  set mode(mode) {\n    this.setMode(mode);\n  }\n  constructor(init) {\n    super();\n    for (const prop of Object.keys(init)) this[prop] = init[prop];\n    if (!this.type) this.type = \"vtt\";\n    if (!IS_SERVER && init.content) {\n      this.#parseContent(init);\n    } else if (!init.src) {\n      this[TextTrackSymbol.readyState] = 2;\n    }\n    if (isTrackCaptionKind(this) && !this.label) {\n      console.warn(`[vidstack] captions text track created without label: \\`${this.src}\\``);\n    }\n  }\n  addCue(cue, trigger) {\n    let i = 0,\n      length = this.#cues.length;\n    for (i = 0; i < length; i++) if (cue.endTime <= this.#cues[i].startTime) break;\n    if (i === length) this.#cues.push(cue);else this.#cues.splice(i, 0, cue);\n    if (!(cue instanceof TextTrackCue)) {\n      this[TextTrackSymbol.native]?.track.addCue(cue);\n    }\n    this.dispatchEvent(new DOMEvent(\"add-cue\", {\n      detail: cue,\n      trigger\n    }));\n    if (isCueActive(cue, this.#currentTime)) {\n      this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n    }\n  }\n  removeCue(cue, trigger) {\n    const index = this.#cues.indexOf(cue);\n    if (index >= 0) {\n      const isActive = this.#activeCues.includes(cue);\n      this.#cues.splice(index, 1);\n      this[TextTrackSymbol.native]?.track.removeCue(cue);\n      this.dispatchEvent(new DOMEvent(\"remove-cue\", {\n        detail: cue,\n        trigger\n      }));\n      if (isActive) {\n        this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n      }\n    }\n  }\n  setMode(mode, trigger) {\n    if (this.#mode === mode) return;\n    this.#mode = mode;\n    if (mode === \"disabled\") {\n      this.#activeCues = [];\n      this.#activeCuesChanged();\n    } else if (this.readyState === 2) {\n      this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n    } else {\n      this.#load();\n    }\n    this.dispatchEvent(new DOMEvent(\"mode-change\", {\n      detail: this,\n      trigger\n    }));\n    this[TextTrackSymbol.onModeChange]?.();\n  }\n  /** @internal */\n  [TextTrackSymbol.updateActiveCues](currentTime, trigger) {\n    this.#currentTime = currentTime;\n    if (this.mode === \"disabled\" || !this.#cues.length) return;\n    const activeCues = [];\n    for (let i = 0, length = this.#cues.length; i < length; i++) {\n      const cue = this.#cues[i];\n      if (isCueActive(cue, currentTime)) activeCues.push(cue);\n    }\n    let changed = activeCues.length !== this.#activeCues.length;\n    if (!changed) {\n      for (let i = 0; i < activeCues.length; i++) {\n        if (!this.#activeCues.includes(activeCues[i])) {\n          changed = true;\n          break;\n        }\n      }\n    }\n    this.#activeCues = activeCues;\n    if (changed) this.#activeCuesChanged(trigger);\n  }\n  /** @internal */\n  [TextTrackSymbol.canLoad]() {\n    this.#canLoad = true;\n    if (this.#mode !== \"disabled\") this.#load();\n  }\n  #parseContent(init) {\n    import('media-captions').then(({\n      parseText,\n      VTTCue,\n      VTTRegion\n    }) => {\n      if (!isString(init.content) || init.type === \"json\") {\n        this.#parseJSON(init.content, VTTCue, VTTRegion);\n        if (this.readyState !== 3) this.#ready();\n      } else {\n        parseText(init.content, {\n          type: init.type\n        }).then(({\n          cues,\n          regions\n        }) => {\n          this.#cues = cues;\n          this.#regions = regions;\n          this.#ready();\n        });\n      }\n    });\n  }\n  async #load() {\n    if (!this.#canLoad || this[TextTrackSymbol.readyState] > 0) return;\n    this[TextTrackSymbol.readyState] = 1;\n    this.dispatchEvent(new DOMEvent(\"load-start\"));\n    if (!this.src) {\n      this.#ready();\n      return;\n    }\n    try {\n      const {\n          parseResponse,\n          VTTCue,\n          VTTRegion\n        } = await import('media-captions'),\n        crossOrigin = this[TextTrackSymbol.crossOrigin]?.();\n      const response = fetch(this.src, {\n        headers: this.type === \"json\" ? {\n          \"Content-Type\": \"application/json\"\n        } : void 0,\n        credentials: getRequestCredentials(crossOrigin)\n      });\n      if (this.type === \"json\") {\n        this.#parseJSON(await (await response).text(), VTTCue, VTTRegion);\n      } else {\n        const {\n          errors,\n          metadata,\n          regions,\n          cues\n        } = await parseResponse(response, {\n          type: this.type,\n          encoding: this.encoding\n        });\n        if (errors[0]?.code === 0) {\n          throw errors[0];\n        } else {\n          this.#metadata = metadata;\n          this.#regions = regions;\n          this.#cues = cues;\n        }\n      }\n      this.#ready();\n    } catch (error) {\n      this.#error(error);\n    }\n  }\n  #ready() {\n    this[TextTrackSymbol.readyState] = 2;\n    if (!this.src || this.type !== \"vtt\") {\n      const native = this[TextTrackSymbol.native];\n      if (native && !native.managed) {\n        for (const cue of this.#cues) native.track.addCue(cue);\n      }\n    }\n    const loadEvent = new DOMEvent(\"load\");\n    this[TextTrackSymbol.updateActiveCues](this.#currentTime, loadEvent);\n    this.dispatchEvent(loadEvent);\n  }\n  #error(error) {\n    this[TextTrackSymbol.readyState] = 3;\n    this.dispatchEvent(new DOMEvent(\"error\", {\n      detail: error\n    }));\n  }\n  #parseJSON(json, VTTCue, VTTRegion) {\n    try {\n      const {\n        regions,\n        cues\n      } = parseJSONCaptionsFile(json, VTTCue, VTTRegion);\n      this.#regions = regions;\n      this.#cues = cues;\n    } catch (error) {\n      {\n        console.error(`[vidstack] failed to parse JSON captions at: \\`${this.src}\\`\n\n`, error);\n      }\n      this.#error(error);\n    }\n  }\n  #activeCuesChanged(trigger) {\n    this.dispatchEvent(new DOMEvent(\"cue-change\", {\n      trigger\n    }));\n  }\n}\nconst captionRE = /captions|subtitles/;\nfunction isTrackCaptionKind(track) {\n  return captionRE.test(track.kind);\n}\nfunction parseJSONCaptionsFile(json, Cue, Region) {\n  const content = isString(json) ? JSON.parse(json) : json;\n  let regions = [],\n    cues = [];\n  if (content.regions && Region) {\n    regions = content.regions.map(region => Object.assign(new Region(), region));\n  }\n  if (content.cues || isArray(content)) {\n    cues = (isArray(content) ? content : content.cues).filter(content2 => isNumber(content2.startTime) && isNumber(content2.endTime)).map(cue => Object.assign(new Cue(0, 0, \"\"), cue));\n  }\n  return {\n    regions,\n    cues\n  };\n}\nconst mediaState = new State({\n  artist: \"\",\n  artwork: null,\n  audioTrack: null,\n  audioTracks: [],\n  autoPlay: false,\n  autoPlayError: null,\n  audioGain: null,\n  buffered: new TimeRange(),\n  canLoad: false,\n  canLoadPoster: false,\n  canFullscreen: false,\n  canOrientScreen: canOrientScreen(),\n  canPictureInPicture: false,\n  canPlay: false,\n  clipStartTime: 0,\n  clipEndTime: 0,\n  controls: false,\n  get iOSControls() {\n    return IS_IPHONE && this.mediaType === \"video\" && (!this.playsInline || !fscreen.fullscreenEnabled && this.fullscreen);\n  },\n  get nativeControls() {\n    return this.controls || this.iOSControls;\n  },\n  controlsVisible: false,\n  get controlsHidden() {\n    return !this.controlsVisible;\n  },\n  crossOrigin: null,\n  ended: false,\n  error: null,\n  fullscreen: false,\n  get loop() {\n    return this.providedLoop || this.userPrefersLoop;\n  },\n  logLevel: \"warn\",\n  mediaType: \"unknown\",\n  muted: false,\n  paused: true,\n  played: new TimeRange(),\n  playing: false,\n  playsInline: false,\n  pictureInPicture: false,\n  preload: \"metadata\",\n  playbackRate: 1,\n  qualities: [],\n  quality: null,\n  autoQuality: false,\n  canSetQuality: true,\n  canSetPlaybackRate: true,\n  canSetVolume: false,\n  canSetAudioGain: false,\n  seekable: new TimeRange(),\n  seeking: false,\n  source: {\n    src: \"\",\n    type: \"\"\n  },\n  sources: [],\n  started: false,\n  textTracks: [],\n  textTrack: null,\n  get hasCaptions() {\n    return this.textTracks.filter(isTrackCaptionKind).length > 0;\n  },\n  volume: 1,\n  waiting: false,\n  realCurrentTime: 0,\n  get currentTime() {\n    return this.ended ? this.duration : this.clipStartTime > 0 ? Math.max(0, Math.min(this.realCurrentTime - this.clipStartTime, this.duration)) : this.realCurrentTime;\n  },\n  providedDuration: -1,\n  intrinsicDuration: 0,\n  get duration() {\n    return this.seekableWindow;\n  },\n  get title() {\n    return this.providedTitle || this.inferredTitle;\n  },\n  get poster() {\n    return this.providedPoster || this.inferredPoster;\n  },\n  get viewType() {\n    return this.providedViewType !== \"unknown\" ? this.providedViewType : this.inferredViewType;\n  },\n  get streamType() {\n    return this.providedStreamType !== \"unknown\" ? this.providedStreamType : this.inferredStreamType;\n  },\n  get currentSrc() {\n    return this.source;\n  },\n  get bufferedStart() {\n    const start = getTimeRangesStart(this.buffered) ?? 0;\n    return Math.max(start, this.clipStartTime);\n  },\n  get bufferedEnd() {\n    const end = getTimeRangesEnd(this.buffered) ?? 0;\n    return Math.min(this.seekableEnd, Math.max(0, end - this.clipStartTime));\n  },\n  get bufferedWindow() {\n    return Math.max(0, this.bufferedEnd - this.bufferedStart);\n  },\n  get seekableStart() {\n    if (this.isLiveDVR && this.liveDVRWindow > 0) {\n      return Math.max(0, this.seekableEnd - this.liveDVRWindow);\n    }\n    const start = getTimeRangesStart(this.seekable) ?? 0;\n    return Math.max(start, this.clipStartTime);\n  },\n  get seekableEnd() {\n    if (this.providedDuration > 0) return this.providedDuration;\n    const end = this.liveSyncPosition > 0 ? this.liveSyncPosition : this.canPlay ? getTimeRangesEnd(this.seekable) ?? Infinity : 0;\n    return this.clipEndTime > 0 ? Math.min(this.clipEndTime, end) : end;\n  },\n  get seekableWindow() {\n    const window = this.seekableEnd - this.seekableStart;\n    return !isNaN(window) ? Math.max(0, window) : Infinity;\n  },\n  // ~~ remote playback ~~\n  canAirPlay: false,\n  canGoogleCast: false,\n  remotePlaybackState: \"disconnected\",\n  remotePlaybackType: \"none\",\n  remotePlaybackLoader: null,\n  remotePlaybackInfo: null,\n  get isAirPlayConnected() {\n    return this.remotePlaybackType === \"airplay\" && this.remotePlaybackState === \"connected\";\n  },\n  get isGoogleCastConnected() {\n    return this.remotePlaybackType === \"google-cast\" && this.remotePlaybackState === \"connected\";\n  },\n  // ~~ responsive design ~~\n  pointer: \"fine\",\n  orientation: \"landscape\",\n  width: 0,\n  height: 0,\n  mediaWidth: 0,\n  mediaHeight: 0,\n  lastKeyboardAction: null,\n  // ~~ user props ~~\n  userBehindLiveEdge: false,\n  // ~~ live props ~~\n  liveEdgeTolerance: 10,\n  minLiveDVRWindow: 60,\n  get canSeek() {\n    return /unknown|on-demand|:dvr/.test(this.streamType) && Number.isFinite(this.duration) && (!this.isLiveDVR || this.duration >= this.liveDVRWindow);\n  },\n  get live() {\n    return this.streamType.includes(\"live\") || !Number.isFinite(this.duration);\n  },\n  get liveEdgeStart() {\n    return this.live && Number.isFinite(this.seekableEnd) ? Math.max(0, this.seekableEnd - this.liveEdgeTolerance) : 0;\n  },\n  get liveEdge() {\n    return this.live && (!this.canSeek || !this.userBehindLiveEdge && this.currentTime >= this.liveEdgeStart);\n  },\n  get liveEdgeWindow() {\n    return this.live && Number.isFinite(this.seekableEnd) ? this.seekableEnd - this.liveEdgeStart : 0;\n  },\n  get isLiveDVR() {\n    return /:dvr/.test(this.streamType);\n  },\n  get liveDVRWindow() {\n    return Math.max(this.inferredLiveDVRWindow, this.minLiveDVRWindow);\n  },\n  // ~~ internal props ~~\n  autoPlaying: false,\n  providedTitle: \"\",\n  inferredTitle: \"\",\n  providedLoop: false,\n  userPrefersLoop: false,\n  providedPoster: \"\",\n  inferredPoster: \"\",\n  inferredViewType: \"unknown\",\n  providedViewType: \"unknown\",\n  providedStreamType: \"unknown\",\n  inferredStreamType: \"unknown\",\n  liveSyncPosition: null,\n  inferredLiveDVRWindow: 0,\n  savedState: null\n});\nconst RESET_ON_SRC_QUALITY_CHANGE = /* @__PURE__ */new Set([\"autoPlayError\", \"autoPlaying\", \"buffered\", \"canPlay\", \"error\", \"paused\", \"played\", \"playing\", \"seekable\", \"seeking\", \"waiting\"]);\nconst RESET_ON_SRC_CHANGE = /* @__PURE__ */new Set([...RESET_ON_SRC_QUALITY_CHANGE, \"ended\", \"inferredPoster\", \"inferredStreamType\", \"inferredTitle\", \"intrinsicDuration\", \"inferredLiveDVRWindow\", \"liveSyncPosition\", \"realCurrentTime\", \"savedState\", \"started\", \"userBehindLiveEdge\"]);\nfunction softResetMediaState($media, isSourceQualityChange = false) {\n  const filter = isSourceQualityChange ? RESET_ON_SRC_QUALITY_CHANGE : RESET_ON_SRC_CHANGE;\n  mediaState.reset($media, prop => filter.has(prop));\n  tick();\n}\nfunction boundTime(time, store) {\n  const clippedTime = time + store.clipStartTime(),\n    isStart = Math.floor(time) === Math.floor(store.seekableStart()),\n    isEnd = Math.floor(clippedTime) === Math.floor(store.seekableEnd());\n  if (isStart) {\n    return store.seekableStart();\n  }\n  if (isEnd) {\n    return store.seekableEnd();\n  }\n  if (store.isLiveDVR() && store.liveDVRWindow() > 0 && clippedTime < store.seekableEnd() - store.liveDVRWindow()) {\n    return store.bufferedStart();\n  }\n  return Math.min(Math.max(store.seekableStart() + 0.1, clippedTime), store.seekableEnd() - 0.1);\n}\nconst mediaContext = createContext();\nfunction useMediaContext() {\n  return useContext(mediaContext);\n}\nconst GROUPED_LOG = Symbol(\"GROUPED_LOG\");\nclass GroupedLog {\n  constructor(logger, level, title, root, parent) {\n    this.logger = logger;\n    this.level = level;\n    this.title = title;\n    this.root = root;\n    this.parent = parent;\n  }\n  [GROUPED_LOG] = true;\n  logs = [];\n  log(...data) {\n    this.logs.push({\n      data\n    });\n    return this;\n  }\n  labelledLog(label, ...data) {\n    this.logs.push({\n      label,\n      data\n    });\n    return this;\n  }\n  groupStart(title) {\n    return new GroupedLog(this.logger, this.level, title, this.root ?? this, this);\n  }\n  groupEnd() {\n    this.parent?.logs.push(this);\n    return this.parent ?? this;\n  }\n  dispatch() {\n    return this.logger.dispatch(this.level, this.root ?? this);\n  }\n}\nfunction isGroupedLog(data) {\n  return !!data?.[GROUPED_LOG];\n}\nclass Logger {\n  #target = null;\n  error(...data) {\n    return this.dispatch(\"error\", ...data);\n  }\n  warn(...data) {\n    return this.dispatch(\"warn\", ...data);\n  }\n  info(...data) {\n    return this.dispatch(\"info\", ...data);\n  }\n  debug(...data) {\n    return this.dispatch(\"debug\", ...data);\n  }\n  errorGroup(title) {\n    return new GroupedLog(this, \"error\", title);\n  }\n  warnGroup(title) {\n    return new GroupedLog(this, \"warn\", title);\n  }\n  infoGroup(title) {\n    return new GroupedLog(this, \"info\", title);\n  }\n  debugGroup(title) {\n    return new GroupedLog(this, \"debug\", title);\n  }\n  setTarget(newTarget) {\n    this.#target = newTarget;\n  }\n  dispatch(level, ...data) {\n    return this.#target?.dispatchEvent(new DOMEvent(\"vds-log\", {\n      bubbles: true,\n      composed: true,\n      detail: {\n        level,\n        data\n      }\n    })) || false;\n  }\n}\nclass MediaRemoteControl {\n  #target = null;\n  #player = null;\n  #prevTrackIndex = -1;\n  #logger;\n  constructor(logger = new Logger()) {\n    this.#logger = logger;\n  }\n  /**\n   * Set the target from which to dispatch media requests events from. The events should bubble\n   * up from this target to the player element.\n   *\n   * @example\n   * ```ts\n   * const button = document.querySelector('button');\n   * remote.setTarget(button);\n   * ```\n   */\n  setTarget(target) {\n    this.#target = target;\n    this.#logger?.setTarget(target);\n  }\n  /**\n   * Returns the current player element. This method will attempt to find the player by\n   * searching up from either the given `target` or default target set via `remote.setTarget`.\n   *\n   * @example\n   * ```ts\n   * const player = remote.getPlayer();\n   * ```\n   */\n  getPlayer(target) {\n    if (this.#player) return this.#player;\n    (target ?? this.#target)?.dispatchEvent(new DOMEvent(\"find-media-player\", {\n      detail: player => void (this.#player = player),\n      bubbles: true,\n      composed: true\n    }));\n    return this.#player;\n  }\n  /**\n   * Set the current player element so the remote can support toggle methods such as\n   * `togglePaused` as they rely on the current media state.\n   */\n  setPlayer(player) {\n    this.#player = player;\n  }\n  /**\n   * Dispatch a request to start the media loading process. This will only work if the media\n   * player has been initialized with a custom loading strategy `load=\"custom\">`.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoading(trigger) {\n    this.#dispatchRequest(\"media-start-loading\", trigger);\n  }\n  /**\n   * Dispatch a request to start the poster loading process. This will only work if the media\n   * player has been initialized with a custom poster loading strategy `posterLoad=\"custom\">`.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoadingPoster(trigger) {\n    this.#dispatchRequest(\"media-poster-start-loading\", trigger);\n  }\n  /**\n   * Dispatch a request to connect to AirPlay.\n   *\n   * @see {@link https://www.apple.com/au/airplay}\n   */\n  requestAirPlay(trigger) {\n    this.#dispatchRequest(\"media-airplay-request\", trigger);\n  }\n  /**\n   * Dispatch a request to connect to Google Cast.\n   *\n   * @see {@link https://developers.google.com/cast/docs/overview}\n   */\n  requestGoogleCast(trigger) {\n    this.#dispatchRequest(\"media-google-cast-request\", trigger);\n  }\n  /**\n   * Dispatch a request to begin/resume media playback.\n   */\n  play(trigger) {\n    this.#dispatchRequest(\"media-play-request\", trigger);\n  }\n  /**\n   * Dispatch a request to pause media playback.\n   */\n  pause(trigger) {\n    this.#dispatchRequest(\"media-pause-request\", trigger);\n  }\n  /**\n   * Dispatch a request to set the media volume to mute (0).\n   */\n  mute(trigger) {\n    this.#dispatchRequest(\"media-mute-request\", trigger);\n  }\n  /**\n   * Dispatch a request to unmute the media volume and set it back to it's previous state.\n   */\n  unmute(trigger) {\n    this.#dispatchRequest(\"media-unmute-request\", trigger);\n  }\n  /**\n   * Dispatch a request to enter fullscreen.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  enterFullscreen(target, trigger) {\n    this.#dispatchRequest(\"media-enter-fullscreen-request\", trigger, target);\n  }\n  /**\n   * Dispatch a request to exit fullscreen.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  exitFullscreen(target, trigger) {\n    this.#dispatchRequest(\"media-exit-fullscreen-request\", trigger, target);\n  }\n  /**\n   * Dispatch a request to lock the screen orientation.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/screen-orientation#remote-control}\n   */\n  lockScreenOrientation(lockType, trigger) {\n    this.#dispatchRequest(\"media-orientation-lock-request\", trigger, lockType);\n  }\n  /**\n   * Dispatch a request to unlock the screen orientation.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/screen-orientation#remote-control}\n   */\n  unlockScreenOrientation(trigger) {\n    this.#dispatchRequest(\"media-orientation-unlock-request\", trigger);\n  }\n  /**\n   * Dispatch a request to enter picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  enterPictureInPicture(trigger) {\n    this.#dispatchRequest(\"media-enter-pip-request\", trigger);\n  }\n  /**\n   * Dispatch a request to exit picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  exitPictureInPicture(trigger) {\n    this.#dispatchRequest(\"media-exit-pip-request\", trigger);\n  }\n  /**\n   * Notify the media player that a seeking process is happening and to seek to the given `time`.\n   */\n  seeking(time, trigger) {\n    this.#dispatchRequest(\"media-seeking-request\", trigger, time);\n  }\n  /**\n   * Notify the media player that a seeking operation has completed and to seek to the given `time`.\n   * This is generally called after a series of `remote.seeking()` calls.\n   */\n  seek(time, trigger) {\n    this.#dispatchRequest(\"media-seek-request\", trigger, time);\n  }\n  seekToLiveEdge(trigger) {\n    this.#dispatchRequest(\"media-live-edge-request\", trigger);\n  }\n  /**\n   * Dispatch a request to update the length of the media in seconds.\n   *\n   * @example\n   * ```ts\n   * remote.changeDuration(100); // 100 seconds\n   * ```\n   */\n  changeDuration(duration, trigger) {\n    this.#dispatchRequest(\"media-duration-change-request\", trigger, duration);\n  }\n  /**\n   * Dispatch a request to update the clip start time. This is the time at which media playback\n   * should start at.\n   *\n   * @example\n   * ```ts\n   * remote.changeClipStart(100); // start at 100 seconds\n   * ```\n   */\n  changeClipStart(startTime, trigger) {\n    this.#dispatchRequest(\"media-clip-start-change-request\", trigger, startTime);\n  }\n  /**\n   * Dispatch a request to update the clip end time. This is the time at which media playback\n   * should end at.\n   *\n   * @example\n   * ```ts\n   * remote.changeClipEnd(100); // end at 100 seconds\n   * ```\n   */\n  changeClipEnd(endTime, trigger) {\n    this.#dispatchRequest(\"media-clip-end-change-request\", trigger, endTime);\n  }\n  /**\n   * Dispatch a request to update the media volume to the given `volume` level which is a value\n   * between 0 and 1.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/audio-gain#remote-control}\n   * @example\n   * ```ts\n   * remote.changeVolume(0); // 0%\n   * remote.changeVolume(0.05); // 5%\n   * remote.changeVolume(0.5); // 50%\n   * remote.changeVolume(0.75); // 70%\n   * remote.changeVolume(1); // 100%\n   * ```\n   */\n  changeVolume(volume, trigger) {\n    this.#dispatchRequest(\"media-volume-change-request\", trigger, Math.max(0, Math.min(1, volume)));\n  }\n  /**\n   * Dispatch a request to change the current audio track.\n   *\n   * @example\n   * ```ts\n   * remote.changeAudioTrack(1); // track at index 1\n   * ```\n   */\n  changeAudioTrack(index, trigger) {\n    this.#dispatchRequest(\"media-audio-track-change-request\", trigger, index);\n  }\n  /**\n   * Dispatch a request to change the video quality. The special value `-1` represents auto quality\n   * selection.\n   *\n   * @example\n   * ```ts\n   * remote.changeQuality(-1); // auto\n   * remote.changeQuality(1); // quality at index 1\n   * ```\n   */\n  changeQuality(index, trigger) {\n    this.#dispatchRequest(\"media-quality-change-request\", trigger, index);\n  }\n  /**\n   * Request auto quality selection.\n   */\n  requestAutoQuality(trigger) {\n    this.changeQuality(-1, trigger);\n  }\n  /**\n   * Dispatch a request to change the mode of the text track at the given index.\n   *\n   * @example\n   * ```ts\n   * remote.changeTextTrackMode(1, 'showing'); // track at index 1\n   * ```\n   */\n  changeTextTrackMode(index, mode, trigger) {\n    this.#dispatchRequest(\"media-text-track-change-request\", trigger, {\n      index,\n      mode\n    });\n  }\n  /**\n   * Dispatch a request to change the media playback rate.\n   *\n   * @example\n   * ```ts\n   * remote.changePlaybackRate(0.5); // Half the normal speed\n   * remote.changePlaybackRate(1); // Normal speed\n   * remote.changePlaybackRate(1.5); // 50% faster than normal\n   * remote.changePlaybackRate(2); // Double the normal speed\n   * ```\n   */\n  changePlaybackRate(rate, trigger) {\n    this.#dispatchRequest(\"media-rate-change-request\", trigger, rate);\n  }\n  /**\n   * Dispatch a request to change the media audio gain.\n   *\n   * @example\n   * ```ts\n   * remote.changeAudioGain(1); // Disable audio gain\n   * remote.changeAudioGain(1.5); // 50% louder\n   * remote.changeAudioGain(2); // 100% louder\n   * ```\n   */\n  changeAudioGain(gain, trigger) {\n    this.#dispatchRequest(\"media-audio-gain-change-request\", trigger, gain);\n  }\n  /**\n   * Dispatch a request to resume idle tracking on controls.\n   */\n  resumeControls(trigger) {\n    this.#dispatchRequest(\"media-resume-controls-request\", trigger);\n  }\n  /**\n   * Dispatch a request to pause controls idle tracking. Pausing tracking will result in the\n   * controls being visible until `remote.resumeControls()` is called. This method\n   * is generally used when building custom controls and you'd like to prevent the UI from\n   * disappearing.\n   *\n   * @example\n   * ```ts\n   * // Prevent controls hiding while menu is being interacted with.\n   * function onSettingsOpen() {\n   *   remote.pauseControls();\n   * }\n   *\n   * function onSettingsClose() {\n   *   remote.resumeControls();\n   * }\n   * ```\n   */\n  pauseControls(trigger) {\n    this.#dispatchRequest(\"media-pause-controls-request\", trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media playback state.\n   */\n  togglePaused(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.togglePaused.name);\n      return;\n    }\n    if (player.state.paused) this.play(trigger);else this.pause(trigger);\n  }\n  /**\n   * Dispatch a request to toggle the controls visibility.\n   */\n  toggleControls(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleControls.name);\n      return;\n    }\n    if (!player.controls.showing) {\n      player.controls.show(0, trigger);\n    } else {\n      player.controls.hide(0, trigger);\n    }\n  }\n  /**\n   * Dispatch a request to toggle the media muted state.\n   */\n  toggleMuted(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleMuted.name);\n      return;\n    }\n    if (player.state.muted) this.unmute(trigger);else this.mute(trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media fullscreen state.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  toggleFullscreen(target, trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleFullscreen.name);\n      return;\n    }\n    if (player.state.fullscreen) this.exitFullscreen(target, trigger);else this.enterFullscreen(target, trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  togglePictureInPicture(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.togglePictureInPicture.name);\n      return;\n    }\n    if (player.state.pictureInPicture) this.exitPictureInPicture(trigger);else this.enterPictureInPicture(trigger);\n  }\n  /**\n   * Show captions.\n   */\n  showCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.showCaptions.name);\n      return;\n    }\n    let tracks = player.state.textTracks,\n      index = this.#prevTrackIndex;\n    if (!tracks[index] || !isTrackCaptionKind(tracks[index])) {\n      index = -1;\n    }\n    if (index === -1) {\n      index = tracks.findIndex(track => isTrackCaptionKind(track) && track.default);\n    }\n    if (index === -1) {\n      index = tracks.findIndex(track => isTrackCaptionKind(track));\n    }\n    if (index >= 0) this.changeTextTrackMode(index, \"showing\", trigger);\n    this.#prevTrackIndex = -1;\n  }\n  /**\n   * Turn captions off.\n   */\n  disableCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.disableCaptions.name);\n      return;\n    }\n    const tracks = player.state.textTracks,\n      track = player.state.textTrack;\n    if (track) {\n      const index = tracks.indexOf(track);\n      this.changeTextTrackMode(index, \"disabled\", trigger);\n      this.#prevTrackIndex = index;\n    }\n  }\n  /**\n   * Dispatch a request to toggle the current captions mode.\n   */\n  toggleCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleCaptions.name);\n      return;\n    }\n    if (player.state.textTrack) {\n      this.disableCaptions();\n    } else {\n      this.showCaptions();\n    }\n  }\n  userPrefersLoopChange(prefersLoop, trigger) {\n    this.#dispatchRequest(\"media-user-loop-change-request\", trigger, prefersLoop);\n  }\n  #dispatchRequest(type, trigger, detail) {\n    const request = new DOMEvent(type, {\n      bubbles: true,\n      composed: true,\n      cancelable: true,\n      detail,\n      trigger\n    });\n    let target = trigger?.target || null;\n    if (target && target instanceof Component) target = target.el;\n    const shouldUsePlayer = !target || target === document || target === window || target === document.body || this.#player?.el && target instanceof Node && !this.#player.el.contains(target);\n    target = shouldUsePlayer ? this.#target ?? this.getPlayer()?.el : target ?? this.#target;\n    {\n      this.#logger?.debugGroup(`\\u{1F4E8} dispatching \\`${type}\\``).labelledLog(\"Target\", target).labelledLog(\"Player\", this.#player).labelledLog(\"Request Event\", request).labelledLog(\"Trigger Event\", trigger).dispatch();\n    }\n    if (this.#player) {\n      if (type === \"media-play-request\" && !this.#player.state.canLoad) {\n        target?.dispatchEvent(request);\n      } else {\n        this.#player.canPlayQueue.enqueue(type, () => target?.dispatchEvent(request));\n      }\n    } else {\n      target?.dispatchEvent(request);\n    }\n  }\n  #noPlayerWarning(method) {\n    {\n      console.warn(`[vidstack] attempted to call \\`MediaRemoteControl.${method}\\`() that requires player but failed because remote could not find a parent player element from target`);\n    }\n  }\n}\nclass LocalMediaStorage {\n  playerId = \"vds-player\";\n  mediaId = null;\n  #data = {\n    volume: null,\n    muted: null,\n    audioGain: null,\n    time: null,\n    lang: null,\n    captions: null,\n    rate: null,\n    quality: null\n  };\n  async getVolume() {\n    return this.#data.volume;\n  }\n  async setVolume(volume) {\n    this.#data.volume = volume;\n    this.save();\n  }\n  async getMuted() {\n    return this.#data.muted;\n  }\n  async setMuted(muted) {\n    this.#data.muted = muted;\n    this.save();\n  }\n  async getTime() {\n    return this.#data.time;\n  }\n  async setTime(time, ended) {\n    const shouldClear = time < 0;\n    this.#data.time = !shouldClear ? time : null;\n    if (shouldClear || ended) this.saveTime();else this.saveTimeThrottled();\n  }\n  async getLang() {\n    return this.#data.lang;\n  }\n  async setLang(lang) {\n    this.#data.lang = lang;\n    this.save();\n  }\n  async getCaptions() {\n    return this.#data.captions;\n  }\n  async setCaptions(enabled) {\n    this.#data.captions = enabled;\n    this.save();\n  }\n  async getPlaybackRate() {\n    return this.#data.rate;\n  }\n  async setPlaybackRate(rate) {\n    this.#data.rate = rate;\n    this.save();\n  }\n  async getAudioGain() {\n    return this.#data.audioGain;\n  }\n  async setAudioGain(gain) {\n    this.#data.audioGain = gain;\n    this.save();\n  }\n  async getVideoQuality() {\n    return this.#data.quality;\n  }\n  async setVideoQuality(quality) {\n    this.#data.quality = quality;\n    this.save();\n  }\n  onChange(src, mediaId, playerId = \"vds-player\") {\n    const savedData = playerId ? localStorage.getItem(playerId) : null,\n      savedTime = mediaId ? localStorage.getItem(mediaId) : null;\n    this.playerId = playerId;\n    this.mediaId = mediaId;\n    this.#data = {\n      volume: null,\n      muted: null,\n      audioGain: null,\n      lang: null,\n      captions: null,\n      rate: null,\n      quality: null,\n      ...(savedData ? JSON.parse(savedData) : {}),\n      time: savedTime ? +savedTime : null\n    };\n  }\n  save() {\n    if (IS_SERVER || !this.playerId) return;\n    const data = JSON.stringify({\n      ...this.#data,\n      time: void 0\n    });\n    localStorage.setItem(this.playerId, data);\n  }\n  saveTimeThrottled = functionThrottle(this.saveTime.bind(this), 1e3);\n  saveTime() {\n    if (IS_SERVER || !this.mediaId) return;\n    const data = (this.#data.time ?? 0).toString();\n    localStorage.setItem(this.mediaId, data);\n  }\n}\nconst ADD = Symbol(\"LIST_ADD\"),\n  REMOVE = Symbol(\"LIST_REMOVE\"),\n  RESET = Symbol(\"LIST_RESET\"),\n  SELECT = Symbol(\"LIST_SELECT\"),\n  READONLY = Symbol(\"LIST_READONLY\"),\n  SET_READONLY = Symbol(\"LIST_SET_READONLY\"),\n  ON_RESET = Symbol(\"LIST_ON_RESET\"),\n  ON_REMOVE = Symbol(\"LIST_ON_REMOVE\"),\n  ON_USER_SELECT = Symbol(\"LIST_ON_USER_SELECT\");\nconst ListSymbol = {\n  add: ADD,\n  remove: REMOVE,\n  reset: RESET,\n  select: SELECT,\n  readonly: READONLY,\n  setReadonly: SET_READONLY,\n  onReset: ON_RESET,\n  onRemove: ON_REMOVE,\n  onUserSelect: ON_USER_SELECT\n};\nclass List extends EventsTarget {\n  items = [];\n  /** @internal */\n  [ListSymbol.readonly] = false;\n  get length() {\n    return this.items.length;\n  }\n  get readonly() {\n    return this[ListSymbol.readonly];\n  }\n  /**\n   * Returns the index of the first occurrence of the given item, or -1 if it is not present.\n   */\n  indexOf(item) {\n    return this.items.indexOf(item);\n  }\n  /**\n   * Returns an item matching the given `id`, or `null` if not present.\n   */\n  getById(id) {\n    if (id === \"\") return null;\n    return this.items.find(item => item.id === id) ?? null;\n  }\n  /**\n   * Transform list to an array.\n   */\n  toArray() {\n    return [...this.items];\n  }\n  [Symbol.iterator]() {\n    return this.items.values();\n  }\n  /** @internal */\n  [ListSymbol.add](item, trigger) {\n    const index = this.items.length;\n    if (!(\"\" + index in this)) {\n      Object.defineProperty(this, index, {\n        get() {\n          return this.items[index];\n        }\n      });\n    }\n    if (this.items.includes(item)) return;\n    this.items.push(item);\n    this.dispatchEvent(new DOMEvent(\"add\", {\n      detail: item,\n      trigger\n    }));\n  }\n  /** @internal */\n  [ListSymbol.remove](item, trigger) {\n    const index = this.items.indexOf(item);\n    if (index >= 0) {\n      this[ListSymbol.onRemove]?.(item, trigger);\n      this.items.splice(index, 1);\n      this.dispatchEvent(new DOMEvent(\"remove\", {\n        detail: item,\n        trigger\n      }));\n    }\n  }\n  /** @internal */\n  [ListSymbol.reset](trigger) {\n    for (const item of [...this.items]) this[ListSymbol.remove](item, trigger);\n    this.items = [];\n    this[ListSymbol.setReadonly](false, trigger);\n    this[ListSymbol.onReset]?.();\n  }\n  /** @internal */\n  [ListSymbol.setReadonly](readonly, trigger) {\n    if (this[ListSymbol.readonly] === readonly) return;\n    this[ListSymbol.readonly] = readonly;\n    this.dispatchEvent(new DOMEvent(\"readonly-change\", {\n      detail: readonly,\n      trigger\n    }));\n  }\n}\nconst SELECTED = Symbol(\"SELECTED\");\nclass SelectList extends List {\n  get selected() {\n    return this.items.find(item => item.selected) ?? null;\n  }\n  get selectedIndex() {\n    return this.items.findIndex(item => item.selected);\n  }\n  /** @internal */\n  [ListSymbol.onRemove](item, trigger) {\n    this[ListSymbol.select](item, false, trigger);\n  }\n  /** @internal */\n  [ListSymbol.add](item, trigger) {\n    item[SELECTED] = false;\n    Object.defineProperty(item, \"selected\", {\n      get() {\n        return this[SELECTED];\n      },\n      set: selected => {\n        if (this.readonly) return;\n        this[ListSymbol.onUserSelect]?.();\n        this[ListSymbol.select](item, selected);\n      }\n    });\n    super[ListSymbol.add](item, trigger);\n  }\n  /** @internal */\n  [ListSymbol.select](item, selected, trigger) {\n    if (selected === item?.[SELECTED]) return;\n    const prev = this.selected;\n    if (item) item[SELECTED] = selected;\n    const changed = !selected ? prev === item : prev !== item;\n    if (changed) {\n      if (prev) prev[SELECTED] = false;\n      this.dispatchEvent(new DOMEvent(\"change\", {\n        detail: {\n          prev,\n          current: this.selected\n        },\n        trigger\n      }));\n    }\n  }\n}\nclass AudioTrackList extends SelectList {}\nfunction round(num, decimalPlaces = 2) {\n  return Number(num.toFixed(decimalPlaces));\n}\nfunction getNumberOfDecimalPlaces(num) {\n  return String(num).split(\".\")[1]?.length ?? 0;\n}\nfunction clampNumber(min, value, max) {\n  return Math.max(min, Math.min(max, value));\n}\nfunction isEventInside(el, event) {\n  const target = event.composedPath()[0];\n  return isDOMNode(target) && el.contains(target);\n}\nconst rafJobs = /* @__PURE__ */new Set();\nif (!IS_SERVER) {\n  let processJobs = function () {\n    for (const job of rafJobs) {\n      try {\n        job();\n      } catch (e) {\n        console.error(`[vidstack] failed job:\n\n${e}`);\n      }\n    }\n    window.requestAnimationFrame(processJobs);\n  };\n  processJobs();\n}\nfunction scheduleRafJob(job) {\n  rafJobs.add(job);\n  return () => rafJobs.delete(job);\n}\nfunction setAttributeIfEmpty(target, name, value) {\n  if (!target.hasAttribute(name)) target.setAttribute(name, value);\n}\nfunction setARIALabel(target, $label) {\n  if (target.hasAttribute(\"aria-label\") || target.hasAttribute(\"data-no-label\")) return;\n  if (!isFunction($label)) {\n    setAttribute(target, \"aria-label\", $label);\n    return;\n  }\n  function updateAriaDescription() {\n    setAttribute(target, \"aria-label\", $label());\n  }\n  if (IS_SERVER) updateAriaDescription();else effect(updateAriaDescription);\n}\nfunction isElementVisible(el) {\n  const style = getComputedStyle(el);\n  return style.display !== \"none\" && parseInt(style.opacity) > 0;\n}\nfunction checkVisibility(el) {\n  return !!el && (\"checkVisibility\" in el ? el.checkVisibility({\n    checkOpacity: true,\n    checkVisibilityCSS: true\n  }) : isElementVisible(el));\n}\nfunction observeVisibility(el, callback) {\n  return scheduleRafJob(() => callback(checkVisibility(el)));\n}\nfunction isElementParent(owner, node, test) {\n  while (node) {\n    if (node === owner) {\n      return true;\n    } else if (test?.(node)) {\n      break;\n    } else {\n      node = node.parentElement;\n    }\n  }\n  return false;\n}\nfunction onPress(target, handler) {\n  return new EventsController(target).add(\"pointerup\", event => {\n    if (event.button === 0 && !event.defaultPrevented) handler(event);\n  }).add(\"keydown\", event => {\n    if (isKeyboardClick(event)) handler(event);\n  });\n}\nfunction isTouchPinchEvent(event) {\n  return isTouchEvent(event) && (event.touches.length > 1 || event.changedTouches.length > 1);\n}\nfunction requestScopedAnimationFrame(callback) {\n  if (IS_SERVER) return callback();\n  let scope = getScope(),\n    id = window.requestAnimationFrame(() => {\n      scoped(callback, scope);\n      id = -1;\n    });\n  return () => void window.cancelAnimationFrame(id);\n}\nfunction autoPlacement(el, trigger, placement, {\n  offsetVarName,\n  xOffset,\n  yOffset,\n  ...options\n}) {\n  if (!el) return;\n  const floatingPlacement = placement.replace(\" \", \"-\").replace(\"-center\", \"\");\n  setStyle(el, \"visibility\", !trigger ? \"hidden\" : null);\n  if (!trigger) return;\n  let isTop = placement.includes(\"top\");\n  const negateX = x => placement.includes(\"left\") ? `calc(-1 * ${x})` : x,\n    negateY = y => isTop ? `calc(-1 * ${y})` : y;\n  return autoUpdate(trigger, el, () => {\n    computePosition(trigger, el, {\n      placement: floatingPlacement,\n      middleware: [...(options.middleware ?? []), flip({\n        fallbackAxisSideDirection: \"start\",\n        crossAxis: false\n      }), shift()],\n      ...options\n    }).then(({\n      x,\n      y,\n      middlewareData\n    }) => {\n      const hasFlipped = !!middlewareData.flip?.index;\n      isTop = placement.includes(hasFlipped ? \"bottom\" : \"top\");\n      el.setAttribute(\"data-placement\", hasFlipped ? placement.startsWith(\"top\") ? placement.replace(\"top\", \"bottom\") : placement.replace(\"bottom\", \"top\") : placement);\n      Object.assign(el.style, {\n        top: `calc(${y + \"px\"} + ${negateY(yOffset ? yOffset + \"px\" : `var(--${offsetVarName}-y-offset, 0px)`)})`,\n        left: `calc(${x + \"px\"} + ${negateX(xOffset ? xOffset + \"px\" : `var(--${offsetVarName}-x-offset, 0px)`)})`\n      });\n    });\n  });\n}\nfunction hasAnimation(el) {\n  const styles = getComputedStyle(el);\n  return styles.animationName !== \"none\";\n}\nfunction isHTMLElement(el) {\n  return el instanceof HTMLElement;\n}\nclass NativeTextRenderer {\n  priority = 0;\n  #display = true;\n  #video = null;\n  #track = null;\n  #tracks = /* @__PURE__ */new Set();\n  canRender(_, video) {\n    return !!video;\n  }\n  attach(video) {\n    this.#video = video;\n    if (video) video.textTracks.onchange = this.#onChange.bind(this);\n  }\n  addTrack(track) {\n    this.#tracks.add(track);\n    this.#attachTrack(track);\n  }\n  removeTrack(track) {\n    track[TextTrackSymbol.native]?.remove?.();\n    track[TextTrackSymbol.native] = null;\n    this.#tracks.delete(track);\n  }\n  changeTrack(track) {\n    const current = track?.[TextTrackSymbol.native];\n    if (current && current.track.mode !== \"showing\") {\n      current.track.mode = \"showing\";\n    }\n    this.#track = track;\n  }\n  setDisplay(display) {\n    this.#display = display;\n    this.#onChange();\n  }\n  detach() {\n    if (this.#video) this.#video.textTracks.onchange = null;\n    for (const track of this.#tracks) this.removeTrack(track);\n    this.#tracks.clear();\n    this.#video = null;\n    this.#track = null;\n  }\n  #attachTrack(track) {\n    if (!this.#video) return;\n    const el = track[TextTrackSymbol.native] ??= this.#createTrackElement(track);\n    if (isHTMLElement(el)) {\n      this.#video.append(el);\n      el.track.mode = el.default ? \"showing\" : \"disabled\";\n    }\n  }\n  #createTrackElement(track) {\n    const el = document.createElement(\"track\"),\n      isDefault = track.default || track.mode === \"showing\",\n      isSupported = track.src && track.type === \"vtt\";\n    el.id = track.id;\n    el.src = isSupported ? track.src : \"\";\n    el.label = track.label;\n    el.kind = track.kind;\n    el.default = isDefault;\n    track.language && (el.srclang = track.language);\n    if (isDefault && !isSupported) {\n      this.#copyCues(track, el.track);\n    }\n    return el;\n  }\n  #copyCues(track, native) {\n    if (track.src && track.type === \"vtt\" || native.cues?.length) return;\n    for (const cue of track.cues) native.addCue(cue);\n  }\n  #onChange(event) {\n    for (const track of this.#tracks) {\n      const native = track[TextTrackSymbol.native];\n      if (!native) continue;\n      if (!this.#display) {\n        native.track.mode = native.managed ? \"hidden\" : \"disabled\";\n        continue;\n      }\n      const isShowing = native.track.mode === \"showing\";\n      if (isShowing) this.#copyCues(track, native.track);\n      track.setMode(isShowing ? \"showing\" : \"disabled\", event);\n    }\n  }\n}\nclass TextRenderers {\n  #video = null;\n  #textTracks;\n  #renderers = [];\n  #media;\n  #nativeDisplay = false;\n  #nativeRenderer = null;\n  #customRenderer = null;\n  constructor(media) {\n    this.#media = media;\n    const textTracks = media.textTracks;\n    this.#textTracks = textTracks;\n    effect(this.#watchControls.bind(this));\n    onDispose(this.#detach.bind(this));\n    new EventsController(textTracks).add(\"add\", this.#onAddTrack.bind(this)).add(\"remove\", this.#onRemoveTrack.bind(this)).add(\"mode-change\", this.#update.bind(this));\n  }\n  #watchControls() {\n    const {\n      nativeControls\n    } = this.#media.$state;\n    this.#nativeDisplay = nativeControls();\n    this.#update();\n  }\n  add(renderer) {\n    this.#renderers.push(renderer);\n    untrack(this.#update.bind(this));\n  }\n  remove(renderer) {\n    renderer.detach();\n    this.#renderers.splice(this.#renderers.indexOf(renderer), 1);\n    untrack(this.#update.bind(this));\n  }\n  /** @internal */\n  attachVideo(video) {\n    requestAnimationFrame(() => {\n      this.#video = video;\n      if (video) {\n        this.#nativeRenderer = new NativeTextRenderer();\n        this.#nativeRenderer.attach(video);\n        for (const track of this.#textTracks) this.#addNativeTrack(track);\n      }\n      this.#update();\n    });\n  }\n  #addNativeTrack(track) {\n    if (!isTrackCaptionKind(track)) return;\n    this.#nativeRenderer?.addTrack(track);\n  }\n  #removeNativeTrack(track) {\n    if (!isTrackCaptionKind(track)) return;\n    this.#nativeRenderer?.removeTrack(track);\n  }\n  #onAddTrack(event) {\n    this.#addNativeTrack(event.detail);\n  }\n  #onRemoveTrack(event) {\n    this.#removeNativeTrack(event.detail);\n  }\n  #update() {\n    const currentTrack = this.#textTracks.selected;\n    if (this.#video && (this.#nativeDisplay || currentTrack?.[TextTrackSymbol.nativeHLS])) {\n      this.#customRenderer?.changeTrack(null);\n      this.#nativeRenderer?.setDisplay(true);\n      this.#nativeRenderer?.changeTrack(currentTrack);\n      return;\n    }\n    this.#nativeRenderer?.setDisplay(false);\n    this.#nativeRenderer?.changeTrack(null);\n    if (!currentTrack) {\n      this.#customRenderer?.changeTrack(null);\n      return;\n    }\n    const customRenderer = this.#renderers.sort((a, b) => a.priority - b.priority).find(renderer => renderer.canRender(currentTrack, this.#video));\n    if (this.#customRenderer !== customRenderer) {\n      this.#customRenderer?.detach();\n      customRenderer?.attach(this.#video);\n      this.#customRenderer = customRenderer ?? null;\n    }\n    customRenderer?.changeTrack(currentTrack);\n  }\n  #detach() {\n    this.#nativeRenderer?.detach();\n    this.#nativeRenderer = null;\n    this.#customRenderer?.detach();\n    this.#customRenderer = null;\n  }\n}\nclass TextTrackList extends List {\n  #canLoad = false;\n  #defaults = {};\n  #storage = null;\n  #preferredLang = null;\n  /** @internal */\n  [TextTrackSymbol.crossOrigin];\n  constructor() {\n    super();\n  }\n  get selected() {\n    const track = this.items.find(t => t.mode === \"showing\" && isTrackCaptionKind(t));\n    return track ?? null;\n  }\n  get selectedIndex() {\n    const selected = this.selected;\n    return selected ? this.indexOf(selected) : -1;\n  }\n  get preferredLang() {\n    return this.#preferredLang;\n  }\n  set preferredLang(lang) {\n    this.#preferredLang = lang;\n    this.#saveLang(lang);\n  }\n  add(init, trigger) {\n    const isTrack = init instanceof TextTrack,\n      track = isTrack ? init : new TextTrack(init),\n      kind = init.kind === \"captions\" || init.kind === \"subtitles\" ? \"captions\" : init.kind;\n    if (this.#defaults[kind] && init.default) delete init.default;\n    track.addEventListener(\"mode-change\", this.#onTrackModeChangeBind);\n    this[ListSymbol.add](track, trigger);\n    track[TextTrackSymbol.crossOrigin] = this[TextTrackSymbol.crossOrigin];\n    if (this.#canLoad) track[TextTrackSymbol.canLoad]();\n    if (init.default) this.#defaults[kind] = track;\n    this.#selectTracks();\n    return this;\n  }\n  remove(track, trigger) {\n    this.#pendingRemoval = track;\n    if (!this.items.includes(track)) return;\n    if (track === this.#defaults[track.kind]) delete this.#defaults[track.kind];\n    track.mode = \"disabled\";\n    track[TextTrackSymbol.onModeChange] = null;\n    track.removeEventListener(\"mode-change\", this.#onTrackModeChangeBind);\n    this[ListSymbol.remove](track, trigger);\n    this.#pendingRemoval = null;\n    return this;\n  }\n  clear(trigger) {\n    for (const track of [...this.items]) {\n      this.remove(track, trigger);\n    }\n    return this;\n  }\n  getByKind(kind) {\n    const kinds = Array.isArray(kind) ? kind : [kind];\n    return this.items.filter(track => kinds.includes(track.kind));\n  }\n  /** @internal */\n  [TextTrackSymbol.canLoad]() {\n    if (this.#canLoad) return;\n    for (const track of this.items) track[TextTrackSymbol.canLoad]();\n    this.#canLoad = true;\n    this.#selectTracks();\n  }\n  #selectTracks = functionDebounce(async () => {\n    if (!this.#canLoad) return;\n    if (!this.#preferredLang && this.#storage) {\n      this.#preferredLang = await this.#storage.getLang();\n    }\n    const showCaptions = await this.#storage?.getCaptions(),\n      kinds = [[\"captions\", \"subtitles\"], \"chapters\", \"descriptions\", \"metadata\"];\n    for (const kind of kinds) {\n      const tracks = this.getByKind(kind);\n      if (tracks.find(t => t.mode === \"showing\")) continue;\n      const preferredTrack = this.#preferredLang ? tracks.find(track2 => track2.language === this.#preferredLang) : null;\n      const defaultTrack = isArray(kind) ? this.#defaults[kind.find(kind2 => this.#defaults[kind2]) || \"\"] : this.#defaults[kind];\n      const track = preferredTrack ?? defaultTrack,\n        isCaptionsKind = track && isTrackCaptionKind(track);\n      if (track && (!isCaptionsKind || showCaptions !== false)) {\n        track.mode = \"showing\";\n        if (isCaptionsKind) this.#saveCaptionsTrack(track);\n      }\n    }\n  }, 300);\n  #pendingRemoval = null;\n  #onTrackModeChangeBind = this.#onTrackModeChange.bind(this);\n  #onTrackModeChange(event) {\n    const track = event.detail;\n    if (this.#storage && isTrackCaptionKind(track) && track !== this.#pendingRemoval) {\n      this.#saveCaptionsTrack(track);\n    }\n    if (track.mode === \"showing\") {\n      const kinds = isTrackCaptionKind(track) ? [\"captions\", \"subtitles\"] : [track.kind];\n      for (const t of this.items) {\n        if (t.mode === \"showing\" && t != track && kinds.includes(t.kind)) {\n          t.mode = \"disabled\";\n        }\n      }\n    }\n    this.dispatchEvent(new DOMEvent(\"mode-change\", {\n      detail: event.detail,\n      trigger: event\n    }));\n  }\n  #saveCaptionsTrack(track) {\n    if (track.mode !== \"disabled\") {\n      this.#saveLang(track.language);\n    }\n    this.#storage?.setCaptions?.(track.mode === \"showing\");\n  }\n  #saveLang(lang) {\n    this.#storage?.setLang?.(this.#preferredLang = lang);\n  }\n  setStorage(storage) {\n    this.#storage = storage;\n  }\n}\nconst SET_AUTO = Symbol(\"SET_AUTO_QUALITY\"),\n  ENABLE_AUTO = Symbol(\"ENABLE_AUTO_QUALITY\");\nconst QualitySymbol = {\n  setAuto: SET_AUTO,\n  enableAuto: ENABLE_AUTO\n};\nclass VideoQualityList extends SelectList {\n  #auto = false;\n  /**\n   * Configures quality switching:\n   *\n   * - `current`: Trigger an immediate quality level switch. This will abort the current fragment\n   * request if any, flush the whole buffer, and fetch fragment matching with current position\n   * and requested quality level.\n   *\n   * - `next`: Trigger a quality level switch for next fragment. This could eventually flush\n   * already buffered next fragment.\n   *\n   * - `load`: Set quality level for next loaded fragment.\n   *\n   * @see {@link https://www.vidstack.io/docs/player/api/video-quality#switch}\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#quality-switch-control-api}\n   */\n  switch = \"current\";\n  /**\n   * Whether automatic quality selection is enabled.\n   */\n  get auto() {\n    return this.#auto || this.readonly;\n  }\n  /** @internal */\n  [QualitySymbol.enableAuto];\n  /** @internal */\n  [ListSymbol.onUserSelect]() {\n    this[QualitySymbol.setAuto](false);\n  }\n  /** @internal */\n  [ListSymbol.onReset](trigger) {\n    this[QualitySymbol.enableAuto] = void 0;\n    this[QualitySymbol.setAuto](false, trigger);\n  }\n  /**\n   * Request automatic quality selection (if supported). This will be a no-op if the list is\n   * `readonly` as that already implies auto-selection.\n   */\n  autoSelect(trigger) {\n    if (this.readonly || this.#auto || !this[QualitySymbol.enableAuto]) return;\n    this[QualitySymbol.enableAuto]?.(trigger);\n    this[QualitySymbol.setAuto](true, trigger);\n  }\n  getBySrc(src) {\n    return this.items.find(quality => quality.src === src);\n  }\n  /** @internal */\n  [QualitySymbol.setAuto](auto, trigger) {\n    if (this.#auto === auto) return;\n    this.#auto = auto;\n    this.dispatchEvent(new DOMEvent(\"auto-change\", {\n      detail: auto,\n      trigger\n    }));\n  }\n}\nfunction sortVideoQualities(qualities, desc) {\n  return [...qualities].sort(desc ? compareVideoQualityDesc : compareVideoQualityAsc);\n}\nfunction compareVideoQualityAsc(a, b) {\n  return a.height === b.height ? (a.bitrate ?? 0) - (b.bitrate ?? 0) : a.height - b.height;\n}\nfunction compareVideoQualityDesc(a, b) {\n  return b.height === a.height ? (b.bitrate ?? 0) - (a.bitrate ?? 0) : b.height - a.height;\n}\nfunction isAudioProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"AUDIO\";\n}\nfunction isVideoProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"VIDEO\";\n}\nfunction isHLSProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"HLS\";\n}\nfunction isDASHProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"DASH\";\n}\nfunction isYouTubeProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"YOUTUBE\";\n}\nfunction isVimeoProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"VIMEO\";\n}\nfunction isGoogleCastProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"GOOGLE_CAST\";\n}\nfunction isHTMLAudioElement(element) {\n  return !IS_SERVER && element instanceof HTMLAudioElement;\n}\nfunction isHTMLVideoElement(element) {\n  return !IS_SERVER && element instanceof HTMLVideoElement;\n}\nfunction isHTMLMediaElement(element) {\n  return isHTMLAudioElement(element) || isHTMLVideoElement(element);\n}\nfunction isHTMLIFrameElement(element) {\n  return !IS_SERVER && element instanceof HTMLIFrameElement;\n}\nclass MediaPlayerController extends ViewController {}\nconst MEDIA_KEY_SHORTCUTS = {\n  togglePaused: \"k Space\",\n  toggleMuted: \"m\",\n  toggleFullscreen: \"f\",\n  togglePictureInPicture: \"i\",\n  toggleCaptions: \"c\",\n  seekBackward: \"j J ArrowLeft\",\n  seekForward: \"l L ArrowRight\",\n  volumeUp: \"ArrowUp\",\n  volumeDown: \"ArrowDown\",\n  speedUp: \">\",\n  slowDown: \"<\"\n};\nconst MODIFIER_KEYS = /* @__PURE__ */new Set([\"Shift\", \"Alt\", \"Meta\", \"Ctrl\"]),\n  BUTTON_SELECTORS = 'button, [role=\"button\"]',\n  IGNORE_SELECTORS = 'input, textarea, select, [contenteditable], [role^=\"menuitem\"], [role=\"timer\"]';\nclass MediaKeyboardController extends MediaPlayerController {\n  #media;\n  constructor(media) {\n    super();\n    this.#media = media;\n  }\n  onConnect() {\n    effect(this.#onTargetChange.bind(this));\n  }\n  #onTargetChange() {\n    const {\n      keyDisabled,\n      keyTarget\n    } = this.$props;\n    if (keyDisabled()) return;\n    const target = keyTarget() === \"player\" ? this.el : document,\n      $active = signal(false);\n    if (target === this.el) {\n      new EventsController(this.el).add(\"focusin\", () => $active.set(true)).add(\"focusout\", event => {\n        if (!this.el.contains(event.target)) $active.set(false);\n      });\n    } else {\n      if (!peek($active)) $active.set(document.querySelector(\"[data-media-player]\") === this.el);\n      listenEvent(document, \"focusin\", event => {\n        const activePlayer = event.composedPath().find(el => el instanceof Element && el.localName === \"media-player\");\n        if (activePlayer !== void 0) $active.set(this.el === activePlayer);\n      });\n    }\n    effect(() => {\n      if (!$active()) return;\n      new EventsController(target).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this)).add(\"keydown\", this.#onPreventVideoKeys.bind(this), {\n        capture: true\n      });\n    });\n  }\n  #onKeyUp(event) {\n    const focusedEl = document.activeElement;\n    if (!event.key || !this.$state.canSeek() || focusedEl?.matches(IGNORE_SELECTORS)) {\n      return;\n    }\n    let {\n      method,\n      value\n    } = this.#getMatchingMethod(event);\n    if (!isString(value) && !isArray(value)) {\n      value?.onKeyUp?.({\n        event,\n        player: this.#media.player,\n        remote: this.#media.remote\n      });\n      value?.callback?.(event, this.#media.remote);\n      return;\n    }\n    if (method?.startsWith(\"seek\")) {\n      event.preventDefault();\n      event.stopPropagation();\n      if (this.#timeSlider) {\n        this.#forwardTimeKeyboardEvent(event, method === \"seekForward\");\n        this.#timeSlider = null;\n      } else {\n        this.#media.remote.seek(this.#seekTotal, event);\n        this.#seekTotal = void 0;\n      }\n    }\n    if (method?.startsWith(\"volume\")) {\n      const volumeSlider = this.el.querySelector(\"[data-media-volume-slider]\");\n      volumeSlider?.dispatchEvent(new KeyboardEvent(\"keyup\", {\n        key: method === \"volumeUp\" ? \"Up\" : \"Down\",\n        shiftKey: event.shiftKey,\n        trigger: event\n      }));\n    }\n  }\n  #onKeyDown(event) {\n    if (!event.key || MODIFIER_KEYS.has(event.key)) return;\n    const focusedEl = document.activeElement;\n    if (focusedEl?.matches(IGNORE_SELECTORS) || isKeyboardClick(event) && focusedEl?.matches(BUTTON_SELECTORS)) {\n      return;\n    }\n    let {\n        method,\n        value\n      } = this.#getMatchingMethod(event),\n      isNumberPress = !event.metaKey && /^[0-9]$/.test(event.key);\n    if (!isString(value) && !isArray(value) && !isNumberPress) {\n      value?.onKeyDown?.({\n        event,\n        player: this.#media.player,\n        remote: this.#media.remote\n      });\n      value?.callback?.(event, this.#media.remote);\n      return;\n    }\n    if (!method && isNumberPress) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.#media.remote.seek(this.$state.duration() / 10 * Number(event.key), event);\n      return;\n    }\n    if (!method) return;\n    event.preventDefault();\n    event.stopPropagation();\n    switch (method) {\n      case \"seekForward\":\n      case \"seekBackward\":\n        this.#seeking(event, method, method === \"seekForward\");\n        break;\n      case \"volumeUp\":\n      case \"volumeDown\":\n        const volumeSlider = this.el.querySelector(\"[data-media-volume-slider]\");\n        if (volumeSlider) {\n          volumeSlider.dispatchEvent(new KeyboardEvent(\"keydown\", {\n            key: method === \"volumeUp\" ? \"Up\" : \"Down\",\n            shiftKey: event.shiftKey,\n            trigger: event\n          }));\n        } else {\n          const value2 = event.shiftKey ? 0.1 : 0.05;\n          this.#media.remote.changeVolume(this.$state.volume() + (method === \"volumeUp\" ? +value2 : -value2), event);\n        }\n        break;\n      case \"toggleFullscreen\":\n        this.#media.remote.toggleFullscreen(\"prefer-media\", event);\n        break;\n      case \"speedUp\":\n      case \"slowDown\":\n        const playbackRate = this.$state.playbackRate();\n        this.#media.remote.changePlaybackRate(Math.max(0.25, Math.min(2, playbackRate + (method === \"speedUp\" ? 0.25 : -0.25))), event);\n        break;\n      default:\n        this.#media.remote[method]?.(event);\n    }\n    this.$state.lastKeyboardAction.set({\n      action: method,\n      event\n    });\n  }\n  #onPreventVideoKeys(event) {\n    if (isHTMLMediaElement(event.target) && this.#getMatchingMethod(event).method) {\n      event.preventDefault();\n    }\n  }\n  #getMatchingMethod(event) {\n    const keyShortcuts = {\n      ...this.$props.keyShortcuts(),\n      ...this.#media.ariaKeys\n    };\n    const method = Object.keys(keyShortcuts).find(method2 => {\n      const value = keyShortcuts[method2],\n        keys = isArray(value) ? value.join(\" \") : isString(value) ? value : value?.keys;\n      const combinations = (isArray(keys) ? keys : keys?.split(\" \"))?.map(key => replaceSymbolKeys(key).replace(/Control/g, \"Ctrl\").split(\"+\"));\n      return combinations?.some(combo => {\n        const modifierKeys = new Set(combo.filter(key => MODIFIER_KEYS.has(key)));\n        for (const modKey of MODIFIER_KEYS) {\n          const modKeyProp = modKey.toLowerCase() + \"Key\";\n          if (!modifierKeys.has(modKey) && event[modKeyProp]) {\n            return false;\n          }\n        }\n        return combo.every(key => {\n          return MODIFIER_KEYS.has(key) ? event[key.toLowerCase() + \"Key\"] : event.key === key.replace(\"Space\", \" \");\n        });\n      });\n    });\n    return {\n      method,\n      value: method ? keyShortcuts[method] : null\n    };\n  }\n  #seekTotal;\n  #calcSeekAmount(event, type) {\n    const seekBy = event.shiftKey ? 10 : 5;\n    return this.#seekTotal = Math.max(0, Math.min((this.#seekTotal ?? this.$state.currentTime()) + (type === \"seekForward\" ? +seekBy : -seekBy), this.$state.duration()));\n  }\n  #timeSlider = null;\n  #forwardTimeKeyboardEvent(event, forward) {\n    this.#timeSlider?.dispatchEvent(new KeyboardEvent(event.type, {\n      key: !forward ? \"Left\" : \"Right\",\n      shiftKey: event.shiftKey,\n      trigger: event\n    }));\n  }\n  #seeking(event, type, forward) {\n    if (!this.$state.canSeek()) return;\n    if (!this.#timeSlider) {\n      this.#timeSlider = this.el.querySelector(\"[data-media-time-slider]\");\n    }\n    if (this.#timeSlider) {\n      this.#forwardTimeKeyboardEvent(event, forward);\n    } else {\n      this.#media.remote.seeking(this.#calcSeekAmount(event, type), event);\n    }\n  }\n}\nconst SYMBOL_KEY_MAP = [\"!\", \"@\", \"#\", \"$\", \"%\", \"^\", \"&\", \"*\", \"(\", \")\"];\nfunction replaceSymbolKeys(key) {\n  return key.replace(/Shift\\+(\\d)/g, (_, num) => SYMBOL_KEY_MAP[num - 1]);\n}\nclass ARIAKeyShortcuts extends ViewController {\n  #shortcut;\n  constructor(shortcut) {\n    super();\n    this.#shortcut = shortcut;\n  }\n  onAttach(el) {\n    const {\n        $props,\n        ariaKeys\n      } = useMediaContext(),\n      keys = el.getAttribute(\"aria-keyshortcuts\");\n    if (keys) {\n      ariaKeys[this.#shortcut] = keys;\n      if (!IS_SERVER) {\n        onDispose(() => {\n          delete ariaKeys[this.#shortcut];\n        });\n      }\n      return;\n    }\n    const shortcuts = $props.keyShortcuts()[this.#shortcut];\n    if (shortcuts) {\n      const keys2 = isArray(shortcuts) ? shortcuts.join(\" \") : isString(shortcuts) ? shortcuts : shortcuts?.keys;\n      el.setAttribute(\"aria-keyshortcuts\", isArray(keys2) ? keys2.join(\" \") : keys2);\n    }\n  }\n}\nclass MediaControls extends MediaPlayerController {\n  #idleTimer = -2;\n  #pausedTracking = false;\n  #hideOnMouseLeave = signal(false);\n  #isMouseOutside = signal(false);\n  #focusedItem = null;\n  #canIdle = signal(true);\n  /**\n   * The default amount of delay in milliseconds while media playback is progressing without user\n   * activity to indicate an idle state (i.e., hide controls).\n   *\n   * @defaultValue 2000\n   */\n  defaultDelay = 2e3;\n  /**\n   * Whether controls can hide after a delay in user interaction. If this is false, controls will\n   * not hide and be user controlled.\n   */\n  get canIdle() {\n    return this.#canIdle();\n  }\n  set canIdle(canIdle) {\n    this.#canIdle.set(canIdle);\n  }\n  /**\n   * Whether controls visibility should be toggled when the mouse enters and leaves the player\n   * container.\n   *\n   * @defaultValue false\n   */\n  get hideOnMouseLeave() {\n    const {\n      hideControlsOnMouseLeave\n    } = this.$props;\n    return this.#hideOnMouseLeave() || hideControlsOnMouseLeave();\n  }\n  set hideOnMouseLeave(hide) {\n    this.#hideOnMouseLeave.set(hide);\n  }\n  /**\n   * Whether media controls are currently visible.\n   */\n  get showing() {\n    return this.$state.controlsVisible();\n  }\n  /**\n   * Show controls.\n   */\n  show(delay = 0, trigger) {\n    this.#clearIdleTimer();\n    if (!this.#pausedTracking) {\n      this.#changeVisibility(true, delay, trigger);\n    }\n  }\n  /**\n   * Hide controls.\n   */\n  hide(delay = this.defaultDelay, trigger) {\n    this.#clearIdleTimer();\n    if (!this.#pausedTracking) {\n      this.#changeVisibility(false, delay, trigger);\n    }\n  }\n  /**\n   * Whether all idle tracking on controls should be paused until resumed again.\n   */\n  pause(trigger) {\n    this.#pausedTracking = true;\n    this.#clearIdleTimer();\n    this.#changeVisibility(true, 0, trigger);\n  }\n  resume(trigger) {\n    this.#pausedTracking = false;\n    if (this.$state.paused()) return;\n    this.#changeVisibility(false, this.defaultDelay, trigger);\n  }\n  onConnect() {\n    effect(this.#init.bind(this));\n  }\n  #init() {\n    const {\n      viewType\n    } = this.$state;\n    if (!this.el || !this.#canIdle()) return;\n    if (viewType() === \"audio\") {\n      this.show();\n      return;\n    }\n    effect(this.#watchMouse.bind(this));\n    effect(this.#watchPaused.bind(this));\n    const onPlay = this.#onPlay.bind(this),\n      onPause = this.#onPause.bind(this),\n      onEnd = this.#onEnd.bind(this);\n    new EventsController(this.el).add(\"can-play\", event => this.show(0, event)).add(\"play\", onPlay).add(\"pause\", onPause).add(\"end\", onEnd).add(\"auto-play-fail\", onPause);\n  }\n  #watchMouse() {\n    if (!this.el) return;\n    const {\n      started,\n      pointer,\n      paused\n    } = this.$state;\n    if (!started() || pointer() !== \"fine\") return;\n    const events = new EventsController(this.el),\n      shouldHideOnMouseLeave = this.hideOnMouseLeave;\n    if (!shouldHideOnMouseLeave || !this.#isMouseOutside()) {\n      effect(() => {\n        if (!paused()) events.add(\"pointermove\", this.#onStopIdle.bind(this));\n      });\n    }\n    if (shouldHideOnMouseLeave) {\n      events.add(\"mouseenter\", this.#onMouseEnter.bind(this)).add(\"mouseleave\", this.#onMouseLeave.bind(this));\n    }\n  }\n  #watchPaused() {\n    const {\n      paused,\n      started,\n      autoPlayError\n    } = this.$state;\n    if (paused() || autoPlayError() && !started()) return;\n    const onStopIdle = this.#onStopIdle.bind(this);\n    effect(() => {\n      if (!this.el) return;\n      const pointer = this.$state.pointer(),\n        isTouch = pointer === \"coarse\",\n        events = new EventsController(this.el),\n        eventTypes = [isTouch ? \"touchend\" : \"pointerup\", \"keydown\"];\n      for (const eventType of eventTypes) {\n        events.add(eventType, onStopIdle, {\n          passive: false\n        });\n      }\n    });\n  }\n  #onPlay(event) {\n    if (event.triggers.hasType(\"ended\")) return;\n    this.show(0, event);\n    this.hide(void 0, event);\n  }\n  #onPause(event) {\n    this.show(0, event);\n  }\n  #onEnd(event) {\n    const {\n      loop\n    } = this.$state;\n    if (loop()) this.hide(0, event);\n  }\n  #onMouseEnter(event) {\n    this.#isMouseOutside.set(false);\n    this.show(0, event);\n    this.hide(void 0, event);\n  }\n  #onMouseLeave(event) {\n    this.#isMouseOutside.set(true);\n    this.hide(0, event);\n  }\n  #clearIdleTimer() {\n    window.clearTimeout(this.#idleTimer);\n    this.#idleTimer = -1;\n  }\n  #onStopIdle(event) {\n    if (\n    // @ts-expect-error\n    event.MEDIA_GESTURE || this.#pausedTracking || isTouchPinchEvent(event)) {\n      return;\n    }\n    if (isKeyboardEvent(event)) {\n      if (event.key === \"Escape\") {\n        this.el?.focus();\n        this.#focusedItem = null;\n      } else if (this.#focusedItem) {\n        event.preventDefault();\n        requestAnimationFrame(() => {\n          this.#focusedItem?.focus();\n          this.#focusedItem = null;\n        });\n      }\n    }\n    this.show(0, event);\n    this.hide(this.defaultDelay, event);\n  }\n  #changeVisibility(visible, delay, trigger) {\n    if (delay === 0) {\n      this.#onChange(visible, trigger);\n      return;\n    }\n    this.#idleTimer = window.setTimeout(() => {\n      if (!this.scope) return;\n      this.#onChange(visible && !this.#pausedTracking, trigger);\n    }, delay);\n  }\n  #onChange(visible, trigger) {\n    if (this.$state.controlsVisible() === visible) return;\n    this.$state.controlsVisible.set(visible);\n    if (!visible && document.activeElement && this.el?.contains(document.activeElement)) {\n      this.#focusedItem = document.activeElement;\n      requestAnimationFrame(() => {\n        this.el?.focus({\n          preventScroll: true\n        });\n      });\n    }\n    this.dispatch(\"controls-change\", {\n      detail: visible,\n      trigger\n    });\n  }\n}\nconst CAN_FULLSCREEN = fscreen.fullscreenEnabled;\nclass FullscreenController extends ViewController {\n  /**\n   * Tracks whether we're the active fullscreen event listener. Fullscreen events can only be\n   * listened to globally on the document so we need to know if they relate to the current host\n   * element or not.\n   */\n  #listening = false;\n  #active = false;\n  get active() {\n    return this.#active;\n  }\n  get supported() {\n    return CAN_FULLSCREEN;\n  }\n  onConnect() {\n    new EventsController(fscreen).add(\"fullscreenchange\", this.#onChange.bind(this)).add(\"fullscreenerror\", this.#onError.bind(this));\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  async #onDisconnect() {\n    if (CAN_FULLSCREEN) await this.exit();\n  }\n  #onChange(event) {\n    const active = isFullscreen(this.el);\n    if (active === this.#active) return;\n    if (!active) this.#listening = false;\n    this.#active = active;\n    this.dispatch(\"fullscreen-change\", {\n      detail: active,\n      trigger: event\n    });\n  }\n  #onError(event) {\n    if (!this.#listening) return;\n    this.dispatch(\"fullscreen-error\", {\n      detail: null,\n      trigger: event\n    });\n    this.#listening = false;\n  }\n  async enter() {\n    try {\n      this.#listening = true;\n      if (!this.el || isFullscreen(this.el)) return;\n      assertFullscreenAPI();\n      return fscreen.requestFullscreen(this.el);\n    } catch (error) {\n      this.#listening = false;\n      throw error;\n    }\n  }\n  async exit() {\n    if (!this.el || !isFullscreen(this.el)) return;\n    assertFullscreenAPI();\n    return fscreen.exitFullscreen();\n  }\n}\nfunction canFullscreen() {\n  return CAN_FULLSCREEN;\n}\nfunction isFullscreen(host) {\n  if (fscreen.fullscreenElement === host) return true;\n  try {\n    return host.matches(\n    // @ts-expect-error - `fullscreenPseudoClass` is missing from `@types/fscreen`.\n    fscreen.fullscreenPseudoClass);\n  } catch (error) {\n    return false;\n  }\n}\nfunction assertFullscreenAPI() {\n  if (CAN_FULLSCREEN) return;\n  throw Error(\"[vidstack] fullscreen API is not enabled or supported in this environment\");\n}\nclass ScreenOrientationController extends ViewController {\n  #type = signal(this.#getScreenOrientation());\n  #locked = signal(false);\n  #currentLock;\n  /**\n   * The current screen orientation type.\n   *\n   * @signal\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation}\n   * @see https://w3c.github.io/screen-orientation/#screen-orientation-types-and-locks\n   */\n  get type() {\n    return this.#type();\n  }\n  /**\n   * Whether the screen orientation is currently locked.\n   *\n   * @signal\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation}\n   * @see https://w3c.github.io/screen-orientation/#screen-orientation-types-and-locks\n   */\n  get locked() {\n    return this.#locked();\n  }\n  /**\n   * Whether the viewport is in a portrait orientation.\n   *\n   * @signal\n   */\n  get portrait() {\n    return this.#type().startsWith(\"portrait\");\n  }\n  /**\n   * Whether the viewport is in a landscape orientation.\n   *\n   * @signal\n   */\n  get landscape() {\n    return this.#type().startsWith(\"landscape\");\n  }\n  /**\n   * Whether the native Screen Orientation API is available.\n   */\n  static supported = canOrientScreen();\n  /**\n   * Whether the native Screen Orientation API is available.\n   */\n  get supported() {\n    return ScreenOrientationController.supported;\n  }\n  onConnect() {\n    if (this.supported) {\n      listenEvent(screen.orientation, \"change\", this.#onOrientationChange.bind(this));\n    } else {\n      const query = window.matchMedia(\"(orientation: landscape)\");\n      query.onchange = this.#onOrientationChange.bind(this);\n      onDispose(() => query.onchange = null);\n    }\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  async #onDisconnect() {\n    if (this.supported && this.#locked()) await this.unlock();\n  }\n  #onOrientationChange(event) {\n    this.#type.set(this.#getScreenOrientation());\n    this.dispatch(\"orientation-change\", {\n      detail: {\n        orientation: peek(this.#type),\n        lock: this.#currentLock\n      },\n      trigger: event\n    });\n  }\n  /**\n   * Locks the orientation of the screen to the desired orientation type using the\n   * Screen Orientation API.\n   *\n   * @param lockType - The screen lock orientation type.\n   * @throws Error - If screen orientation API is unavailable.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation}\n   * @see {@link https://w3c.github.io/screen-orientation}\n   */\n  async lock(lockType) {\n    if (peek(this.#locked) || this.#currentLock === lockType) return;\n    this.#assertScreenOrientationAPI();\n    await screen.orientation.lock(lockType);\n    this.#locked.set(true);\n    this.#currentLock = lockType;\n  }\n  /**\n   * Unlocks the orientation of the screen to it's default state using the Screen Orientation\n   * API. This method will throw an error if the API is unavailable.\n   *\n   * @throws Error - If screen orientation API is unavailable.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation}\n   * @see {@link https://w3c.github.io/screen-orientation}\n   */\n  async unlock() {\n    if (!peek(this.#locked)) return;\n    this.#assertScreenOrientationAPI();\n    this.#currentLock = void 0;\n    await screen.orientation.unlock();\n    this.#locked.set(false);\n  }\n  #assertScreenOrientationAPI() {\n    if (this.supported) return;\n    throw Error(\"[vidstack] screen orientation API is not available\");\n  }\n  #getScreenOrientation() {\n    if (IS_SERVER) return \"portrait-primary\";\n    if (this.supported) return window.screen.orientation.type;\n    return window.innerWidth >= window.innerHeight ? \"landscape-primary\" : \"portrait-primary\";\n  }\n}\nclass AudioProviderLoader {\n  name = \"audio\";\n  target;\n  canPlay(src) {\n    if (!isAudioSrc(src)) return false;\n    return IS_SERVER || !isString(src.src) || src.type === \"?\" || canPlayAudioType(this.target, src.type);\n  }\n  mediaType() {\n    return \"audio\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load audio provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\"[vidstack] `<audio>` element was not found - did you forget to include `<media-provider>`?\");\n    }\n    return new (await import('./vidstack-CvY7pagE.js')).AudioProvider(this.target, ctx);\n  }\n}\nclass VideoProviderLoader {\n  name = \"video\";\n  target;\n  canPlay(src) {\n    if (!isVideoSrc(src)) return false;\n    return IS_SERVER || !isString(src.src) || src.type === \"?\" || canPlayVideoType(this.target, src.type);\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load video provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\"[vidstack] `<video>` element was not found - did you forget to include media provider?\");\n    }\n    return new (await Promise.resolve().then(function () {\n      return provider$1;\n    })).VideoProvider(this.target, ctx);\n  }\n}\nclass HLSProviderLoader extends VideoProviderLoader {\n  static supported = isHLSSupported();\n  name = \"hls\";\n  canPlay(src) {\n    return HLSProviderLoader.supported && isHLSSrc(src);\n  }\n  async load(context) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load hls provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\"[vidstack] `<video>` element was not found - did you forget to include `<media-provider>`?\");\n    }\n    return new (await import('./vidstack-GNfRj3wa.js')).HLSProvider(this.target, context);\n  }\n}\nlet audioContext = null,\n  gainNodes = [],\n  elAudioSources = [];\nfunction getOrCreateAudioCtx() {\n  return audioContext ??= new AudioContext();\n}\nfunction createGainNode() {\n  const audioCtx = getOrCreateAudioCtx(),\n    gainNode = audioCtx.createGain();\n  gainNode.connect(audioCtx.destination);\n  gainNodes.push(gainNode);\n  return gainNode;\n}\nfunction createElementSource(el, gainNode) {\n  const audioCtx = getOrCreateAudioCtx(),\n    src = audioCtx.createMediaElementSource(el);\n  if (gainNode) {\n    src.connect(gainNode);\n  }\n  elAudioSources.push(src);\n  return src;\n}\nfunction destroyGainNode(node) {\n  const idx = gainNodes.indexOf(node);\n  if (idx !== -1) {\n    gainNodes.splice(idx, 1);\n    node.disconnect();\n    freeAudioCtxWhenAllResourcesFreed();\n  }\n}\nfunction destroyElementSource(src) {\n  const idx = elAudioSources.indexOf(src);\n  if (idx !== -1) {\n    elAudioSources.splice(idx, 1);\n    src.disconnect();\n    freeAudioCtxWhenAllResourcesFreed();\n  }\n}\nfunction freeAudioCtxWhenAllResourcesFreed() {\n  if (audioContext && gainNodes.length === 0 && elAudioSources.length === 0) {\n    audioContext.close().then(() => {\n      audioContext = null;\n    });\n  }\n}\nclass AudioGain {\n  #media;\n  #onChange;\n  #gainNode = null;\n  #srcAudioNode = null;\n  get currentGain() {\n    return this.#gainNode?.gain?.value ?? null;\n  }\n  get supported() {\n    return true;\n  }\n  constructor(media, onChange) {\n    this.#media = media;\n    this.#onChange = onChange;\n  }\n  setGain(gain) {\n    const currGain = this.currentGain;\n    if (gain === this.currentGain) {\n      return;\n    }\n    if (gain === 1 && currGain !== 1) {\n      this.removeGain();\n      return;\n    }\n    if (!this.#gainNode) {\n      this.#gainNode = createGainNode();\n      if (this.#srcAudioNode) {\n        this.#srcAudioNode.connect(this.#gainNode);\n      }\n    }\n    if (!this.#srcAudioNode) {\n      this.#srcAudioNode = createElementSource(this.#media, this.#gainNode);\n    }\n    this.#gainNode.gain.value = gain;\n    this.#onChange(gain);\n  }\n  removeGain() {\n    if (!this.#gainNode) return;\n    if (this.#srcAudioNode) {\n      this.#srcAudioNode.connect(getOrCreateAudioCtx().destination);\n    }\n    this.#destroyGainNode();\n    this.#onChange(null);\n  }\n  destroy() {\n    this.#destroySrcNode();\n    this.#destroyGainNode();\n  }\n  #destroySrcNode() {\n    if (!this.#srcAudioNode) return;\n    try {\n      destroyElementSource(this.#srcAudioNode);\n    } catch (e) {} finally {\n      this.#srcAudioNode = null;\n    }\n  }\n  #destroyGainNode() {\n    if (!this.#gainNode) return;\n    try {\n      destroyGainNode(this.#gainNode);\n    } catch (e) {} finally {\n      this.#gainNode = null;\n    }\n  }\n}\nconst PAGE_EVENTS = [\"focus\", \"blur\", \"visibilitychange\", \"pageshow\", \"pagehide\"];\nclass PageVisibility {\n  #state = signal(determinePageState());\n  #visibility = signal(IS_SERVER ? \"visible\" : document.visibilityState);\n  #safariBeforeUnloadTimeout;\n  connect() {\n    const events = new EventsController(window),\n      handlePageEvent = this.#handlePageEvent.bind(this);\n    for (const eventType of PAGE_EVENTS) {\n      events.add(eventType, handlePageEvent);\n    }\n    if (IS_SAFARI) {\n      events.add(\"beforeunload\", event => {\n        this.#safariBeforeUnloadTimeout = setTimeout(() => {\n          if (!(event.defaultPrevented || event.returnValue.length > 0)) {\n            this.#state.set(\"hidden\");\n            this.#visibility.set(\"hidden\");\n          }\n        }, 0);\n      });\n    }\n  }\n  /**\n   * The current page state. Important to note we only account for a subset of page states, as\n   * the rest aren't valuable to the player at the moment.\n   *\n   * - **active:** A page is in the active state if it is visible and has input focus.\n   * - **passive:** A page is in the passive state if it is visible and does not have input focus.\n   * - **hidden:** A page is in the hidden state if it is not visible.\n   *\n   * @see https://developers.google.com/web/updates/2018/07/page-lifecycle-api#states\n   */\n  get pageState() {\n    return this.#state();\n  }\n  /**\n   * The current document visibility state.\n   *\n   * - **visible:** The page content may be at least partially visible. In practice, this means that\n   * the page is the foreground tab of a non-minimized window.\n   * - **hidden:** The page content is not visible to the user. In practice this means that the\n   * document is either a background tab or part of a minimized window, or the OS screen lock is\n   * active.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState\n   */\n  get visibility() {\n    return this.#visibility();\n  }\n  #handlePageEvent(event) {\n    if (IS_SAFARI) window.clearTimeout(this.#safariBeforeUnloadTimeout);\n    if (event.type !== \"blur\" || this.#state() === \"active\") {\n      this.#state.set(determinePageState(event));\n      this.#visibility.set(document.visibilityState == \"hidden\" ? \"hidden\" : \"visible\");\n    }\n  }\n}\nfunction determinePageState(event) {\n  if (IS_SERVER) return \"hidden\";\n  if (event?.type === \"blur\" || document.visibilityState === \"hidden\") return \"hidden\";\n  if (document.hasFocus()) return \"active\";\n  return \"passive\";\n}\nclass RAFLoop {\n  #id;\n  #callback;\n  constructor(callback) {\n    this.#callback = callback;\n  }\n  start() {\n    if (!isUndefined(this.#id)) return;\n    this.#loop();\n  }\n  stop() {\n    if (isNumber(this.#id)) window.cancelAnimationFrame(this.#id);\n    this.#id = void 0;\n  }\n  #loop() {\n    this.#id = window.requestAnimationFrame(() => {\n      if (isUndefined(this.#id)) return;\n      this.#callback();\n      this.#loop();\n    });\n  }\n}\nclass HTMLMediaEvents {\n  #provider;\n  #ctx;\n  #waiting = false;\n  #attachedLoadStart = false;\n  #attachedCanPlay = false;\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #pageVisibility = new PageVisibility();\n  #events;\n  get #media() {\n    return this.#provider.media;\n  }\n  constructor(provider, ctx) {\n    this.#provider = provider;\n    this.#ctx = ctx;\n    this.#events = new EventsController(provider.media);\n    this.#attachInitialListeners();\n    this.#pageVisibility.connect();\n    effect(this.#attachTimeUpdate.bind(this));\n    onDispose(this.#onDispose.bind(this));\n  }\n  #onDispose() {\n    this.#attachedLoadStart = false;\n    this.#attachedCanPlay = false;\n    this.#timeRAF.stop();\n    this.#events.abort();\n    this.#devHandlers?.clear();\n  }\n  /**\n   * The `timeupdate` event fires surprisingly infrequently during playback, meaning your progress\n   * bar (or whatever else is synced to the currentTime) moves in a choppy fashion. This helps\n   * resolve that by retrieving time updates in a request animation frame loop.\n   */\n  #lastSeenTime = 0;\n  #seekedTo = -1;\n  #onAnimationFrame() {\n    const newTime = this.#media.currentTime;\n    const didStutter = IS_SAFARI && newTime - this.#seekedTo < 0.35;\n    if (!didStutter && this.#lastSeenTime !== newTime) {\n      this.#updateCurrentTime(newTime);\n      this.#lastSeenTime = newTime;\n    }\n  }\n  #attachInitialListeners() {\n    {\n      this.#ctx.logger?.info(\"attaching initial listeners\");\n    }\n    this.#attachEventListener(\"loadstart\", this.#onLoadStart);\n    this.#attachEventListener(\"abort\", this.#onAbort);\n    this.#attachEventListener(\"emptied\", this.#onEmptied);\n    this.#attachEventListener(\"error\", this.#onError);\n    this.#attachEventListener(\"volumechange\", this.#onVolumeChange);\n    this.#ctx.logger?.debug(\"attached initial media event listeners\");\n  }\n  #attachLoadStartListeners() {\n    if (this.#attachedLoadStart) return;\n    {\n      this.#ctx.logger?.info(\"attaching load start listeners\");\n    }\n    this.#attachEventListener(\"loadeddata\", this.#onLoadedData);\n    this.#attachEventListener(\"loadedmetadata\", this.#onLoadedMetadata);\n    this.#attachEventListener(\"canplay\", this.#onCanPlay);\n    this.#attachEventListener(\"canplaythrough\", this.#onCanPlayThrough);\n    this.#attachEventListener(\"durationchange\", this.#onDurationChange);\n    this.#attachEventListener(\"play\", this.#onPlay);\n    this.#attachEventListener(\"progress\", this.#onProgress);\n    this.#attachEventListener(\"stalled\", this.#onStalled);\n    this.#attachEventListener(\"suspend\", this.#onSuspend);\n    this.#attachEventListener(\"ratechange\", this.#onRateChange);\n    this.#attachedLoadStart = true;\n  }\n  #attachCanPlayListeners() {\n    if (this.#attachedCanPlay) return;\n    {\n      this.#ctx.logger?.info(\"attaching can play listeners\");\n    }\n    this.#attachEventListener(\"pause\", this.#onPause);\n    this.#attachEventListener(\"playing\", this.#onPlaying);\n    this.#attachEventListener(\"seeked\", this.#onSeeked);\n    this.#attachEventListener(\"seeking\", this.#onSeeking);\n    this.#attachEventListener(\"ended\", this.#onEnded);\n    this.#attachEventListener(\"waiting\", this.#onWaiting);\n    this.#attachedCanPlay = true;\n  }\n  #devHandlers = /* @__PURE__ */new Map();\n  #handleDevEvent = this.#onDevEvent.bind(this);\n  #attachEventListener(eventType, handler) {\n    this.#devHandlers.set(eventType, handler);\n    this.#events.add(eventType, this.#handleDevEvent);\n  }\n  #onDevEvent(event2) {\n    this.#ctx.logger?.debugGroup(`\\u{1F4FA} provider fired \\`${event2.type}\\``).labelledLog(\"Provider\", this.#provider).labelledLog(\"Event\", event2).labelledLog(\"Media Store\", {\n      ...this.#ctx.$state\n    }).dispatch();\n    this.#devHandlers.get(event2.type)?.call(this, event2);\n  }\n  #updateCurrentTime(time, trigger) {\n    const newTime = Math.min(time, this.#ctx.$state.seekableEnd());\n    this.#ctx.notify(\"time-change\", newTime, trigger);\n  }\n  #onLoadStart(event2) {\n    if (this.#media.networkState === 3) {\n      this.#onAbort(event2);\n      return;\n    }\n    this.#attachLoadStartListeners();\n    this.#ctx.notify(\"load-start\", void 0, event2);\n  }\n  #onAbort(event2) {\n    this.#ctx.notify(\"abort\", void 0, event2);\n  }\n  #onEmptied() {\n    this.#ctx.notify(\"emptied\", void 0, event);\n  }\n  #onLoadedData(event2) {\n    this.#ctx.notify(\"loaded-data\", void 0, event2);\n  }\n  #onLoadedMetadata(event2) {\n    this.#lastSeenTime = 0;\n    this.#seekedTo = -1;\n    this.#attachCanPlayListeners();\n    this.#ctx.notify(\"loaded-metadata\", void 0, event2);\n    if (IS_IOS || IS_SAFARI && isHLSSrc(this.#ctx.$state.source())) {\n      this.#ctx.delegate.ready(this.#getCanPlayDetail(), event2);\n    }\n  }\n  #getCanPlayDetail() {\n    return {\n      provider: peek(this.#ctx.$provider),\n      duration: this.#media.duration,\n      buffered: this.#media.buffered,\n      seekable: this.#media.seekable\n    };\n  }\n  #onPlay(event2) {\n    if (!this.#ctx.$state.canPlay) return;\n    this.#ctx.notify(\"play\", void 0, event2);\n  }\n  #onPause(event2) {\n    if (this.#media.readyState === 1 && !this.#waiting) return;\n    this.#waiting = false;\n    this.#timeRAF.stop();\n    this.#ctx.notify(\"pause\", void 0, event2);\n  }\n  #onCanPlay(event2) {\n    this.#ctx.delegate.ready(this.#getCanPlayDetail(), event2);\n  }\n  #onCanPlayThrough(event2) {\n    if (this.#ctx.$state.started()) return;\n    this.#ctx.notify(\"can-play-through\", this.#getCanPlayDetail(), event2);\n  }\n  #onPlaying(event2) {\n    if (this.#media.paused) return;\n    this.#waiting = false;\n    this.#ctx.notify(\"playing\", void 0, event2);\n    this.#timeRAF.start();\n  }\n  #onStalled(event2) {\n    this.#ctx.notify(\"stalled\", void 0, event2);\n    if (this.#media.readyState < 3) {\n      this.#waiting = true;\n      this.#ctx.notify(\"waiting\", void 0, event2);\n    }\n  }\n  #onWaiting(event2) {\n    if (this.#media.readyState < 3) {\n      this.#waiting = true;\n      this.#ctx.notify(\"waiting\", void 0, event2);\n    }\n  }\n  #onEnded(event2) {\n    this.#timeRAF.stop();\n    this.#updateCurrentTime(this.#media.duration, event2);\n    this.#ctx.notify(\"end\", void 0, event2);\n    if (this.#ctx.$state.loop()) {\n      const hasCustomControls = isNil(this.#media.controls);\n      if (hasCustomControls) this.#media.controls = false;\n    }\n  }\n  #attachTimeUpdate() {\n    const isPaused = this.#ctx.$state.paused(),\n      isPageHidden = this.#pageVisibility.visibility === \"hidden\",\n      shouldListenToTimeUpdates = isPaused || isPageHidden;\n    if (shouldListenToTimeUpdates) {\n      listenEvent(this.#media, \"timeupdate\", this.#onTimeUpdate.bind(this));\n    }\n  }\n  #onTimeUpdate(event2) {\n    this.#updateCurrentTime(this.#media.currentTime, event2);\n  }\n  #onDurationChange(event2) {\n    if (this.#ctx.$state.ended()) {\n      this.#updateCurrentTime(this.#media.duration, event2);\n    }\n    this.#ctx.notify(\"duration-change\", this.#media.duration, event2);\n  }\n  #onVolumeChange(event2) {\n    const detail = {\n      volume: this.#media.volume,\n      muted: this.#media.muted\n    };\n    this.#ctx.notify(\"volume-change\", detail, event2);\n  }\n  #onSeeked(event2) {\n    this.#seekedTo = this.#media.currentTime;\n    this.#updateCurrentTime(this.#media.currentTime, event2);\n    this.#ctx.notify(\"seeked\", this.#media.currentTime, event2);\n    if (Math.trunc(this.#media.currentTime) === Math.trunc(this.#media.duration) && getNumberOfDecimalPlaces(this.#media.duration) > getNumberOfDecimalPlaces(this.#media.currentTime)) {\n      this.#updateCurrentTime(this.#media.duration, event2);\n      if (!this.#media.ended) {\n        this.#ctx.player.dispatch(new DOMEvent(\"media-play-request\", {\n          trigger: event2\n        }));\n      }\n    }\n  }\n  #onSeeking(event2) {\n    this.#ctx.notify(\"seeking\", this.#media.currentTime, event2);\n  }\n  #onProgress(event2) {\n    const detail = {\n      buffered: this.#media.buffered,\n      seekable: this.#media.seekable\n    };\n    this.#ctx.notify(\"progress\", detail, event2);\n  }\n  #onSuspend(event2) {\n    this.#ctx.notify(\"suspend\", void 0, event2);\n  }\n  #onRateChange(event2) {\n    this.#ctx.notify(\"rate-change\", this.#media.playbackRate, event2);\n  }\n  #onError(event2) {\n    const error = this.#media.error;\n    if (!error) return;\n    const detail = {\n      message: error.message,\n      code: error.code,\n      mediaError: error\n    };\n    this.#ctx.notify(\"error\", detail, event2);\n  }\n}\nclass NativeAudioTracks {\n  #provider;\n  #ctx;\n  get #nativeTracks() {\n    return this.#provider.media.audioTracks;\n  }\n  constructor(provider, ctx) {\n    this.#provider = provider;\n    this.#ctx = ctx;\n    this.#nativeTracks.onaddtrack = this.#onAddNativeTrack.bind(this);\n    this.#nativeTracks.onremovetrack = this.#onRemoveNativeTrack.bind(this);\n    this.#nativeTracks.onchange = this.#onChangeNativeTrack.bind(this);\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onChangeTrack.bind(this));\n  }\n  #onAddNativeTrack(event) {\n    const nativeTrack = event.track;\n    if (nativeTrack.label === \"\") return;\n    const id = nativeTrack.id.toString() || `native-audio-${this.#ctx.audioTracks.length}`,\n      audioTrack = {\n        id,\n        label: nativeTrack.label,\n        language: nativeTrack.language,\n        kind: nativeTrack.kind,\n        selected: false\n      };\n    this.#ctx.audioTracks[ListSymbol.add](audioTrack, event);\n    if (nativeTrack.enabled) audioTrack.selected = true;\n  }\n  #onRemoveNativeTrack(event) {\n    const track = this.#ctx.audioTracks.getById(event.track.id);\n    if (track) this.#ctx.audioTracks[ListSymbol.remove](track, event);\n  }\n  #onChangeNativeTrack(event) {\n    let enabledTrack = this.#getEnabledNativeTrack();\n    if (!enabledTrack) return;\n    const track = this.#ctx.audioTracks.getById(enabledTrack.id);\n    if (track) this.#ctx.audioTracks[ListSymbol.select](track, true, event);\n  }\n  #getEnabledNativeTrack() {\n    return Array.from(this.#nativeTracks).find(track => track.enabled);\n  }\n  #onChangeTrack(event) {\n    const {\n      current\n    } = event.detail;\n    if (!current) return;\n    const track = this.#nativeTracks.getTrackById(current.id);\n    if (track) {\n      const prev = this.#getEnabledNativeTrack();\n      if (prev) prev.enabled = false;\n      track.enabled = true;\n    }\n  }\n}\nclass HTMLMediaProvider {\n  constructor(media, ctx) {\n    this.media = media;\n    this.ctx = ctx;\n    this.audioGain = new AudioGain(media, gain => {\n      this.ctx.notify(\"audio-gain-change\", gain);\n    });\n  }\n  scope = createScope();\n  currentSrc = null;\n  audioGain;\n  setup() {\n    new HTMLMediaEvents(this, this.ctx);\n    if (\"audioTracks\" in this.media) new NativeAudioTracks(this, this.ctx);\n    onDispose(() => {\n      this.audioGain.destroy();\n      this.media.srcObject = null;\n      this.media.removeAttribute(\"src\");\n      for (const source of this.media.querySelectorAll(\"source\")) source.remove();\n      this.media.load();\n    });\n  }\n  get type() {\n    return \"\";\n  }\n  setPlaybackRate(rate) {\n    this.media.playbackRate = rate;\n  }\n  async play() {\n    return this.media.play();\n  }\n  async pause() {\n    return this.media.pause();\n  }\n  setMuted(muted) {\n    this.media.muted = muted;\n  }\n  setVolume(volume) {\n    this.media.volume = volume;\n  }\n  setCurrentTime(time) {\n    this.media.currentTime = time;\n  }\n  setPlaysInline(inline) {\n    setAttribute(this.media, \"playsinline\", inline);\n  }\n  async loadSource({\n    src,\n    type\n  }, preload) {\n    this.media.preload = preload || \"\";\n    if (isMediaStream(src)) {\n      this.removeSource();\n      this.media.srcObject = src;\n    } else {\n      this.media.srcObject = null;\n      if (isString(src)) {\n        if (type !== \"?\") {\n          this.appendSource({\n            src,\n            type\n          });\n        } else {\n          this.removeSource();\n          this.media.src = this.#appendMediaFragment(src);\n        }\n      } else {\n        this.removeSource();\n        this.media.src = window.URL.createObjectURL(src);\n      }\n    }\n    this.media.load();\n    this.currentSrc = {\n      src,\n      type\n    };\n  }\n  /**\n   * Append source so it works when requesting AirPlay since hls.js will remove it.\n   */\n  appendSource(src, defaultType) {\n    const prevSource = this.media.querySelector(\"source[data-vds]\"),\n      source = prevSource ?? document.createElement(\"source\");\n    setAttribute(source, \"src\", this.#appendMediaFragment(src.src));\n    setAttribute(source, \"type\", src.type !== \"?\" ? src.type : defaultType);\n    setAttribute(source, \"data-vds\", \"\");\n    if (!prevSource) this.media.append(source);\n  }\n  removeSource() {\n    this.media.querySelector(\"source[data-vds]\")?.remove();\n  }\n  #appendMediaFragment(src) {\n    const {\n        clipStartTime,\n        clipEndTime\n      } = this.ctx.$state,\n      startTime = clipStartTime(),\n      endTime = clipEndTime();\n    if (startTime > 0 && endTime > 0) {\n      return `${src}#t=${startTime},${endTime}`;\n    } else if (startTime > 0) {\n      return `${src}#t=${startTime}`;\n    } else if (endTime > 0) {\n      return `${src}#t=0,${endTime}`;\n    }\n    return src;\n  }\n}\nclass HTMLRemotePlaybackAdapter {\n  #media;\n  #ctx;\n  #state;\n  #supported = signal(false);\n  get supported() {\n    return this.#supported();\n  }\n  constructor(media, ctx) {\n    this.#media = media;\n    this.#ctx = ctx;\n    this.#setup();\n  }\n  #setup() {\n    if (IS_SERVER || !this.#media?.remote || !this.canPrompt) return;\n    this.#media.remote.watchAvailability(available => {\n      this.#supported.set(available);\n    }).catch(() => {\n      this.#supported.set(false);\n    });\n    effect(this.#watchSupported.bind(this));\n  }\n  #watchSupported() {\n    if (!this.#supported()) return;\n    const events = [\"connecting\", \"connect\", \"disconnect\"],\n      onStateChange = this.#onStateChange.bind(this);\n    onStateChange();\n    listenEvent(this.#media, \"playing\", onStateChange);\n    const remoteEvents = new EventsController(this.#media.remote);\n    for (const type of events) {\n      remoteEvents.add(type, onStateChange);\n    }\n  }\n  async prompt() {\n    if (!this.supported) throw Error(\"Not supported on this platform.\");\n    if (this.type === \"airplay\" && this.#media.webkitShowPlaybackTargetPicker) {\n      return this.#media.webkitShowPlaybackTargetPicker();\n    }\n    return this.#media.remote.prompt();\n  }\n  #onStateChange(event) {\n    const state = this.#media.remote.state;\n    if (state === this.#state) return;\n    const detail = {\n      type: this.type,\n      state\n    };\n    this.#ctx.notify(\"remote-playback-change\", detail, event);\n    this.#state = state;\n  }\n}\nclass HTMLAirPlayAdapter extends HTMLRemotePlaybackAdapter {\n  type = \"airplay\";\n  get canPrompt() {\n    return \"WebKitPlaybackTargetAvailabilityEvent\" in window;\n  }\n}\nclass NativeHLSTextTracks {\n  #video;\n  #ctx;\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n    video.textTracks.onaddtrack = this.#onAddTrack.bind(this);\n    onDispose(this.#onDispose.bind(this));\n  }\n  #onAddTrack(event) {\n    const nativeTrack = event.track;\n    if (!nativeTrack || findTextTrackElement(this.#video, nativeTrack)) return;\n    const track = new TextTrack({\n      id: nativeTrack.id,\n      kind: nativeTrack.kind,\n      label: nativeTrack.label ?? \"\",\n      language: nativeTrack.language,\n      type: \"vtt\"\n    });\n    track[TextTrackSymbol.native] = {\n      track: nativeTrack\n    };\n    track[TextTrackSymbol.readyState] = 2;\n    track[TextTrackSymbol.nativeHLS] = true;\n    let lastIndex = 0;\n    const onCueChange = event2 => {\n      if (!nativeTrack.cues) return;\n      for (let i = lastIndex; i < nativeTrack.cues.length; i++) {\n        track.addCue(nativeTrack.cues[i], event2);\n        lastIndex++;\n      }\n    };\n    onCueChange(event);\n    nativeTrack.oncuechange = onCueChange;\n    this.#ctx.textTracks.add(track, event);\n    track.setMode(nativeTrack.mode, event);\n  }\n  #onDispose() {\n    this.#video.textTracks.onaddtrack = null;\n    for (const track of this.#ctx.textTracks) {\n      const nativeTrack = track[TextTrackSymbol.native]?.track;\n      if (nativeTrack?.oncuechange) nativeTrack.oncuechange = null;\n    }\n  }\n}\nfunction findTextTrackElement(video, track) {\n  return Array.from(video.children).find(el => el.track === track);\n}\nclass VideoPictureInPicture {\n  #video;\n  #media;\n  constructor(video, media) {\n    this.#video = video;\n    this.#media = media;\n    new EventsController(video).add(\"enterpictureinpicture\", this.#onEnter.bind(this)).add(\"leavepictureinpicture\", this.#onExit.bind(this));\n  }\n  get active() {\n    return document.pictureInPictureElement === this.#video;\n  }\n  get supported() {\n    return canUsePictureInPicture(this.#video);\n  }\n  async enter() {\n    return this.#video.requestPictureInPicture();\n  }\n  exit() {\n    return document.exitPictureInPicture();\n  }\n  #onEnter(event) {\n    this.#onChange(true, event);\n  }\n  #onExit(event) {\n    this.#onChange(false, event);\n  }\n  #onChange = (active, event) => {\n    this.#media.notify(\"picture-in-picture-change\", active, event);\n  };\n}\nclass VideoPresentation {\n  #video;\n  #media;\n  #mode = \"inline\";\n  get mode() {\n    return this.#mode;\n  }\n  constructor(video, media) {\n    this.#video = video;\n    this.#media = media;\n    listenEvent(video, \"webkitpresentationmodechanged\", this.#onModeChange.bind(this));\n  }\n  get supported() {\n    return canUseVideoPresentation(this.#video);\n  }\n  async setPresentationMode(mode) {\n    if (this.#mode === mode) return;\n    this.#video.webkitSetPresentationMode(mode);\n  }\n  #onModeChange(event) {\n    const prevMode = this.#mode;\n    this.#mode = this.#video.webkitPresentationMode;\n    {\n      this.#media.logger?.infoGroup(\"presentation mode change\").labelledLog(\"Mode\", this.#mode).labelledLog(\"Event\", event).dispatch();\n    }\n    this.#media.player?.dispatch(new DOMEvent(\"video-presentation-change\", {\n      detail: this.#mode,\n      trigger: event\n    }));\n    [\"fullscreen\", \"picture-in-picture\"].forEach(type => {\n      if (this.#mode === type || prevMode === type) {\n        this.#media.notify(`${type}-change`, this.#mode === type, event);\n      }\n    });\n  }\n}\nclass FullscreenPresentationAdapter {\n  #presentation;\n  get active() {\n    return this.#presentation.mode === \"fullscreen\";\n  }\n  get supported() {\n    return this.#presentation.supported;\n  }\n  constructor(presentation) {\n    this.#presentation = presentation;\n  }\n  async enter() {\n    this.#presentation.setPresentationMode(\"fullscreen\");\n  }\n  async exit() {\n    this.#presentation.setPresentationMode(\"inline\");\n  }\n}\nclass PIPPresentationAdapter {\n  #presentation;\n  get active() {\n    return this.#presentation.mode === \"picture-in-picture\";\n  }\n  get supported() {\n    return this.#presentation.supported;\n  }\n  constructor(presentation) {\n    this.#presentation = presentation;\n  }\n  async enter() {\n    this.#presentation.setPresentationMode(\"picture-in-picture\");\n  }\n  async exit() {\n    this.#presentation.setPresentationMode(\"inline\");\n  }\n}\nclass VideoProvider extends HTMLMediaProvider {\n  $$PROVIDER_TYPE = \"VIDEO\";\n  get type() {\n    return \"video\";\n  }\n  airPlay;\n  fullscreen;\n  pictureInPicture;\n  constructor(video, ctx) {\n    super(video, ctx);\n    scoped(() => {\n      this.airPlay = new HTMLAirPlayAdapter(video, ctx);\n      if (canUseVideoPresentation(video)) {\n        const presentation = new VideoPresentation(video, ctx);\n        this.fullscreen = new FullscreenPresentationAdapter(presentation);\n        this.pictureInPicture = new PIPPresentationAdapter(presentation);\n      } else if (canUsePictureInPicture(video)) {\n        this.pictureInPicture = new VideoPictureInPicture(video, ctx);\n      }\n    }, this.scope);\n  }\n  setup() {\n    super.setup();\n    if (canPlayHLSNatively(this.video)) {\n      new NativeHLSTextTracks(this.video, this.ctx);\n    }\n    this.ctx.textRenderers.attachVideo(this.video);\n    onDispose(() => {\n      this.ctx.textRenderers.attachVideo(null);\n    });\n    if (this.type === \"video\") this.ctx.notify(\"provider-setup\", this);\n  }\n  /**\n   * The native HTML `<video>` element.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement}\n   */\n  get video() {\n    return this.media;\n  }\n}\nvar provider$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  VideoProvider: VideoProvider\n});\nfunction getLangName(langCode) {\n  try {\n    const displayNames = new Intl.DisplayNames(navigator.languages, {\n      type: \"language\"\n    });\n    const languageName = displayNames.of(langCode);\n    return languageName ?? null;\n  } catch (err) {\n    return null;\n  }\n}\nconst toDOMEventType = type => `dash-${camelToKebabCase(type)}`;\nclass DASHController {\n  #video;\n  #ctx;\n  #instance = null;\n  #callbacks = /* @__PURE__ */new Set();\n  #stopLiveSync = null;\n  config = {};\n  get instance() {\n    return this.#instance;\n  }\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n  }\n  setup(ctor) {\n    this.#instance = ctor().create();\n    const dispatcher = this.#dispatchDASHEvent.bind(this);\n    for (const event of Object.values(ctor.events)) this.#instance.on(event, dispatcher);\n    this.#instance.on(ctor.events.ERROR, this.#onError.bind(this));\n    for (const callback of this.#callbacks) callback(this.#instance);\n    this.#ctx.player.dispatch(\"dash-instance\", {\n      detail: this.#instance\n    });\n    this.#instance.initialize(this.#video, void 0, false);\n    this.#instance.updateSettings({\n      streaming: {\n        text: {\n          // Disabling text rendering by dash.\n          defaultEnabled: false,\n          dispatchForManualRendering: true\n        },\n        buffer: {\n          /// Enables buffer replacement when switching bitrates for faster switching.\n          fastSwitchEnabled: true\n        }\n      },\n      ...this.config\n    });\n    this.#instance.on(ctor.events.FRAGMENT_LOADING_STARTED, this.#onFragmentLoadStart.bind(this));\n    this.#instance.on(ctor.events.FRAGMENT_LOADING_COMPLETED, this.#onFragmentLoadComplete.bind(this));\n    this.#instance.on(ctor.events.MANIFEST_LOADED, this.#onManifestLoaded.bind(this));\n    this.#instance.on(ctor.events.QUALITY_CHANGE_RENDERED, this.#onQualityChange.bind(this));\n    this.#instance.on(ctor.events.TEXT_TRACKS_ADDED, this.#onTextTracksAdded.bind(this));\n    this.#instance.on(ctor.events.TRACK_CHANGE_RENDERED, this.#onTrackChange.bind(this));\n    this.#ctx.qualities[QualitySymbol.enableAuto] = this.#enableAutoQuality.bind(this);\n    listenEvent(this.#ctx.qualities, \"change\", this.#onUserQualityChange.bind(this));\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onUserAudioChange.bind(this));\n    this.#stopLiveSync = effect(this.#liveSync.bind(this));\n  }\n  #createDOMEvent(event) {\n    return new DOMEvent(toDOMEventType(event.type), {\n      detail: event\n    });\n  }\n  #liveSync() {\n    if (!this.#ctx.$state.live()) return;\n    const raf = new RAFLoop(this.#liveSyncPosition.bind(this));\n    raf.start();\n    return raf.stop.bind(raf);\n  }\n  #liveSyncPosition() {\n    if (!this.#instance) return;\n    const position = this.#instance.duration() - this.#instance.time();\n    this.#ctx.$state.liveSyncPosition.set(!isNaN(position) ? position : Infinity);\n  }\n  #dispatchDASHEvent(event) {\n    this.#ctx.player?.dispatch(this.#createDOMEvent(event));\n  }\n  #currentTrack = null;\n  #cueTracker = {};\n  #onTextFragmentLoaded(event) {\n    const native = this.#currentTrack?.[TextTrackSymbol.native],\n      cues = (native?.track).cues;\n    if (!native || !cues) return;\n    const id = this.#currentTrack.id,\n      startIndex = this.#cueTracker[id] ?? 0,\n      trigger = this.#createDOMEvent(event);\n    for (let i = startIndex; i < cues.length; i++) {\n      const cue = cues[i];\n      if (!cue.positionAlign) cue.positionAlign = \"auto\";\n      this.#currentTrack.addCue(cue, trigger);\n    }\n    this.#cueTracker[id] = cues.length;\n  }\n  #onTextTracksAdded(event) {\n    if (!this.#instance) return;\n    const data = event.tracks,\n      nativeTextTracks = [...this.#video.textTracks].filter(track => \"manualMode\" in track),\n      trigger = this.#createDOMEvent(event);\n    for (let i = 0; i < nativeTextTracks.length; i++) {\n      const textTrackInfo = data[i],\n        nativeTextTrack = nativeTextTracks[i];\n      const id = `dash-${textTrackInfo.kind}-${i}`,\n        track = new TextTrack({\n          id,\n          label: textTrackInfo?.label ?? textTrackInfo.labels.find(t => t.text)?.text ?? (textTrackInfo?.lang && getLangName(textTrackInfo.lang)) ?? textTrackInfo?.lang ?? void 0,\n          language: textTrackInfo.lang ?? void 0,\n          kind: textTrackInfo.kind,\n          default: textTrackInfo.defaultTrack\n        });\n      track[TextTrackSymbol.native] = {\n        managed: true,\n        track: nativeTextTrack\n      };\n      track[TextTrackSymbol.readyState] = 2;\n      track[TextTrackSymbol.onModeChange] = () => {\n        if (!this.#instance) return;\n        if (track.mode === \"showing\") {\n          this.#instance.setTextTrack(i);\n          this.#currentTrack = track;\n        } else {\n          this.#instance.setTextTrack(-1);\n          this.#currentTrack = null;\n        }\n      };\n      this.#ctx.textTracks.add(track, trigger);\n    }\n  }\n  #onTrackChange(event) {\n    const {\n      mediaType,\n      newMediaInfo\n    } = event;\n    if (mediaType === \"audio\") {\n      const track = this.#ctx.audioTracks.getById(`dash-audio-${newMediaInfo.index}`);\n      if (track) {\n        const trigger = this.#createDOMEvent(event);\n        this.#ctx.audioTracks[ListSymbol.select](track, true, trigger);\n      }\n    }\n  }\n  #onQualityChange(event) {\n    if (event.mediaType !== \"video\") return;\n    const quality = this.#ctx.qualities[event.newQuality];\n    if (quality) {\n      const trigger = this.#createDOMEvent(event);\n      this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n  }\n  #onManifestLoaded(event) {\n    if (this.#ctx.$state.canPlay() || !this.#instance) return;\n    const {\n        type,\n        mediaPresentationDuration\n      } = event.data,\n      trigger = this.#createDOMEvent(event);\n    this.#ctx.notify(\"stream-type-change\", type !== \"static\" ? \"live\" : \"on-demand\", trigger);\n    this.#ctx.notify(\"duration-change\", mediaPresentationDuration, trigger);\n    this.#ctx.qualities[QualitySymbol.setAuto](true, trigger);\n    const media = this.#instance.getVideoElement();\n    const videoQualities = this.#instance.getTracksForTypeFromManifest(\"video\", event.data);\n    const supportedVideoMimeType = [...new Set(videoQualities.map(e => e.mimeType))].find(type2 => type2 && canPlayVideoType(media, type2));\n    const videoQuality = videoQualities.filter(track => supportedVideoMimeType === track.mimeType)[0];\n    let audioTracks = this.#instance.getTracksForTypeFromManifest(\"audio\", event.data);\n    const supportedAudioMimeType = [...new Set(audioTracks.map(e => e.mimeType))].find(type2 => type2 && canPlayAudioType(media, type2));\n    audioTracks = audioTracks.filter(track => supportedAudioMimeType === track.mimeType);\n    videoQuality.bitrateList.forEach((bitrate, index) => {\n      const quality = {\n        id: bitrate.id?.toString() ?? `dash-bitrate-${index}`,\n        width: bitrate.width ?? 0,\n        height: bitrate.height ?? 0,\n        bitrate: bitrate.bandwidth ?? 0,\n        codec: videoQuality.codec,\n        index\n      };\n      this.#ctx.qualities[ListSymbol.add](quality, trigger);\n    });\n    if (isNumber(videoQuality.index)) {\n      const quality = this.#ctx.qualities[videoQuality.index];\n      if (quality) this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n    audioTracks.forEach((audioTrack, index) => {\n      const matchingLabel = audioTrack.labels.find(label2 => {\n        return navigator.languages.some(language => {\n          return label2.lang && language.toLowerCase().startsWith(label2.lang.toLowerCase());\n        });\n      });\n      const label = matchingLabel || audioTrack.labels[0];\n      const localTrack = {\n        id: `dash-audio-${audioTrack?.index}`,\n        label: label?.text ?? (audioTrack.lang && getLangName(audioTrack.lang)) ?? audioTrack.lang ?? \"\",\n        language: audioTrack.lang ?? \"\",\n        kind: \"main\",\n        mimeType: audioTrack.mimeType,\n        codec: audioTrack.codec,\n        index\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localTrack, trigger);\n    });\n    media.dispatchEvent(new DOMEvent(\"canplay\", {\n      trigger\n    }));\n  }\n  #onError(event) {\n    const {\n      type: eventType,\n      error: data\n    } = event;\n    {\n      this.#ctx.logger?.errorGroup(`[vidstack] DASH error \\`${data.message}\\``).labelledLog(\"Media Element\", this.#video).labelledLog(\"DASH Instance\", this.#instance).labelledLog(\"Event Type\", eventType).labelledLog(\"Data\", data).labelledLog(\"Src\", peek(this.#ctx.$state.source)).labelledLog(\"Media Store\", {\n        ...this.#ctx.$state\n      }).dispatch();\n    }\n    switch (data.code) {\n      case 27:\n        this.#onNetworkError(data);\n        break;\n      default:\n        this.#onFatalError(data);\n        break;\n    }\n  }\n  #onFragmentLoadStart() {\n    if (this.#retryLoadingTimer >= 0) this.#clearRetryTimer();\n  }\n  #onFragmentLoadComplete(event) {\n    const mediaType = event.mediaType;\n    if (mediaType === \"text\") {\n      requestAnimationFrame(this.#onTextFragmentLoaded.bind(this, event));\n    }\n  }\n  #retryLoadingTimer = -1;\n  #onNetworkError(error) {\n    this.#clearRetryTimer();\n    this.#instance?.play();\n    this.#retryLoadingTimer = window.setTimeout(() => {\n      this.#retryLoadingTimer = -1;\n      this.#onFatalError(error);\n    }, 5e3);\n  }\n  #clearRetryTimer() {\n    clearTimeout(this.#retryLoadingTimer);\n    this.#retryLoadingTimer = -1;\n  }\n  #onFatalError(error) {\n    this.#ctx.notify(\"error\", {\n      message: error.message ?? \"\",\n      code: 1,\n      error\n    });\n  }\n  #enableAutoQuality() {\n    this.#switchAutoBitrate(\"video\", true);\n    const {\n      qualities\n    } = this.#ctx;\n    this.#instance?.setQualityFor(\"video\", qualities.selectedIndex, true);\n  }\n  #switchAutoBitrate(type, auto) {\n    this.#instance?.updateSettings({\n      streaming: {\n        abr: {\n          autoSwitchBitrate: {\n            [type]: auto\n          }\n        }\n      }\n    });\n  }\n  #onUserQualityChange() {\n    const {\n      qualities\n    } = this.#ctx;\n    if (!this.#instance || qualities.auto || !qualities.selected) return;\n    this.#switchAutoBitrate(\"video\", false);\n    this.#instance.setQualityFor(\"video\", qualities.selectedIndex, qualities.switch === \"current\");\n    if (IS_CHROME) {\n      this.#video.currentTime = this.#video.currentTime;\n    }\n  }\n  #onUserAudioChange() {\n    if (!this.#instance) return;\n    const {\n        audioTracks\n      } = this.#ctx,\n      selectedTrack = this.#instance.getTracksFor(\"audio\").find(track => audioTracks.selected && audioTracks.selected.id === `dash-audio-${track.index}`);\n    if (selectedTrack) this.#instance.setCurrentTrack(selectedTrack);\n  }\n  #reset() {\n    this.#clearRetryTimer();\n    this.#currentTrack = null;\n    this.#cueTracker = {};\n  }\n  onInstance(callback) {\n    this.#callbacks.add(callback);\n    return () => this.#callbacks.delete(callback);\n  }\n  loadSource(src) {\n    this.#reset();\n    if (!isString(src.src)) return;\n    this.#instance?.attachSource(src.src);\n  }\n  destroy() {\n    this.#reset();\n    this.#instance?.destroy();\n    this.#instance = null;\n    this.#stopLiveSync?.();\n    this.#stopLiveSync = null;\n    this.#ctx?.logger?.info(\"\\u{1F3D7}\\uFE0F Destroyed DASH instance\");\n  }\n}\nfunction coerceToError(error) {\n  return error instanceof Error ? error : Error(typeof error === \"string\" ? error : JSON.stringify(error));\n}\nfunction assert(condition, message) {\n  if (!condition) {\n    throw Error(message || \"Assertion failed.\");\n  }\n}\nclass DASHLibLoader {\n  #lib;\n  #ctx;\n  #callback;\n  constructor(lib, ctx, callback) {\n    this.#lib = lib;\n    this.#ctx = ctx;\n    this.#callback = callback;\n    this.#startLoading();\n  }\n  async #startLoading() {\n    this.#ctx.logger?.info(\"\\u{1F3D7}\\uFE0F Loading DASH Library\");\n    const callbacks = {\n      onLoadStart: this.#onLoadStart.bind(this),\n      onLoaded: this.#onLoaded.bind(this),\n      onLoadError: this.#onLoadError.bind(this)\n    };\n    let ctor = await loadDASHScript(this.#lib, callbacks);\n    if (isUndefined(ctor) && !isString(this.#lib)) ctor = await importDASH(this.#lib, callbacks);\n    if (!ctor) return null;\n    if (!window.dashjs.supportsMediaSource()) {\n      const message = \"[vidstack] `dash.js` is not supported in this environment\";\n      this.#ctx.logger?.error(message);\n      this.#ctx.player.dispatch(new DOMEvent(\"dash-unsupported\"));\n      this.#ctx.notify(\"error\", {\n        message,\n        code: 4\n      });\n      return null;\n    }\n    return ctor;\n  }\n  #onLoadStart() {\n    {\n      this.#ctx.logger?.infoGroup(\"Starting to load `dash.js`\").labelledLog(\"URL\", this.#lib).dispatch();\n    }\n    this.#ctx.player.dispatch(new DOMEvent(\"dash-lib-load-start\"));\n  }\n  #onLoaded(ctor) {\n    {\n      this.#ctx.logger?.infoGroup(\"Loaded `dash.js`\").labelledLog(\"Library\", this.#lib).labelledLog(\"Constructor\", ctor).dispatch();\n    }\n    this.#ctx.player.dispatch(new DOMEvent(\"dash-lib-loaded\", {\n      detail: ctor\n    }));\n    this.#callback(ctor);\n  }\n  #onLoadError(e) {\n    const error = coerceToError(e);\n    {\n      this.#ctx.logger?.errorGroup(\"[vidstack] Failed to load `dash.js`\").labelledLog(\"Library\", this.#lib).labelledLog(\"Error\", e).dispatch();\n    }\n    this.#ctx.player.dispatch(new DOMEvent(\"dash-lib-load-error\", {\n      detail: error\n    }));\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importDASH(loader, callbacks = {}) {\n  if (isUndefined(loader)) return void 0;\n  callbacks.onLoadStart?.();\n  if (isDASHConstructor(loader)) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  if (isDASHNamespace(loader)) {\n    const ctor = loader.MediaPlayer;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (isDASHNamespace(ctor)) {\n      callbacks.onLoaded?.(ctor.MediaPlayer);\n      return ctor.MediaPlayer;\n    }\n    if (ctor) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(true ? \"[vidstack] failed importing `dash.js`. Dynamic import returned invalid object.\" : \"\");\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadDASHScript(src, callbacks = {}) {\n  if (!isString(src)) return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.dashjs.MediaPlayer)) {\n      throw Error(true ? \"[vidstack] failed loading `dash.js`. Could not find a valid `Dash` constructor on window\" : \"\");\n    }\n    const ctor = window.dashjs.MediaPlayer;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nfunction isDASHConstructor(value) {\n  return value && value.prototype && value.prototype !== Function;\n}\nfunction isDASHNamespace(value) {\n  return value && \"MediaPlayer\" in value;\n}\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass DASHProvider extends VideoProvider {\n  $$PROVIDER_TYPE = \"DASH\";\n  #ctor = null;\n  #controller = new DASHController(this.video, this.ctx);\n  /**\n   * The `dash.js` constructor.\n   */\n  get ctor() {\n    return this.#ctor;\n  }\n  /**\n   * The current `dash.js` instance.\n   */\n  get instance() {\n    return this.#controller.instance;\n  }\n  /**\n   * Whether `dash.js` is supported in this environment.\n   */\n  static supported = isDASHSupported();\n  get type() {\n    return \"dash\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  #library = `${JS_DELIVR_CDN}/npm/dashjs@4.7.4/dist/dash${\".all.debug.js\"}`;\n  /**\n   * The `dash.js` configuration object.\n   *\n   * @see {@link https://cdn.dashjs.org/latest/jsdoc/module-Settings.html}\n   */\n  get config() {\n    return this.#controller.config;\n  }\n  set config(config) {\n    this.#controller.config = config;\n  }\n  /**\n   * The `dash.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/dashjs@4.7.4/dist/dash.all.min.js`\n   */\n  get library() {\n    return this.#library;\n  }\n  set library(library) {\n    this.#library = library;\n  }\n  preconnect() {\n    if (!isString(this.#library)) return;\n    preconnect(this.#library);\n  }\n  setup() {\n    super.setup();\n    new DASHLibLoader(this.#library, this.ctx, ctor => {\n      this.#ctor = ctor;\n      this.#controller.setup(ctor);\n      this.ctx.notify(\"provider-setup\", this);\n      const src = peek(this.ctx.$state.source);\n      if (src) this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.removeSource();\n      return;\n    }\n    this.media.preload = preload || \"\";\n    this.appendSource(src, \"application/x-mpegurl\");\n    this.#controller.loadSource(src);\n    this.currentSrc = src;\n  }\n  /**\n   * The given callback is invoked when a new `dash.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.#controller.instance;\n    if (instance) callback(instance);\n    return this.#controller.onInstance(callback);\n  }\n  destroy() {\n    this.#controller.destroy();\n  }\n}\nvar provider = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DASHProvider: DASHProvider\n});\nclass DASHProviderLoader extends VideoProviderLoader {\n  static supported = isDASHSupported();\n  name = \"dash\";\n  canPlay(src) {\n    return DASHProviderLoader.supported && isDASHSrc(src);\n  }\n  async load(context) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load dash provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\"[vidstack] `<video>` element was not found - did you forget to include `<media-provider>`?\");\n    }\n    return new (await Promise.resolve().then(function () {\n      return provider;\n    })).DASHProvider(this.target, context);\n  }\n}\nclass VimeoProviderLoader {\n  name = \"vimeo\";\n  target;\n  preconnect() {\n    const connections = [\"https://i.vimeocdn.com\", \"https://f.vimeocdn.com\", \"https://fresnel.vimeocdn.com\"];\n    for (const url of connections) {\n      preconnect(url);\n    }\n  }\n  canPlay(src) {\n    return isString(src.src) && src.type === \"video/vimeo\";\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load vimeo provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\"[vidstack] `<iframe>` element was not found - did you forget to include media provider?\");\n    }\n    return new (await import('./vidstack-DF6waG6B.js')).VimeoProvider(this.target, ctx);\n  }\n  async loadPoster(src, ctx, abort) {\n    const {\n      resolveVimeoVideoId,\n      getVimeoVideoInfo\n    } = await import('./vidstack-krOAtKMi.js');\n    if (!isString(src.src)) return null;\n    const {\n      videoId,\n      hash\n    } = resolveVimeoVideoId(src.src);\n    if (videoId) {\n      return getVimeoVideoInfo(videoId, abort, hash).then(info => info ? info.poster : null);\n    }\n    return null;\n  }\n}\nclass YouTubeProviderLoader {\n  name = \"youtube\";\n  target;\n  preconnect() {\n    const connections = [\n    // Botguard script.\n    \"https://www.google.com\",\n    // Posters.\n    \"https://i.ytimg.com\",\n    // Ads.\n    \"https://googleads.g.doubleclick.net\", \"https://static.doubleclick.net\"];\n    for (const url of connections) {\n      preconnect(url);\n    }\n  }\n  canPlay(src) {\n    return isString(src.src) && src.type === \"video/youtube\";\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load youtube provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\"[vidstack] `<iframe>` element was not found - did you forget to include media provider?\");\n    }\n    return new (await import('./vidstack-Breph70c.js')).YouTubeProvider(this.target, ctx);\n  }\n  async loadPoster(src, ctx, abort) {\n    const {\n      findYouTubePoster,\n      resolveYouTubeVideoId\n    } = await import('./vidstack-Zc3I7oOd.js');\n    const videoId = isString(src.src) && resolveYouTubeVideoId(src.src);\n    if (videoId) return findYouTubePoster(videoId, abort);\n    return null;\n  }\n}\nfunction padNumberWithZeroes(num, expectedLength) {\n  const str = String(num);\n  const actualLength = str.length;\n  const shouldPad = actualLength < expectedLength;\n  if (shouldPad) {\n    const padLength = expectedLength - actualLength;\n    const padding = `0`.repeat(padLength);\n    return `${padding}${num}`;\n  }\n  return str;\n}\nfunction parseTime(duration) {\n  const hours = Math.trunc(duration / 3600);\n  const minutes = Math.trunc(duration % 3600 / 60);\n  const seconds = Math.trunc(duration % 60);\n  const fraction = Number((duration - Math.trunc(duration)).toPrecision(3));\n  return {\n    hours,\n    minutes,\n    seconds,\n    fraction\n  };\n}\nfunction formatTime(duration, {\n  padHrs = null,\n  padMins = null,\n  showHrs = false,\n  showMs = false\n} = {}) {\n  const {\n      hours,\n      minutes,\n      seconds,\n      fraction\n    } = parseTime(duration),\n    paddedHours = padHrs ? padNumberWithZeroes(hours, 2) : hours,\n    paddedMinutes = padMins || isNull(padMins) && duration >= 3600 ? padNumberWithZeroes(minutes, 2) : minutes,\n    paddedSeconds = padNumberWithZeroes(seconds, 2),\n    paddedMs = showMs && fraction > 0 ? `.${String(fraction).replace(/^0?\\./, \"\")}` : \"\",\n    time = `${paddedMinutes}:${paddedSeconds}${paddedMs}`;\n  return hours > 0 || showHrs ? `${paddedHours}:${time}` : time;\n}\nfunction formatSpokenTime(duration) {\n  const spokenParts = [];\n  const {\n    hours,\n    minutes,\n    seconds\n  } = parseTime(duration);\n  if (hours > 0) {\n    spokenParts.push(`${hours} hour`);\n  }\n  if (minutes > 0) {\n    spokenParts.push(`${minutes} min`);\n  }\n  if (seconds > 0 || spokenParts.length === 0) {\n    spokenParts.push(`${seconds} sec`);\n  }\n  return spokenParts.join(\" \");\n}\nconst MEDIA_ATTRIBUTES = Symbol(\"MEDIA_ATTRIBUTES\");\nconst mediaAttributes = [\"autoPlay\", \"canAirPlay\", \"canFullscreen\", \"canGoogleCast\", \"canLoad\", \"canLoadPoster\", \"canPictureInPicture\", \"canPlay\", \"canSeek\", \"ended\", \"fullscreen\", \"isAirPlayConnected\", \"isGoogleCastConnected\", \"live\", \"liveEdge\", \"loop\", \"mediaType\", \"muted\", \"paused\", \"pictureInPicture\", \"playing\", \"playsInline\", \"remotePlaybackState\", \"remotePlaybackType\", \"seeking\", \"started\", \"streamType\", \"viewType\", \"waiting\"];\nconst mediaPlayerProps = {\n  artist: \"\",\n  artwork: null,\n  autoplay: false,\n  autoPlay: false,\n  clipStartTime: 0,\n  clipEndTime: 0,\n  controls: false,\n  currentTime: 0,\n  crossorigin: null,\n  crossOrigin: null,\n  duration: -1,\n  fullscreenOrientation: \"landscape\",\n  googleCast: {},\n  load: \"visible\",\n  posterLoad: \"visible\",\n  logLevel: \"warn\",\n  loop: false,\n  muted: false,\n  paused: true,\n  playsinline: false,\n  playsInline: false,\n  playbackRate: 1,\n  poster: \"\",\n  preload: \"metadata\",\n  preferNativeHLS: false,\n  src: \"\",\n  title: \"\",\n  controlsDelay: 2e3,\n  hideControlsOnMouseLeave: false,\n  viewType: \"unknown\",\n  streamType: \"unknown\",\n  volume: 1,\n  liveEdgeTolerance: 10,\n  minLiveDVRWindow: 60,\n  keyDisabled: false,\n  keyTarget: \"player\",\n  keyShortcuts: MEDIA_KEY_SHORTCUTS,\n  storage: null\n};\nconst MEDIA_EVENTS = [\"abort\", \"can-play\", \"can-play-through\", \"duration-change\", \"emptied\", \"ended\", \"error\", \"fullscreen-change\", \"loaded-data\", \"loaded-metadata\", \"load-start\", \"media-type-change\", \"pause\", \"play\", \"playing\", \"progress\", \"seeked\", \"seeking\", \"source-change\", \"sources-change\", \"stalled\", \"started\", \"suspend\", \"stream-type-change\", \"replay\",\n// time-change,\n// 'time-update',\n\"view-type-change\", \"volume-change\", \"waiting\"];\nclass MediaEventsLogger extends MediaPlayerController {\n  #media;\n  constructor(media) {\n    super();\n    this.#media = media;\n  }\n  onConnect(el) {\n    const events = new EventsController(el),\n      handler = this.#onMediaEvent.bind(this);\n    for (const eventType of MEDIA_EVENTS) {\n      events.add(eventType, handler);\n    }\n  }\n  #onMediaEvent(event) {\n    this.#media.logger?.debugGroup(`\\u{1F4E1} dispatching \\`${event.type}\\``).labelledLog(\"Media Store\", {\n      ...this.$state\n    }).labelledLog(\"Event\", event).dispatch();\n  }\n}\nclass MediaLoadController extends MediaPlayerController {\n  #type;\n  #callback;\n  constructor(type, callback) {\n    super();\n    this.#type = type;\n    this.#callback = callback;\n  }\n  async onAttach(el) {\n    if (IS_SERVER) return;\n    const load = this.$props[this.#type]();\n    if (load === \"eager\") {\n      requestAnimationFrame(this.#callback);\n    } else if (load === \"idle\") {\n      waitIdlePeriod(this.#callback);\n    } else if (load === \"visible\") {\n      let dispose,\n        observer = new IntersectionObserver(entries => {\n          if (!this.scope) return;\n          if (entries[0].isIntersecting) {\n            dispose?.();\n            dispose = void 0;\n            this.#callback();\n          }\n        });\n      observer.observe(el);\n      dispose = onDispose(() => observer.disconnect());\n    }\n  }\n}\nlet seenAutoplayWarning = false;\nclass MediaPlayerDelegate {\n  #handle;\n  #media;\n  constructor(handle, media) {\n    this.#handle = handle;\n    this.#media = media;\n  }\n  notify(type, ...init) {\n    if (IS_SERVER) return;\n    this.#handle(new DOMEvent(type, {\n      detail: init?.[0],\n      trigger: init?.[1]\n    }));\n  }\n  async ready(info, trigger) {\n    if (IS_SERVER) return;\n    return untrack(async () => {\n      const {\n          logger\n        } = this.#media,\n        {\n          autoPlay,\n          canPlay,\n          started,\n          duration,\n          seekable,\n          buffered,\n          remotePlaybackInfo,\n          playsInline,\n          savedState,\n          source\n        } = this.#media.$state;\n      if (canPlay()) return;\n      const detail = {\n        duration: info?.duration ?? duration(),\n        seekable: info?.seekable ?? seekable(),\n        buffered: info?.buffered ?? buffered(),\n        provider: this.#media.$provider()\n      };\n      this.notify(\"can-play\", detail, trigger);\n      tick();\n      {\n        logger?.infoGroup(\"-~-~-~-~-~-~- \\u2705 MEDIA READY -~-~-~-~-~-~-\").labelledLog(\"Media\", this.#media).labelledLog(\"Trigger Event\", trigger).dispatch();\n      }\n      let provider = this.#media.$provider(),\n        {\n          storage,\n          qualities\n        } = this.#media,\n        {\n          muted,\n          volume,\n          clipStartTime,\n          playbackRate\n        } = this.#media.$props;\n      await storage?.onLoad?.(source());\n      const savedPlaybackTime = savedState()?.currentTime,\n        savedPausedState = savedState()?.paused,\n        storageTime = await storage?.getTime(),\n        startTime = savedPlaybackTime ?? storageTime ?? clipStartTime(),\n        shouldAutoPlay = savedPausedState === false || savedPausedState !== true && !started() && autoPlay();\n      if (provider) {\n        provider.setVolume((await storage?.getVolume()) ?? volume());\n        provider.setMuted(muted() || !!(await storage?.getMuted()));\n        const audioGain = (await storage?.getAudioGain()) ?? 1;\n        if (audioGain > 1) provider.audioGain?.setGain?.(audioGain);\n        provider.setPlaybackRate?.((await storage?.getPlaybackRate()) ?? playbackRate());\n        provider.setPlaysInline?.(playsInline());\n        if (startTime > 0) provider.setCurrentTime(startTime);\n      }\n      const prefQuality = await storage?.getVideoQuality();\n      if (prefQuality && qualities.length) {\n        let currentQuality = null,\n          currentScore = Infinity;\n        for (const quality of qualities) {\n          const score = Math.abs(prefQuality.width - quality.width) + Math.abs(prefQuality.height - quality.height) + (prefQuality.bitrate ? Math.abs(prefQuality.bitrate - (quality.bitrate ?? 0)) : 0);\n          if (score < currentScore) {\n            currentQuality = quality;\n            currentScore = score;\n          }\n        }\n        if (currentQuality) currentQuality.selected = true;\n      }\n      if (canPlay() && shouldAutoPlay) {\n        await this.#attemptAutoplay(trigger);\n      } else if (storageTime && storageTime > 0) {\n        this.notify(\"started\", void 0, trigger);\n      }\n      remotePlaybackInfo.set(null);\n    });\n  }\n  async #attemptAutoplay(trigger) {\n    const {\n      player,\n      $state: {\n        autoPlaying,\n        muted\n      }\n    } = this.#media;\n    autoPlaying.set(true);\n    const attemptEvent = new DOMEvent(\"auto-play-attempt\", {\n      trigger\n    });\n    try {\n      await player.play(attemptEvent);\n    } catch (error) {\n      if (!seenAutoplayWarning) {\n        const muteMsg = !muted() ? \" Attempting with volume muted will most likely resolve the issue.\" : \"\";\n        this.#media.logger?.errorGroup(\"[vidstack] auto-play request failed\").labelledLog(\"Message\", `Autoplay was requested but failed most likely due to browser autoplay policies.${muteMsg}`).labelledLog(\"Trigger Event\", trigger).labelledLog(\"Error\", error).labelledLog(\"See\", \"https://developer.chrome.com/blog/autoplay\").dispatch();\n        seenAutoplayWarning = true;\n      }\n    }\n  }\n}\nclass Queue {\n  #queue = /* @__PURE__ */new Map();\n  /**\n   * Queue the given `item` under the given `key` to be processed at a later time by calling\n   * `serve(key)`.\n   */\n  enqueue(key, item) {\n    this.#queue.set(key, item);\n  }\n  /**\n   * Process item in queue for the given `key`.\n   */\n  serve(key) {\n    const value = this.peek(key);\n    this.#queue.delete(key);\n    return value;\n  }\n  /**\n   * Peek at item in queue for the given `key`.\n   */\n  peek(key) {\n    return this.#queue.get(key);\n  }\n  /**\n   * Removes queued item under the given `key`.\n   */\n  delete(key) {\n    this.#queue.delete(key);\n  }\n  /**\n   * Clear all items in the queue.\n   */\n  clear() {\n    this.#queue.clear();\n  }\n}\nclass RequestQueue {\n  #serving = false;\n  #pending = deferredPromise();\n  #queue = /* @__PURE__ */new Map();\n  /**\n   * The number of callbacks that are currently in queue.\n   */\n  get size() {\n    return this.#queue.size;\n  }\n  /**\n   * Whether items in the queue are being served immediately, otherwise they're queued to\n   * be processed later.\n   */\n  get isServing() {\n    return this.#serving;\n  }\n  /**\n   * Waits for the queue to be flushed (ie: start serving).\n   */\n  async waitForFlush() {\n    if (this.#serving) return;\n    await this.#pending.promise;\n  }\n  /**\n   * Queue the given `callback` to be invoked at a later time by either calling the `serve()` or\n   * `start()` methods. If the queue has started serving (i.e., `start()` was already called),\n   * then the callback will be invoked immediately.\n   *\n   * @param key - Uniquely identifies this callback so duplicates are ignored.\n   * @param callback - The function to call when this item in the queue is being served.\n   */\n  enqueue(key, callback) {\n    if (this.#serving) {\n      callback();\n      return;\n    }\n    this.#queue.delete(key);\n    this.#queue.set(key, callback);\n  }\n  /**\n   * Invokes the callback with the given `key` in the queue (if it exists).\n   */\n  serve(key) {\n    this.#queue.get(key)?.();\n    this.#queue.delete(key);\n  }\n  /**\n   * Flush all queued items and start serving future requests immediately until `stop()` is called.\n   */\n  start() {\n    this.#flush();\n    this.#serving = true;\n    if (this.#queue.size > 0) this.#flush();\n  }\n  /**\n   * Stop serving requests, they'll be queued until you begin processing again by calling `start()`.\n   */\n  stop() {\n    this.#serving = false;\n  }\n  /**\n   * Stop serving requests, empty the request queue, and release any promises waiting for the\n   * queue to flush.\n   */\n  reset() {\n    this.stop();\n    this.#queue.clear();\n    this.#release();\n  }\n  #flush() {\n    for (const key of this.#queue.keys()) this.serve(key);\n    this.#release();\n  }\n  #release() {\n    this.#pending.resolve();\n    this.#pending = deferredPromise();\n  }\n}\nclass MediaRequestManager extends MediaPlayerController {\n  #stateMgr;\n  #request;\n  #media;\n  controls;\n  #fullscreen;\n  #orientation;\n  #$provider;\n  #providerQueue = new RequestQueue();\n  constructor(stateMgr, request, media) {\n    super();\n    this.#stateMgr = stateMgr;\n    this.#request = request;\n    this.#media = media;\n    this.#$provider = media.$provider;\n    this.controls = new MediaControls();\n    this.#fullscreen = new FullscreenController();\n    this.#orientation = new ScreenOrientationController();\n  }\n  onAttach() {\n    this.listen(\"fullscreen-change\", this.#onFullscreenChange.bind(this));\n  }\n  onConnect(el) {\n    const names = Object.getOwnPropertyNames(Object.getPrototypeOf(this)),\n      events = new EventsController(el),\n      handleRequest = this.#handleRequest.bind(this);\n    for (const name of names) {\n      if (name.startsWith(\"media-\")) {\n        events.add(name, handleRequest);\n      }\n    }\n    this.#attachLoadPlayListener();\n    effect(this.#watchProvider.bind(this));\n    effect(this.#watchControlsDelayChange.bind(this));\n    effect(this.#watchAudioGainSupport.bind(this));\n    effect(this.#watchAirPlaySupport.bind(this));\n    effect(this.#watchGoogleCastSupport.bind(this));\n    effect(this.#watchFullscreenSupport.bind(this));\n    effect(this.#watchPiPSupport.bind(this));\n  }\n  onDestroy() {\n    try {\n      const destroyEvent = this.createEvent(\"destroy\"),\n        {\n          pictureInPicture,\n          fullscreen\n        } = this.$state;\n      if (fullscreen()) this.exitFullscreen(\"prefer-media\", destroyEvent);\n      if (pictureInPicture()) this.exitPictureInPicture(destroyEvent);\n    } catch (e) {}\n    this.#providerQueue.reset();\n  }\n  #attachLoadPlayListener() {\n    const {\n        load\n      } = this.$props,\n      {\n        canLoad\n      } = this.$state;\n    if (load() !== \"play\" || canLoad()) return;\n    const off = this.listen(\"media-play-request\", event => {\n      this.#handleLoadPlayStrategy(event);\n      off();\n    });\n  }\n  #watchProvider() {\n    const provider = this.#$provider(),\n      canPlay = this.$state.canPlay();\n    if (provider && canPlay) {\n      this.#providerQueue.start();\n    }\n    return () => {\n      this.#providerQueue.stop();\n    };\n  }\n  #handleRequest(event) {\n    event.stopPropagation();\n    if (event.defaultPrevented) return;\n    {\n      this.#media.logger?.infoGroup(`\\u{1F4EC} received \\`${event.type}\\``).labelledLog(\"Request\", event).dispatch();\n    }\n    if (!this[event.type]) return;\n    if (peek(this.#$provider)) {\n      this[event.type](event);\n    } else {\n      this.#providerQueue.enqueue(event.type, () => {\n        if (peek(this.#$provider)) this[event.type](event);\n      });\n    }\n  }\n  async play(trigger) {\n    if (IS_SERVER) return;\n    const {\n      canPlay,\n      paused,\n      autoPlaying\n    } = this.$state;\n    if (this.#handleLoadPlayStrategy(trigger)) return;\n    if (!peek(paused)) return;\n    if (trigger) this.#request.queue.enqueue(\"media-play-request\", trigger);\n    const isAutoPlaying = peek(autoPlaying);\n    try {\n      const provider = peek(this.#$provider);\n      throwIfNotReadyForPlayback(provider, peek(canPlay));\n      return await provider.play();\n    } catch (error) {\n      this.#logError(\"play request failed\", error, trigger);\n      const errorEvent = this.createEvent(\"play-fail\", {\n        detail: coerceToError(error),\n        trigger\n      });\n      errorEvent.autoPlay = isAutoPlaying;\n      this.#stateMgr.handle(errorEvent);\n      throw error;\n    }\n  }\n  #handleLoadPlayStrategy(trigger) {\n    const {\n        load\n      } = this.$props,\n      {\n        canLoad\n      } = this.$state;\n    if (load() === \"play\" && !canLoad()) {\n      const event = this.createEvent(\"media-start-loading\", {\n        trigger\n      });\n      this.dispatchEvent(event);\n      this.#providerQueue.enqueue(\"media-play-request\", async () => {\n        try {\n          await this.play(event);\n        } catch (error) {}\n      });\n      return true;\n    }\n    return false;\n  }\n  async pause(trigger) {\n    if (IS_SERVER) return;\n    const {\n      canPlay,\n      paused\n    } = this.$state;\n    if (peek(paused)) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-pause-request\", trigger);\n    }\n    try {\n      const provider = peek(this.#$provider);\n      throwIfNotReadyForPlayback(provider, peek(canPlay));\n      return await provider.pause();\n    } catch (error) {\n      this.#request.queue.delete(\"media-pause-request\");\n      {\n        this.#logError(\"pause request failed\", error, trigger);\n      }\n      throw error;\n    }\n  }\n  setAudioGain(gain, trigger) {\n    const {\n      audioGain,\n      canSetAudioGain\n    } = this.$state;\n    if (audioGain() === gain) return;\n    const provider = this.#$provider();\n    if (!provider?.audioGain || !canSetAudioGain()) {\n      throw Error(\"[vidstack] audio gain api not available\");\n    }\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-audio-gain-change-request\", trigger);\n    }\n    provider.audioGain.setGain(gain);\n  }\n  seekToLiveEdge(trigger) {\n    if (IS_SERVER) return;\n    const {\n      canPlay,\n      live,\n      liveEdge,\n      canSeek,\n      liveSyncPosition,\n      seekableEnd,\n      userBehindLiveEdge\n    } = this.$state;\n    userBehindLiveEdge.set(false);\n    if (peek(() => !live() || liveEdge() || !canSeek())) return;\n    const provider = peek(this.#$provider);\n    throwIfNotReadyForPlayback(provider, peek(canPlay));\n    if (trigger) this.#request.queue.enqueue(\"media-seek-request\", trigger);\n    const end = seekableEnd() - 2;\n    provider.setCurrentTime(Math.min(end, liveSyncPosition() ?? end));\n  }\n  #wasPIPActive = false;\n  async enterFullscreen(target = \"prefer-media\", trigger) {\n    if (IS_SERVER) return;\n    const adapter = this.#getFullscreenAdapter(target);\n    throwIfFullscreenNotSupported(target, adapter);\n    if (adapter.active) return;\n    if (peek(this.$state.pictureInPicture)) {\n      this.#wasPIPActive = true;\n      await this.exitPictureInPicture(trigger);\n    }\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-enter-fullscreen-request\", trigger);\n    }\n    return adapter.enter();\n  }\n  async exitFullscreen(target = \"prefer-media\", trigger) {\n    if (IS_SERVER) return;\n    const adapter = this.#getFullscreenAdapter(target);\n    throwIfFullscreenNotSupported(target, adapter);\n    if (!adapter.active) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-exit-fullscreen-request\", trigger);\n    }\n    try {\n      const result = await adapter.exit();\n      if (this.#wasPIPActive && peek(this.$state.canPictureInPicture)) {\n        await this.enterPictureInPicture();\n      }\n      return result;\n    } finally {\n      this.#wasPIPActive = false;\n    }\n  }\n  #getFullscreenAdapter(target) {\n    const provider = peek(this.#$provider);\n    return target === \"prefer-media\" && this.#fullscreen.supported || target === \"media\" ? this.#fullscreen : provider?.fullscreen;\n  }\n  async enterPictureInPicture(trigger) {\n    if (IS_SERVER) return;\n    this.#throwIfPIPNotSupported();\n    if (this.$state.pictureInPicture()) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-enter-pip-request\", trigger);\n    }\n    return await this.#$provider().pictureInPicture.enter();\n  }\n  async exitPictureInPicture(trigger) {\n    if (IS_SERVER) return;\n    this.#throwIfPIPNotSupported();\n    if (!this.$state.pictureInPicture()) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-exit-pip-request\", trigger);\n    }\n    return await this.#$provider().pictureInPicture.exit();\n  }\n  #throwIfPIPNotSupported() {\n    if (this.$state.canPictureInPicture()) return;\n    throw Error(`[vidstack] picture-in-picture is not currently available`);\n  }\n  #watchControlsDelayChange() {\n    this.controls.defaultDelay = this.$props.controlsDelay();\n  }\n  #watchAudioGainSupport() {\n    const {\n        canSetAudioGain\n      } = this.$state,\n      supported = !!this.#$provider()?.audioGain?.supported;\n    canSetAudioGain.set(supported);\n  }\n  #watchAirPlaySupport() {\n    const {\n        canAirPlay\n      } = this.$state,\n      supported = !!this.#$provider()?.airPlay?.supported;\n    canAirPlay.set(supported);\n  }\n  #watchGoogleCastSupport() {\n    const {\n        canGoogleCast,\n        source\n      } = this.$state,\n      supported = IS_CHROME && !IS_IOS && canGoogleCastSrc(source());\n    canGoogleCast.set(supported);\n  }\n  #watchFullscreenSupport() {\n    const {\n        canFullscreen\n      } = this.$state,\n      supported = this.#fullscreen.supported || !!this.#$provider()?.fullscreen?.supported;\n    canFullscreen.set(supported);\n  }\n  #watchPiPSupport() {\n    const {\n        canPictureInPicture\n      } = this.$state,\n      supported = !!this.#$provider()?.pictureInPicture?.supported;\n    canPictureInPicture.set(supported);\n  }\n  async [\"media-airplay-request\"](event) {\n    try {\n      await this.requestAirPlay(event);\n    } catch (error) {}\n  }\n  async requestAirPlay(trigger) {\n    try {\n      const adapter = this.#$provider()?.airPlay;\n      if (!adapter?.supported) {\n        throw Error(true ? \"AirPlay adapter not available on provider.\" : \"No AirPlay adapter.\");\n      }\n      if (trigger) {\n        this.#request.queue.enqueue(\"media-airplay-request\", trigger);\n      }\n      return await adapter.prompt();\n    } catch (error) {\n      this.#request.queue.delete(\"media-airplay-request\");\n      {\n        this.#logError(\"airplay request failed\", error, trigger);\n      }\n      throw error;\n    }\n  }\n  async [\"media-google-cast-request\"](event) {\n    try {\n      await this.requestGoogleCast(event);\n    } catch (error) {}\n  }\n  #googleCastLoader;\n  async requestGoogleCast(trigger) {\n    try {\n      const {\n        canGoogleCast\n      } = this.$state;\n      if (!peek(canGoogleCast)) {\n        const error = Error(true ? \"Google Cast not available on this platform.\" : \"Cast not available.\");\n        error.code = \"CAST_NOT_AVAILABLE\";\n        throw error;\n      }\n      preconnect(\"https://www.gstatic.com\");\n      if (!this.#googleCastLoader) {\n        const $module = await import('./vidstack-C8ZxSSGF.js').then(function (n) {\n          return n.loader;\n        });\n        this.#googleCastLoader = new $module.GoogleCastLoader();\n      }\n      await this.#googleCastLoader.prompt(this.#media);\n      if (trigger) {\n        this.#request.queue.enqueue(\"media-google-cast-request\", trigger);\n      }\n      const isConnecting = peek(this.$state.remotePlaybackState) !== \"disconnected\";\n      if (isConnecting) {\n        this.$state.savedState.set({\n          paused: peek(this.$state.paused),\n          currentTime: peek(this.$state.currentTime)\n        });\n      }\n      this.$state.remotePlaybackLoader.set(isConnecting ? this.#googleCastLoader : null);\n    } catch (error) {\n      this.#request.queue.delete(\"media-google-cast-request\");\n      {\n        this.#logError(\"google cast request failed\", error, trigger);\n      }\n      throw error;\n    }\n  }\n  [\"media-clip-start-change-request\"](event) {\n    const {\n      clipStartTime\n    } = this.$state;\n    clipStartTime.set(event.detail);\n  }\n  [\"media-clip-end-change-request\"](event) {\n    const {\n      clipEndTime\n    } = this.$state;\n    clipEndTime.set(event.detail);\n    this.dispatch(\"duration-change\", {\n      detail: event.detail,\n      trigger: event\n    });\n  }\n  [\"media-duration-change-request\"](event) {\n    const {\n      providedDuration,\n      clipEndTime\n    } = this.$state;\n    providedDuration.set(event.detail);\n    if (clipEndTime() <= 0) {\n      this.dispatch(\"duration-change\", {\n        detail: event.detail,\n        trigger: event\n      });\n    }\n  }\n  [\"media-audio-track-change-request\"](event) {\n    const {\n      logger,\n      audioTracks\n    } = this.#media;\n    if (audioTracks.readonly) {\n      {\n        logger?.warnGroup(`[vidstack] attempted to change audio track but it is currently read-only`).labelledLog(\"Request Event\", event).dispatch();\n      }\n      return;\n    }\n    const index = event.detail,\n      track = audioTracks[index];\n    if (track) {\n      const key = event.type;\n      this.#request.queue.enqueue(key, event);\n      track.selected = true;\n    } else {\n      logger?.warnGroup(\"[vidstack] failed audio track change request (invalid index)\").labelledLog(\"Audio Tracks\", audioTracks.toArray()).labelledLog(\"Index\", index).labelledLog(\"Request Event\", event).dispatch();\n    }\n  }\n  async [\"media-enter-fullscreen-request\"](event) {\n    try {\n      await this.enterFullscreen(event.detail, event);\n    } catch (error) {\n      this.#onFullscreenError(error, event);\n    }\n  }\n  async [\"media-exit-fullscreen-request\"](event) {\n    try {\n      await this.exitFullscreen(event.detail, event);\n    } catch (error) {\n      this.#onFullscreenError(error, event);\n    }\n  }\n  async #onFullscreenChange(event) {\n    const lockType = peek(this.$props.fullscreenOrientation),\n      isFullscreen = event.detail;\n    if (isUndefined(lockType) || lockType === \"none\" || !this.#orientation.supported) return;\n    if (isFullscreen) {\n      if (this.#orientation.locked) return;\n      this.dispatch(\"media-orientation-lock-request\", {\n        detail: lockType,\n        trigger: event\n      });\n    } else if (this.#orientation.locked) {\n      this.dispatch(\"media-orientation-unlock-request\", {\n        trigger: event\n      });\n    }\n  }\n  #onFullscreenError(error, request) {\n    {\n      this.#logError(\"fullscreen request failed\", error, request);\n    }\n    this.#stateMgr.handle(this.createEvent(\"fullscreen-error\", {\n      detail: coerceToError(error)\n    }));\n  }\n  async [\"media-orientation-lock-request\"](event) {\n    const key = event.type;\n    try {\n      this.#request.queue.enqueue(key, event);\n      await this.#orientation.lock(event.detail);\n    } catch (error) {\n      this.#request.queue.delete(key);\n      {\n        this.#logError(\"failed to lock screen orientation\", error, event);\n      }\n    }\n  }\n  async [\"media-orientation-unlock-request\"](event) {\n    const key = event.type;\n    try {\n      this.#request.queue.enqueue(key, event);\n      await this.#orientation.unlock();\n    } catch (error) {\n      this.#request.queue.delete(key);\n      {\n        this.#logError(\"failed to unlock screen orientation\", error, event);\n      }\n    }\n  }\n  async [\"media-enter-pip-request\"](event) {\n    try {\n      await this.enterPictureInPicture(event);\n    } catch (error) {\n      this.#onPictureInPictureError(error, event);\n    }\n  }\n  async [\"media-exit-pip-request\"](event) {\n    try {\n      await this.exitPictureInPicture(event);\n    } catch (error) {\n      this.#onPictureInPictureError(error, event);\n    }\n  }\n  #onPictureInPictureError(error, request) {\n    {\n      this.#logError(\"pip request failed\", error, request);\n    }\n    this.#stateMgr.handle(this.createEvent(\"picture-in-picture-error\", {\n      detail: coerceToError(error)\n    }));\n  }\n  [\"media-live-edge-request\"](event) {\n    const {\n      live,\n      liveEdge,\n      canSeek\n    } = this.$state;\n    if (!live() || liveEdge() || !canSeek()) return;\n    this.#request.queue.enqueue(\"media-seek-request\", event);\n    try {\n      this.seekToLiveEdge();\n    } catch (error) {\n      this.#request.queue.delete(\"media-seek-request\");\n      {\n        this.#logError(\"seek to live edge fail\", error, event);\n      }\n    }\n  }\n  async [\"media-loop-request\"](event) {\n    try {\n      this.#request.looping = true;\n      this.#request.replaying = true;\n      await this.play(event);\n    } catch (error) {\n      this.#request.looping = false;\n    }\n  }\n  [\"media-user-loop-change-request\"](event) {\n    this.$state.userPrefersLoop.set(event.detail);\n  }\n  async [\"media-pause-request\"](event) {\n    if (this.$state.paused()) return;\n    try {\n      await this.pause(event);\n    } catch (error) {}\n  }\n  async [\"media-play-request\"](event) {\n    if (!this.$state.paused()) return;\n    try {\n      await this.play(event);\n    } catch (e) {}\n  }\n  [\"media-rate-change-request\"](event) {\n    const {\n      playbackRate,\n      canSetPlaybackRate\n    } = this.$state;\n    if (playbackRate() === event.detail || !canSetPlaybackRate()) return;\n    const provider = this.#$provider();\n    if (!provider?.setPlaybackRate) return;\n    this.#request.queue.enqueue(\"media-rate-change-request\", event);\n    provider.setPlaybackRate(event.detail);\n  }\n  [\"media-audio-gain-change-request\"](event) {\n    try {\n      this.setAudioGain(event.detail, event);\n    } catch (e) {}\n  }\n  [\"media-quality-change-request\"](event) {\n    const {\n      qualities,\n      storage,\n      logger\n    } = this.#media;\n    if (qualities.readonly) {\n      {\n        logger?.warnGroup(`[vidstack] attempted to change video quality but it is currently read-only`).labelledLog(\"Request Event\", event).dispatch();\n      }\n      return;\n    }\n    this.#request.queue.enqueue(\"media-quality-change-request\", event);\n    const index = event.detail;\n    if (index < 0) {\n      qualities.autoSelect(event);\n      if (event.isOriginTrusted) storage?.setVideoQuality?.(null);\n    } else {\n      const quality = qualities[index];\n      if (quality) {\n        quality.selected = true;\n        if (event.isOriginTrusted) {\n          storage?.setVideoQuality?.({\n            id: quality.id,\n            width: quality.width,\n            height: quality.height,\n            bitrate: quality.bitrate\n          });\n        }\n      } else {\n        logger?.warnGroup(\"[vidstack] failed quality change request (invalid index)\").labelledLog(\"Qualities\", qualities.toArray()).labelledLog(\"Index\", index).labelledLog(\"Request Event\", event).dispatch();\n      }\n    }\n  }\n  [\"media-pause-controls-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.controls.pause(event);\n  }\n  [\"media-resume-controls-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.controls.resume(event);\n  }\n  [\"media-seek-request\"](event) {\n    const {\n        canSeek,\n        ended,\n        live,\n        seekableEnd,\n        userBehindLiveEdge\n      } = this.$state,\n      seekTime = event.detail;\n    if (ended()) this.#request.replaying = true;\n    const key = event.type;\n    this.#request.seeking = false;\n    this.#request.queue.delete(key);\n    const boundedTime = boundTime(seekTime, this.$state);\n    if (!Number.isFinite(boundedTime) || !canSeek()) return;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setCurrentTime(boundedTime);\n    if (live() && event.isOriginTrusted && Math.abs(seekableEnd() - boundedTime) >= 2) {\n      userBehindLiveEdge.set(true);\n    }\n  }\n  [\"media-seeking-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.$state.seeking.set(true);\n    this.#request.seeking = true;\n  }\n  [\"media-start-loading\"](event) {\n    if (this.$state.canLoad()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#stateMgr.handle(this.createEvent(\"can-load\"));\n  }\n  [\"media-poster-start-loading\"](event) {\n    if (this.$state.canLoadPoster()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#stateMgr.handle(this.createEvent(\"can-load-poster\"));\n  }\n  [\"media-text-track-change-request\"](event) {\n    const {\n        index,\n        mode\n      } = event.detail,\n      track = this.#media.textTracks[index];\n    if (track) {\n      const key = event.type;\n      this.#request.queue.enqueue(key, event);\n      track.setMode(mode, event);\n    } else {\n      this.#media.logger?.warnGroup(\"[vidstack] failed text track change request (invalid index)\").labelledLog(\"Text Tracks\", this.#media.textTracks.toArray()).labelledLog(\"Index\", index).labelledLog(\"Request Event\", event).dispatch();\n    }\n  }\n  [\"media-mute-request\"](event) {\n    if (this.$state.muted()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setMuted(true);\n  }\n  [\"media-unmute-request\"](event) {\n    const {\n      muted,\n      volume\n    } = this.$state;\n    if (!muted()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#media.$provider().setMuted(false);\n    if (volume() === 0) {\n      this.#request.queue.enqueue(key, event);\n      this.#$provider().setVolume(0.25);\n    }\n  }\n  [\"media-volume-change-request\"](event) {\n    const {\n      muted,\n      volume\n    } = this.$state;\n    const newVolume = event.detail;\n    if (volume() === newVolume) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setVolume(newVolume);\n    if (newVolume > 0 && muted()) {\n      this.#request.queue.enqueue(key, event);\n      this.#$provider().setMuted(false);\n    }\n  }\n  #logError(title, error, request) {\n    this.#media.logger?.errorGroup(`[vidstack] ${title}`).labelledLog(\"Error\", error).labelledLog(\"Media Context\", {\n      ...this.#media\n    }).labelledLog(\"Trigger Event\", request).dispatch();\n  }\n}\nfunction throwIfNotReadyForPlayback(provider, canPlay) {\n  if (provider && canPlay) return;\n  throw Error(`[vidstack] media is not ready - wait for \\`can-play\\` event.`);\n}\nfunction throwIfFullscreenNotSupported(target, fullscreen) {\n  if (fullscreen?.supported) return;\n  throw Error(`[vidstack] fullscreen is not currently available on target \\`${target}\\``);\n}\nclass MediaRequestContext {\n  seeking = false;\n  looping = false;\n  replaying = false;\n  queue = new Queue();\n}\nconst TRACKED_EVENT = /* @__PURE__ */new Set([\"auto-play\", \"auto-play-fail\", \"can-load\", \"sources-change\", \"source-change\", \"load-start\", \"abort\", \"error\", \"loaded-metadata\", \"loaded-data\", \"can-play\", \"play\", \"play-fail\", \"pause\", \"playing\", \"seeking\", \"seeked\", \"waiting\"]);\nclass MediaStateManager extends MediaPlayerController {\n  #request;\n  #media;\n  #trackedEvents = /* @__PURE__ */new Map();\n  #clipEnded = false;\n  #playedIntervals = [];\n  #playedInterval = [-1, -1];\n  #firingWaiting = false;\n  #waitingTrigger;\n  constructor(request, media) {\n    super();\n    this.#request = request;\n    this.#media = media;\n  }\n  onAttach(el) {\n    el.setAttribute(\"aria-busy\", \"true\");\n    new EventsController(this).add(\"fullscreen-change\", this[\"fullscreen-change\"].bind(this)).add(\"fullscreen-error\", this[\"fullscreen-error\"].bind(this)).add(\"orientation-change\", this[\"orientation-change\"].bind(this));\n  }\n  onConnect(el) {\n    effect(this.#watchCanSetVolume.bind(this));\n    this.#addTextTrackListeners();\n    this.#addQualityListeners();\n    this.#addAudioTrackListeners();\n    this.#resumePlaybackOnConnect();\n    onDispose(this.#pausePlaybackOnDisconnect.bind(this));\n  }\n  onDestroy() {\n    const {\n      audioTracks,\n      qualities,\n      textTracks\n    } = this.#media;\n    audioTracks[ListSymbol.reset]();\n    qualities[ListSymbol.reset]();\n    textTracks[ListSymbol.reset]();\n    this.#stopWatchingQualityResize();\n  }\n  handle(event) {\n    if (!this.scope) return;\n    const type = event.type;\n    untrack(() => this[event.type]?.(event));\n    if (!IS_SERVER) {\n      if (TRACKED_EVENT.has(type)) this.#trackedEvents.set(type, event);\n      this.dispatch(event);\n    }\n  }\n  #isPlayingOnDisconnect = false;\n  #resumePlaybackOnConnect() {\n    if (!this.#isPlayingOnDisconnect) return;\n    requestAnimationFrame(() => {\n      if (!this.scope) return;\n      this.#media.remote.play(new DOMEvent(\"dom-connect\"));\n    });\n    this.#isPlayingOnDisconnect = false;\n  }\n  #pausePlaybackOnDisconnect() {\n    if (this.#isPlayingOnDisconnect) return;\n    this.#isPlayingOnDisconnect = !this.$state.paused();\n    this.#media.$provider()?.pause();\n  }\n  #resetTracking() {\n    this.#stopWaiting();\n    this.#clipEnded = false;\n    this.#request.replaying = false;\n    this.#request.looping = false;\n    this.#firingWaiting = false;\n    this.#waitingTrigger = void 0;\n    this.#trackedEvents.clear();\n  }\n  #satisfyRequest(request, event) {\n    const requestEvent = this.#request.queue.serve(request);\n    if (!requestEvent) return;\n    event.request = requestEvent;\n    event.triggers.add(requestEvent);\n  }\n  #addTextTrackListeners() {\n    this.#onTextTracksChange();\n    this.#onTextTrackModeChange();\n    const textTracks = this.#media.textTracks;\n    new EventsController(textTracks).add(\"add\", this.#onTextTracksChange.bind(this)).add(\"remove\", this.#onTextTracksChange.bind(this)).add(\"mode-change\", this.#onTextTrackModeChange.bind(this));\n  }\n  #addQualityListeners() {\n    const qualities = this.#media.qualities;\n    new EventsController(qualities).add(\"add\", this.#onQualitiesChange.bind(this)).add(\"remove\", this.#onQualitiesChange.bind(this)).add(\"change\", this.#onQualityChange.bind(this)).add(\"auto-change\", this.#onAutoQualityChange.bind(this)).add(\"readonly-change\", this.#onCanSetQualityChange.bind(this));\n  }\n  #addAudioTrackListeners() {\n    const audioTracks = this.#media.audioTracks;\n    new EventsController(audioTracks).add(\"add\", this.#onAudioTracksChange.bind(this)).add(\"remove\", this.#onAudioTracksChange.bind(this)).add(\"change\", this.#onAudioTrackChange.bind(this));\n  }\n  #onTextTracksChange(event) {\n    const {\n      textTracks\n    } = this.$state;\n    textTracks.set(this.#media.textTracks.toArray());\n    this.dispatch(\"text-tracks-change\", {\n      detail: textTracks(),\n      trigger: event\n    });\n  }\n  #onTextTrackModeChange(event) {\n    if (event) this.#satisfyRequest(\"media-text-track-change-request\", event);\n    const current = this.#media.textTracks.selected,\n      {\n        textTrack\n      } = this.$state;\n    if (textTrack() !== current) {\n      textTrack.set(current);\n      this.dispatch(\"text-track-change\", {\n        detail: current,\n        trigger: event\n      });\n    }\n  }\n  #onAudioTracksChange(event) {\n    const {\n      audioTracks\n    } = this.$state;\n    audioTracks.set(this.#media.audioTracks.toArray());\n    this.dispatch(\"audio-tracks-change\", {\n      detail: audioTracks(),\n      trigger: event\n    });\n  }\n  #onAudioTrackChange(event) {\n    const {\n      audioTrack\n    } = this.$state;\n    audioTrack.set(this.#media.audioTracks.selected);\n    if (event) this.#satisfyRequest(\"media-audio-track-change-request\", event);\n    this.dispatch(\"audio-track-change\", {\n      detail: audioTrack(),\n      trigger: event\n    });\n  }\n  #onQualitiesChange(event) {\n    const {\n      qualities\n    } = this.$state;\n    qualities.set(this.#media.qualities.toArray());\n    this.dispatch(\"qualities-change\", {\n      detail: qualities(),\n      trigger: event\n    });\n  }\n  #onQualityChange(event) {\n    const {\n      quality\n    } = this.$state;\n    quality.set(this.#media.qualities.selected);\n    if (event) this.#satisfyRequest(\"media-quality-change-request\", event);\n    this.dispatch(\"quality-change\", {\n      detail: quality(),\n      trigger: event\n    });\n  }\n  #onAutoQualityChange() {\n    const {\n        qualities\n      } = this.#media,\n      isAuto = qualities.auto;\n    this.$state.autoQuality.set(isAuto);\n    if (!isAuto) this.#stopWatchingQualityResize();\n  }\n  #stopQualityResizeEffect = null;\n  #watchQualityResize() {\n    this.#stopWatchingQualityResize();\n    this.#stopQualityResizeEffect = effect(() => {\n      const {\n          qualities\n        } = this.#media,\n        {\n          mediaWidth,\n          mediaHeight\n        } = this.$state,\n        w = mediaWidth(),\n        h = mediaHeight();\n      if (w === 0 || h === 0) return;\n      let selectedQuality = null,\n        minScore = Infinity;\n      for (const quality of qualities) {\n        const score = Math.abs(quality.width - w) + Math.abs(quality.height - h);\n        if (score < minScore) {\n          minScore = score;\n          selectedQuality = quality;\n        }\n      }\n      if (selectedQuality) {\n        qualities[ListSymbol.select](selectedQuality, true, new DOMEvent(\"resize\", {\n          detail: {\n            width: w,\n            height: h\n          }\n        }));\n      }\n    });\n  }\n  #stopWatchingQualityResize() {\n    this.#stopQualityResizeEffect?.();\n    this.#stopQualityResizeEffect = null;\n  }\n  #onCanSetQualityChange() {\n    this.$state.canSetQuality.set(!this.#media.qualities.readonly);\n  }\n  #watchCanSetVolume() {\n    const {\n      canSetVolume,\n      isGoogleCastConnected\n    } = this.$state;\n    if (isGoogleCastConnected()) {\n      canSetVolume.set(false);\n      return;\n    }\n    canChangeVolume().then(canSetVolume.set);\n  }\n  [\"provider-change\"](event) {\n    const prevProvider = this.#media.$provider(),\n      newProvider = event.detail;\n    if (prevProvider?.type === newProvider?.type) return;\n    prevProvider?.destroy?.();\n    prevProvider?.scope?.dispose();\n    this.#media.$provider.set(event.detail);\n    if (prevProvider && event.detail === null) {\n      this.#resetMediaState(event);\n    }\n  }\n  [\"provider-loader-change\"](event) {\n    {\n      this.#media.logger?.infoGroup(`Loader change \\`${event.detail?.constructor.name}\\``).labelledLog(\"Event\", event).dispatch();\n    }\n  }\n  [\"auto-play\"](event) {\n    this.$state.autoPlayError.set(null);\n  }\n  [\"auto-play-fail\"](event) {\n    this.$state.autoPlayError.set(event.detail);\n    this.#resetTracking();\n  }\n  [\"can-load\"](event) {\n    this.$state.canLoad.set(true);\n    this.#trackedEvents.set(\"can-load\", event);\n    this.#media.textTracks[TextTrackSymbol.canLoad]();\n    this.#satisfyRequest(\"media-start-loading\", event);\n  }\n  [\"can-load-poster\"](event) {\n    this.$state.canLoadPoster.set(true);\n    this.#trackedEvents.set(\"can-load-poster\", event);\n    this.#satisfyRequest(\"media-poster-start-loading\", event);\n  }\n  [\"media-type-change\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const viewType = this.$state.viewType();\n    this.$state.mediaType.set(event.detail);\n    const providedViewType = this.$state.providedViewType(),\n      currentViewType = providedViewType === \"unknown\" ? event.detail : providedViewType;\n    if (viewType !== currentViewType) {\n      if (IS_SERVER) {\n        this.$state.inferredViewType.set(currentViewType);\n      } else {\n        setTimeout(() => {\n          requestAnimationFrame(() => {\n            if (!this.scope) return;\n            this.$state.inferredViewType.set(event.detail);\n            this.dispatch(\"view-type-change\", {\n              detail: currentViewType,\n              trigger: event\n            });\n          });\n        }, 0);\n      }\n    }\n  }\n  [\"stream-type-change\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const {\n      streamType,\n      inferredStreamType\n    } = this.$state;\n    inferredStreamType.set(event.detail);\n    event.detail = streamType();\n  }\n  [\"rate-change\"](event) {\n    const {\n        storage\n      } = this.#media,\n      {\n        canPlay\n      } = this.$state;\n    this.$state.playbackRate.set(event.detail);\n    this.#satisfyRequest(\"media-rate-change-request\", event);\n    if (canPlay()) {\n      storage?.setPlaybackRate?.(event.detail);\n    }\n  }\n  [\"remote-playback-change\"](event) {\n    const {\n        remotePlaybackState,\n        remotePlaybackType\n      } = this.$state,\n      {\n        type,\n        state\n      } = event.detail,\n      isConnected = state === \"connected\";\n    remotePlaybackType.set(type);\n    remotePlaybackState.set(state);\n    const key = type === \"airplay\" ? \"media-airplay-request\" : \"media-google-cast-request\";\n    if (isConnected) {\n      this.#satisfyRequest(key, event);\n    } else {\n      const requestEvent = this.#request.queue.peek(key);\n      if (requestEvent) {\n        event.request = requestEvent;\n        event.triggers.add(requestEvent);\n      }\n    }\n  }\n  [\"sources-change\"](event) {\n    const prevSources = this.$state.sources(),\n      newSources = event.detail;\n    this.$state.sources.set(newSources);\n    this.#onSourceQualitiesChange(prevSources, newSources, event);\n  }\n  #onSourceQualitiesChange(prevSources, newSources, trigger) {\n    let {\n        qualities\n      } = this.#media,\n      added = false,\n      removed = false;\n    for (const prevSrc of prevSources) {\n      if (!isVideoQualitySrc(prevSrc)) continue;\n      const exists = newSources.some(s => s.src === prevSrc.src);\n      if (!exists) {\n        const quality = qualities.getBySrc(prevSrc.src);\n        if (quality) {\n          qualities[ListSymbol.remove](quality, trigger);\n          removed = true;\n        }\n      }\n    }\n    if (removed && !qualities.length) {\n      this.$state.savedState.set(null);\n      qualities[ListSymbol.reset](trigger);\n    }\n    for (const src of newSources) {\n      if (!isVideoQualitySrc(src) || qualities.getBySrc(src.src)) continue;\n      const quality = {\n        id: src.id ?? src.height + \"p\",\n        bitrate: null,\n        codec: null,\n        ...src,\n        selected: false\n      };\n      qualities[ListSymbol.add](quality, trigger);\n      added = true;\n    }\n    if (added && !qualities[QualitySymbol.enableAuto]) {\n      this.#watchQualityResize();\n      qualities[QualitySymbol.enableAuto] = this.#watchQualityResize.bind(this);\n      qualities[QualitySymbol.setAuto](true, trigger);\n    }\n  }\n  [\"source-change\"](event) {\n    event.isQualityChange = event.originEvent?.type === \"quality-change\";\n    const source = event.detail;\n    this.#resetMediaState(event, event.isQualityChange);\n    this.#trackedEvents.set(event.type, event);\n    this.$state.source.set(source);\n    this.el?.setAttribute(\"aria-busy\", \"true\");\n    {\n      this.#media.logger?.infoGroup(\"\\u{1F4FC} Media source change\").labelledLog(\"Source\", source).dispatch();\n    }\n  }\n  #resetMediaState(event, isSourceQualityChange = false) {\n    const {\n      audioTracks,\n      qualities\n    } = this.#media;\n    if (!isSourceQualityChange) {\n      this.#playedIntervals = [];\n      this.#playedInterval = [-1, -1];\n      audioTracks[ListSymbol.reset](event);\n      qualities[ListSymbol.reset](event);\n      softResetMediaState(this.$state, isSourceQualityChange);\n      this.#resetTracking();\n      return;\n    }\n    softResetMediaState(this.$state, isSourceQualityChange);\n    this.#resetTracking();\n  }\n  [\"abort\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const canLoadEvent = this.#trackedEvents.get(\"can-load\");\n    if (canLoadEvent && !event.triggers.hasType(\"can-load\")) {\n      event.triggers.add(canLoadEvent);\n    }\n  }\n  [\"load-start\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n  }\n  [\"error\"](event) {\n    this.$state.error.set(event.detail);\n    const abortEvent = this.#trackedEvents.get(\"abort\");\n    if (abortEvent) event.triggers.add(abortEvent);\n    {\n      this.#media.logger?.errorGroup(\"Media Error\").labelledLog(\"Error\", event.detail).labelledLog(\"Event\", event).labelledLog(\"Context\", this.#media).dispatch();\n    }\n  }\n  [\"loaded-metadata\"](event) {\n    const loadStartEvent = this.#trackedEvents.get(\"load-start\");\n    if (loadStartEvent) event.triggers.add(loadStartEvent);\n  }\n  [\"loaded-data\"](event) {\n    const loadStartEvent = this.#trackedEvents.get(\"load-start\");\n    if (loadStartEvent) event.triggers.add(loadStartEvent);\n  }\n  [\"can-play\"](event) {\n    const loadedMetadata = this.#trackedEvents.get(\"loaded-metadata\");\n    if (loadedMetadata) event.triggers.add(loadedMetadata);\n    this.#onCanPlayDetail(event.detail);\n    this.el?.setAttribute(\"aria-busy\", \"false\");\n  }\n  [\"can-play-through\"](event) {\n    this.#onCanPlayDetail(event.detail);\n    const canPlay = this.#trackedEvents.get(\"can-play\");\n    if (canPlay) event.triggers.add(canPlay);\n  }\n  #onCanPlayDetail(detail) {\n    const {\n      seekable,\n      buffered,\n      intrinsicDuration,\n      canPlay\n    } = this.$state;\n    canPlay.set(true);\n    buffered.set(detail.buffered);\n    seekable.set(detail.seekable);\n    const seekableEnd = getTimeRangesEnd(detail.seekable) ?? Infinity;\n    intrinsicDuration.set(seekableEnd);\n  }\n  [\"duration-change\"](event) {\n    const {\n        live,\n        intrinsicDuration,\n        providedDuration,\n        clipEndTime,\n        ended\n      } = this.$state,\n      time = event.detail;\n    if (!live()) {\n      const duration = !Number.isNaN(time) ? time : 0;\n      intrinsicDuration.set(duration);\n      if (ended()) this.#onEndPrecisionChange(event);\n    }\n    if (providedDuration() > 0 || clipEndTime() > 0) {\n      event.stopImmediatePropagation();\n    }\n  }\n  [\"progress\"](event) {\n    const {\n        buffered,\n        seekable\n      } = this.$state,\n      {\n        buffered: newBuffered,\n        seekable: newSeekable\n      } = event.detail,\n      newBufferedEnd = getTimeRangesEnd(newBuffered),\n      hasBufferedLengthChanged = newBuffered.length !== buffered().length,\n      hasBufferedEndChanged = newBufferedEnd !== getTimeRangesEnd(buffered()),\n      newSeekableEnd = getTimeRangesEnd(newSeekable),\n      hasSeekableLengthChanged = newSeekable.length !== seekable().length,\n      hasSeekableEndChanged = newSeekableEnd !== getTimeRangesEnd(seekable());\n    if (hasBufferedLengthChanged || hasBufferedEndChanged) {\n      buffered.set(newBuffered);\n    }\n    if (hasSeekableLengthChanged || hasSeekableEndChanged) {\n      seekable.set(newSeekable);\n    }\n  }\n  [\"play\"](event) {\n    const {\n      paused,\n      autoPlayError,\n      ended,\n      autoPlaying,\n      playsInline,\n      pointer,\n      muted,\n      viewType,\n      live,\n      userBehindLiveEdge\n    } = this.$state;\n    this.#resetPlaybackIfNeeded();\n    if (!paused()) {\n      event.stopImmediatePropagation();\n      return;\n    }\n    event.autoPlay = autoPlaying();\n    const waitingEvent = this.#trackedEvents.get(\"waiting\");\n    if (waitingEvent) event.triggers.add(waitingEvent);\n    this.#satisfyRequest(\"media-play-request\", event);\n    this.#trackedEvents.set(\"play\", event);\n    paused.set(false);\n    autoPlayError.set(null);\n    if (event.autoPlay) {\n      this.handle(this.createEvent(\"auto-play\", {\n        detail: {\n          muted: muted()\n        },\n        trigger: event\n      }));\n      autoPlaying.set(false);\n    }\n    if (ended() || this.#request.replaying) {\n      this.#request.replaying = false;\n      ended.set(false);\n      this.handle(this.createEvent(\"replay\", {\n        trigger: event\n      }));\n    }\n    if (!playsInline() && viewType() === \"video\" && pointer() === \"coarse\") {\n      this.#media.remote.enterFullscreen(\"prefer-media\", event);\n    }\n    if (live() && !userBehindLiveEdge()) {\n      this.#media.remote.seekToLiveEdge(event);\n    }\n  }\n  #resetPlaybackIfNeeded(trigger) {\n    const provider = peek(this.#media.$provider);\n    if (!provider) return;\n    const {\n      ended,\n      seekableStart,\n      clipEndTime,\n      currentTime,\n      realCurrentTime,\n      duration\n    } = this.$state;\n    const shouldReset = ended() || realCurrentTime() < seekableStart() || clipEndTime() > 0 && realCurrentTime() >= clipEndTime() || Math.abs(currentTime() - duration()) < 0.1;\n    if (shouldReset) {\n      this.dispatch(\"media-seek-request\", {\n        detail: seekableStart(),\n        trigger\n      });\n    }\n    return shouldReset;\n  }\n  [\"play-fail\"](event) {\n    const {\n      muted,\n      autoPlaying\n    } = this.$state;\n    const playEvent = this.#trackedEvents.get(\"play\");\n    if (playEvent) event.triggers.add(playEvent);\n    this.#satisfyRequest(\"media-play-request\", event);\n    const {\n      paused,\n      playing\n    } = this.$state;\n    paused.set(true);\n    playing.set(false);\n    this.#resetTracking();\n    this.#trackedEvents.set(\"play-fail\", event);\n    if (event.autoPlay) {\n      this.handle(this.createEvent(\"auto-play-fail\", {\n        detail: {\n          muted: muted(),\n          error: event.detail\n        },\n        trigger: event\n      }));\n      autoPlaying.set(false);\n    }\n  }\n  [\"playing\"](event) {\n    const playEvent = this.#trackedEvents.get(\"play\"),\n      seekedEvent = this.#trackedEvents.get(\"seeked\");\n    if (playEvent) event.triggers.add(playEvent);else if (seekedEvent) event.triggers.add(seekedEvent);\n    setTimeout(() => this.#resetTracking(), 0);\n    const {\n      paused,\n      playing,\n      live,\n      liveSyncPosition,\n      seekableEnd,\n      started,\n      currentTime,\n      seeking,\n      ended\n    } = this.$state;\n    paused.set(false);\n    playing.set(true);\n    seeking.set(false);\n    ended.set(false);\n    if (this.#request.looping) {\n      this.#request.looping = false;\n      return;\n    }\n    if (live() && !started() && currentTime() === 0) {\n      const end = liveSyncPosition() ?? seekableEnd() - 2;\n      if (Number.isFinite(end)) this.#media.$provider().setCurrentTime(end);\n    }\n    this[\"started\"](event);\n  }\n  [\"started\"](event) {\n    const {\n      started\n    } = this.$state;\n    if (!started()) {\n      started.set(true);\n      this.handle(this.createEvent(\"started\", {\n        trigger: event\n      }));\n    }\n  }\n  [\"pause\"](event) {\n    if (!this.el?.isConnected) {\n      this.#isPlayingOnDisconnect = true;\n    }\n    this.#satisfyRequest(\"media-pause-request\", event);\n    const seekedEvent = this.#trackedEvents.get(\"seeked\");\n    if (seekedEvent) event.triggers.add(seekedEvent);\n    const {\n      paused,\n      playing\n    } = this.$state;\n    paused.set(true);\n    playing.set(false);\n    if (this.#clipEnded) {\n      setTimeout(() => {\n        this.handle(this.createEvent(\"end\", {\n          trigger: event\n        }));\n        this.#clipEnded = false;\n      }, 0);\n    }\n    this.#resetTracking();\n  }\n  [\"time-change\"](event) {\n    if (this.#request.looping) {\n      event.stopImmediatePropagation();\n      return;\n    }\n    let {\n        waiting,\n        played,\n        clipEndTime,\n        realCurrentTime,\n        currentTime\n      } = this.$state,\n      newTime = event.detail,\n      endTime = clipEndTime();\n    realCurrentTime.set(newTime);\n    this.#updatePlayed();\n    waiting.set(false);\n    for (const track of this.#media.textTracks) {\n      track[TextTrackSymbol.updateActiveCues](newTime, event);\n    }\n    if (endTime > 0 && newTime >= endTime) {\n      this.#clipEnded = true;\n      this.dispatch(\"media-pause-request\", {\n        trigger: event\n      });\n    }\n    this.#saveTime();\n    this.dispatch(\"time-update\", {\n      detail: {\n        currentTime: currentTime(),\n        played: played()\n      },\n      trigger: event\n    });\n  }\n  #updatePlayed() {\n    const {\n      currentTime,\n      played,\n      paused\n    } = this.$state;\n    if (paused()) return;\n    this.#playedInterval = updateTimeIntervals(this.#playedIntervals, this.#playedInterval, currentTime());\n    played.set(new TimeRange(this.#playedIntervals));\n  }\n  // Called to update time again incase duration precision has changed.\n  #onEndPrecisionChange(trigger) {\n    const {\n        clipStartTime,\n        clipEndTime,\n        duration\n      } = this.$state,\n      isClipped = clipStartTime() > 0 || clipEndTime() > 0;\n    if (isClipped) return;\n    this.handle(this.createEvent(\"time-change\", {\n      detail: duration(),\n      trigger\n    }));\n  }\n  #saveTime() {\n    const {\n        storage\n      } = this.#media,\n      {\n        canPlay,\n        realCurrentTime\n      } = this.$state;\n    if (canPlay()) {\n      storage?.setTime?.(realCurrentTime());\n    }\n  }\n  [\"audio-gain-change\"](event) {\n    const {\n        storage\n      } = this.#media,\n      {\n        canPlay,\n        audioGain\n      } = this.$state;\n    audioGain.set(event.detail);\n    this.#satisfyRequest(\"media-audio-gain-change-request\", event);\n    if (canPlay()) storage?.setAudioGain?.(audioGain());\n  }\n  [\"volume-change\"](event) {\n    const {\n        storage\n      } = this.#media,\n      {\n        volume,\n        muted,\n        canPlay\n      } = this.$state,\n      detail = event.detail;\n    volume.set(detail.volume);\n    muted.set(detail.muted || detail.volume === 0);\n    this.#satisfyRequest(\"media-volume-change-request\", event);\n    this.#satisfyRequest(detail.muted ? \"media-mute-request\" : \"media-unmute-request\", event);\n    if (canPlay()) {\n      storage?.setVolume?.(volume());\n      storage?.setMuted?.(muted());\n    }\n  }\n  [\"seeking\"] = functionThrottle(event => {\n    const {\n      seeking,\n      realCurrentTime,\n      paused\n    } = this.$state;\n    seeking.set(true);\n    realCurrentTime.set(event.detail);\n    this.#satisfyRequest(\"media-seeking-request\", event);\n    if (paused()) {\n      this.#waitingTrigger = event;\n      this.#fireWaiting();\n    }\n    this.#playedInterval = [-1, -1];\n  }, 150, {\n    leading: true\n  });\n  [\"seeked\"](event) {\n    const {\n      seeking,\n      currentTime,\n      realCurrentTime,\n      paused,\n      seekableEnd,\n      ended,\n      live\n    } = this.$state;\n    if (this.#request.seeking) {\n      seeking.set(true);\n      event.stopImmediatePropagation();\n    } else if (seeking()) {\n      const waitingEvent = this.#trackedEvents.get(\"waiting\");\n      if (waitingEvent) event.triggers.add(waitingEvent);\n      const seekingEvent = this.#trackedEvents.get(\"seeking\");\n      if (seekingEvent && !event.triggers.has(seekingEvent)) {\n        event.triggers.add(seekingEvent);\n      }\n      if (paused()) this.#stopWaiting();\n      seeking.set(false);\n      realCurrentTime.set(event.detail);\n      this.#satisfyRequest(\"media-seek-request\", event);\n      const origin = event?.originEvent;\n      if (origin?.isTrusted && !(origin instanceof MessageEvent) && !/seek/.test(origin.type)) {\n        this[\"started\"](event);\n      }\n    }\n    if (!live()) {\n      if (Math.floor(currentTime()) !== Math.floor(seekableEnd())) {\n        ended.set(false);\n      } else {\n        this.end(event);\n      }\n    }\n  }\n  [\"waiting\"](event) {\n    if (this.#firingWaiting || this.#request.seeking) return;\n    event.stopImmediatePropagation();\n    this.#waitingTrigger = event;\n    this.#fireWaiting();\n  }\n  #fireWaiting = functionDebounce(() => {\n    if (!this.#waitingTrigger) return;\n    this.#firingWaiting = true;\n    const {\n      waiting,\n      playing\n    } = this.$state;\n    waiting.set(true);\n    playing.set(false);\n    const event = this.createEvent(\"waiting\", {\n      trigger: this.#waitingTrigger\n    });\n    this.#trackedEvents.set(\"waiting\", event);\n    this.dispatch(event);\n    this.#waitingTrigger = void 0;\n    this.#firingWaiting = false;\n  }, 300);\n  [\"end\"](event) {\n    const {\n      loop,\n      ended\n    } = this.$state;\n    if (!loop() && ended()) return;\n    if (loop()) {\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          this.#resetPlaybackIfNeeded(event);\n          this.dispatch(\"media-loop-request\", {\n            trigger: event\n          });\n        });\n      }, 10);\n      return;\n    }\n    setTimeout(() => this.#onEnded(event), 0);\n  }\n  #onEnded(event) {\n    const {\n        storage\n      } = this.#media,\n      {\n        paused,\n        seeking,\n        ended,\n        duration\n      } = this.$state;\n    this.#onEndPrecisionChange(event);\n    if (!paused()) {\n      this.dispatch(\"pause\", {\n        trigger: event\n      });\n    }\n    if (seeking()) {\n      this.dispatch(\"seeked\", {\n        detail: duration(),\n        trigger: event\n      });\n    }\n    ended.set(true);\n    this.#resetTracking();\n    storage?.setTime?.(duration(), true);\n    this.dispatch(\"ended\", {\n      trigger: event\n    });\n  }\n  #stopWaiting() {\n    this.#fireWaiting.cancel();\n    this.$state.waiting.set(false);\n  }\n  [\"fullscreen-change\"](event) {\n    const isFullscreen = event.detail;\n    this.$state.fullscreen.set(isFullscreen);\n    this.#satisfyRequest(isFullscreen ? \"media-enter-fullscreen-request\" : \"media-exit-fullscreen-request\", event);\n  }\n  [\"fullscreen-error\"](event) {\n    this.#satisfyRequest(\"media-enter-fullscreen-request\", event);\n    this.#satisfyRequest(\"media-exit-fullscreen-request\", event);\n  }\n  [\"orientation-change\"](event) {\n    const isLocked = event.detail.lock;\n    this.#satisfyRequest(isLocked ? \"media-orientation-lock-request\" : \"media-orientation-unlock-request\", event);\n  }\n  [\"picture-in-picture-change\"](event) {\n    const isPiP = event.detail;\n    this.$state.pictureInPicture.set(isPiP);\n    this.#satisfyRequest(isPiP ? \"media-enter-pip-request\" : \"media-exit-pip-request\", event);\n  }\n  [\"picture-in-picture-error\"](event) {\n    this.#satisfyRequest(\"media-enter-pip-request\", event);\n    this.#satisfyRequest(\"media-exit-pip-request\", event);\n  }\n  [\"title-change\"](event) {\n    if (!event.trigger) return;\n    event.stopImmediatePropagation();\n    this.$state.inferredTitle.set(event.detail);\n  }\n  [\"poster-change\"](event) {\n    if (!event.trigger) return;\n    event.stopImmediatePropagation();\n    this.$state.inferredPoster.set(event.detail);\n  }\n}\nclass MediaStateSync extends MediaPlayerController {\n  onSetup() {\n    this.#init();\n    if (IS_SERVER) return;\n    effect(this.#watchLogLevel.bind(this));\n    const effects = [this.#watchMetadata, this.#watchAutoplay, this.#watchClipStartTime, this.#watchClipEndTime, this.#watchControls, this.#watchCrossOrigin, this.#watchDuration, this.#watchLive, this.#watchLiveEdge, this.#watchLiveTolerance, this.#watchLoop, this.#watchPlaysInline, this.#watchPoster, this.#watchProvidedTypes, this.#watchTitle];\n    for (const callback of effects) {\n      effect(callback.bind(this));\n    }\n  }\n  #init() {\n    const providedProps = {\n      duration: \"providedDuration\",\n      loop: \"providedLoop\",\n      poster: \"providedPoster\",\n      streamType: \"providedStreamType\",\n      title: \"providedTitle\",\n      viewType: \"providedViewType\"\n    };\n    const skip = /* @__PURE__ */new Set([\"currentTime\", \"paused\", \"playbackRate\", \"volume\"]);\n    for (const prop of Object.keys(this.$props)) {\n      if (skip.has(prop)) continue;\n      this.$state[providedProps[prop] ?? prop]?.set(this.$props[prop]());\n    }\n    this.$state.muted.set(this.$props.muted() || this.$props.volume() === 0);\n  }\n  // Sync \"provided\" props with internal state. Provided props are used to differentiate from\n  // provider inferred values.\n  #watchProvidedTypes() {\n    const {\n        viewType,\n        streamType,\n        title,\n        poster,\n        loop\n      } = this.$props,\n      $state = this.$state;\n    $state.providedPoster.set(poster());\n    $state.providedStreamType.set(streamType());\n    $state.providedViewType.set(viewType());\n    $state.providedTitle.set(title());\n    $state.providedLoop.set(loop());\n  }\n  #watchLogLevel() {\n    this.$state.logLevel.set(this.$props.logLevel());\n  }\n  #watchMetadata() {\n    const {\n      artist,\n      artwork\n    } = this.$props;\n    this.$state.artist.set(artist());\n    this.$state.artwork.set(artwork());\n  }\n  #watchTitle() {\n    const {\n      title\n    } = this.$state;\n    this.dispatch(\"title-change\", {\n      detail: title()\n    });\n  }\n  #watchAutoplay() {\n    const autoPlay = this.$props.autoPlay() || this.$props.autoplay();\n    this.$state.autoPlay.set(autoPlay);\n    this.dispatch(\"auto-play-change\", {\n      detail: autoPlay\n    });\n  }\n  #watchLoop() {\n    const loop = this.$state.loop();\n    this.dispatch(\"loop-change\", {\n      detail: loop\n    });\n  }\n  #watchControls() {\n    const controls = this.$props.controls();\n    this.$state.controls.set(controls);\n  }\n  #watchPoster() {\n    const {\n      poster\n    } = this.$state;\n    this.dispatch(\"poster-change\", {\n      detail: poster()\n    });\n  }\n  #watchCrossOrigin() {\n    const crossOrigin = this.$props.crossOrigin() ?? this.$props.crossorigin(),\n      value = crossOrigin === true ? \"\" : crossOrigin;\n    this.$state.crossOrigin.set(value);\n  }\n  #watchDuration() {\n    const {\n      duration\n    } = this.$props;\n    this.dispatch(\"media-duration-change-request\", {\n      detail: duration()\n    });\n  }\n  #watchPlaysInline() {\n    const inline = this.$props.playsInline() || this.$props.playsinline();\n    this.$state.playsInline.set(inline);\n    this.dispatch(\"plays-inline-change\", {\n      detail: inline\n    });\n  }\n  #watchClipStartTime() {\n    const {\n      clipStartTime\n    } = this.$props;\n    this.dispatch(\"media-clip-start-change-request\", {\n      detail: clipStartTime()\n    });\n  }\n  #watchClipEndTime() {\n    const {\n      clipEndTime\n    } = this.$props;\n    this.dispatch(\"media-clip-end-change-request\", {\n      detail: clipEndTime()\n    });\n  }\n  #watchLive() {\n    this.dispatch(\"live-change\", {\n      detail: this.$state.live()\n    });\n  }\n  #watchLiveTolerance() {\n    this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance());\n    this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow());\n  }\n  #watchLiveEdge() {\n    this.dispatch(\"live-edge-change\", {\n      detail: this.$state.liveEdge()\n    });\n  }\n}\nconst actions = [\"play\", \"pause\", \"seekforward\", \"seekbackward\", \"seekto\"];\nclass NavigatorMediaSession extends MediaPlayerController {\n  onConnect() {\n    effect(this.#onMetadataChange.bind(this));\n    effect(this.#onPlaybackStateChange.bind(this));\n    const handleAction = this.#handleAction.bind(this);\n    for (const action of actions) {\n      navigator.mediaSession.setActionHandler(action, handleAction);\n    }\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  #onDisconnect() {\n    for (const action of actions) {\n      navigator.mediaSession.setActionHandler(action, null);\n    }\n  }\n  #onMetadataChange() {\n    const {\n      title,\n      artist,\n      artwork,\n      poster\n    } = this.$state;\n    navigator.mediaSession.metadata = new MediaMetadata({\n      title: title(),\n      artist: artist(),\n      artwork: artwork() ?? [{\n        src: poster()\n      }]\n    });\n  }\n  #onPlaybackStateChange() {\n    const {\n      canPlay,\n      paused\n    } = this.$state;\n    navigator.mediaSession.playbackState = !canPlay() ? \"none\" : paused() ? \"paused\" : \"playing\";\n  }\n  #handleAction(details) {\n    const trigger = new DOMEvent(`media-session-action`, {\n      detail: details\n    });\n    switch (details.action) {\n      case \"play\":\n        this.dispatch(\"media-play-request\", {\n          trigger\n        });\n        break;\n      case \"pause\":\n        this.dispatch(\"media-pause-request\", {\n          trigger\n        });\n        break;\n      case \"seekto\":\n      case \"seekforward\":\n      case \"seekbackward\":\n        this.dispatch(\"media-seek-request\", {\n          detail: isNumber(details.seekTime) ? details.seekTime : this.$state.currentTime() + (details.seekOffset ?? (details.action === \"seekforward\" ? 10 : -10)),\n          trigger\n        });\n        break;\n    }\n  }\n}\nconst LOCAL_STORAGE_KEY = \"@vidstack/log-colors\";\nconst savedColors = init();\nfunction getLogColor(key) {\n  return savedColors.get(key);\n}\nfunction saveLogColor(key, {\n  color = generateColor(),\n  overwrite = false\n} = {}) {\n  if (!savedColors.has(key) || overwrite) {\n    savedColors.set(key, color);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(Object.entries(savedColors)));\n  }\n}\nfunction generateColor() {\n  return `hsl(${Math.random() * 360}, 55%, 70%)`;\n}\nfunction init() {\n  let colors;\n  try {\n    colors = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  } catch {}\n  return new Map(Object.entries(colors ?? {}));\n}\nconst LogLevelValue = Object.freeze({\n  silent: 0,\n  error: 1,\n  warn: 2,\n  info: 3,\n  debug: 4\n});\nconst LogLevelColor = Object.freeze({\n  silent: \"white\",\n  error: \"hsl(6, 58%, 50%)\",\n  warn: \"hsl(51, 58%, 50%)\",\n  info: \"hsl(219, 58%, 50%)\",\n  debug: \"hsl(280, 58%, 50%)\"\n});\nconst s = 1e3;\nconst m = s * 60;\nconst h = m * 60;\nconst d = h * 24;\nfunction ms(val) {\n  const msAbs = Math.abs(val);\n  if (msAbs >= d) {\n    return Math.round(val / d) + \"d\";\n  }\n  if (msAbs >= h) {\n    return Math.round(val / h) + \"h\";\n  }\n  if (msAbs >= m) {\n    return Math.round(val / m) + \"m\";\n  }\n  if (msAbs >= s) {\n    return Math.round(val / s) + \"s\";\n  }\n  return round(val, 2) + \"ms\";\n}\nclass LogPrinter extends ViewController {\n  #level = \"warn\";\n  #lastLogged;\n  /**\n   * The current log level.\n   */\n  get logLevel() {\n    return this.#level;\n  }\n  set logLevel(level) {\n    this.#level = level;\n  }\n  onConnect() {\n    this.listen(\"vds-log\", event => {\n      event.stopPropagation();\n      const element = event.path?.[0] ?? (event.target instanceof ViewController ? event.target.el : event.target),\n        eventTargetName = element?.$$COMPONENT_NAME?.replace(/^_/, \"\").replace(/Instance$/, \"\") ?? element?.tagName.toLowerCase() ?? \"unknown\";\n      const {\n        level = \"warn\",\n        data\n      } = event.detail ?? {};\n      if (LogLevelValue[this.#level] < LogLevelValue[level]) {\n        return;\n      }\n      saveLogColor(eventTargetName);\n      const hint = data?.length === 1 && isGroupedLog(data[0]) ? data[0].title : isString(data?.[0]) ? data[0] : \"\";\n      console.groupCollapsed(`%c${level.toUpperCase()}%c ${eventTargetName}%c ${hint.slice(0, 50)}${hint.length > 50 ? \"...\" : \"\"}`, `background: ${LogLevelColor[level]}; color: white; padding: 1.5px 2.2px; border-radius: 2px; font-size: 11px;`, `color: ${getLogColor(eventTargetName)}; padding: 4px 0px; font-size: 11px;`, \"color: gray; font-size: 11px; padding-left: 4px;\");\n      if (data?.length === 1 && isGroupedLog(data[0])) {\n        if (element) data[0].logs.unshift({\n          label: \"Element\",\n          data: [element]\n        });\n        printGroup(level, data[0]);\n      } else if (data) {\n        print(level, ...data);\n      }\n      this.#printTimeDiff();\n      printStackTrace();\n      console.groupEnd();\n    });\n    onDispose(() => {\n      this.#lastLogged = void 0;\n    });\n  }\n  #printTimeDiff() {\n    labelledPrint(\"Time since last log\", this.#calcLastLogTimeDiff());\n  }\n  #calcLastLogTimeDiff() {\n    const time = performance.now();\n    const diff = time - (this.#lastLogged ?? (this.#lastLogged = performance.now()));\n    this.#lastLogged = time;\n    return ms(diff);\n  }\n}\nfunction print(level, ...data) {\n  console[level](...data);\n}\nfunction labelledPrint(label, ...data) {\n  console.log(`%c${label}:`, \"color: gray\", ...data);\n}\nfunction printStackTrace() {\n  console.groupCollapsed(\"%cStack Trace\", \"color: gray\");\n  console.trace();\n  console.groupEnd();\n}\nfunction printGroup(level, groupedLog) {\n  for (const log of groupedLog.logs) {\n    if (isGroupedLog(log)) {\n      console.groupCollapsed(groupedLog.title);\n      printGroup(level, log);\n      console.groupEnd();\n    } else if (\"label\" in log && !isUndefined(log.label)) {\n      labelledPrint(log.label, ...log.data);\n    } else {\n      print(level, ...log.data);\n    }\n  }\n}\nlet $keyboard = signal(false);\nif (!IS_SERVER) {\n  listenEvent(document, \"pointerdown\", () => {\n    $keyboard.set(false);\n  });\n  listenEvent(document, \"keydown\", e => {\n    if (e.metaKey || e.altKey || e.ctrlKey) return;\n    $keyboard.set(true);\n  });\n}\nclass FocusVisibleController extends ViewController {\n  #focused = signal(false);\n  onConnect(el) {\n    effect(() => {\n      const events = new EventsController(el);\n      if (!$keyboard()) {\n        this.#focused.set(false);\n        updateFocusAttr(el, false);\n        events.add(\"pointerenter\", this.#onPointerEnter.bind(this)).add(\"pointerleave\", this.#onPointerLeave.bind(this));\n        return;\n      }\n      const active = document.activeElement === el;\n      this.#focused.set(active);\n      updateFocusAttr(el, active);\n      events.add(\"focus\", this.#onFocus.bind(this)).add(\"blur\", this.#onBlur.bind(this));\n    });\n  }\n  focused() {\n    return this.#focused();\n  }\n  #onFocus() {\n    this.#focused.set(true);\n    updateFocusAttr(this.el, true);\n  }\n  #onBlur() {\n    this.#focused.set(false);\n    updateFocusAttr(this.el, false);\n  }\n  #onPointerEnter() {\n    updateHoverAttr(this.el, true);\n  }\n  #onPointerLeave() {\n    updateHoverAttr(this.el, false);\n  }\n}\nfunction updateFocusAttr(el, isFocused) {\n  setAttribute(el, \"data-focus\", isFocused);\n  setAttribute(el, \"data-hocus\", isFocused);\n}\nfunction updateHoverAttr(el, isHovering) {\n  setAttribute(el, \"data-hocus\", isHovering);\n  setAttribute(el, \"data-hover\", isHovering);\n}\nclass MediaPlayer extends Component {\n  static props = mediaPlayerProps;\n  static state = mediaState;\n  #media;\n  #stateMgr;\n  #requestMgr;\n  canPlayQueue = new RequestQueue();\n  remoteControl;\n  get #provider() {\n    return this.#media.$provider();\n  }\n  get #props() {\n    return this.$props;\n  }\n  constructor() {\n    super();\n    new MediaStateSync();\n    const context = {\n      player: this,\n      qualities: new VideoQualityList(),\n      audioTracks: new AudioTrackList(),\n      storage: null,\n      $provider: signal(null),\n      $providerSetup: signal(false),\n      $props: this.$props,\n      $state: this.$state\n    };\n    {\n      const logPrinter = new LogPrinter();\n      effect(() => {\n        logPrinter.logLevel = this.$props.logLevel();\n      });\n    }\n    context.logger = new Logger();\n    context.remote = this.remoteControl = new MediaRemoteControl(context.logger);\n    context.remote.setPlayer(this);\n    context.textTracks = new TextTrackList();\n    context.textTracks[TextTrackSymbol.crossOrigin] = this.$state.crossOrigin;\n    context.textRenderers = new TextRenderers(context);\n    context.ariaKeys = {};\n    this.#media = context;\n    provideContext(mediaContext, context);\n    this.orientation = new ScreenOrientationController();\n    new FocusVisibleController();\n    new MediaKeyboardController(context);\n    new MediaEventsLogger(context);\n    const request = new MediaRequestContext();\n    this.#stateMgr = new MediaStateManager(request, context);\n    this.#requestMgr = new MediaRequestManager(this.#stateMgr, request, context);\n    context.delegate = new MediaPlayerDelegate(this.#stateMgr.handle.bind(this.#stateMgr), context);\n    context.notify = context.delegate.notify.bind(context.delegate);\n    if (typeof navigator !== \"undefined\" && \"mediaSession\" in navigator) {\n      new NavigatorMediaSession();\n    }\n    new MediaLoadController(\"load\", this.startLoading.bind(this));\n    new MediaLoadController(\"posterLoad\", this.startLoadingPoster.bind(this));\n  }\n  onSetup() {\n    this.#setupMediaAttributes();\n    effect(this.#watchCanPlay.bind(this));\n    effect(this.#watchMuted.bind(this));\n    effect(this.#watchPaused.bind(this));\n    effect(this.#watchVolume.bind(this));\n    effect(this.#watchCurrentTime.bind(this));\n    effect(this.#watchPlaysInline.bind(this));\n    effect(this.#watchPlaybackRate.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-player\", \"\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"region\");\n    effect(this.#watchStorage.bind(this));\n    if (IS_SERVER) this.#watchTitle();else effect(this.#watchTitle.bind(this));\n    if (IS_SERVER) this.#watchOrientation();else effect(this.#watchOrientation.bind(this));\n    listenEvent(el, \"find-media-player\", this.#onFindPlayer.bind(this));\n  }\n  onConnect(el) {\n    if (IS_IPHONE) setAttribute(el, \"data-iphone\", \"\");\n    const pointerQuery = window.matchMedia(\"(pointer: coarse)\");\n    this.#onPointerChange(pointerQuery);\n    pointerQuery.onchange = this.#onPointerChange.bind(this);\n    const resize = new ResizeObserver(animationFrameThrottle(this.#onResize.bind(this)));\n    resize.observe(el);\n    effect(this.#onResize.bind(this));\n    this.dispatch(\"media-player-connect\", {\n      detail: this,\n      bubbles: true,\n      composed: true\n    });\n    this.#media.logger.setTarget(el);\n    onDispose(() => {\n      resize.disconnect();\n      pointerQuery.onchange = null;\n      this.#media.logger.setTarget(null);\n    });\n  }\n  onDestroy() {\n    this.#media.player = null;\n    this.canPlayQueue.reset();\n  }\n  #skipTitleUpdate = false;\n  #watchTitle() {\n    const el = this.$el,\n      {\n        title,\n        live,\n        viewType,\n        providedTitle\n      } = this.$state,\n      isLive = live(),\n      type = uppercaseFirstChar(viewType()),\n      typeText = type !== \"Unknown\" ? `${isLive ? \"Live \" : \"\"}${type}` : isLive ? \"Live\" : \"Media\",\n      currentTitle = title();\n    setAttribute(this.el, \"aria-label\", `${typeText} Player` + (currentTitle ? ` - ${currentTitle}` : \"\"));\n    if (!IS_SERVER && el?.hasAttribute(\"title\")) {\n      this.#skipTitleUpdate = true;\n      el?.removeAttribute(\"title\");\n    }\n  }\n  #watchOrientation() {\n    const orientation = this.orientation.landscape ? \"landscape\" : \"portrait\";\n    this.$state.orientation.set(orientation);\n    setAttribute(this.el, \"data-orientation\", orientation);\n    this.#onResize();\n  }\n  #watchCanPlay() {\n    if (this.$state.canPlay() && this.#provider) this.canPlayQueue.start();else this.canPlayQueue.stop();\n  }\n  #setupMediaAttributes() {\n    if (MediaPlayer[MEDIA_ATTRIBUTES]) {\n      this.setAttributes(MediaPlayer[MEDIA_ATTRIBUTES]);\n      return;\n    }\n    const $attrs = {\n      \"data-load\": function () {\n        return this.$props.load();\n      },\n      \"data-captions\": function () {\n        const track = this.$state.textTrack();\n        return !!track && isTrackCaptionKind(track);\n      },\n      \"data-ios-controls\": function () {\n        return this.$state.iOSControls();\n      },\n      \"data-controls\": function () {\n        return this.controls.showing;\n      },\n      \"data-buffering\": function () {\n        const {\n          canLoad,\n          canPlay,\n          waiting\n        } = this.$state;\n        return canLoad() && (!canPlay() || waiting());\n      },\n      \"data-error\": function () {\n        const {\n          error\n        } = this.$state;\n        return !!error();\n      },\n      \"data-autoplay-error\": function () {\n        const {\n          autoPlayError\n        } = this.$state;\n        return !!autoPlayError();\n      }\n    };\n    const alias = {\n      autoPlay: \"autoplay\",\n      canAirPlay: \"can-airplay\",\n      canPictureInPicture: \"can-pip\",\n      pictureInPicture: \"pip\",\n      playsInline: \"playsinline\",\n      remotePlaybackState: \"remote-state\",\n      remotePlaybackType: \"remote-type\",\n      isAirPlayConnected: \"airplay\",\n      isGoogleCastConnected: \"google-cast\"\n    };\n    for (const prop2 of mediaAttributes) {\n      const attrName = \"data-\" + (alias[prop2] ?? camelToKebabCase(prop2));\n      $attrs[attrName] = function () {\n        return this.$state[prop2]();\n      };\n    }\n    delete $attrs.title;\n    MediaPlayer[MEDIA_ATTRIBUTES] = $attrs;\n    this.setAttributes($attrs);\n  }\n  #onFindPlayer(event) {\n    event.detail(this);\n  }\n  #onResize() {\n    if (IS_SERVER || !this.el) return;\n    const width = this.el.clientWidth,\n      height = this.el.clientHeight;\n    this.$state.width.set(width);\n    this.$state.height.set(height);\n    setStyle(this.el, \"--player-width\", width + \"px\");\n    setStyle(this.el, \"--player-height\", height + \"px\");\n  }\n  #onPointerChange(queryList) {\n    if (IS_SERVER) return;\n    const pointer = queryList.matches ? \"coarse\" : \"fine\";\n    setAttribute(this.el, \"data-pointer\", pointer);\n    this.$state.pointer.set(pointer);\n    this.#onResize();\n  }\n  /**\n   * The current media provider.\n   */\n  get provider() {\n    return this.#provider;\n  }\n  /**\n   * Media controls settings.\n   */\n  get controls() {\n    return this.#requestMgr.controls;\n  }\n  set controls(controls) {\n    this.#props.controls.set(controls);\n  }\n  /**\n   * Controls the screen orientation of the current browser window and dispatches orientation\n   * change events on the player.\n   */\n  orientation;\n  /**\n   * The title of the current media.\n   */\n  get title() {\n    return peek(this.$state.title);\n  }\n  set title(newTitle) {\n    if (this.#skipTitleUpdate) {\n      this.#skipTitleUpdate = false;\n      return;\n    }\n    this.#props.title.set(newTitle);\n  }\n  /**\n   * A list of all `VideoQuality` objects representing the set of available video renditions.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/video-quality}\n   */\n  get qualities() {\n    return this.#media.qualities;\n  }\n  /**\n   * A list of all `AudioTrack` objects representing the set of available audio tracks.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/audio-tracks}\n   */\n  get audioTracks() {\n    return this.#media.audioTracks;\n  }\n  /**\n   * A list of all `TextTrack` objects representing the set of available text tracks.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/text-tracks}\n   */\n  get textTracks() {\n    return this.#media.textTracks;\n  }\n  /**\n   * Contains text renderers which are responsible for loading, parsing, and rendering text\n   * tracks.\n   */\n  get textRenderers() {\n    return this.#media.textRenderers;\n  }\n  get duration() {\n    return this.$state.duration();\n  }\n  set duration(duration) {\n    this.#props.duration.set(duration);\n  }\n  get paused() {\n    return peek(this.$state.paused);\n  }\n  set paused(paused) {\n    this.#queuePausedUpdate(paused);\n  }\n  #watchPaused() {\n    this.#queuePausedUpdate(this.$props.paused());\n  }\n  #queuePausedUpdate(paused) {\n    if (paused) {\n      this.canPlayQueue.enqueue(\"paused\", () => this.#requestMgr.pause());\n    } else this.canPlayQueue.enqueue(\"paused\", () => this.#requestMgr.play());\n  }\n  get muted() {\n    return peek(this.$state.muted);\n  }\n  set muted(muted) {\n    this.#queueMutedUpdate(muted);\n  }\n  #watchMuted() {\n    this.#queueMutedUpdate(this.$props.muted());\n  }\n  #queueMutedUpdate(muted) {\n    this.canPlayQueue.enqueue(\"muted\", () => {\n      if (this.#provider) this.#provider.setMuted(muted);\n    });\n  }\n  get currentTime() {\n    return peek(this.$state.currentTime);\n  }\n  set currentTime(time) {\n    this.#queueCurrentTimeUpdate(time);\n  }\n  #watchCurrentTime() {\n    this.#queueCurrentTimeUpdate(this.$props.currentTime());\n  }\n  #queueCurrentTimeUpdate(time) {\n    this.canPlayQueue.enqueue(\"currentTime\", () => {\n      const {\n        currentTime\n      } = this.$state;\n      if (time === peek(currentTime)) return;\n      peek(() => {\n        if (!this.#provider) return;\n        const boundedTime = boundTime(time, this.$state);\n        if (Number.isFinite(boundedTime)) {\n          this.#provider.setCurrentTime(boundedTime);\n        }\n      });\n    });\n  }\n  get volume() {\n    return peek(this.$state.volume);\n  }\n  set volume(volume) {\n    this.#queueVolumeUpdate(volume);\n  }\n  #watchVolume() {\n    this.#queueVolumeUpdate(this.$props.volume());\n  }\n  #queueVolumeUpdate(volume) {\n    const clampedVolume = clampNumber(0, volume, 1);\n    this.canPlayQueue.enqueue(\"volume\", () => {\n      if (this.#provider) this.#provider.setVolume(clampedVolume);\n    });\n  }\n  get playbackRate() {\n    return peek(this.$state.playbackRate);\n  }\n  set playbackRate(rate) {\n    this.#queuePlaybackRateUpdate(rate);\n  }\n  #watchPlaybackRate() {\n    this.#queuePlaybackRateUpdate(this.$props.playbackRate());\n  }\n  #queuePlaybackRateUpdate(rate) {\n    this.canPlayQueue.enqueue(\"rate\", () => {\n      if (this.#provider) this.#provider.setPlaybackRate?.(rate);\n    });\n  }\n  #watchPlaysInline() {\n    this.#queuePlaysInlineUpdate(this.$props.playsInline());\n  }\n  #queuePlaysInlineUpdate(inline) {\n    this.canPlayQueue.enqueue(\"playsinline\", () => {\n      if (this.#provider) this.#provider.setPlaysInline?.(inline);\n    });\n  }\n  #watchStorage() {\n    let storageValue = this.$props.storage(),\n      storage = isString(storageValue) ? new LocalMediaStorage() : storageValue;\n    if (storage?.onChange) {\n      const {\n          source\n        } = this.$state,\n        playerId = isString(storageValue) ? storageValue : this.el?.id,\n        mediaId = computed(this.#computeMediaId.bind(this));\n      effect(() => storage.onChange(source(), mediaId(), playerId || void 0));\n    }\n    this.#media.storage = storage;\n    this.#media.textTracks.setStorage(storage);\n    onDispose(() => {\n      storage?.onDestroy?.();\n      this.#media.storage = null;\n      this.#media.textTracks.setStorage(null);\n    });\n  }\n  #computeMediaId() {\n    const {\n        clipStartTime,\n        clipEndTime\n      } = this.$props,\n      {\n        source\n      } = this.$state,\n      src = source();\n    return src.src ? `${src.src}:${clipStartTime()}:${clipEndTime()}` : null;\n  }\n  /**\n   * Begins/resumes playback of the media. If this method is called programmatically before the\n   * user has interacted with the player, the promise may be rejected subject to the browser's\n   * autoplay policies. This method will throw if called before media is ready for playback.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play}\n   */\n  async play(trigger) {\n    return this.#requestMgr.play(trigger);\n  }\n  /**\n   * Pauses playback of the media. This method will throw if called before media is ready for\n   * playback.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause}\n   */\n  async pause(trigger) {\n    return this.#requestMgr.pause(trigger);\n  }\n  /**\n   * Attempts to display the player in fullscreen. The promise will resolve if successful, and\n   * reject if not. This method will throw if any fullscreen API is _not_ currently available.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/fullscreen}\n   */\n  async enterFullscreen(target, trigger) {\n    return this.#requestMgr.enterFullscreen(target, trigger);\n  }\n  /**\n   * Attempts to display the player inline by exiting fullscreen. This method will throw if any\n   * fullscreen API is _not_ currently available.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/fullscreen}\n   */\n  async exitFullscreen(target, trigger) {\n    return this.#requestMgr.exitFullscreen(target, trigger);\n  }\n  /**\n   * Attempts to display the player in picture-in-picture mode. This method will throw if PIP is\n   * not supported. This method will also return a `PictureInPictureWindow` if the current\n   * provider supports it.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/picture-in-picture}\n   */\n  enterPictureInPicture(trigger) {\n    return this.#requestMgr.enterPictureInPicture(trigger);\n  }\n  /**\n   * Attempts to display the player in inline by exiting picture-in-picture mode. This method\n   * will throw if not supported.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/picture-in-picture}\n   */\n  exitPictureInPicture(trigger) {\n    return this.#requestMgr.exitPictureInPicture(trigger);\n  }\n  /**\n   * Sets the current time to the live edge (i.e., `duration`). This is a no-op for non-live\n   * streams and will throw if called before media is ready for playback.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/live}\n   */\n  seekToLiveEdge(trigger) {\n    this.#requestMgr.seekToLiveEdge(trigger);\n  }\n  /**\n   * Called when media can begin loading. Calling this method will trigger the initial provider\n   * loading process. Calling it more than once has no effect.\n   *\n   * @see {@link https://vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoading(trigger) {\n    this.#media.notify(\"can-load\", void 0, trigger);\n  }\n  /**\n   * Called when the poster image can begin loading. Calling it more than once has no effect.\n   *\n   * @see {@link https://vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoadingPoster(trigger) {\n    this.#media.notify(\"can-load-poster\", void 0, trigger);\n  }\n  /**\n   * Request Apple AirPlay picker to open.\n   */\n  requestAirPlay(trigger) {\n    return this.#requestMgr.requestAirPlay(trigger);\n  }\n  /**\n   * Request Google Cast device picker to open. The Google Cast framework will be loaded if it\n   * hasn't yet.\n   */\n  requestGoogleCast(trigger) {\n    return this.#requestMgr.requestGoogleCast(trigger);\n  }\n  /**\n   * Set the audio gain, amplifying volume and enabling a maximum volume above 100%.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/audio-gain}\n   */\n  setAudioGain(gain, trigger) {\n    return this.#requestMgr.setAudioGain(gain, trigger);\n  }\n  destroy() {\n    super.destroy();\n    this.#media.remote.setPlayer(null);\n    this.dispatch(\"destroy\");\n  }\n}\nconst mediaplayer__proto = MediaPlayer.prototype;\nprop(mediaplayer__proto, \"canPlayQueue\");\nprop(mediaplayer__proto, \"remoteControl\");\nprop(mediaplayer__proto, \"provider\");\nprop(mediaplayer__proto, \"controls\");\nprop(mediaplayer__proto, \"orientation\");\nprop(mediaplayer__proto, \"title\");\nprop(mediaplayer__proto, \"qualities\");\nprop(mediaplayer__proto, \"audioTracks\");\nprop(mediaplayer__proto, \"textTracks\");\nprop(mediaplayer__proto, \"textRenderers\");\nprop(mediaplayer__proto, \"duration\");\nprop(mediaplayer__proto, \"paused\");\nprop(mediaplayer__proto, \"muted\");\nprop(mediaplayer__proto, \"currentTime\");\nprop(mediaplayer__proto, \"volume\");\nprop(mediaplayer__proto, \"playbackRate\");\nmethod(mediaplayer__proto, \"play\");\nmethod(mediaplayer__proto, \"pause\");\nmethod(mediaplayer__proto, \"enterFullscreen\");\nmethod(mediaplayer__proto, \"exitFullscreen\");\nmethod(mediaplayer__proto, \"enterPictureInPicture\");\nmethod(mediaplayer__proto, \"exitPictureInPicture\");\nmethod(mediaplayer__proto, \"seekToLiveEdge\");\nmethod(mediaplayer__proto, \"startLoading\");\nmethod(mediaplayer__proto, \"startLoadingPoster\");\nmethod(mediaplayer__proto, \"requestAirPlay\");\nmethod(mediaplayer__proto, \"requestGoogleCast\");\nmethod(mediaplayer__proto, \"setAudioGain\");\nfunction resolveStreamTypeFromDASHManifest(manifestSrc, requestInit) {\n  return fetch(manifestSrc, requestInit).then(res => res.text()).then(manifest => {\n    return /type=\"static\"/.test(manifest) ? \"on-demand\" : \"live\";\n  });\n}\nfunction resolveStreamTypeFromHLSManifest(manifestSrc, requestInit) {\n  return fetch(manifestSrc, requestInit).then(res => res.text()).then(manifest => {\n    const renditionURI = resolveHLSRenditionURI(manifest);\n    if (renditionURI) {\n      return resolveStreamTypeFromHLSManifest(/^https?:/.test(renditionURI) ? renditionURI : new URL(renditionURI, manifestSrc).href, requestInit);\n    }\n    const streamType = /EXT-X-PLAYLIST-TYPE:\\s*VOD/.test(manifest) ? \"on-demand\" : \"live\";\n    if (streamType === \"live\" && resolveTargetDuration(manifest) >= 10 && (/#EXT-X-DVR-ENABLED:\\s*true/.test(manifest) || manifest.includes(\"#EXT-X-DISCONTINUITY\"))) {\n      return \"live:dvr\";\n    }\n    return streamType;\n  });\n}\nfunction resolveHLSRenditionURI(manifest) {\n  const matches = manifest.match(/#EXT-X-STREAM-INF:[^\\n]+(\\n[^\\n]+)*/g);\n  return matches ? matches[0].split(\"\\n\")[1].trim() : null;\n}\nfunction resolveTargetDuration(manifest) {\n  const lines = manifest.split(\"\\n\");\n  for (const line of lines) {\n    if (line.startsWith(\"#EXT-X-TARGETDURATION\")) {\n      const duration = parseFloat(line.split(\":\")[1]);\n      if (!isNaN(duration)) {\n        return duration;\n      }\n    }\n  }\n  return -1;\n}\nlet warned$1 = /* @__PURE__ */new Set();\nconst sourceTypes = /* @__PURE__ */new Map();\nclass SourceSelection {\n  #initialize = false;\n  #loaders;\n  #domSources;\n  #media;\n  #loader;\n  constructor(domSources, media, loader, customLoaders = []) {\n    this.#domSources = domSources;\n    this.#media = media;\n    this.#loader = loader;\n    const DASH_LOADER = new DASHProviderLoader(),\n      HLS_LOADER = new HLSProviderLoader(),\n      VIDEO_LOADER = new VideoProviderLoader(),\n      AUDIO_LOADER = new AudioProviderLoader(),\n      YOUTUBE_LOADER = new YouTubeProviderLoader(),\n      VIMEO_LOADER = new VimeoProviderLoader(),\n      EMBED_LOADERS = [YOUTUBE_LOADER, VIMEO_LOADER];\n    this.#loaders = computed(() => {\n      const remoteLoader = media.$state.remotePlaybackLoader();\n      const loaders = media.$props.preferNativeHLS() ? [VIDEO_LOADER, AUDIO_LOADER, DASH_LOADER, HLS_LOADER, ...EMBED_LOADERS, ...customLoaders] : [HLS_LOADER, VIDEO_LOADER, AUDIO_LOADER, DASH_LOADER, ...EMBED_LOADERS, ...customLoaders];\n      return remoteLoader ? [remoteLoader, ...loaders] : loaders;\n    });\n    const {\n      $state\n    } = media;\n    $state.sources.set(normalizeSrc(media.$props.src()));\n    for (const src of $state.sources()) {\n      const loader2 = this.#loaders().find(loader3 => loader3.canPlay(src));\n      if (!loader2) continue;\n      const mediaType = loader2.mediaType(src);\n      media.$state.source.set(src);\n      media.$state.mediaType.set(mediaType);\n      media.$state.inferredViewType.set(mediaType);\n      this.#loader.set(loader2);\n      this.#initialize = true;\n      break;\n    }\n  }\n  connect() {\n    const loader = this.#loader();\n    if (this.#initialize) {\n      this.#notifySourceChange(this.#media.$state.source(), loader);\n      this.#notifyLoaderChange(loader);\n      this.#initialize = false;\n    }\n    effect(this.#onSourcesChange.bind(this));\n    effect(this.#onSourceChange.bind(this));\n    effect(this.#onSetup.bind(this));\n    effect(this.#onLoadSource.bind(this));\n    effect(this.#onLoadPoster.bind(this));\n  }\n  #onSourcesChange() {\n    this.#media.notify(\"sources-change\", [...normalizeSrc(this.#media.$props.src()), ...this.#domSources()]);\n  }\n  #onSourceChange() {\n    const {\n      $state\n    } = this.#media;\n    const sources = $state.sources(),\n      currentSource = peek($state.source),\n      newSource = this.#findNewSource(currentSource, sources),\n      noMatch = sources[0]?.src && !newSource.src && !newSource.type;\n    if (noMatch && !warned$1.has(newSource.src) && !peek(this.#loader)) {\n      const source = sources[0];\n      console.warn(`[vidstack] could not find a loader for any of the given media sources, consider providing \\`type\\`:\n\n--- HTML ---\n\n<media-provider>\n  <source src=\"${source.src}\" type=\"video/mp4\" />\n</media-provider>\"\n\n--- React ---\n\n<MediaPlayer src={{ src: \"${source.src}\", type: \"video/mp4\" }}>\n\n---\n\nFalling back to fetching source headers...`);\n      warned$1.add(newSource.src);\n    }\n    if (noMatch) {\n      const {\n          crossOrigin\n        } = $state,\n        credentials = getRequestCredentials(crossOrigin()),\n        abort = new AbortController();\n      Promise.all(sources.map(source => isString(source.src) && source.type === \"?\" ? fetch(source.src, {\n        method: \"HEAD\",\n        credentials,\n        signal: abort.signal\n      }).then(res => {\n        source.type = res.headers.get(\"content-type\") || \"??\";\n        sourceTypes.set(source.src, source.type);\n        return source;\n      }).catch(() => source) : source)).then(sources2 => {\n        if (abort.signal.aborted) return;\n        const newSource2 = this.#findNewSource(peek($state.source), sources2);\n        tick();\n        if (!newSource2.src) {\n          this.#media.notify(\"error\", {\n            message: \"Failed to load resource.\",\n            code: 4\n          });\n        }\n      });\n      return () => abort.abort();\n    }\n    tick();\n  }\n  #findNewSource(currentSource, sources) {\n    let newSource = {\n        src: \"\",\n        type: \"\"\n      },\n      newLoader = null,\n      triggerEvent = new DOMEvent(\"sources-change\", {\n        detail: {\n          sources\n        }\n      }),\n      loaders = this.#loaders(),\n      {\n        started,\n        paused,\n        currentTime,\n        quality,\n        savedState\n      } = this.#media.$state;\n    for (const src of sources) {\n      const loader = loaders.find(loader2 => loader2.canPlay(src));\n      if (loader) {\n        newSource = src;\n        newLoader = loader;\n        break;\n      }\n    }\n    if (isVideoQualitySrc(newSource)) {\n      const currentQuality = quality(),\n        sourceQuality = sources.find(s => s.src === currentQuality?.src);\n      if (peek(started)) {\n        savedState.set({\n          paused: peek(paused),\n          currentTime: peek(currentTime)\n        });\n      } else {\n        savedState.set(null);\n      }\n      if (sourceQuality) {\n        newSource = sourceQuality;\n        triggerEvent = new DOMEvent(\"quality-change\", {\n          detail: {\n            quality: currentQuality\n          }\n        });\n      }\n    }\n    if (!isSameSrc(currentSource, newSource)) {\n      this.#notifySourceChange(newSource, newLoader, triggerEvent);\n    }\n    if (newLoader !== peek(this.#loader)) {\n      this.#notifyLoaderChange(newLoader, triggerEvent);\n    }\n    return newSource;\n  }\n  #notifySourceChange(src, loader, trigger) {\n    this.#media.notify(\"source-change\", src, trigger);\n    this.#media.notify(\"media-type-change\", loader?.mediaType(src) || \"unknown\", trigger);\n  }\n  #notifyLoaderChange(loader, trigger) {\n    this.#media.$providerSetup.set(false);\n    this.#media.notify(\"provider-change\", null, trigger);\n    loader && peek(() => loader.preconnect?.(this.#media));\n    this.#loader.set(loader);\n    this.#media.notify(\"provider-loader-change\", loader, trigger);\n  }\n  #onSetup() {\n    const provider = this.#media.$provider();\n    if (!provider || peek(this.#media.$providerSetup)) return;\n    if (this.#media.$state.canLoad()) {\n      scoped(() => provider.setup(), provider.scope);\n      this.#media.$providerSetup.set(true);\n      return;\n    }\n    peek(() => provider.preconnect?.());\n  }\n  #onLoadSource() {\n    if (!this.#media.$providerSetup()) return;\n    const provider = this.#media.$provider(),\n      source = this.#media.$state.source(),\n      crossOrigin = peek(this.#media.$state.crossOrigin),\n      preferNativeHLS = peek(this.#media.$props.preferNativeHLS);\n    if (isSameSrc(provider?.currentSrc, source)) {\n      return;\n    }\n    if (this.#media.$state.canLoad()) {\n      const abort = new AbortController();\n      if (isHLSSrc(source)) {\n        if (preferNativeHLS || !isHLSSupported()) {\n          resolveStreamTypeFromHLSManifest(source.src, {\n            credentials: getRequestCredentials(crossOrigin),\n            signal: abort.signal\n          }).then(streamType => {\n            this.#media.notify(\"stream-type-change\", streamType);\n          }).catch(noop);\n        }\n      } else if (isDASHSrc(source)) {\n        resolveStreamTypeFromDASHManifest(source.src, {\n          credentials: getRequestCredentials(crossOrigin),\n          signal: abort.signal\n        }).then(streamType => {\n          this.#media.notify(\"stream-type-change\", streamType);\n        }).catch(noop);\n      } else {\n        this.#media.notify(\"stream-type-change\", \"on-demand\");\n      }\n      peek(() => {\n        const preload = peek(this.#media.$state.preload);\n        return provider?.loadSource(source, preload).catch(error => {\n          {\n            this.#media.logger?.errorGroup(\"[vidstack] failed to load source\").labelledLog(\"Error\", error).labelledLog(\"Source\", source).labelledLog(\"Provider\", provider).labelledLog(\"Media Context\", {\n              ...this.#media\n            }).dispatch();\n          }\n        });\n      });\n      return () => abort.abort();\n    }\n    try {\n      isString(source.src) && preconnect(new URL(source.src).origin);\n    } catch (error) {\n      {\n        this.#media.logger?.infoGroup(`Failed to preconnect to source: ${source.src}`).labelledLog(\"Error\", error).dispatch();\n      }\n    }\n  }\n  #onLoadPoster() {\n    const loader = this.#loader(),\n      {\n        providedPoster,\n        source,\n        canLoadPoster\n      } = this.#media.$state;\n    if (!loader || !loader.loadPoster || !source() || !canLoadPoster() || providedPoster()) return;\n    const abort = new AbortController(),\n      trigger = new DOMEvent(\"source-change\", {\n        detail: source\n      });\n    loader.loadPoster(source(), this.#media, abort).then(url => {\n      this.#media.notify(\"poster-change\", url || \"\", trigger);\n    }).catch(() => {\n      this.#media.notify(\"poster-change\", \"\", trigger);\n    });\n    return () => {\n      abort.abort();\n    };\n  }\n}\nfunction normalizeSrc(src) {\n  return (isArray(src) ? src : [src]).map(src2 => {\n    if (isString(src2)) {\n      return {\n        src: src2,\n        type: inferType(src2)\n      };\n    } else {\n      return {\n        ...src2,\n        type: inferType(src2.src, src2.type)\n      };\n    }\n  });\n}\nfunction inferType(src, type) {\n  if (isString(type) && type.length) {\n    return type;\n  } else if (isString(src) && sourceTypes.has(src)) {\n    return sourceTypes.get(src);\n  } else if (!type && isHLSSrc({\n    src,\n    type: \"\"\n  })) {\n    return \"application/x-mpegurl\";\n  } else if (!type && isDASHSrc({\n    src,\n    type: \"\"\n  })) {\n    return \"application/dash+xml\";\n  } else if (!isString(src) || src.startsWith(\"blob:\")) {\n    return \"video/object\";\n  } else if (src.includes(\"youtube\") || src.includes(\"youtu.be\")) {\n    return \"video/youtube\";\n  } else if (src.includes(\"vimeo\") && !src.includes(\"progressive_redirect\") && !src.includes(\".m3u8\")) {\n    return \"video/vimeo\";\n  }\n  return \"?\";\n}\nfunction isSameSrc(a, b) {\n  return a?.src === b?.src && a?.type === b?.type;\n}\nclass Tracks {\n  #domTracks;\n  #media;\n  #prevTracks = [];\n  constructor(domTracks, media) {\n    this.#domTracks = domTracks;\n    this.#media = media;\n    effect(this.#onTracksChange.bind(this));\n  }\n  #onTracksChange() {\n    const newTracks = this.#domTracks();\n    for (const oldTrack of this.#prevTracks) {\n      if (!newTracks.some(t => t.id === oldTrack.id)) {\n        const track = oldTrack.id && this.#media.textTracks.getById(oldTrack.id);\n        if (track) this.#media.textTracks.remove(track);\n      }\n    }\n    for (const newTrack of newTracks) {\n      const id = newTrack.id || TextTrack.createId(newTrack);\n      if (!this.#media.textTracks.getById(id)) {\n        newTrack.id = id;\n        this.#media.textTracks.add(newTrack);\n      }\n    }\n    this.#prevTracks = newTracks;\n  }\n}\nclass MediaProvider extends Component {\n  static props = {\n    loaders: []\n  };\n  static state = new State({\n    loader: null\n  });\n  #media;\n  #sources;\n  #domSources = signal([]);\n  #domTracks = signal([]);\n  #loader = null;\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#sources = new SourceSelection(this.#domSources, this.#media, this.$state.loader, this.$props.loaders());\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-provider\", \"\");\n  }\n  onConnect(el) {\n    this.#sources.connect();\n    new Tracks(this.#domTracks, this.#media);\n    const resize = new ResizeObserver(animationFrameThrottle(this.#onResize.bind(this)));\n    resize.observe(el);\n    const mutations = new MutationObserver(this.#onMutation.bind(this));\n    mutations.observe(el, {\n      attributes: true,\n      childList: true\n    });\n    this.#onResize();\n    this.#onMutation();\n    onDispose(() => {\n      resize.disconnect();\n      mutations.disconnect();\n    });\n  }\n  #loadRafId = -1;\n  load(target) {\n    target?.setAttribute(\"aria-hidden\", \"true\");\n    window.cancelAnimationFrame(this.#loadRafId);\n    this.#loadRafId = requestAnimationFrame(() => this.#runLoader(target));\n    onDispose(() => {\n      window.cancelAnimationFrame(this.#loadRafId);\n    });\n  }\n  #runLoader(target) {\n    if (!this.scope) return;\n    const loader = this.$state.loader(),\n      {\n        $provider\n      } = this.#media;\n    if (this.#loader === loader && loader?.target === target && peek($provider)) return;\n    this.#destroyProvider();\n    this.#loader = loader;\n    if (loader) loader.target = target || null;\n    if (!loader || !target) return;\n    loader.load(this.#media).then(provider => {\n      if (!this.scope) return;\n      if (peek(this.$state.loader) !== loader) return;\n      this.#media.notify(\"provider-change\", provider);\n    });\n  }\n  onDestroy() {\n    this.#loader = null;\n    this.#destroyProvider();\n  }\n  #destroyProvider() {\n    this.#media?.notify(\"provider-change\", null);\n  }\n  #onResize() {\n    if (!this.el) return;\n    const {\n        player,\n        $state\n      } = this.#media,\n      width = this.el.offsetWidth,\n      height = this.el.offsetHeight;\n    if (!player) return;\n    $state.mediaWidth.set(width);\n    $state.mediaHeight.set(height);\n    if (player.el) {\n      setStyle(player.el, \"--media-width\", width + \"px\");\n      setStyle(player.el, \"--media-height\", height + \"px\");\n    }\n  }\n  #onMutation() {\n    const sources = [],\n      tracks = [],\n      children = this.el.children;\n    for (const el of children) {\n      if (el.hasAttribute(\"data-vds\")) continue;\n      if (el instanceof HTMLSourceElement) {\n        const src = {\n          id: el.id,\n          src: el.src,\n          type: el.type\n        };\n        for (const prop of [\"id\", \"src\", \"width\", \"height\", \"bitrate\", \"codec\"]) {\n          const value = el.getAttribute(`data-${prop}`);\n          if (isString(value)) src[prop] = /id|src|codec/.test(prop) ? value : Number(value);\n        }\n        sources.push(src);\n      } else if (el instanceof HTMLTrackElement) {\n        const track = {\n          src: el.src,\n          kind: el.track.kind,\n          language: el.srclang,\n          label: el.label,\n          default: el.default,\n          type: el.getAttribute(\"data-type\")\n        };\n        tracks.push({\n          id: el.id || TextTrack.createId(track),\n          ...track\n        });\n      }\n    }\n    this.#domSources.set(sources);\n    this.#domTracks.set(tracks);\n    tick();\n  }\n}\nconst mediaprovider__proto = MediaProvider.prototype;\nmethod(mediaprovider__proto, \"load\");\nclass MediaAnnouncer extends Component {\n  static props = {\n    translations: null\n  };\n  static state = new State({\n    label: null,\n    busy: false\n  });\n  #media;\n  #initializing = false;\n  onSetup() {\n    this.#media = useMediaContext();\n  }\n  onAttach(el) {\n    el.style.display = \"contents\";\n  }\n  onConnect(el) {\n    el.setAttribute(\"data-media-announcer\", \"\");\n    setAttributeIfEmpty(el, \"role\", \"status\");\n    setAttributeIfEmpty(el, \"aria-live\", \"polite\");\n    const {\n      busy\n    } = this.$state;\n    this.setAttributes({\n      \"aria-busy\": () => busy() ? \"true\" : null\n    });\n    this.#initializing = true;\n    effect(this.#watchPaused.bind(this));\n    effect(this.#watchVolume.bind(this));\n    effect(this.#watchCaptions.bind(this));\n    effect(this.#watchFullscreen.bind(this));\n    effect(this.#watchPiP.bind(this));\n    effect(this.#watchSeeking.bind(this));\n    effect(this.#watchLabel.bind(this));\n    tick();\n    this.#initializing = false;\n  }\n  #watchPaused() {\n    const {\n      paused\n    } = this.#media.$state;\n    this.#setLabel(!paused() ? \"Play\" : \"Pause\");\n  }\n  #watchFullscreen() {\n    const {\n      fullscreen\n    } = this.#media.$state;\n    this.#setLabel(fullscreen() ? \"Enter Fullscreen\" : \"Exit Fullscreen\");\n  }\n  #watchPiP() {\n    const {\n      pictureInPicture\n    } = this.#media.$state;\n    this.#setLabel(pictureInPicture() ? \"Enter PiP\" : \"Exit PiP\");\n  }\n  #watchCaptions() {\n    const {\n      textTrack\n    } = this.#media.$state;\n    this.#setLabel(textTrack() ? \"Closed-Captions On\" : \"Closed-Captions Off\");\n  }\n  #watchVolume() {\n    const {\n      muted,\n      volume,\n      audioGain\n    } = this.#media.$state;\n    this.#setLabel(muted() || volume() === 0 ? \"Mute\" : `${Math.round(volume() * (audioGain() ?? 1) * 100)}% ${this.#translate(\"Volume\")}`);\n  }\n  #startedSeekingAt = -1;\n  #seekTimer = -1;\n  #watchSeeking() {\n    const {\n        seeking,\n        currentTime\n      } = this.#media.$state,\n      isSeeking = seeking();\n    if (this.#startedSeekingAt > 0) {\n      window.clearTimeout(this.#seekTimer);\n      this.#seekTimer = window.setTimeout(() => {\n        if (!this.scope) return;\n        const newTime = peek(currentTime),\n          seconds = Math.abs(newTime - this.#startedSeekingAt);\n        if (seconds >= 1) {\n          const isForward = newTime >= this.#startedSeekingAt,\n            spokenTime = formatSpokenTime(seconds);\n          this.#setLabel(`${this.#translate(isForward ? \"Seek Forward\" : \"Seek Backward\")} ${spokenTime}`);\n        }\n        this.#startedSeekingAt = -1;\n        this.#seekTimer = -1;\n      }, 300);\n    } else if (isSeeking) {\n      this.#startedSeekingAt = peek(currentTime);\n    }\n  }\n  #translate(word) {\n    const {\n      translations\n    } = this.$props;\n    return translations?.()?.[word || \"\"] ?? word;\n  }\n  #watchLabel() {\n    const {\n        label,\n        busy\n      } = this.$state,\n      $label = this.#translate(label());\n    if (this.#initializing) return;\n    busy.set(true);\n    const id = window.setTimeout(() => void busy.set(false), 150);\n    this.el && setAttribute(this.el, \"aria-label\", $label);\n    if (isString($label)) {\n      this.dispatch(\"change\", {\n        detail: $label\n      });\n    }\n    return () => window.clearTimeout(id);\n  }\n  #setLabel(word) {\n    const {\n      label\n    } = this.$state;\n    label.set(word);\n  }\n}\nclass Controls extends Component {\n  static props = {\n    hideDelay: 2e3,\n    hideOnMouseLeave: false\n  };\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    effect(this.#watchProps.bind(this));\n  }\n  onAttach(el) {\n    const {\n      pictureInPicture,\n      fullscreen\n    } = this.#media.$state;\n    setStyle(el, \"pointer-events\", \"none\");\n    setAttributeIfEmpty(el, \"role\", \"group\");\n    this.setAttributes({\n      \"data-visible\": this.#isShowing.bind(this),\n      \"data-fullscreen\": fullscreen,\n      \"data-pip\": pictureInPicture\n    });\n    effect(() => {\n      this.dispatch(\"change\", {\n        detail: this.#isShowing()\n      });\n    });\n    effect(this.#hideControls.bind(this));\n    effect(() => {\n      const isFullscreen = fullscreen();\n      for (const side of [\"top\", \"right\", \"bottom\", \"left\"]) {\n        setStyle(el, `padding-${side}`, isFullscreen && `env(safe-area-inset-${side})`);\n      }\n    });\n  }\n  #hideControls() {\n    if (!this.el) return;\n    const {\n        nativeControls\n      } = this.#media.$state,\n      isHidden = nativeControls();\n    setAttribute(this.el, \"aria-hidden\", isHidden ? \"true\" : null);\n    setStyle(this.el, \"display\", isHidden ? \"none\" : null);\n  }\n  #watchProps() {\n    const {\n        controls\n      } = this.#media.player,\n      {\n        hideDelay,\n        hideOnMouseLeave\n      } = this.$props;\n    controls.defaultDelay = hideDelay() === 2e3 ? this.#media.$props.controlsDelay() : hideDelay();\n    controls.hideOnMouseLeave = hideOnMouseLeave();\n  }\n  #isShowing() {\n    const {\n      controlsVisible\n    } = this.#media.$state;\n    return controlsVisible();\n  }\n}\nclass ControlsGroup extends Component {\n  onAttach(el) {\n    if (!el.style.pointerEvents) setStyle(el, \"pointer-events\", \"auto\");\n  }\n}\nclass Popper extends ViewController {\n  #delegate;\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n    effect(this.#watchTrigger.bind(this));\n  }\n  onDestroy() {\n    this.#stopAnimationEndListener?.();\n    this.#stopAnimationEndListener = null;\n  }\n  #watchTrigger() {\n    const trigger = this.#delegate.trigger();\n    if (!trigger) {\n      this.hide();\n      return;\n    }\n    const show = this.show.bind(this),\n      hide = this.hide.bind(this);\n    this.#delegate.listen(trigger, show, hide);\n  }\n  #showTimerId = -1;\n  #hideRafId = -1;\n  #stopAnimationEndListener = null;\n  show(trigger) {\n    this.#cancelShowing();\n    window.cancelAnimationFrame(this.#hideRafId);\n    this.#hideRafId = -1;\n    this.#stopAnimationEndListener?.();\n    this.#stopAnimationEndListener = null;\n    this.#showTimerId = window.setTimeout(() => {\n      this.#showTimerId = -1;\n      const content = this.#delegate.content();\n      if (content) content.style.removeProperty(\"display\");\n      peek(() => this.#delegate.onChange(true, trigger));\n    }, this.#delegate.showDelay?.() ?? 0);\n  }\n  hide(trigger) {\n    this.#cancelShowing();\n    peek(() => this.#delegate.onChange(false, trigger));\n    this.#hideRafId = requestAnimationFrame(() => {\n      this.#cancelShowing();\n      this.#hideRafId = -1;\n      const content = this.#delegate.content();\n      if (content) {\n        const onHide = () => {\n          content.style.display = \"none\";\n          this.#stopAnimationEndListener = null;\n        };\n        const isAnimated = hasAnimation(content);\n        if (isAnimated) {\n          this.#stopAnimationEndListener?.();\n          const stop = listenEvent(content, \"animationend\", onHide, {\n            once: true\n          });\n          this.#stopAnimationEndListener = stop;\n        } else {\n          onHide();\n        }\n      }\n    });\n  }\n  #cancelShowing() {\n    window.clearTimeout(this.#showTimerId);\n    this.#showTimerId = -1;\n  }\n}\nconst tooltipContext = createContext();\nlet id = 0;\nclass Tooltip extends Component {\n  static props = {\n    showDelay: 700\n  };\n  #id = `media-tooltip-${++id}`;\n  #trigger = signal(null);\n  #content = signal(null);\n  #showing = signal(false);\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const {\n      showDelay\n    } = this.$props;\n    new Popper({\n      trigger: this.#trigger,\n      content: this.#content,\n      showDelay,\n      listen(trigger, show, hide) {\n        effect(() => {\n          if ($keyboard()) listenEvent(trigger, \"focus\", show);\n          listenEvent(trigger, \"blur\", hide);\n        });\n        new EventsController(trigger).add(\"touchstart\", e => e.preventDefault(), {\n          passive: false\n        }).add(\"mouseenter\", show).add(\"mouseleave\", hide);\n      },\n      onChange: this.#onShowingChange.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  onSetup() {\n    provideContext(tooltipContext, {\n      trigger: this.#trigger,\n      content: this.#content,\n      showing: this.#showing,\n      attachTrigger: this.#attachTrigger.bind(this),\n      detachTrigger: this.#detachTrigger.bind(this),\n      attachContent: this.#attachContent.bind(this),\n      detachContent: this.#detachContent.bind(this)\n    });\n  }\n  #attachTrigger(el) {\n    this.#trigger.set(el);\n    let tooltipName = el.getAttribute(\"data-media-tooltip\");\n    if (tooltipName) {\n      this.el?.setAttribute(`data-media-${tooltipName}-tooltip`, \"\");\n    }\n    setAttribute(el, \"data-describedby\", this.#id);\n  }\n  #detachTrigger(el) {\n    el.removeAttribute(\"data-describedby\");\n    el.removeAttribute(\"aria-describedby\");\n    this.#trigger.set(null);\n  }\n  #attachContent(el) {\n    el.setAttribute(\"id\", this.#id);\n    el.style.display = \"none\";\n    setAttributeIfEmpty(el, \"role\", \"tooltip\");\n    this.#content.set(el);\n  }\n  #detachContent(el) {\n    el.removeAttribute(\"id\");\n    el.removeAttribute(\"role\");\n    this.#content.set(null);\n  }\n  #onShowingChange(isShowing) {\n    const trigger = this.#trigger(),\n      content = this.#content();\n    if (trigger) {\n      setAttribute(trigger, \"aria-describedby\", isShowing ? this.#id : null);\n    }\n    for (const el of [this.el, trigger, content]) {\n      el && setAttribute(el, \"data-visible\", isShowing);\n    }\n    this.#showing.set(isShowing);\n  }\n}\nclass TooltipTrigger extends Component {\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onConnect(el) {\n    onDispose(requestScopedAnimationFrame(() => {\n      if (!this.connectScope) return;\n      this.#attach();\n      const tooltip = useContext(tooltipContext);\n      onDispose(() => {\n        const button = this.#getButton();\n        button && tooltip.detachTrigger(button);\n      });\n    }));\n  }\n  #attach() {\n    const button = this.#getButton(),\n      tooltip = useContext(tooltipContext);\n    button && tooltip.attachTrigger(button);\n  }\n  #getButton() {\n    const candidate = this.el.firstElementChild;\n    return candidate?.localName === \"button\" || candidate?.getAttribute(\"role\") === \"button\" ? candidate : this.el;\n  }\n}\nclass TooltipContent extends Component {\n  static props = {\n    placement: \"top center\",\n    offset: 0,\n    alignOffset: 0\n  };\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const {\n      placement\n    } = this.$props;\n    this.setAttributes({\n      \"data-placement\": placement\n    });\n  }\n  onAttach(el) {\n    this.#attach(el);\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n  }\n  onConnect(el) {\n    this.#attach(el);\n    const tooltip = useContext(tooltipContext);\n    onDispose(() => tooltip.detachContent(el));\n    onDispose(requestScopedAnimationFrame(() => {\n      if (!this.connectScope) return;\n      effect(this.#watchPlacement.bind(this));\n    }));\n  }\n  #attach(el) {\n    const tooltip = useContext(tooltipContext);\n    tooltip.attachContent(el);\n  }\n  #watchPlacement() {\n    const {\n      showing\n    } = useContext(tooltipContext);\n    if (!showing()) return;\n    const {\n      placement,\n      offset: mainOffset,\n      alignOffset\n    } = this.$props;\n    return autoPlacement(this.el, this.#getTrigger(), placement(), {\n      offsetVarName: \"media-tooltip\",\n      xOffset: alignOffset(),\n      yOffset: mainOffset()\n    });\n  }\n  #getTrigger() {\n    return useContext(tooltipContext).trigger();\n  }\n}\nclass ToggleButtonController extends ViewController {\n  static props = {\n    disabled: false\n  };\n  #delegate;\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n    new FocusVisibleController();\n    if (delegate.keyShortcut) {\n      new ARIAKeyShortcuts(delegate.keyShortcut);\n    }\n  }\n  onSetup() {\n    const {\n      disabled\n    } = this.$props;\n    this.setAttributes({\n      \"data-pressed\": this.#delegate.isPresssed,\n      \"aria-pressed\": this.#isARIAPressed.bind(this),\n      \"aria-disabled\": () => disabled() ? \"true\" : null\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n  }\n  onConnect(el) {\n    const events = onPress(el, this.#onMaybePress.bind(this));\n    for (const type of [\"click\", \"touchstart\"]) {\n      events.add(type, this.#onInteraction.bind(this), {\n        passive: true\n      });\n    }\n  }\n  #isARIAPressed() {\n    return ariaBool$1(this.#delegate.isPresssed());\n  }\n  #onPressed(event) {\n    if (isWriteSignal(this.#delegate.isPresssed)) {\n      this.#delegate.isPresssed.set(p => !p);\n    }\n  }\n  #onMaybePress(event) {\n    const disabled = this.$props.disabled() || this.el.hasAttribute(\"data-disabled\");\n    if (disabled) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n      return;\n    }\n    event.preventDefault();\n    (this.#delegate.onPress ?? this.#onPressed).call(this, event);\n  }\n  #onInteraction(event) {\n    if (this.$props.disabled()) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n}\nclass ToggleButton extends Component {\n  static props = {\n    disabled: false,\n    defaultPressed: false\n  };\n  #pressed = signal(false);\n  /**\n   * Whether the toggle is currently in a `pressed` state.\n   */\n  get pressed() {\n    return this.#pressed();\n  }\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#pressed\n    });\n  }\n}\nconst togglebutton__proto = ToggleButton.prototype;\nprop(togglebutton__proto, \"pressed\");\nfunction ariaBool(value) {\n  return value ? \"true\" : \"false\";\n}\nfunction $ariaBool(signal) {\n  return () => ariaBool(signal());\n}\nclass AirPlayButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n      canAirPlay,\n      isAirPlayConnected\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-active\": isAirPlayConnected,\n      \"data-supported\": canAirPlay,\n      \"data-state\": this.#getState.bind(this),\n      \"aria-hidden\": $ariaBool(() => !canAirPlay())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"airplay\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    remote.requestAirPlay(event);\n  }\n  #isPressed() {\n    const {\n      remotePlaybackType,\n      remotePlaybackState\n    } = this.#media.$state;\n    return remotePlaybackType() === \"airplay\" && remotePlaybackState() !== \"disconnected\";\n  }\n  #getState() {\n    const {\n      remotePlaybackType,\n      remotePlaybackState\n    } = this.#media.$state;\n    return remotePlaybackType() === \"airplay\" && remotePlaybackState();\n  }\n  #getDefaultLabel() {\n    const {\n      remotePlaybackState\n    } = this.#media.$state;\n    return `AirPlay ${remotePlaybackState()}`;\n  }\n}\nclass GoogleCastButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n      canGoogleCast,\n      isGoogleCastConnected\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-active\": isGoogleCastConnected,\n      \"data-supported\": canGoogleCast,\n      \"data-state\": this.#getState.bind(this),\n      \"aria-hidden\": $ariaBool(() => !canGoogleCast())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"google-cast\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    remote.requestGoogleCast(event);\n  }\n  #isPressed() {\n    const {\n      remotePlaybackType,\n      remotePlaybackState\n    } = this.#media.$state;\n    return remotePlaybackType() === \"google-cast\" && remotePlaybackState() !== \"disconnected\";\n  }\n  #getState() {\n    const {\n      remotePlaybackType,\n      remotePlaybackState\n    } = this.#media.$state;\n    return remotePlaybackType() === \"google-cast\" && remotePlaybackState();\n  }\n  #getDefaultLabel() {\n    const {\n      remotePlaybackState\n    } = this.#media.$state;\n    return `Google Cast ${remotePlaybackState()}`;\n  }\n}\nclass PlayButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"togglePaused\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n      paused,\n      ended\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-paused\": paused,\n      \"data-ended\": ended\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"play\");\n    setARIALabel(el, \"Play\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.pause(event) : remote.play(event);\n  }\n  #isPressed() {\n    const {\n      paused\n    } = this.#media.$state;\n    return !paused();\n  }\n}\nclass CaptionButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleCaptions\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"data-active\": this.#isPressed.bind(this),\n      \"data-supported\": () => !this.#isHidden(),\n      \"aria-hidden\": $ariaBool(this.#isHidden.bind(this))\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"caption\");\n    setARIALabel(el, \"Captions\");\n  }\n  #onPress(event) {\n    this.#media.remote.toggleCaptions(event);\n  }\n  #isPressed() {\n    const {\n        textTrack\n      } = this.#media.$state,\n      track = textTrack();\n    return !!track && isTrackCaptionKind(track);\n  }\n  #isHidden() {\n    const {\n      hasCaptions\n    } = this.#media.$state;\n    return !hasCaptions();\n  }\n}\nclass FullscreenButton extends Component {\n  static props = {\n    ...ToggleButtonController.props,\n    target: \"prefer-media\"\n  };\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleFullscreen\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n        fullscreen\n      } = this.#media.$state,\n      isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      \"data-active\": fullscreen,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"fullscreen\");\n    setARIALabel(el, \"Fullscreen\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote,\n      target = this.$props.target();\n    this.#isPressed() ? remote.exitFullscreen(target, event) : remote.enterFullscreen(target, event);\n  }\n  #isPressed() {\n    const {\n      fullscreen\n    } = this.#media.$state;\n    return fullscreen();\n  }\n  #isSupported() {\n    const {\n      canFullscreen\n    } = this.#media.$state;\n    return canFullscreen();\n  }\n}\nclass MuteButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleMuted\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"data-muted\": this.#isPressed.bind(this),\n      \"data-state\": this.#getState.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-mute-button\", \"\");\n    el.setAttribute(\"data-media-tooltip\", \"mute\");\n    setARIALabel(el, \"Mute\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.unmute(event) : remote.mute(event);\n  }\n  #isPressed() {\n    const {\n      muted,\n      volume\n    } = this.#media.$state;\n    return muted() || volume() === 0;\n  }\n  #getState() {\n    const {\n        muted,\n        volume\n      } = this.#media.$state,\n      $volume = volume();\n    if (muted() || $volume === 0) return \"muted\";else if ($volume >= 0.5) return \"high\";else if ($volume < 0.5) return \"low\";\n  }\n}\nclass PIPButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"togglePictureInPicture\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n        pictureInPicture\n      } = this.#media.$state,\n      isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      \"data-active\": pictureInPicture,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"pip\");\n    setARIALabel(el, \"PiP\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.exitPictureInPicture(event) : remote.enterPictureInPicture(event);\n  }\n  #isPressed() {\n    const {\n      pictureInPicture\n    } = this.#media.$state;\n    return pictureInPicture();\n  }\n  #isSupported() {\n    const {\n      canPictureInPicture\n    } = this.#media.$state;\n    return canPictureInPicture();\n  }\n}\nclass SeekButton extends Component {\n  static props = {\n    disabled: false,\n    seconds: 30\n  };\n  #media;\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n        seeking\n      } = this.#media.$state,\n      {\n        seconds\n      } = this.$props,\n      isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      seconds,\n      \"data-seeking\": seeking,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n    el.setAttribute(\"data-media-tooltip\", \"seek\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  onConnect(el) {\n    onPress(el, this.#onPress.bind(this));\n  }\n  #isSupported() {\n    const {\n      canSeek\n    } = this.#media.$state;\n    return canSeek();\n  }\n  #getDefaultLabel() {\n    const {\n      seconds\n    } = this.$props;\n    return `Seek ${seconds() > 0 ? \"forward\" : \"backward\"} ${seconds()} seconds`;\n  }\n  #onPress(event) {\n    const {\n      seconds,\n      disabled\n    } = this.$props;\n    if (disabled()) return;\n    const {\n        currentTime\n      } = this.#media.$state,\n      seekTo = currentTime() + seconds();\n    this.#media.remote.seek(seekTo, event);\n  }\n}\nclass LiveButton extends Component {\n  static props = {\n    disabled: false\n  };\n  #media;\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n        disabled\n      } = this.$props,\n      {\n        live,\n        liveEdge\n      } = this.#media.$state,\n      isHidden = () => !live();\n    this.setAttributes({\n      \"data-edge\": liveEdge,\n      \"data-hidden\": isHidden,\n      \"aria-disabled\": $ariaBool(() => disabled() || liveEdge()),\n      \"aria-hidden\": $ariaBool(isHidden)\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n    el.setAttribute(\"data-media-tooltip\", \"live\");\n  }\n  onConnect(el) {\n    onPress(el, this.#onPress.bind(this));\n  }\n  #onPress(event) {\n    const {\n        disabled\n      } = this.$props,\n      {\n        liveEdge\n      } = this.#media.$state;\n    if (disabled() || liveEdge()) return;\n    this.#media.remote.seekToLiveEdge(event);\n  }\n}\nconst sliderState = new State({\n  min: 0,\n  max: 100,\n  value: 0,\n  step: 1,\n  pointerValue: 0,\n  focused: false,\n  dragging: false,\n  pointing: false,\n  hidden: false,\n  get active() {\n    return this.dragging || this.focused || this.pointing;\n  },\n  get fillRate() {\n    return calcRate(this.min, this.max, this.value);\n  },\n  get fillPercent() {\n    return this.fillRate * 100;\n  },\n  get pointerRate() {\n    return calcRate(this.min, this.max, this.pointerValue);\n  },\n  get pointerPercent() {\n    return this.pointerRate * 100;\n  }\n});\nfunction calcRate(min, max, value) {\n  const range = max - min,\n    offset = value - min;\n  return range > 0 ? offset / range : 0;\n}\nclass IntersectionObserverController extends ViewController {\n  #init;\n  #observer;\n  constructor(init) {\n    super();\n    this.#init = init;\n  }\n  onConnect(el) {\n    this.#observer = new IntersectionObserver(entries => {\n      this.#init.callback?.(entries, this.#observer);\n    }, this.#init);\n    this.#observer.observe(el);\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  /**\n   * Disconnect any active intersection observers.\n   */\n  #onDisconnect() {\n    this.#observer?.disconnect();\n    this.#observer = void 0;\n  }\n}\nconst sliderContext = createContext();\nconst sliderObserverContext = createContext();\nfunction getClampedValue(min, max, value, step) {\n  return clampNumber(min, round(value, getNumberOfDecimalPlaces(step)), max);\n}\nfunction getValueFromRate(min, max, rate, step) {\n  const boundRate = clampNumber(0, rate, 1),\n    range = max - min,\n    fill = range * boundRate,\n    stepRatio = fill / step,\n    steps = step * Math.round(stepRatio);\n  return min + steps;\n}\nconst SliderKeyDirection = {\n  Left: -1,\n  ArrowLeft: -1,\n  Up: 1,\n  ArrowUp: 1,\n  Right: 1,\n  ArrowRight: 1,\n  Down: -1,\n  ArrowDown: -1\n};\nclass SliderEventsController extends ViewController {\n  #delegate;\n  #media;\n  #observer;\n  constructor(delegate, media) {\n    super();\n    this.#delegate = delegate;\n    this.#media = media;\n  }\n  onSetup() {\n    if (hasProvidedContext(sliderObserverContext)) {\n      this.#observer = useContext(sliderObserverContext);\n    }\n  }\n  onConnect(el) {\n    effect(this.#attachEventListeners.bind(this, el));\n    effect(this.#attachPointerListeners.bind(this, el));\n    if (this.#delegate.swipeGesture) effect(this.#watchSwipeGesture.bind(this));\n  }\n  #watchSwipeGesture() {\n    const {\n      pointer\n    } = this.#media.$state;\n    if (pointer() !== \"coarse\" || !this.#delegate.swipeGesture()) {\n      this.#provider = null;\n      return;\n    }\n    this.#provider = this.#media.player.el?.querySelector(\"media-provider,[data-media-provider]\");\n    if (!this.#provider) return;\n    new EventsController(this.#provider).add(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: true\n    }).add(\"touchmove\", this.#onTouchMove.bind(this), {\n      passive: false\n    });\n  }\n  #provider = null;\n  #touch = null;\n  #touchStartValue = null;\n  #onTouchStart(event) {\n    this.#touch = event.touches[0];\n  }\n  #onTouchMove(event) {\n    if (isNull(this.#touch) || isTouchPinchEvent(event)) return;\n    const touch = event.touches[0],\n      xDiff = touch.clientX - this.#touch.clientX,\n      yDiff = touch.clientY - this.#touch.clientY,\n      isDragging = this.$state.dragging();\n    if (!isDragging && Math.abs(yDiff) > 5) {\n      return;\n    }\n    if (isDragging) return;\n    event.preventDefault();\n    if (Math.abs(xDiff) > 20) {\n      this.#touch = touch;\n      this.#touchStartValue = this.$state.value();\n      this.#onStartDragging(this.#touchStartValue, event);\n    }\n  }\n  #attachEventListeners(el) {\n    const {\n      hidden\n    } = this.$props;\n    listenEvent(el, \"focus\", this.#onFocus.bind(this));\n    if (hidden() || this.#delegate.isDisabled()) return;\n    new EventsController(el).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this)).add(\"pointerenter\", this.#onPointerEnter.bind(this)).add(\"pointermove\", this.#onPointerMove.bind(this)).add(\"pointerleave\", this.#onPointerLeave.bind(this)).add(\"pointerdown\", this.#onPointerDown.bind(this));\n  }\n  #attachPointerListeners(el) {\n    if (this.#delegate.isDisabled() || !this.$state.dragging()) return;\n    new EventsController(document).add(\"pointerup\", this.#onDocumentPointerUp.bind(this), {\n      capture: true\n    }).add(\"pointermove\", this.#onDocumentPointerMove.bind(this)).add(\"touchmove\", this.#onDocumentTouchMove.bind(this), {\n      passive: false\n    });\n  }\n  #onFocus() {\n    this.#updatePointerValue(this.$state.value());\n  }\n  #updateValue(newValue, trigger) {\n    const {\n      value,\n      min,\n      max,\n      dragging\n    } = this.$state;\n    const clampedValue = Math.max(min(), Math.min(newValue, max()));\n    value.set(clampedValue);\n    const event = this.createEvent(\"value-change\", {\n      detail: clampedValue,\n      trigger\n    });\n    this.dispatch(event);\n    this.#delegate.onValueChange?.(event);\n    if (dragging()) {\n      const event2 = this.createEvent(\"drag-value-change\", {\n        detail: clampedValue,\n        trigger\n      });\n      this.dispatch(event2);\n      this.#delegate.onDragValueChange?.(event2);\n    }\n  }\n  #updatePointerValue(value, trigger) {\n    const {\n      pointerValue,\n      dragging\n    } = this.$state;\n    pointerValue.set(value);\n    this.dispatch(\"pointer-value-change\", {\n      detail: value,\n      trigger\n    });\n    if (dragging()) {\n      this.#updateValue(value, trigger);\n    }\n  }\n  #getPointerValue(event) {\n    let thumbPositionRate,\n      rect = this.el.getBoundingClientRect(),\n      {\n        min,\n        max\n      } = this.$state;\n    if (this.$props.orientation() === \"vertical\") {\n      const {\n        bottom: trackBottom,\n        height: trackHeight\n      } = rect;\n      thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n    } else {\n      if (this.#touch && isNumber(this.#touchStartValue)) {\n        const {\n            width\n          } = this.#provider.getBoundingClientRect(),\n          rate = (event.clientX - this.#touch.clientX) / width,\n          range = max() - min(),\n          diff = range * Math.abs(rate);\n        thumbPositionRate = (rate < 0 ? this.#touchStartValue - diff : this.#touchStartValue + diff) / range;\n      } else {\n        const {\n          left: trackLeft,\n          width: trackWidth\n        } = rect;\n        thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n      }\n    }\n    return Math.max(min(), Math.min(max(), this.#delegate.roundValue(getValueFromRate(min(), max(), thumbPositionRate, this.#delegate.getStep()))));\n  }\n  #onPointerEnter(event) {\n    this.$state.pointing.set(true);\n  }\n  #onPointerMove(event) {\n    const {\n      dragging\n    } = this.$state;\n    if (dragging()) return;\n    this.#updatePointerValue(this.#getPointerValue(event), event);\n  }\n  #onPointerLeave(event) {\n    this.$state.pointing.set(false);\n  }\n  #onPointerDown(event) {\n    if (event.button !== 0) return;\n    const value = this.#getPointerValue(event);\n    this.#onStartDragging(value, event);\n    this.#updatePointerValue(value, event);\n  }\n  #onStartDragging(value, trigger) {\n    const {\n      dragging\n    } = this.$state;\n    if (dragging()) return;\n    dragging.set(true);\n    this.#media.remote.pauseControls(trigger);\n    const event = this.createEvent(\"drag-start\", {\n      detail: value,\n      trigger\n    });\n    this.dispatch(event);\n    this.#delegate.onDragStart?.(event);\n    this.#observer?.onDragStart?.();\n  }\n  #onStopDragging(value, trigger) {\n    const {\n      dragging\n    } = this.$state;\n    if (!dragging()) return;\n    dragging.set(false);\n    this.#media.remote.resumeControls(trigger);\n    const event = this.createEvent(\"drag-end\", {\n      detail: value,\n      trigger\n    });\n    this.dispatch(event);\n    this.#delegate.onDragEnd?.(event);\n    this.#touch = null;\n    this.#touchStartValue = null;\n    this.#observer?.onDragEnd?.();\n  }\n  // -------------------------------------------------------------------------------------------\n  // Keyboard Events\n  // -------------------------------------------------------------------------------------------\n  #lastDownKey;\n  #repeatedKeys = false;\n  #onKeyDown(event) {\n    const isValidKey = Object.keys(SliderKeyDirection).includes(event.key);\n    if (!isValidKey) return;\n    const {\n        key\n      } = event,\n      jumpValue = this.#calcJumpValue(event);\n    if (!isNull(jumpValue)) {\n      this.#updatePointerValue(jumpValue, event);\n      this.#updateValue(jumpValue, event);\n      return;\n    }\n    const newValue = this.#calcNewKeyValue(event);\n    if (!this.#repeatedKeys) {\n      this.#repeatedKeys = key === this.#lastDownKey;\n      if (!this.$state.dragging() && this.#repeatedKeys) {\n        this.#onStartDragging(newValue, event);\n      }\n    }\n    this.#updatePointerValue(newValue, event);\n    this.#lastDownKey = key;\n  }\n  #onKeyUp(event) {\n    const isValidKey = Object.keys(SliderKeyDirection).includes(event.key);\n    if (!isValidKey || !isNull(this.#calcJumpValue(event))) return;\n    const newValue = this.#repeatedKeys ? this.$state.pointerValue() : this.#calcNewKeyValue(event);\n    this.#updateValue(newValue, event);\n    this.#onStopDragging(newValue, event);\n    this.#lastDownKey = \"\";\n    this.#repeatedKeys = false;\n  }\n  #calcJumpValue(event) {\n    let key = event.key,\n      {\n        min,\n        max\n      } = this.$state;\n    if (key === \"Home\" || key === \"PageUp\") {\n      return min();\n    } else if (key === \"End\" || key === \"PageDown\") {\n      return max();\n    } else if (!event.metaKey && /^[0-9]$/.test(key)) {\n      return (max() - min()) / 10 * Number(key);\n    }\n    return null;\n  }\n  #calcNewKeyValue(event) {\n    const {\n      key,\n      shiftKey\n    } = event;\n    event.preventDefault();\n    event.stopPropagation();\n    const {\n      shiftKeyMultiplier\n    } = this.$props;\n    const {\n        min,\n        max,\n        value,\n        pointerValue\n      } = this.$state,\n      step = this.#delegate.getStep(),\n      keyStep = this.#delegate.getKeyStep();\n    const modifiedStep = !shiftKey ? keyStep : keyStep * shiftKeyMultiplier(),\n      direction = Number(SliderKeyDirection[key]),\n      diff = modifiedStep * direction,\n      currentValue = this.#repeatedKeys ? pointerValue() : this.#delegate.getValue?.() ?? value(),\n      steps = (currentValue + diff) / step;\n    return Math.max(min(), Math.min(max(), Number((step * steps).toFixed(3))));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Document (Pointer Events)\n  // -------------------------------------------------------------------------------------------\n  #onDocumentPointerUp(event) {\n    if (event.button !== 0) return;\n    event.preventDefault();\n    event.stopImmediatePropagation();\n    const value = this.#getPointerValue(event);\n    this.#updatePointerValue(value, event);\n    this.#onStopDragging(value, event);\n  }\n  #onDocumentTouchMove(event) {\n    event.preventDefault();\n  }\n  #onDocumentPointerMove = functionThrottle(event => {\n    this.#updatePointerValue(this.#getPointerValue(event), event);\n  }, 20, {\n    leading: true\n  });\n}\nconst sliderValueFormatContext = createContext(() => ({}));\nclass SliderController extends ViewController {\n  static props = {\n    hidden: false,\n    disabled: false,\n    step: 1,\n    keyStep: 1,\n    orientation: \"horizontal\",\n    shiftKeyMultiplier: 5\n  };\n  #media;\n  #delegate;\n  #isVisible = signal(true);\n  #isIntersecting = signal(true);\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const focus = new FocusVisibleController();\n    focus.attach(this);\n    this.$state.focused = focus.focused.bind(focus);\n    if (!hasProvidedContext(sliderValueFormatContext)) {\n      provideContext(sliderValueFormatContext, {\n        default: \"value\"\n      });\n    }\n    provideContext(sliderContext, {\n      orientation: this.$props.orientation,\n      disabled: this.#delegate.isDisabled,\n      preview: signal(null)\n    });\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchStep.bind(this));\n    effect(this.#watchDisabled.bind(this));\n    this.#setupAttrs();\n    new SliderEventsController(this.#delegate, this.#media).attach(this);\n    new IntersectionObserverController({\n      callback: this.#onIntersectionChange.bind(this)\n    }).attach(this);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"role\", \"slider\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"autocomplete\", \"off\");\n    if (IS_SERVER) this.#watchCSSVars();else effect(this.#watchCSSVars.bind(this));\n  }\n  onConnect(el) {\n    onDispose(observeVisibility(el, this.#isVisible.set));\n    effect(this.#watchHidden.bind(this));\n  }\n  #onIntersectionChange(entries) {\n    this.#isIntersecting.set(entries[0].isIntersecting);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  #watchHidden() {\n    const {\n      hidden\n    } = this.$props;\n    this.$state.hidden.set(hidden() || !this.#isVisible() || !this.#isIntersecting.bind(this));\n  }\n  #watchValue() {\n    const {\n      dragging,\n      value,\n      min,\n      max\n    } = this.$state;\n    if (peek(dragging)) return;\n    value.set(getClampedValue(min(), max(), value(), this.#delegate.getStep()));\n  }\n  #watchStep() {\n    this.$state.step.set(this.#delegate.getStep());\n  }\n  #watchDisabled() {\n    if (!this.#delegate.isDisabled()) return;\n    const {\n      dragging,\n      pointing\n    } = this.$state;\n    dragging.set(false);\n    pointing.set(false);\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  #getARIADisabled() {\n    return ariaBool$1(this.#delegate.isDisabled());\n  }\n  // -------------------------------------------------------------------------------------------\n  // Attributes\n  // -------------------------------------------------------------------------------------------\n  #setupAttrs() {\n    const {\n        orientation\n      } = this.$props,\n      {\n        dragging,\n        active,\n        pointing\n      } = this.$state;\n    this.setAttributes({\n      \"data-dragging\": dragging,\n      \"data-pointing\": pointing,\n      \"data-active\": active,\n      \"aria-disabled\": this.#getARIADisabled.bind(this),\n      \"aria-valuemin\": this.#delegate.aria.valueMin ?? this.$state.min,\n      \"aria-valuemax\": this.#delegate.aria.valueMax ?? this.$state.max,\n      \"aria-valuenow\": this.#delegate.aria.valueNow,\n      \"aria-valuetext\": this.#delegate.aria.valueText,\n      \"aria-orientation\": orientation\n    });\n  }\n  #watchCSSVars() {\n    const {\n      fillPercent,\n      pointerPercent\n    } = this.$state;\n    this.#updateSliderVars(round(fillPercent(), 3), round(pointerPercent(), 3));\n  }\n  #updateSliderVars = animationFrameThrottle((fillPercent, pointerPercent) => {\n    this.el?.style.setProperty(\"--slider-fill\", fillPercent + \"%\");\n    this.el?.style.setProperty(\"--slider-pointer\", pointerPercent + \"%\");\n  });\n}\nclass Slider extends Component {\n  static props = {\n    ...SliderController.props,\n    min: 0,\n    max: 100,\n    value: 0\n  };\n  static state = sliderState;\n  constructor() {\n    super();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.$props.disabled,\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      }\n    });\n  }\n  onSetup() {\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchMinMax.bind(this));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  #getARIAValueNow() {\n    const {\n      value\n    } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const {\n      value,\n      max\n    } = this.$state;\n    return round(value() / max() * 100, 2) + \"%\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  #watchValue() {\n    const {\n      value\n    } = this.$props;\n    this.$state.value.set(value());\n  }\n  #watchMinMax() {\n    const {\n      min,\n      max\n    } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n}\nconst cache = /* @__PURE__ */new Map(),\n  pending = /* @__PURE__ */new Map(),\n  warned = /* @__PURE__ */new Set();\nclass ThumbnailsLoader {\n  #media;\n  #src;\n  #crossOrigin;\n  $images = signal([]);\n  static create(src, crossOrigin) {\n    const media = useMediaContext();\n    return new ThumbnailsLoader(src, crossOrigin, media);\n  }\n  constructor(src, crossOrigin, media) {\n    this.#src = src;\n    this.#crossOrigin = crossOrigin;\n    this.#media = media;\n    effect(this.#onLoadCues.bind(this));\n  }\n  #onLoadCues() {\n    const {\n      canLoad\n    } = this.#media.$state;\n    if (!canLoad()) return;\n    const src = this.#src();\n    if (!src) return;\n    if (isString(src) && cache.has(src)) {\n      const cues = cache.get(src);\n      cache.delete(src);\n      cache.set(src, cues);\n      if (cache.size > 99) {\n        const firstKey = cache.keys().next().value;\n        cache.delete(firstKey);\n      }\n      this.$images.set(cache.get(src));\n    } else if (isString(src)) {\n      const crossOrigin = this.#crossOrigin(),\n        currentKey = src + \"::\" + crossOrigin;\n      if (!pending.has(currentKey)) {\n        const promise = new Promise(async (resolve, reject) => {\n          try {\n            const response = await fetch(src, {\n                credentials: getRequestCredentials(crossOrigin)\n              }),\n              isJSON = response.headers.get(\"content-type\") === \"application/json\";\n            if (isJSON) {\n              const json = await response.json();\n              if (isArray(json)) {\n                if (json[0] && \"text\" in json[0]) {\n                  resolve(this.#processVTTCues(json));\n                } else {\n                  for (let i = 0; i < json.length; i++) {\n                    const image = json[i];\n                    assert(isObject(image), `Item not an object at index ${i}`);\n                    assert(\"url\" in image && isString(image.url), `Invalid or missing \\`url\\` property at index ${i}`);\n                    assert(\"startTime\" in image && isNumber(image.startTime), `Invalid or missing \\`startTime\\` property at index ${i}`);\n                  }\n                  resolve(json);\n                }\n              } else {\n                resolve(this.#processStoryboard(json));\n              }\n              return;\n            }\n            import('media-captions').then(async ({\n              parseResponse\n            }) => {\n              try {\n                const {\n                  cues\n                } = await parseResponse(response);\n                resolve(this.#processVTTCues(cues));\n              } catch (e) {\n                reject(e);\n              }\n            });\n          } catch (e) {\n            reject(e);\n          }\n        }).then(images => {\n          cache.set(currentKey, images);\n          return images;\n        }).catch(error => {\n          this.#onError(src, error);\n        }).finally(() => {\n          if (isString(currentKey)) pending.delete(currentKey);\n        });\n        pending.set(currentKey, promise);\n      }\n      pending.get(currentKey)?.then(images => {\n        this.$images.set(images || []);\n      });\n    } else if (isArray(src)) {\n      try {\n        this.$images.set(this.#processImages(src));\n      } catch (error) {\n        this.#onError(src, error);\n      }\n    } else {\n      try {\n        this.$images.set(this.#processStoryboard(src));\n      } catch (error) {\n        this.#onError(src, error);\n      }\n    }\n    return () => {\n      this.$images.set([]);\n    };\n  }\n  #processImages(images) {\n    const baseURL = this.#resolveBaseUrl();\n    return images.map((img, i) => {\n      assert(img.url && isString(img.url), `Invalid or missing \\`url\\` property at index ${i}`);\n      assert(\"startTime\" in img && isNumber(img.startTime), `Invalid or missing \\`startTime\\` property at index ${i}`);\n      return {\n        ...img,\n        url: isString(img.url) ? this.#resolveURL(img.url, baseURL) : img.url\n      };\n    });\n  }\n  #processStoryboard(board) {\n    assert(isString(board.url), \"Missing `url` in storyboard object\");\n    assert(isArray(board.tiles) && board.tiles?.length, `Empty tiles in storyboard`);\n    const url = new URL(board.url),\n      images = [];\n    const tileWidth = \"tile_width\" in board ? board.tile_width : board.tileWidth,\n      tileHeight = \"tile_height\" in board ? board.tile_height : board.tileHeight;\n    for (const tile of board.tiles) {\n      images.push({\n        url,\n        startTime: \"start\" in tile ? tile.start : tile.startTime,\n        width: tileWidth,\n        height: tileHeight,\n        coords: {\n          x: tile.x,\n          y: tile.y\n        }\n      });\n    }\n    return images;\n  }\n  #processVTTCues(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      const cue = cues[i];\n      assert(\"startTime\" in cue && isNumber(cue.startTime), `Invalid or missing \\`startTime\\` property at index ${i}`);\n      assert(\"text\" in cue && isString(cue.text), `Invalid or missing \\`text\\` property at index ${i}`);\n    }\n    const images = [],\n      baseURL = this.#resolveBaseUrl();\n    for (const cue of cues) {\n      const [url, hash] = cue.text.split(\"#\"),\n        data = this.#resolveData(hash);\n      images.push({\n        url: this.#resolveURL(url, baseURL),\n        startTime: cue.startTime,\n        endTime: cue.endTime,\n        width: data?.w,\n        height: data?.h,\n        coords: data && isNumber(data.x) && isNumber(data.y) ? {\n          x: data.x,\n          y: data.y\n        } : void 0\n      });\n    }\n    return images;\n  }\n  #resolveBaseUrl() {\n    let baseURL = peek(this.#src);\n    if (!isString(baseURL) || !/^https?:/.test(baseURL)) {\n      return location.href;\n    }\n    return baseURL;\n  }\n  #resolveURL(src, baseURL) {\n    return /^https?:/.test(src) ? new URL(src) : new URL(src, baseURL);\n  }\n  #resolveData(hash) {\n    if (!hash) return {};\n    const [hashProps, values] = hash.split(\"=\"),\n      hashValues = values?.split(\",\"),\n      data = {};\n    if (!hashProps || !hashValues) {\n      return null;\n    }\n    for (let i = 0; i < hashProps.length; i++) {\n      const value = +hashValues[i];\n      if (!isNaN(value)) data[hashProps[i]] = value;\n    }\n    return data;\n  }\n  #onError(src, error) {\n    if (warned?.has(src)) return;\n    this.#media.logger?.errorGroup(\"[vidstack] failed to load thumbnails\").labelledLog(\"Src\", src).labelledLog(\"Error\", error).dispatch();\n    warned?.add(src);\n  }\n}\nclass Thumbnail extends Component {\n  static props = {\n    src: null,\n    time: 0,\n    crossOrigin: null\n  };\n  static state = new State({\n    src: \"\",\n    img: null,\n    thumbnails: [],\n    activeThumbnail: null,\n    crossOrigin: null,\n    loading: false,\n    error: null,\n    hidden: false\n  });\n  media;\n  #loader;\n  #styleResets = [];\n  onSetup() {\n    this.media = useMediaContext();\n    this.#loader = ThumbnailsLoader.create(this.$props.src, this.$state.crossOrigin);\n    this.#watchCrossOrigin();\n    this.setAttributes({\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-error\": this.#hasError.bind(this),\n      \"data-hidden\": this.$state.hidden,\n      \"aria-hidden\": $ariaBool(this.$state.hidden)\n    });\n  }\n  onConnect(el) {\n    effect(this.#watchImg.bind(this));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#onLoadStart.bind(this));\n    effect(this.#onFindActiveThumbnail.bind(this));\n    effect(this.#resize.bind(this));\n  }\n  #watchImg() {\n    const img = this.$state.img();\n    if (!img) return;\n    new EventsController(img).add(\"load\", this.#onLoaded.bind(this)).add(\"error\", this.#onError.bind(this));\n  }\n  #watchCrossOrigin() {\n    const {\n        crossOrigin: crossOriginProp\n      } = this.$props,\n      {\n        crossOrigin: crossOriginState\n      } = this.$state,\n      {\n        crossOrigin: mediaCrossOrigin\n      } = this.media.$state,\n      crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #onLoadStart() {\n    const {\n      src,\n      loading,\n      error\n    } = this.$state;\n    if (src()) {\n      loading.set(true);\n      error.set(null);\n    }\n    return () => {\n      this.#resetStyles();\n      loading.set(false);\n      error.set(null);\n    };\n  }\n  #onLoaded() {\n    const {\n      loading,\n      error\n    } = this.$state;\n    this.#resize();\n    loading.set(false);\n    error.set(null);\n  }\n  #onError(event) {\n    const {\n      loading,\n      error\n    } = this.$state;\n    loading.set(false);\n    error.set(event);\n  }\n  #isLoading() {\n    const {\n      loading,\n      hidden\n    } = this.$state;\n    return !hidden() && loading();\n  }\n  #hasError() {\n    const {\n      error\n    } = this.$state;\n    return !isNull(error());\n  }\n  #watchHidden() {\n    const {\n        hidden\n      } = this.$state,\n      {\n        duration\n      } = this.media.$state,\n      images = this.#loader.$images();\n    hidden.set(this.#hasError() || !Number.isFinite(duration()) || images.length === 0);\n  }\n  getTime() {\n    return this.$props.time();\n  }\n  #onFindActiveThumbnail() {\n    let images = this.#loader.$images();\n    if (!images.length) return;\n    let time = this.getTime(),\n      {\n        src,\n        activeThumbnail\n      } = this.$state,\n      activeIndex = -1,\n      activeImage = null;\n    for (let i = images.length - 1; i >= 0; i--) {\n      const image = images[i];\n      if (time >= image.startTime && (!image.endTime || time < image.endTime)) {\n        activeIndex = i;\n        break;\n      }\n    }\n    if (images[activeIndex]) {\n      activeImage = images[activeIndex];\n    }\n    activeThumbnail.set(activeImage);\n    src.set(activeImage?.url.href || \"\");\n  }\n  #resize() {\n    if (!this.scope || this.$state.hidden()) return;\n    const rootEl = this.el,\n      imgEl = this.$state.img(),\n      thumbnail = this.$state.activeThumbnail();\n    if (!imgEl || !thumbnail || !rootEl) return;\n    let width = thumbnail.width ?? imgEl.naturalWidth,\n      height = thumbnail?.height ?? imgEl.naturalHeight,\n      {\n        maxWidth,\n        maxHeight,\n        minWidth,\n        minHeight,\n        width: elWidth,\n        height: elHeight\n      } = getComputedStyle(this.el);\n    if (minWidth === \"100%\") minWidth = parseFloat(elWidth) + \"\";\n    if (minHeight === \"100%\") minHeight = parseFloat(elHeight) + \"\";\n    let minRatio = Math.max(parseInt(minWidth) / width, parseInt(minHeight) / height),\n      maxRatio = Math.min(Math.max(parseInt(minWidth), parseInt(maxWidth)) / width, Math.max(parseInt(minHeight), parseInt(maxHeight)) / height),\n      scale = !isNaN(maxRatio) && maxRatio < 1 ? maxRatio : minRatio > 1 ? minRatio : 1;\n    this.#style(rootEl, \"--thumbnail-width\", `${width * scale}px`);\n    this.#style(rootEl, \"--thumbnail-height\", `${height * scale}px`);\n    this.#style(rootEl, \"--thumbnail-aspect-ratio\", String(round(width / height, 5)));\n    this.#style(imgEl, \"width\", `${imgEl.naturalWidth * scale}px`);\n    this.#style(imgEl, \"height\", `${imgEl.naturalHeight * scale}px`);\n    this.#style(imgEl, \"transform\", thumbnail.coords ? `translate(-${thumbnail.coords.x * scale}px, -${thumbnail.coords.y * scale}px)` : \"\");\n    this.#style(imgEl, \"max-width\", \"none\");\n  }\n  #style(el, name, value) {\n    el.style.setProperty(name, value);\n    this.#styleResets.push(() => el.style.removeProperty(name));\n  }\n  #resetStyles() {\n    for (const reset of this.#styleResets) reset();\n    this.#styleResets = [];\n  }\n}\nclass SliderThumbnail extends Thumbnail {\n  #slider;\n  onAttach(el) {\n    this.#slider = useState(Slider.state);\n  }\n  getTime() {\n    const {\n      duration,\n      clipStartTime\n    } = this.media.$state;\n    return clipStartTime() + this.#slider.pointerRate() * duration();\n  }\n}\nclass SliderVideo extends Component {\n  static props = {\n    src: null,\n    crossOrigin: null\n  };\n  static state = new State({\n    video: null,\n    src: null,\n    crossOrigin: null,\n    canPlay: false,\n    error: null,\n    hidden: false\n  });\n  #media;\n  #slider;\n  get video() {\n    return this.$state.video();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#slider = useState(Slider.state);\n    this.#watchCrossOrigin();\n    this.setAttributes({\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-hidden\": this.$state.hidden,\n      \"data-error\": this.#hasError.bind(this),\n      \"aria-hidden\": $ariaBool(this.$state.hidden)\n    });\n  }\n  onAttach(el) {\n    effect(this.#watchVideo.bind(this));\n    effect(this.#watchSrc.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#onSrcChange.bind(this));\n    effect(this.#onUpdateTime.bind(this));\n  }\n  #watchVideo() {\n    const video = this.$state.video();\n    if (!video) return;\n    if (video.readyState >= 2) this.#onCanPlay();\n    new EventsController(video).add(\"canplay\", this.#onCanPlay.bind(this)).add(\"error\", this.#onError.bind(this));\n  }\n  #watchSrc() {\n    const {\n        src\n      } = this.$state,\n      {\n        canLoad\n      } = this.#media.$state;\n    src.set(canLoad() ? this.$props.src() : null);\n  }\n  #watchCrossOrigin() {\n    const {\n        crossOrigin: crossOriginProp\n      } = this.$props,\n      {\n        crossOrigin: crossOriginState\n      } = this.$state,\n      {\n        crossOrigin: mediaCrossOrigin\n      } = this.#media.$state,\n      crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #isLoading() {\n    const {\n      canPlay,\n      hidden\n    } = this.$state;\n    return !canPlay() && !hidden();\n  }\n  #hasError() {\n    const {\n      error\n    } = this.$state;\n    return !isNull(error);\n  }\n  #watchHidden() {\n    const {\n        src,\n        hidden\n      } = this.$state,\n      {\n        canLoad,\n        duration\n      } = this.#media.$state;\n    hidden.set(canLoad() && (!src() || this.#hasError() || !Number.isFinite(duration())));\n  }\n  #onSrcChange() {\n    const {\n      src,\n      canPlay,\n      error\n    } = this.$state;\n    src();\n    canPlay.set(false);\n    error.set(null);\n  }\n  #onCanPlay(event) {\n    const {\n      canPlay,\n      error\n    } = this.$state;\n    canPlay.set(true);\n    error.set(null);\n    this.dispatch(\"can-play\", {\n      trigger: event\n    });\n  }\n  #onError(event) {\n    const {\n      canPlay,\n      error\n    } = this.$state;\n    canPlay.set(false);\n    error.set(event);\n    this.dispatch(\"error\", {\n      trigger: event\n    });\n  }\n  #onUpdateTime() {\n    const {\n        video,\n        canPlay\n      } = this.$state,\n      {\n        duration\n      } = this.#media.$state,\n      {\n        pointerRate\n      } = this.#slider,\n      media = video(),\n      canUpdate = canPlay() && media && Number.isFinite(duration()) && Number.isFinite(pointerRate());\n    if (canUpdate) {\n      media.currentTime = pointerRate() * duration();\n    }\n  }\n}\nconst slidervideo__proto = SliderVideo.prototype;\nprop(slidervideo__proto, \"video\");\nclass SliderValue extends Component {\n  static props = {\n    type: \"pointer\",\n    format: null,\n    showHours: false,\n    showMs: false,\n    padHours: null,\n    padMinutes: null,\n    decimalPlaces: 2\n  };\n  #format;\n  #text;\n  #slider;\n  onSetup() {\n    this.#slider = useState(Slider.state);\n    this.#format = useContext(sliderValueFormatContext);\n    this.#text = computed(this.getValueText.bind(this));\n  }\n  /**\n   * Returns the current value formatted as text based on prop settings.\n   */\n  getValueText() {\n    const {\n        type,\n        format: $format,\n        decimalPlaces,\n        padHours,\n        padMinutes,\n        showHours,\n        showMs\n      } = this.$props,\n      {\n        value: sliderValue,\n        pointerValue,\n        min,\n        max\n      } = this.#slider,\n      format = $format?.() ?? this.#format.default;\n    const value = type() === \"current\" ? sliderValue() : pointerValue();\n    if (format === \"percent\") {\n      const range = max() - min();\n      const percent = value / range * 100;\n      return (this.#format.percent ?? round)(percent, decimalPlaces()) + \"%\";\n    } else if (format === \"time\") {\n      return (this.#format.time ?? formatTime)(value, {\n        padHrs: padHours(),\n        padMins: padMinutes(),\n        showHrs: showHours(),\n        showMs: showMs()\n      });\n    } else {\n      return (this.#format.value?.(value) ?? value.toFixed(2)) + \"\";\n    }\n  }\n}\nconst slidervalue__proto = SliderValue.prototype;\nmethod(slidervalue__proto, \"getValueText\");\nclass SliderPreview extends Component {\n  static props = {\n    offset: 0,\n    noClamp: false\n  };\n  #slider;\n  onSetup() {\n    this.#slider = useContext(sliderContext);\n    const {\n      active\n    } = useState(Slider.state);\n    this.setAttributes({\n      \"data-visible\": active\n    });\n  }\n  onAttach(el) {\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n  }\n  onConnect(el) {\n    const {\n      preview\n    } = this.#slider;\n    preview.set(el);\n    onDispose(() => preview.set(null));\n    effect(this.#updatePlacement.bind(this));\n    const resize = new ResizeObserver(this.#updatePlacement.bind(this));\n    resize.observe(el);\n    onDispose(() => resize.disconnect());\n  }\n  #updatePlacement = animationFrameThrottle(() => {\n    const {\n      disabled,\n      orientation\n    } = this.#slider;\n    if (disabled()) return;\n    const el = this.el,\n      {\n        offset,\n        noClamp\n      } = this.$props;\n    if (!el) return;\n    updateSliderPreviewPlacement(el, {\n      clamp: !noClamp(),\n      offset: offset(),\n      orientation: orientation()\n    });\n  });\n}\nfunction updateSliderPreviewPlacement(el, {\n  clamp,\n  offset,\n  orientation\n}) {\n  const computedStyle = getComputedStyle(el),\n    width = parseFloat(computedStyle.width),\n    height = parseFloat(computedStyle.height),\n    styles = {\n      top: null,\n      right: null,\n      bottom: null,\n      left: null\n    };\n  styles[orientation === \"horizontal\" ? \"bottom\" : \"left\"] = `calc(100% + var(--media-slider-preview-offset, ${offset}px))`;\n  if (orientation === \"horizontal\") {\n    const widthHalf = width / 2;\n    if (!clamp) {\n      styles.left = `calc(var(--slider-pointer) - ${widthHalf}px)`;\n    } else {\n      const leftClamp = `max(0px, calc(var(--slider-pointer) - ${widthHalf}px))`,\n        rightClamp = `calc(100% - ${width}px)`;\n      styles.left = `min(${leftClamp}, ${rightClamp})`;\n    }\n  } else {\n    const heightHalf = height / 2;\n    if (!clamp) {\n      styles.bottom = `calc(var(--slider-pointer) - ${heightHalf}px)`;\n    } else {\n      const topClamp = `max(${heightHalf}px, calc(var(--slider-pointer) - ${heightHalf}px))`,\n        bottomClamp = `calc(100% - ${height}px)`;\n      styles.bottom = `min(${topClamp}, ${bottomClamp})`;\n    }\n  }\n  Object.assign(el.style, styles);\n}\nclass VolumeSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    keyStep: 5,\n    shiftKeyMultiplier: 2\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n      audioGain\n    } = this.#media.$state;\n    provideContext(sliderValueFormatContext, {\n      default: \"percent\",\n      value(value) {\n        return (value * (audioGain() ?? 1)).toFixed(2);\n      },\n      percent(value) {\n        return Math.round(value * (audioGain() ?? 1));\n      }\n    });\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueMax: this.#getARIAValueMax.bind(this),\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchVolume.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-volume-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Volume\");\n    const {\n      canSetVolume\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetVolume,\n      \"aria-hidden\": $ariaBool(() => !canSetVolume())\n    });\n  }\n  #getARIAValueNow() {\n    const {\n        value\n      } = this.$state,\n      {\n        audioGain\n      } = this.#media.$state;\n    return Math.round(value() * (audioGain() ?? 1));\n  }\n  #getARIAValueText() {\n    const {\n        value,\n        max\n      } = this.$state,\n      {\n        audioGain\n      } = this.#media.$state;\n    return round(value() / max() * (audioGain() ?? 1) * 100, 2) + \"%\";\n  }\n  #getARIAValueMax() {\n    const {\n      audioGain\n    } = this.#media.$state;\n    return this.$state.max() * (audioGain() ?? 1);\n  }\n  #isDisabled() {\n    const {\n        disabled\n      } = this.$props,\n      {\n        canSetVolume\n      } = this.#media.$state;\n    return disabled() || !canSetVolume();\n  }\n  #watchVolume() {\n    const {\n      muted,\n      volume\n    } = this.#media.$state;\n    const newValue = muted() ? 0 : volume() * 100;\n    this.$state.value.set(newValue);\n    this.dispatch(\"value-change\", {\n      detail: newValue\n    });\n  }\n  #throttleVolumeChange = functionThrottle(this.#onVolumeChange.bind(this), 25);\n  #onVolumeChange(event) {\n    if (!event.trigger) return;\n    const mediaVolume = round(event.detail / 100, 3);\n    this.#media.remote.changeVolume(mediaVolume, event);\n  }\n  #onValueChange(event) {\n    this.#throttleVolumeChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttleVolumeChange(event);\n  }\n}\nclass AudioGainSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 25,\n    keyStep: 25,\n    shiftKeyMultiplier: 2,\n    min: 0,\n    max: 300\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(sliderValueFormatContext, {\n      default: \"percent\",\n      percent: (_, decimalPlaces) => {\n        return round(this.$state.value(), decimalPlaces) + \"%\";\n      }\n    });\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMinMax.bind(this));\n    effect(this.#watchAudioGain.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-audio-gain-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Audio Boost\");\n    const {\n      canSetAudioGain\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetAudioGain,\n      \"aria-hidden\": $ariaBool(() => !canSetAudioGain())\n    });\n  }\n  #getARIAValueNow() {\n    const {\n      value\n    } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const {\n      value\n    } = this.$state;\n    return value() + \"%\";\n  }\n  #watchMinMax() {\n    const {\n      min,\n      max\n    } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n  #watchAudioGain() {\n    const {\n        audioGain\n      } = this.#media.$state,\n      value = ((audioGain() ?? 1) - 1) * 100;\n    this.$state.value.set(value);\n    this.dispatch(\"value-change\", {\n      detail: value\n    });\n  }\n  #isDisabled() {\n    const {\n        disabled\n      } = this.$props,\n      {\n        canSetAudioGain\n      } = this.#media.$state;\n    return disabled() || !canSetAudioGain();\n  }\n  #onAudioGainChange(event) {\n    if (!event.trigger) return;\n    const gain = round(1 + event.detail / 100, 2);\n    this.#media.remote.changeAudioGain(gain, event);\n  }\n  #onValueChange(event) {\n    this.#onAudioGainChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#onAudioGainChange(event);\n  }\n}\nclass SpeedSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 0.25,\n    keyStep: 0.25,\n    shiftKeyMultiplier: 2,\n    min: 0,\n    max: 2\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: this.#roundValue,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMinMax.bind(this));\n    effect(this.#watchPlaybackRate.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-speed-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Speed\");\n    const {\n      canSetPlaybackRate\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetPlaybackRate,\n      \"aria-hidden\": $ariaBool(() => !canSetPlaybackRate())\n    });\n  }\n  #getARIAValueNow() {\n    const {\n      value\n    } = this.$state;\n    return value();\n  }\n  #getARIAValueText() {\n    const {\n      value\n    } = this.$state;\n    return value() + \"x\";\n  }\n  #watchMinMax() {\n    const {\n      min,\n      max\n    } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n  #watchPlaybackRate() {\n    const {\n      playbackRate\n    } = this.#media.$state;\n    const newValue = playbackRate();\n    this.$state.value.set(newValue);\n    this.dispatch(\"value-change\", {\n      detail: newValue\n    });\n  }\n  #roundValue(value) {\n    return round(value, 2);\n  }\n  #isDisabled() {\n    const {\n        disabled\n      } = this.$props,\n      {\n        canSetPlaybackRate\n      } = this.#media.$state;\n    return disabled() || !canSetPlaybackRate();\n  }\n  #throttledSpeedChange = functionThrottle(this.#onPlaybackRateChange.bind(this), 25);\n  #onPlaybackRateChange(event) {\n    if (!event.trigger) return;\n    const rate = event.detail;\n    this.#media.remote.changePlaybackRate(rate, event);\n  }\n  #onValueChange(event) {\n    this.#throttledSpeedChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttledSpeedChange(event);\n  }\n}\nclass QualitySlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 1,\n    keyStep: 1,\n    shiftKeyMultiplier: 1\n  };\n  static state = sliderState;\n  #media;\n  #sortedQualities = computed(() => {\n    const {\n      qualities\n    } = this.#media.$state;\n    return sortVideoQualities(qualities());\n  });\n  onSetup() {\n    this.#media = useMediaContext();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMax.bind(this));\n    effect(this.#watchQuality.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-quality-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Video Quality\");\n    const {\n        qualities,\n        canSetQuality\n      } = this.#media.$state,\n      $supported = computed(() => canSetQuality() && qualities().length > 0);\n    this.setAttributes({\n      \"data-supported\": $supported,\n      \"aria-hidden\": $ariaBool(() => !$supported())\n    });\n  }\n  #getARIAValueNow() {\n    const {\n      value\n    } = this.$state;\n    return value();\n  }\n  #getARIAValueText() {\n    const {\n      quality\n    } = this.#media.$state;\n    if (!quality()) return \"\";\n    const {\n        height,\n        bitrate\n      } = quality(),\n      bitrateText = bitrate && bitrate > 0 ? `${(bitrate / 1e6).toFixed(2)} Mbps` : null;\n    return height ? `${height}p${bitrateText ? ` (${bitrateText})` : \"\"}` : \"Auto\";\n  }\n  #watchMax() {\n    const $qualities = this.#sortedQualities();\n    this.$state.max.set(Math.max(0, $qualities.length - 1));\n  }\n  #watchQuality() {\n    let {\n        quality\n      } = this.#media.$state,\n      $qualities = this.#sortedQualities(),\n      value = Math.max(0, $qualities.indexOf(quality()));\n    this.$state.value.set(value);\n    this.dispatch(\"value-change\", {\n      detail: value\n    });\n  }\n  #isDisabled() {\n    const {\n        disabled\n      } = this.$props,\n      {\n        canSetQuality,\n        qualities\n      } = this.#media.$state;\n    return disabled() || qualities().length <= 1 || !canSetQuality();\n  }\n  #throttledQualityChange = functionThrottle(this.#onQualityChange.bind(this), 25);\n  #onQualityChange(event) {\n    if (!event.trigger) return;\n    const {\n        qualities\n      } = this.#media,\n      quality = peek(this.#sortedQualities)[event.detail];\n    this.#media.remote.changeQuality(qualities.indexOf(quality), event);\n  }\n  #onValueChange(event) {\n    this.#throttledQualityChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttledQualityChange(event);\n  }\n}\nclass TimeSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 0.1,\n    keyStep: 5,\n    shiftKeyMultiplier: 2,\n    pauseWhileDragging: false,\n    noSwipeGesture: false,\n    seekingRequestThrottle: 100\n  };\n  static state = sliderState;\n  #media;\n  #dispatchSeeking;\n  #chapter = signal(null);\n  constructor() {\n    super();\n    const {\n      noSwipeGesture\n    } = this.$props;\n    new SliderController({\n      swipeGesture: () => !noSwipeGesture(),\n      getValue: this.#getValue.bind(this),\n      getStep: this.#getStep.bind(this),\n      getKeyStep: this.#getKeyStep.bind(this),\n      roundValue: this.#roundValue,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragStart: this.#onDragStart.bind(this),\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onDragEnd: this.#onDragEnd.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(sliderValueFormatContext, {\n      default: \"time\",\n      value: this.#formatValue.bind(this),\n      time: this.#formatTime.bind(this)\n    });\n    this.setAttributes({\n      \"data-chapters\": this.#hasChapters.bind(this)\n    });\n    this.setStyles({\n      \"--slider-progress\": this.#calcBufferedPercent.bind(this)\n    });\n    effect(this.#watchCurrentTime.bind(this));\n    effect(this.#watchSeekingThrottle.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-time-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Seek\");\n  }\n  onConnect(el) {\n    effect(this.#watchPreviewing.bind(this));\n    watchActiveTextTrack(this.#media.textTracks, \"chapters\", this.#chapter.set);\n  }\n  #calcBufferedPercent() {\n    const {\n      bufferedEnd,\n      duration\n    } = this.#media.$state;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1) * 100, 3) + \"%\";\n  }\n  #hasChapters() {\n    const {\n      duration\n    } = this.#media.$state;\n    return this.#chapter()?.cues.length && Number.isFinite(duration()) && duration() > 0;\n  }\n  #watchSeekingThrottle() {\n    this.#dispatchSeeking = functionThrottle(this.#seeking.bind(this), this.$props.seekingRequestThrottle());\n  }\n  #watchCurrentTime() {\n    if (this.$state.hidden()) return;\n    const {\n        value,\n        dragging\n      } = this.$state,\n      newValue = this.#getValue();\n    if (!peek(dragging)) {\n      value.set(newValue);\n      this.dispatch(\"value-change\", {\n        detail: newValue\n      });\n    }\n  }\n  #watchPreviewing() {\n    const player = this.#media.player.el,\n      {\n        preview\n      } = useContext(sliderContext);\n    player && preview() && setAttribute(player, \"data-preview\", this.$state.active());\n  }\n  #seeking(time, event) {\n    this.#media.remote.seeking(time, event);\n  }\n  #seek(time, percent, event) {\n    this.#dispatchSeeking.cancel();\n    const {\n      live\n    } = this.#media.$state;\n    if (live() && percent >= 99) {\n      this.#media.remote.seekToLiveEdge(event);\n      return;\n    }\n    this.#media.remote.seek(time, event);\n  }\n  #playingBeforeDragStart = false;\n  #onDragStart(event) {\n    const {\n      pauseWhileDragging\n    } = this.$props;\n    if (pauseWhileDragging()) {\n      const {\n        paused\n      } = this.#media.$state;\n      this.#playingBeforeDragStart = !paused();\n      this.#media.remote.pause(event);\n    }\n  }\n  #onDragValueChange(event) {\n    this.#dispatchSeeking(this.#percentToTime(event.detail), event);\n  }\n  #onDragEnd(event) {\n    const {\n      seeking\n    } = this.#media.$state;\n    if (!peek(seeking)) this.#seeking(this.#percentToTime(event.detail), event);\n    const percent = event.detail;\n    this.#seek(this.#percentToTime(percent), percent, event);\n    const {\n      pauseWhileDragging\n    } = this.$props;\n    if (pauseWhileDragging() && this.#playingBeforeDragStart) {\n      this.#media.remote.play(event);\n      this.#playingBeforeDragStart = false;\n    }\n  }\n  #onValueChange(event) {\n    const {\n      dragging\n    } = this.$state;\n    if (dragging() || !event.trigger) return;\n    this.#onDragEnd(event);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  #getValue() {\n    const {\n      currentTime\n    } = this.#media.$state;\n    return this.#timeToPercent(currentTime());\n  }\n  #getStep() {\n    const value = this.$props.step() / this.#media.$state.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  #getKeyStep() {\n    const value = this.$props.keyStep() / this.#media.$state.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  #roundValue(value) {\n    return round(value, 3);\n  }\n  #isDisabled() {\n    const {\n        disabled\n      } = this.$props,\n      {\n        canSeek\n      } = this.#media.$state;\n    return disabled() || !canSeek();\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  #getARIAValueNow() {\n    const {\n      value\n    } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const time = this.#percentToTime(this.$state.value()),\n      {\n        duration\n      } = this.#media.$state;\n    return Number.isFinite(time) ? `${formatSpokenTime(time)} out of ${formatSpokenTime(duration())}` : \"live\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Format\n  // -------------------------------------------------------------------------------------------\n  #percentToTime(percent) {\n    const {\n      duration\n    } = this.#media.$state;\n    return round(percent / 100 * duration(), 5);\n  }\n  #timeToPercent(time) {\n    const {\n        liveEdge,\n        duration\n      } = this.#media.$state,\n      rate = Math.max(0, Math.min(1, liveEdge() ? 1 : Math.min(time, duration()) / duration()));\n    return Number.isNaN(rate) ? 0 : Number.isFinite(rate) ? rate * 100 : 100;\n  }\n  #formatValue(percent) {\n    const time = this.#percentToTime(percent),\n      {\n        live,\n        duration\n      } = this.#media.$state;\n    return Number.isFinite(time) ? (live() ? time - duration() : time).toFixed(0) : \"LIVE\";\n  }\n  #formatTime(percent, options) {\n    const time = this.#percentToTime(percent),\n      {\n        live,\n        duration\n      } = this.#media.$state,\n      value = live() ? time - duration() : time;\n    return Number.isFinite(time) ? `${value < 0 ? \"-\" : \"\"}${formatTime(Math.abs(value), options)}` : \"LIVE\";\n  }\n}\nclass SliderChapters extends Component {\n  static props = {\n    disabled: false\n  };\n  #media;\n  #sliderState;\n  #updateScope;\n  #titleRef = null;\n  #refs = [];\n  #$track = signal(null);\n  #$cues = signal([]);\n  #activeIndex = signal(-1);\n  #activePointerIndex = signal(-1);\n  #bufferedIndex = 0;\n  get cues() {\n    return this.#$cues();\n  }\n  get activeCue() {\n    return this.#$cues()[this.#activeIndex()] || null;\n  }\n  get activePointerCue() {\n    return this.#$cues()[this.#activePointerIndex()] || null;\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#sliderState = useState(TimeSlider.state);\n  }\n  onAttach(el) {\n    watchActiveTextTrack(this.#media.textTracks, \"chapters\", this.#setTrack.bind(this));\n    effect(this.#watchSource.bind(this));\n  }\n  onConnect() {\n    onDispose(() => this.#reset.bind(this));\n  }\n  onDestroy() {\n    this.#setTrack(null);\n  }\n  setRefs(refs) {\n    this.#refs = refs;\n    this.#updateScope?.dispose();\n    if (this.#refs.length === 1) {\n      const el = this.#refs[0];\n      el.style.width = \"100%\";\n      el.style.setProperty(\"--chapter-fill\", \"var(--slider-fill)\");\n      el.style.setProperty(\"--chapter-progress\", \"var(--slider-progress)\");\n    } else if (this.#refs.length > 0) {\n      scoped(() => this.#watch(), this.#updateScope = createScope());\n    }\n  }\n  #setTrack(track) {\n    if (peek(this.#$track) === track) return;\n    this.#reset();\n    this.#$track.set(track);\n  }\n  #reset() {\n    this.#refs = [];\n    this.#$cues.set([]);\n    this.#activeIndex.set(-1);\n    this.#activePointerIndex.set(-1);\n    this.#bufferedIndex = 0;\n    this.#updateScope?.dispose();\n  }\n  #watch() {\n    if (!this.#refs.length) return;\n    effect(this.#watchUpdates.bind(this));\n  }\n  #watchUpdates() {\n    const {\n      hidden\n    } = this.#sliderState;\n    if (hidden()) return;\n    effect(this.#watchContainerWidths.bind(this));\n    effect(this.#watchFillPercent.bind(this));\n    effect(this.#watchPointerPercent.bind(this));\n    effect(this.#watchBufferedPercent.bind(this));\n  }\n  #watchContainerWidths() {\n    const cues = this.#$cues();\n    if (!cues.length) return;\n    let cue,\n      {\n        seekableStart,\n        seekableEnd\n      } = this.#media.$state,\n      startTime = seekableStart(),\n      endTime = seekableEnd() || cues[cues.length - 1].endTime,\n      duration = endTime - startTime,\n      remainingWidth = 100;\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n      if (this.#refs[i]) {\n        const width = i === cues.length - 1 ? remainingWidth : round((cue.endTime - Math.max(startTime, cue.startTime)) / duration * 100, 3);\n        this.#refs[i].style.width = width + \"%\";\n        remainingWidth -= width;\n      }\n    }\n  }\n  #watchFillPercent() {\n    let {\n        liveEdge,\n        seekableStart,\n        seekableEnd\n      } = this.#media.$state,\n      {\n        fillPercent,\n        value\n      } = this.#sliderState,\n      cues = this.#$cues(),\n      isLiveEdge = liveEdge(),\n      prevActiveIndex = peek(this.#activeIndex),\n      currentChapter = cues[prevActiveIndex];\n    let currentActiveIndex = isLiveEdge ? this.#$cues.length - 1 : this.#findActiveChapterIndex(currentChapter ? currentChapter.startTime / seekableEnd() * 100 <= peek(value) ? prevActiveIndex : 0 : 0, fillPercent());\n    if (isLiveEdge || !currentChapter) {\n      this.#updateFillPercents(0, cues.length, 100);\n    } else if (currentActiveIndex > prevActiveIndex) {\n      this.#updateFillPercents(prevActiveIndex, currentActiveIndex, 100);\n    } else if (currentActiveIndex < prevActiveIndex) {\n      this.#updateFillPercents(currentActiveIndex + 1, prevActiveIndex + 1, 0);\n    }\n    const percent = isLiveEdge ? 100 : this.#calcPercent(cues[currentActiveIndex], fillPercent(), seekableStart(), this.#getEndTime(cues));\n    this.#updateFillPercent(this.#refs[currentActiveIndex], percent);\n    this.#activeIndex.set(currentActiveIndex);\n  }\n  #watchPointerPercent() {\n    let {\n      pointing,\n      pointerPercent\n    } = this.#sliderState;\n    if (!pointing()) {\n      this.#activePointerIndex.set(-1);\n      return;\n    }\n    const activeIndex = this.#findActiveChapterIndex(0, pointerPercent());\n    this.#activePointerIndex.set(activeIndex);\n  }\n  #updateFillPercents(start, end, percent) {\n    for (let i = start; i < end; i++) this.#updateFillPercent(this.#refs[i], percent);\n  }\n  #updateFillPercent(ref, percent) {\n    if (!ref) return;\n    ref.style.setProperty(\"--chapter-fill\", percent + \"%\");\n    setAttribute(ref, \"data-active\", percent > 0 && percent < 100);\n    setAttribute(ref, \"data-ended\", percent === 100);\n  }\n  #findActiveChapterIndex(startIndex, percent) {\n    let chapterPercent = 0,\n      cues = this.#$cues();\n    if (percent === 0) return 0;else if (percent === 100) return cues.length - 1;\n    let {\n        seekableStart\n      } = this.#media.$state,\n      startTime = seekableStart(),\n      endTime = this.#getEndTime(cues);\n    for (let i = startIndex; i < cues.length; i++) {\n      chapterPercent = this.#calcPercent(cues[i], percent, startTime, endTime);\n      if (chapterPercent >= 0 && chapterPercent < 100) return i;\n    }\n    return 0;\n  }\n  #watchBufferedPercent() {\n    this.#updateBufferedPercent(this.#bufferedPercent());\n  }\n  #updateBufferedPercent = animationFrameThrottle(bufferedPercent => {\n    let percent,\n      cues = this.#$cues(),\n      {\n        seekableStart\n      } = this.#media.$state,\n      startTime = seekableStart(),\n      endTime = this.#getEndTime(cues);\n    for (let i = this.#bufferedIndex; i < this.#refs.length; i++) {\n      percent = this.#calcPercent(cues[i], bufferedPercent, startTime, endTime);\n      this.#refs[i]?.style.setProperty(\"--chapter-progress\", percent + \"%\");\n      if (percent < 100) {\n        this.#bufferedIndex = i;\n        break;\n      }\n    }\n  });\n  #bufferedPercent = computed(this.#calcMediaBufferedPercent.bind(this));\n  #calcMediaBufferedPercent() {\n    const {\n      bufferedEnd,\n      duration\n    } = this.#media.$state;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1), 3) * 100;\n  }\n  #getEndTime(cues) {\n    const {\n        seekableEnd\n      } = this.#media.$state,\n      endTime = seekableEnd();\n    return Number.isFinite(endTime) ? endTime : cues[cues.length - 1]?.endTime || 0;\n  }\n  #calcPercent(cue, percent, startTime, endTime) {\n    if (!cue) return 0;\n    const cues = this.#$cues();\n    if (cues.length === 0) return 0;\n    const duration = endTime - startTime,\n      cueStartTime = Math.max(0, cue.startTime - startTime),\n      cueEndTime = Math.min(endTime, cue.endTime) - startTime;\n    const startRatio = cueStartTime / duration,\n      startPercent = startRatio * 100,\n      endPercent = Math.min(1, startRatio + (cueEndTime - cueStartTime) / duration) * 100;\n    return Math.max(0, round(percent >= endPercent ? 100 : (percent - startPercent) / (endPercent - startPercent) * 100, 3));\n  }\n  #fillGaps(cues) {\n    let chapters = [],\n      {\n        seekableStart,\n        seekableEnd,\n        duration\n      } = this.#media.$state,\n      startTime = seekableStart(),\n      endTime = seekableEnd();\n    cues = cues.filter(cue => cue.startTime <= endTime && cue.endTime >= startTime);\n    const firstCue = cues[0];\n    if (firstCue && firstCue.startTime > startTime) {\n      chapters.push(new window.VTTCue(startTime, firstCue.startTime, \"\"));\n    }\n    for (let i = 0; i < cues.length - 1; i++) {\n      const currentCue = cues[i],\n        nextCue = cues[i + 1];\n      chapters.push(currentCue);\n      if (nextCue) {\n        const timeDiff = nextCue.startTime - currentCue.endTime;\n        if (timeDiff > 0) {\n          chapters.push(new window.VTTCue(currentCue.endTime, currentCue.endTime + timeDiff, \"\"));\n        }\n      }\n    }\n    const lastCue = cues[cues.length - 1];\n    if (lastCue) {\n      chapters.push(lastCue);\n      const endTime2 = duration();\n      if (endTime2 >= 0 && endTime2 - lastCue.endTime > 1) {\n        chapters.push(new window.VTTCue(lastCue.endTime, duration(), \"\"));\n      }\n    }\n    return chapters;\n  }\n  #watchSource() {\n    const {\n      source\n    } = this.#media.$state;\n    source();\n    this.#onTrackChange();\n  }\n  #onTrackChange() {\n    if (!this.scope) return;\n    const {\n      disabled\n    } = this.$props;\n    if (disabled()) {\n      this.#$cues.set([]);\n      this.#activeIndex.set(0);\n      this.#bufferedIndex = 0;\n      return;\n    }\n    const track = this.#$track();\n    if (track) {\n      const onCuesChange = this.#onCuesChange.bind(this);\n      onCuesChange();\n      new EventsController(track).add(\"add-cue\", onCuesChange).add(\"remove-cue\", onCuesChange);\n      effect(this.#watchMediaDuration.bind(this));\n    }\n    this.#titleRef = this.#findChapterTitleRef();\n    if (this.#titleRef) effect(this.#onChapterTitleChange.bind(this));\n    return () => {\n      if (this.#titleRef) {\n        this.#titleRef.textContent = \"\";\n        this.#titleRef = null;\n      }\n    };\n  }\n  #watchMediaDuration() {\n    this.#media.$state.duration();\n    this.#onCuesChange();\n  }\n  #onCuesChange = functionDebounce(() => {\n    const track = peek(this.#$track);\n    if (!this.scope || !track || !track.cues.length) return;\n    this.#$cues.set(this.#fillGaps(track.cues));\n    this.#activeIndex.set(0);\n    this.#bufferedIndex = 0;\n  }, 150, true);\n  #onChapterTitleChange() {\n    const cue = this.activePointerCue || this.activeCue;\n    if (this.#titleRef) this.#titleRef.textContent = cue?.text || \"\";\n  }\n  #findParentSlider() {\n    let node = this.el;\n    while (node && node.getAttribute(\"role\") !== \"slider\") {\n      node = node.parentElement;\n    }\n    return node;\n  }\n  #findChapterTitleRef() {\n    const slider = this.#findParentSlider();\n    return slider ? slider.querySelector('[data-part=\"chapter-title\"]') : null;\n  }\n}\nconst sliderchapters__proto = SliderChapters.prototype;\nprop(sliderchapters__proto, \"cues\");\nprop(sliderchapters__proto, \"activeCue\");\nprop(sliderchapters__proto, \"activePointerCue\");\nmethod(sliderchapters__proto, \"setRefs\");\nconst menuContext = createContext();\nfunction scrollIntoView(el, options) {\n  const scrolls = r(el, options);\n  for (const {\n    el: el2,\n    top,\n    left\n  } of scrolls) {\n    el2.scroll({\n      top,\n      left,\n      behavior: options.behavior\n    });\n  }\n}\nfunction scrollIntoCenter(el, options = {}) {\n  scrollIntoView(el, {\n    scrollMode: \"if-needed\",\n    block: \"center\",\n    inline: \"center\",\n    ...options\n  });\n}\nconst FOCUSABLE_ELEMENTS_SELECTOR = /* @__PURE__ */[\"a[href]\", \"[tabindex]\", \"input\", \"select\", \"button\"].map(selector => `${selector}:not([aria-hidden='true'])`).join(\",\");\nconst VALID_KEYS = /* @__PURE__ */new Set([\"Escape\", \"Tab\", \"ArrowUp\", \"ArrowDown\", \"Home\", \"PageUp\", \"End\", \"PageDown\", \"Enter\", \" \"]);\nclass MenuFocusController {\n  #index = -1;\n  #el = null;\n  #elements = [];\n  #delegate;\n  get items() {\n    return this.#elements;\n  }\n  constructor(delegate) {\n    this.#delegate = delegate;\n  }\n  attachMenu(el) {\n    listenEvent(el, \"focus\", this.#onFocus.bind(this));\n    this.#el = el;\n    onDispose(() => {\n      this.#el = null;\n    });\n  }\n  listen() {\n    if (!this.#el) return;\n    this.update();\n    new EventsController(this.#el).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this));\n    onDispose(() => {\n      this.#index = -1;\n      this.#elements = [];\n    });\n  }\n  update() {\n    this.#index = 0;\n    this.#elements = this.#getFocusableElements();\n  }\n  scroll(index = this.#findActiveIndex()) {\n    const element = this.#elements[index];\n    if (element) {\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          scrollIntoCenter(element, {\n            behavior: \"smooth\",\n            boundary: el => {\n              return !el.hasAttribute(\"data-root\");\n            }\n          });\n        });\n      });\n    }\n  }\n  focusActive(scroll = true) {\n    const index = this.#findActiveIndex();\n    this.#focusAt(index >= 0 ? index : 0, scroll);\n  }\n  #focusAt(index, scroll = true) {\n    this.#index = index;\n    if (this.#elements[index]) {\n      this.#elements[index].focus({\n        preventScroll: true\n      });\n      if (scroll) this.scroll(index);\n    } else {\n      this.#el?.focus({\n        preventScroll: true\n      });\n    }\n  }\n  #findActiveIndex() {\n    return this.#elements.findIndex(el => document.activeElement === el || el.getAttribute(\"role\") === \"menuitemradio\" && el.getAttribute(\"aria-checked\") === \"true\");\n  }\n  #onFocus() {\n    if (this.#index >= 0) return;\n    this.update();\n    this.focusActive();\n  }\n  #validateKeyEvent(event) {\n    const el = event.target;\n    if (wasEnterKeyPressed(event) && el instanceof Element) {\n      const role = el.getAttribute(\"role\");\n      return !/a|input|select|button/.test(el.localName) && !role;\n    }\n    return VALID_KEYS.has(event.key);\n  }\n  #onKeyUp(event) {\n    if (!this.#validateKeyEvent(event)) return;\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  #onKeyDown(event) {\n    if (!this.#validateKeyEvent(event)) return;\n    event.stopPropagation();\n    event.preventDefault();\n    switch (event.key) {\n      case \"Escape\":\n        this.#delegate.closeMenu(event);\n        break;\n      case \"Tab\":\n        this.#focusAt(this.#nextIndex(event.shiftKey ? -1 : 1));\n        break;\n      case \"ArrowUp\":\n        this.#focusAt(this.#nextIndex(-1));\n        break;\n      case \"ArrowDown\":\n        this.#focusAt(this.#nextIndex(1));\n        break;\n      case \"Home\":\n      case \"PageUp\":\n        this.#focusAt(0);\n        break;\n      case \"End\":\n      case \"PageDown\":\n        this.#focusAt(this.#elements.length - 1);\n        break;\n    }\n  }\n  #nextIndex(delta) {\n    let index = this.#index;\n    do {\n      index = (index + delta + this.#elements.length) % this.#elements.length;\n    } while (this.#elements[index]?.offsetParent === null);\n    return index;\n  }\n  #getFocusableElements() {\n    if (!this.#el) return [];\n    const focusableElements = this.#el.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR),\n      elements = [];\n    const is = node => {\n      return node.getAttribute(\"role\") === \"menu\";\n    };\n    for (const el of focusableElements) {\n      if (isHTMLElement(el) && el.offsetParent !== null &&\n      // does not have display: none\n      isElementParent(this.#el, el, is)) {\n        elements.push(el);\n      }\n    }\n    return elements;\n  }\n}\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = __getOwnPropDesc(target, key);\n  for (var i = decorators.length - 1, decorator; i >= 0; i--) if (decorator = decorators[i]) result = decorator(target, key, result) || result;\n  if (result) __defProp(target, key, result);\n  return result;\n};\nlet idCount = 0;\nclass Menu extends Component {\n  static props = {\n    showDelay: 0\n  };\n  #media;\n  #menuId;\n  #menuButtonId;\n  #expanded = signal(false);\n  #disabled = signal(false);\n  #trigger = signal(null);\n  #content = signal(null);\n  #parentMenu;\n  #submenus = /* @__PURE__ */new Set();\n  #menuObserver = null;\n  #popper;\n  #focus;\n  #isSliderActive = false;\n  #isTriggerDisabled = signal(false);\n  #transitionCallbacks = /* @__PURE__ */new Set();\n  get triggerElement() {\n    return this.#trigger();\n  }\n  get contentElement() {\n    return this.#content();\n  }\n  get isSubmenu() {\n    return !!this.#parentMenu;\n  }\n  constructor() {\n    super();\n    const {\n      showDelay\n    } = this.$props;\n    this.#popper = new Popper({\n      trigger: this.#trigger,\n      content: this.#content,\n      showDelay,\n      listen: (trigger, show, hide) => {\n        onPress(trigger, event => {\n          if (this.#expanded()) hide(event);else show(event);\n        });\n        const closeTarget = this.#getCloseTarget();\n        if (closeTarget) {\n          onPress(closeTarget, event => {\n            event.stopPropagation();\n            hide(event);\n          });\n        }\n      },\n      onChange: this.#onExpandedChange.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const currentIdCount = ++idCount;\n    this.#menuId = `media-menu-${currentIdCount}`;\n    this.#menuButtonId = `media-menu-button-${currentIdCount}`;\n    this.#focus = new MenuFocusController({\n      closeMenu: this.close.bind(this)\n    });\n    if (hasProvidedContext(menuContext)) {\n      this.#parentMenu = useContext(menuContext);\n    }\n    this.#observeSliders();\n    this.setAttributes({\n      \"data-open\": this.#expanded,\n      \"data-root\": !this.isSubmenu,\n      \"data-submenu\": this.isSubmenu,\n      \"data-disabled\": this.#isDisabled.bind(this)\n    });\n    provideContext(menuContext, {\n      button: this.#trigger,\n      content: this.#content,\n      expanded: this.#expanded,\n      hint: signal(\"\"),\n      submenu: !!this.#parentMenu,\n      disable: this.#disable.bind(this),\n      attachMenuButton: this.#attachMenuButton.bind(this),\n      attachMenuItems: this.#attachMenuItems.bind(this),\n      attachObserver: this.#attachObserver.bind(this),\n      disableMenuButton: this.#disableMenuButton.bind(this),\n      addSubmenu: this.#addSubmenu.bind(this),\n      onTransitionEvent: callback => {\n        this.#transitionCallbacks.add(callback);\n        onDispose(() => {\n          this.#transitionCallbacks.delete(callback);\n        });\n      }\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  onConnect(el) {\n    effect(this.#watchExpanded.bind(this));\n    if (this.isSubmenu) {\n      this.#parentMenu?.addSubmenu(this);\n    }\n  }\n  onDestroy() {\n    this.#trigger.set(null);\n    this.#content.set(null);\n    this.#menuObserver = null;\n    this.#transitionCallbacks.clear();\n  }\n  #observeSliders() {\n    let sliderActiveTimer = -1,\n      parentSliderObserver = hasProvidedContext(sliderObserverContext) ? useContext(sliderObserverContext) : null;\n    provideContext(sliderObserverContext, {\n      onDragStart: () => {\n        parentSliderObserver?.onDragStart?.();\n        window.clearTimeout(sliderActiveTimer);\n        sliderActiveTimer = -1;\n        this.#isSliderActive = true;\n      },\n      onDragEnd: () => {\n        parentSliderObserver?.onDragEnd?.();\n        sliderActiveTimer = window.setTimeout(() => {\n          this.#isSliderActive = false;\n          sliderActiveTimer = -1;\n        }, 300);\n      }\n    });\n  }\n  #watchExpanded() {\n    const expanded = this.#isExpanded();\n    if (!this.isSubmenu) this.#onResize();\n    this.#updateMenuItemsHidden(expanded);\n    if (!expanded) return;\n    effect(() => {\n      const {\n          height\n        } = this.#media.$state,\n        content = this.#content();\n      content && setStyle(content, \"--player-height\", height() + \"px\");\n    });\n    this.#focus.listen();\n    this.listen(\"pointerup\", this.#onPointerUp.bind(this));\n    listenEvent(window, \"pointerup\", this.#onWindowPointerUp.bind(this));\n  }\n  #attachMenuButton(button) {\n    const el = button.el,\n      isMenuItem = this.isSubmenu,\n      isARIADisabled = $ariaBool(this.#isDisabled.bind(this));\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitem\" : \"button\");\n    setAttribute(el, \"id\", this.#menuButtonId);\n    setAttribute(el, \"aria-haspopup\", \"menu\");\n    setAttribute(el, \"aria-expanded\", \"false\");\n    setAttribute(el, \"data-root\", !this.isSubmenu);\n    setAttribute(el, \"data-submenu\", this.isSubmenu);\n    const watchAttrs = () => {\n      setAttribute(el, \"data-open\", this.#expanded());\n      setAttribute(el, \"aria-disabled\", isARIADisabled());\n    };\n    if (IS_SERVER) watchAttrs();else effect(watchAttrs);\n    this.#trigger.set(el);\n    onDispose(() => {\n      this.#trigger.set(null);\n    });\n  }\n  #attachMenuItems(items) {\n    const el = items.el;\n    el.style.setProperty(\"display\", \"none\");\n    setAttribute(el, \"id\", this.#menuId);\n    setAttributeIfEmpty(el, \"role\", \"menu\");\n    setAttributeIfEmpty(el, \"tabindex\", \"-1\");\n    setAttribute(el, \"data-root\", !this.isSubmenu);\n    setAttribute(el, \"data-submenu\", this.isSubmenu);\n    this.#content.set(el);\n    onDispose(() => this.#content.set(null));\n    const watchAttrs = () => setAttribute(el, \"data-open\", this.#expanded());\n    if (IS_SERVER) watchAttrs();else effect(watchAttrs);\n    this.#focus.attachMenu(el);\n    this.#updateMenuItemsHidden(false);\n    const onTransition = this.#onResizeTransition.bind(this);\n    if (!this.isSubmenu) {\n      items.listen(\"transitionstart\", onTransition);\n      items.listen(\"transitionend\", onTransition);\n      items.listen(\"animationend\", this.#onResize);\n      items.listen(\"vds-menu-resize\", this.#onResize);\n    } else {\n      this.#parentMenu?.onTransitionEvent(onTransition);\n    }\n  }\n  #attachObserver(observer) {\n    this.#menuObserver = observer;\n  }\n  #updateMenuItemsHidden(expanded) {\n    const content = peek(this.#content);\n    if (content) setAttribute(content, \"aria-hidden\", ariaBool$1(!expanded));\n  }\n  #disableMenuButton(disabled) {\n    this.#isTriggerDisabled.set(disabled);\n  }\n  #wasKeyboardExpand = false;\n  #onExpandedChange(isExpanded, event) {\n    this.#wasKeyboardExpand = isKeyboardEvent(event);\n    event?.stopPropagation();\n    if (this.#expanded() === isExpanded) return;\n    if (this.#isDisabled()) {\n      if (isExpanded) this.#popper.hide(event);\n      return;\n    }\n    this.el?.dispatchEvent(new Event(\"vds-menu-resize\", {\n      bubbles: true,\n      composed: true\n    }));\n    const trigger = this.#trigger(),\n      content = this.#content();\n    if (trigger) {\n      setAttribute(trigger, \"aria-controls\", isExpanded && this.#menuId);\n      setAttribute(trigger, \"aria-expanded\", ariaBool$1(isExpanded));\n    }\n    if (content) setAttribute(content, \"aria-labelledby\", isExpanded && this.#menuButtonId);\n    this.#expanded.set(isExpanded);\n    this.#toggleMediaControls(event);\n    tick();\n    if (this.#wasKeyboardExpand) {\n      if (isExpanded) content?.focus();else trigger?.focus();\n      for (const el of [this.el, content]) {\n        el && el.setAttribute(\"data-keyboard\", \"\");\n      }\n    } else {\n      for (const el of [this.el, content]) {\n        el && el.removeAttribute(\"data-keyboard\");\n      }\n    }\n    this.dispatch(isExpanded ? \"open\" : \"close\", {\n      trigger: event\n    });\n    if (isExpanded) {\n      if (!this.isSubmenu && this.#media.activeMenu !== this) {\n        this.#media.activeMenu?.close(event);\n        this.#media.activeMenu = this;\n      }\n      this.#menuObserver?.onOpen?.(event);\n    } else {\n      if (this.isSubmenu) {\n        for (const el of this.#submenus) el.close(event);\n      } else {\n        this.#media.activeMenu = null;\n      }\n      this.#menuObserver?.onClose?.(event);\n    }\n    if (isExpanded) {\n      requestAnimationFrame(this.#updateFocus.bind(this));\n    }\n  }\n  #updateFocus() {\n    if (this.#isTransitionActive || this.#isSubmenuOpen) return;\n    this.#focus.update();\n    requestAnimationFrame(() => {\n      if (this.#wasKeyboardExpand) {\n        this.#focus.focusActive();\n      } else {\n        this.#focus.scroll();\n      }\n    });\n  }\n  #isExpanded() {\n    return !this.#isDisabled() && this.#expanded();\n  }\n  #isDisabled() {\n    return this.#disabled() || this.#isTriggerDisabled();\n  }\n  #disable(disabled) {\n    this.#disabled.set(disabled);\n  }\n  #onPointerUp(event) {\n    const content = this.#content();\n    if (this.#isSliderActive || content && isEventInside(content, event)) {\n      return;\n    }\n    event.stopPropagation();\n  }\n  #onWindowPointerUp(event) {\n    const content = this.#content();\n    if (this.#isSliderActive || content && isEventInside(content, event)) {\n      return;\n    }\n    this.close(event);\n  }\n  #getCloseTarget() {\n    const target = this.el?.querySelector('[data-part=\"close-target\"]');\n    return this.el && target && isElementParent(this.el, target, node => node.getAttribute(\"role\") === \"menu\") ? target : null;\n  }\n  #toggleMediaControls(trigger) {\n    if (this.isSubmenu) return;\n    if (this.#expanded()) this.#media.remote.pauseControls(trigger);else this.#media.remote.resumeControls(trigger);\n  }\n  #addSubmenu(menu) {\n    this.#submenus.add(menu);\n    new EventsController(menu).add(\"open\", this.#onSubmenuOpenBind).add(\"close\", this.#onSubmenuCloseBind);\n    onDispose(this.#removeSubmenuBind);\n  }\n  #removeSubmenuBind = this.#removeSubmenu.bind(this);\n  #removeSubmenu(menu) {\n    this.#submenus.delete(menu);\n  }\n  #isSubmenuOpen = false;\n  #onSubmenuOpenBind = this.#onSubmenuOpen.bind(this);\n  #onSubmenuOpen(event) {\n    this.#isSubmenuOpen = true;\n    const content = this.#content();\n    if (this.isSubmenu) {\n      this.triggerElement?.setAttribute(\"aria-hidden\", \"true\");\n    }\n    for (const target of this.#submenus) {\n      if (target !== event.target) {\n        for (const el of [target.el, target.triggerElement]) {\n          el?.setAttribute(\"aria-hidden\", \"true\");\n        }\n      }\n    }\n    if (content) {\n      const el = event.target.el;\n      for (const child of content.children) {\n        if (child.contains(el)) {\n          child.setAttribute(\"data-open\", \"\");\n        } else if (child !== el) {\n          child.setAttribute(\"data-hidden\", \"\");\n        }\n      }\n    }\n  }\n  #onSubmenuCloseBind = this.#onSubmenuClose.bind(this);\n  #onSubmenuClose(event) {\n    this.#isSubmenuOpen = false;\n    const content = this.#content();\n    if (this.isSubmenu) {\n      this.triggerElement?.setAttribute(\"aria-hidden\", \"false\");\n    }\n    for (const target of this.#submenus) {\n      for (const el of [target.el, target.triggerElement]) {\n        el?.setAttribute(\"aria-hidden\", \"false\");\n      }\n    }\n    if (content) {\n      for (const child of content.children) {\n        child.removeAttribute(\"data-open\");\n        child.removeAttribute(\"data-hidden\");\n      }\n    }\n  }\n  #onResize = animationFrameThrottle(() => {\n    const content = peek(this.#content);\n    if (!content || IS_SERVER) return;\n    let height = 0,\n      styles = getComputedStyle(content),\n      children = [...content.children];\n    for (const prop2 of [\"paddingTop\", \"paddingBottom\", \"borderTopWidth\", \"borderBottomWidth\"]) {\n      height += parseFloat(styles[prop2]) || 0;\n    }\n    for (const child of children) {\n      if (isHTMLElement(child) && child.style.display === \"contents\") {\n        children.push(...child.children);\n      } else if (child.nodeType === 3) {\n        height += parseFloat(getComputedStyle(child).fontSize);\n      } else if (isHTMLElement(child)) {\n        if (!isElementVisible(child)) continue;\n        const style = getComputedStyle(child);\n        height += child.offsetHeight + (parseFloat(style.marginTop) || 0) + (parseFloat(style.marginBottom) || 0);\n      }\n    }\n    setStyle(content, \"--menu-height\", height + \"px\");\n  });\n  #isTransitionActive = false;\n  #onResizeTransition(event) {\n    const content = this.#content();\n    if (content && event.propertyName === \"height\") {\n      this.#isTransitionActive = event.type === \"transitionstart\";\n      setAttribute(content, \"data-transition\", this.#isTransitionActive ? \"height\" : null);\n      if (this.#expanded()) this.#updateFocus();\n    }\n    for (const callback of this.#transitionCallbacks) callback(event);\n  }\n  open(trigger) {\n    if (peek(this.#expanded)) return;\n    this.#popper.show(trigger);\n    tick();\n  }\n  close(trigger) {\n    if (!peek(this.#expanded)) return;\n    this.#popper.hide(trigger);\n    tick();\n  }\n}\n__decorateClass([prop], Menu.prototype, \"triggerElement\");\n__decorateClass([prop], Menu.prototype, \"contentElement\");\n__decorateClass([prop], Menu.prototype, \"isSubmenu\");\n__decorateClass([method], Menu.prototype, \"open\");\n__decorateClass([method], Menu.prototype, \"close\");\nclass MenuButton extends Component {\n  static props = {\n    disabled: false\n  };\n  #menu;\n  #hintEl = signal(null);\n  get expanded() {\n    return this.#menu?.expanded() ?? false;\n  }\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#menu = useContext(menuContext);\n  }\n  onAttach(el) {\n    this.#menu.attachMenuButton(this);\n    effect(this.#watchDisabled.bind(this));\n    setAttributeIfEmpty(el, \"type\", \"button\");\n  }\n  onConnect(el) {\n    effect(this.#watchHintEl.bind(this));\n    this.#onMutation();\n    const mutations = new MutationObserver(this.#onMutation.bind(this));\n    mutations.observe(el, {\n      attributeFilter: [\"data-part\"],\n      childList: true,\n      subtree: true\n    });\n    onDispose(() => mutations.disconnect());\n    onPress(el, trigger => {\n      this.dispatch(\"select\", {\n        trigger\n      });\n    });\n  }\n  #watchDisabled() {\n    this.#menu.disableMenuButton(this.$props.disabled());\n  }\n  #watchHintEl() {\n    const el = this.#hintEl();\n    if (!el) return;\n    effect(() => {\n      const text = this.#menu.hint();\n      if (text) el.textContent = text;\n    });\n  }\n  #onMutation() {\n    const hintEl = this.el?.querySelector('[data-part=\"hint\"]');\n    this.#hintEl.set(hintEl ?? null);\n  }\n}\nconst menubutton__proto = MenuButton.prototype;\nprop(menubutton__proto, \"expanded\");\nclass MenuItem extends MenuButton {}\nclass MenuPortal extends Component {\n  static props = {\n    container: null,\n    disabled: false\n  };\n  #target = null;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(menuPortalContext, {\n      attach: this.#attachElement.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  // Need this so connect scope is defined.\n  onConnect(el) {}\n  onDestroy() {\n    this.#target?.remove();\n    this.#target = null;\n  }\n  #attachElement(el) {\n    this.#portal(false);\n    this.#target = el;\n    requestScopedAnimationFrame(() => {\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        effect(this.#watchDisabled.bind(this));\n      });\n    });\n  }\n  #watchDisabled() {\n    const {\n        fullscreen\n      } = this.#media.$state,\n      {\n        disabled\n      } = this.$props;\n    this.#portal(disabled() === \"fullscreen\" ? !fullscreen() : !disabled());\n  }\n  #portal(shouldPortal) {\n    if (!this.#target) return;\n    let container = this.#getContainer(this.$props.container());\n    if (!container) return;\n    const isPortalled = this.#target.parentElement === container;\n    setAttribute(this.#target, \"data-portal\", shouldPortal);\n    if (shouldPortal) {\n      if (!isPortalled) {\n        this.#target.remove();\n        container.append(this.#target);\n      }\n    } else if (isPortalled && this.#target.parentElement === container) {\n      this.#target.remove();\n      this.el?.append(this.#target);\n    }\n  }\n  #getContainer(selector) {\n    if (isHTMLElement(selector)) return selector;\n    return selector ? document.querySelector(selector) : document.body;\n  }\n}\nconst menuPortalContext = createContext();\nclass MenuItems extends Component {\n  static props = {\n    placement: null,\n    offset: 0,\n    alignOffset: 0\n  };\n  #menu;\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const {\n      placement\n    } = this.$props;\n    this.setAttributes({\n      \"data-placement\": placement\n    });\n  }\n  onAttach(el) {\n    this.#menu = useContext(menuContext);\n    this.#menu.attachMenuItems(this);\n    if (hasProvidedContext(menuPortalContext)) {\n      const portal = useContext(menuPortalContext);\n      if (portal) {\n        provideContext(menuPortalContext, null);\n        portal.attach(el);\n        onDispose(() => portal.attach(null));\n      }\n    }\n  }\n  onConnect(el) {\n    effect(this.#watchPlacement.bind(this));\n  }\n  #watchPlacement() {\n    const {\n      expanded\n    } = this.#menu;\n    if (!this.el || !expanded()) return;\n    const placement = this.$props.placement();\n    if (!placement) return;\n    Object.assign(this.el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n    const {\n      offset: mainOffset,\n      alignOffset\n    } = this.$props;\n    onDispose(autoPlacement(this.el, this.#getButton(), placement, {\n      offsetVarName: \"media-menu\",\n      xOffset: alignOffset(),\n      yOffset: mainOffset()\n    }));\n    onDispose(this.#hide.bind(this));\n  }\n  #hide() {\n    if (!this.el) return;\n    this.el.removeAttribute(\"style\");\n    this.el.style.display = \"none\";\n  }\n  #getButton() {\n    return this.#menu.button();\n  }\n}\nconst radioControllerContext = createContext();\nclass RadioGroupController extends ViewController {\n  #group = /* @__PURE__ */new Set();\n  #value = signal(\"\");\n  #controller = null;\n  onValueChange;\n  get values() {\n    return Array.from(this.#group).map(radio => radio.value());\n  }\n  get value() {\n    return this.#value();\n  }\n  set value(value) {\n    this.#onChange(value);\n  }\n  onSetup() {\n    provideContext(radioControllerContext, {\n      add: this.#addRadio.bind(this),\n      remove: this.#removeRadio.bind(this)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    if (!isMenuItem) setAttributeIfEmpty(el, \"role\", \"radiogroup\");\n    this.setAttributes({\n      value: this.#value\n    });\n  }\n  onDestroy() {\n    this.#group.clear();\n  }\n  #addRadio(radio) {\n    if (this.#group.has(radio)) return;\n    this.#group.add(radio);\n    radio.onCheck = this.#onChangeBind;\n    radio.check(radio.value() === this.#value());\n  }\n  #removeRadio(radio) {\n    radio.onCheck = null;\n    this.#group.delete(radio);\n  }\n  #onChangeBind = this.#onChange.bind(this);\n  #onChange(newValue, trigger) {\n    const currentValue = peek(this.#value);\n    if (!newValue || newValue === currentValue) return;\n    const currentRadio = this.#findRadio(currentValue),\n      newRadio = this.#findRadio(newValue);\n    currentRadio?.check(false, trigger);\n    newRadio?.check(true, trigger);\n    this.#value.set(newValue);\n    this.onValueChange?.(newValue, trigger);\n  }\n  #findRadio(newValue) {\n    for (const radio of this.#group) {\n      if (newValue === peek(radio.value)) return radio;\n    }\n    return null;\n  }\n}\nclass RadioGroup extends Component {\n  static props = {\n    value: \"\"\n  };\n  #controller;\n  /**\n   * A list of radio values that belong this group.\n   */\n  get values() {\n    return this.#controller.values;\n  }\n  /**\n   * The radio value that is checked in this group.\n   */\n  get value() {\n    return this.#controller.value;\n  }\n  set value(newValue) {\n    this.#controller.value = newValue;\n  }\n  constructor() {\n    super();\n    this.#controller = new RadioGroupController();\n    this.#controller.onValueChange = this.#onValueChange.bind(this);\n  }\n  onSetup() {\n    if (IS_SERVER) this.#watchValue();else effect(this.#watchValue.bind(this));\n  }\n  #watchValue() {\n    this.#controller.value = this.$props.value();\n  }\n  #onValueChange(value, trigger) {\n    const event = this.createEvent(\"change\", {\n      detail: value,\n      trigger\n    });\n    this.dispatch(event);\n  }\n}\nconst radiogroup__proto = RadioGroup.prototype;\nprop(radiogroup__proto, \"values\");\nprop(radiogroup__proto, \"value\");\nclass Radio extends Component {\n  static props = {\n    value: \"\"\n  };\n  #checked = signal(false);\n  #controller = {\n    value: this.$props.value,\n    check: this.#check.bind(this),\n    onCheck: null\n  };\n  /**\n   * Whether this radio is currently checked.\n   */\n  get checked() {\n    return this.#checked();\n  }\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.setAttributes({\n      value: this.$props.value,\n      \"data-checked\": this.#checked,\n      \"aria-checked\": $ariaBool(this.#checked)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitemradio\" : \"radio\");\n    effect(this.#watchValue.bind(this));\n  }\n  onConnect(el) {\n    this.#addToGroup();\n    onPress(el, this.#onPress.bind(this));\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  #onDisconnect() {\n    scoped(() => {\n      const group = useContext(radioControllerContext);\n      group.remove(this.#controller);\n    }, this.connectScope);\n  }\n  #addToGroup() {\n    const group = useContext(radioControllerContext);\n    group.add(this.#controller);\n  }\n  #watchValue() {\n    const {\n        value\n      } = this.$props,\n      newValue = value();\n    if (peek(this.#checked)) {\n      this.#controller.onCheck?.(newValue);\n    }\n  }\n  #onPress(event) {\n    if (peek(this.#checked)) return;\n    this.#onChange(true, event);\n    this.#onSelect(event);\n    this.#controller.onCheck?.(peek(this.$props.value), event);\n  }\n  #check(value, trigger) {\n    if (peek(this.#checked) === value) return;\n    this.#onChange(value, trigger);\n  }\n  #onChange(value, trigger) {\n    this.#checked.set(value);\n    this.dispatch(\"change\", {\n      detail: value,\n      trigger\n    });\n  }\n  #onSelect(trigger) {\n    this.dispatch(\"select\", {\n      trigger\n    });\n  }\n}\nconst radio__proto = Radio.prototype;\nprop(radio__proto, \"checked\");\nclass Gesture extends Component {\n  static props = {\n    disabled: false,\n    event: void 0,\n    action: void 0\n  };\n  #media;\n  #provider = null;\n  onSetup() {\n    this.#media = useMediaContext();\n    const {\n      event,\n      action\n    } = this.$props;\n    this.setAttributes({\n      event,\n      action\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-gesture\", \"\");\n    el.style.setProperty(\"pointer-events\", \"none\");\n  }\n  onConnect(el) {\n    this.#provider = this.#media.player.el?.querySelector(\"[data-media-provider]\");\n    effect(this.#attachListener.bind(this));\n  }\n  #attachListener() {\n    let eventType = this.$props.event(),\n      disabled = this.$props.disabled();\n    if (!this.#provider || !eventType || disabled) return;\n    if (/^dbl/.test(eventType)) {\n      eventType = eventType.split(/^dbl/)[1];\n    }\n    if (eventType === \"pointerup\" || eventType === \"pointerdown\") {\n      const pointer = this.#media.$state.pointer();\n      if (pointer === \"coarse\") {\n        eventType = eventType === \"pointerup\" ? \"touchend\" : \"touchstart\";\n      }\n    }\n    listenEvent(this.#provider, eventType, this.#acceptEvent.bind(this), {\n      passive: false\n    });\n  }\n  #presses = 0;\n  #pressTimerId = -1;\n  #acceptEvent(event) {\n    if (this.$props.disabled() || isPointerEvent(event) && (event.button !== 0 || this.#media.activeMenu) || isTouchEvent(event) && this.#media.activeMenu || isTouchPinchEvent(event) || !this.#inBounds(event)) {\n      return;\n    }\n    event.MEDIA_GESTURE = true;\n    event.preventDefault();\n    const eventType = peek(this.$props.event),\n      isDblEvent = eventType?.startsWith(\"dbl\");\n    if (!isDblEvent) {\n      if (this.#presses === 0) {\n        setTimeout(() => {\n          if (this.#presses === 1) this.#handleEvent(event);\n        }, 250);\n      }\n    } else if (this.#presses === 1) {\n      queueMicrotask(() => this.#handleEvent(event));\n      clearTimeout(this.#pressTimerId);\n      this.#presses = 0;\n      return;\n    }\n    if (this.#presses === 0) {\n      this.#pressTimerId = window.setTimeout(() => {\n        this.#presses = 0;\n      }, 275);\n    }\n    this.#presses++;\n  }\n  #handleEvent(event) {\n    this.el.setAttribute(\"data-triggered\", \"\");\n    requestAnimationFrame(() => {\n      if (this.#isTopLayer()) {\n        this.#performAction(peek(this.$props.action), event);\n      }\n      requestAnimationFrame(() => {\n        this.el.removeAttribute(\"data-triggered\");\n      });\n    });\n  }\n  /** Validate event occurred in gesture bounds. */\n  #inBounds(event) {\n    if (!this.el) return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.changedTouches[0] ?? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.el.getBoundingClientRect();\n      const inBounds = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !inBounds : inBounds;\n    }\n    return true;\n  }\n  /** Validate gesture has the highest z-index in this triggered group. */\n  #isTopLayer() {\n    const gestures = this.#media.player.el.querySelectorAll(\"[data-media-gesture][data-triggered]\");\n    return Array.from(gestures).sort((a, b) => +getComputedStyle(b).zIndex - +getComputedStyle(a).zIndex)[0] === this.el;\n  }\n  #performAction(action, trigger) {\n    if (!action) return;\n    const willTriggerEvent = new DOMEvent(\"will-trigger\", {\n      detail: action,\n      cancelable: true,\n      trigger\n    });\n    this.dispatchEvent(willTriggerEvent);\n    if (willTriggerEvent.defaultPrevented) return;\n    const [method, value] = action.replace(/:([a-z])/, \"-$1\").split(\":\");\n    if (action.includes(\":fullscreen\")) {\n      this.#media.remote.toggleFullscreen(\"prefer-media\", trigger);\n    } else if (action.includes(\"seek:\")) {\n      this.#media.remote.seek(peek(this.#media.$state.currentTime) + (+value || 0), trigger);\n    } else {\n      this.#media.remote[kebabToCamelCase(method)](trigger);\n    }\n    this.dispatch(\"trigger\", {\n      detail: action,\n      trigger\n    });\n  }\n}\nclass CaptionsTextRenderer {\n  priority = 10;\n  #track = null;\n  #renderer;\n  #events;\n  constructor(renderer) {\n    this.#renderer = renderer;\n  }\n  attach() {}\n  canRender() {\n    return true;\n  }\n  detach() {\n    this.#events?.abort();\n    this.#events = void 0;\n    this.#renderer.reset();\n    this.#track = null;\n  }\n  changeTrack(track) {\n    if (!track || this.#track === track) return;\n    this.#events?.abort();\n    this.#events = new EventsController(track);\n    if (track.readyState < 2) {\n      this.#renderer.reset();\n      this.#events.add(\"load\", () => this.#changeTrack(track), {\n        once: true\n      });\n    } else {\n      this.#changeTrack(track);\n    }\n    this.#events.add(\"add-cue\", event => {\n      this.#renderer.addCue(event.detail);\n    }).add(\"remove-cue\", event => {\n      this.#renderer.removeCue(event.detail);\n    });\n    this.#track = track;\n  }\n  #changeTrack(track) {\n    this.#renderer.changeTrack({\n      cues: [...track.cues],\n      regions: [...track.regions]\n    });\n  }\n}\nclass Captions extends Component {\n  static props = {\n    textDir: \"ltr\",\n    exampleText: \"Captions look like this.\"\n  };\n  #media;\n  static lib = signal(null);\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this.#isHidden.bind(this))\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"pointer-events\", \"none\");\n  }\n  onConnect(el) {\n    if (!Captions.lib()) {\n      import('media-captions').then(lib => Captions.lib.set(lib));\n    }\n    effect(this.#watchViewType.bind(this));\n  }\n  #isHidden() {\n    const {\n        textTrack,\n        remotePlaybackState,\n        iOSControls\n      } = this.#media.$state,\n      track = textTrack();\n    return iOSControls() || remotePlaybackState() === \"connected\" || !track || !isTrackCaptionKind(track);\n  }\n  #watchViewType() {\n    if (!Captions.lib()) return;\n    const {\n      viewType\n    } = this.#media.$state;\n    if (viewType() === \"audio\") {\n      return this.#setupAudioView();\n    } else {\n      return this.#setupVideoView();\n    }\n  }\n  #setupAudioView() {\n    effect(this.#onTrackChange.bind(this));\n    this.#listenToFontStyleChanges(null);\n    return () => {\n      this.el.textContent = \"\";\n    };\n  }\n  #onTrackChange() {\n    if (this.#isHidden()) return;\n    this.#onCueChange();\n    const {\n      textTrack\n    } = this.#media.$state;\n    listenEvent(textTrack(), \"cue-change\", this.#onCueChange.bind(this));\n    effect(this.#onUpdateTimedNodes.bind(this));\n  }\n  #onCueChange() {\n    this.el.textContent = \"\";\n    if (this.#hideExampleTimer >= 0) {\n      this.#removeExample();\n    }\n    const {\n        realCurrentTime,\n        textTrack\n      } = this.#media.$state,\n      {\n        renderVTTCueString\n      } = Captions.lib(),\n      time = peek(realCurrentTime),\n      activeCues = peek(textTrack).activeCues;\n    for (const cue of activeCues) {\n      const displayEl = this.#createCueDisplayElement(),\n        cueEl = this.#createCueElement();\n      cueEl.innerHTML = renderVTTCueString(cue, time);\n      displayEl.append(cueEl);\n      this.el.append(cueEl);\n    }\n  }\n  #onUpdateTimedNodes() {\n    const {\n        realCurrentTime\n      } = this.#media.$state,\n      {\n        updateTimedVTTCueNodes\n      } = Captions.lib();\n    updateTimedVTTCueNodes(this.el, realCurrentTime());\n  }\n  #setupVideoView() {\n    const {\n        CaptionsRenderer\n      } = Captions.lib(),\n      renderer = new CaptionsRenderer(this.el),\n      textRenderer = new CaptionsTextRenderer(renderer);\n    this.#media.textRenderers.add(textRenderer);\n    effect(this.#watchTextDirection.bind(this, renderer));\n    effect(this.#watchMediaTime.bind(this, renderer));\n    this.#listenToFontStyleChanges(renderer);\n    return () => {\n      this.el.textContent = \"\";\n      this.#media.textRenderers.remove(textRenderer);\n      renderer.destroy();\n    };\n  }\n  #watchTextDirection(renderer) {\n    renderer.dir = this.$props.textDir();\n  }\n  #watchMediaTime(renderer) {\n    if (this.#isHidden()) return;\n    const {\n      realCurrentTime,\n      textTrack\n    } = this.#media.$state;\n    renderer.currentTime = realCurrentTime();\n    if (this.#hideExampleTimer >= 0 && textTrack()?.activeCues[0]) {\n      this.#removeExample();\n    }\n  }\n  #listenToFontStyleChanges(renderer) {\n    const player = this.#media.player;\n    if (!player) return;\n    const onChange = this.#onFontStyleChange.bind(this, renderer);\n    listenEvent(player, \"vds-font-change\", onChange);\n  }\n  #onFontStyleChange(renderer) {\n    if (this.#hideExampleTimer >= 0) {\n      this.#hideExample();\n      return;\n    }\n    const {\n      textTrack\n    } = this.#media.$state;\n    if (!textTrack()?.activeCues[0]) {\n      this.#showExample();\n    } else {\n      renderer?.update(true);\n    }\n  }\n  #showExample() {\n    const display = this.#createCueDisplayElement();\n    setAttribute(display, \"data-example\", \"\");\n    const cue = this.#createCueElement();\n    setAttribute(cue, \"data-example\", \"\");\n    cue.textContent = this.$props.exampleText();\n    display?.append(cue);\n    this.el?.append(display);\n    this.el?.setAttribute(\"data-example\", \"\");\n    this.#hideExample();\n  }\n  #hideExampleTimer = -1;\n  #hideExample() {\n    window.clearTimeout(this.#hideExampleTimer);\n    this.#hideExampleTimer = window.setTimeout(this.#removeExample.bind(this), 2500);\n  }\n  #removeExample() {\n    this.el?.removeAttribute(\"data-example\");\n    if (this.el?.querySelector(\"[data-example]\")) this.el.textContent = \"\";\n    this.#hideExampleTimer = -1;\n  }\n  #createCueDisplayElement() {\n    const el = document.createElement(\"div\");\n    setAttribute(el, \"data-part\", \"cue-display\");\n    return el;\n  }\n  #createCueElement() {\n    const el = document.createElement(\"div\");\n    setAttribute(el, \"data-part\", \"cue\");\n    return el;\n  }\n}\nclass Poster extends Component {\n  static props = {\n    src: null,\n    alt: null,\n    crossOrigin: null\n  };\n  static state = new State({\n    img: null,\n    src: null,\n    alt: null,\n    crossOrigin: null,\n    loading: true,\n    error: null,\n    hidden: false\n  });\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#watchSrc();\n    this.#watchAlt();\n    this.#watchCrossOrigin();\n    this.#watchHidden();\n  }\n  onAttach(el) {\n    el.style.setProperty(\"pointer-events\", \"none\");\n    effect(this.#watchImg.bind(this));\n    effect(this.#watchSrc.bind(this));\n    effect(this.#watchAlt.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#watchHidden.bind(this));\n    const {\n      started\n    } = this.#media.$state;\n    this.setAttributes({\n      \"data-visible\": () => !started() && !this.$state.hidden(),\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-error\": this.#hasError.bind(this),\n      \"data-hidden\": this.$state.hidden\n    });\n  }\n  onConnect(el) {\n    effect(this.#onPreconnect.bind(this));\n    effect(this.#onLoadStart.bind(this));\n  }\n  #hasError() {\n    const {\n      error\n    } = this.$state;\n    return !isNull(error());\n  }\n  #onPreconnect() {\n    const {\n      canLoadPoster,\n      poster\n    } = this.#media.$state;\n    if (!canLoadPoster() && poster()) preconnect(poster(), \"preconnect\");\n  }\n  #watchHidden() {\n    const {\n        src\n      } = this.$props,\n      {\n        poster,\n        nativeControls\n      } = this.#media.$state;\n    this.el && setAttribute(this.el, \"display\", nativeControls() ? \"none\" : null);\n    this.$state.hidden.set(this.#hasError() || !(src() || poster()) || nativeControls());\n  }\n  #isLoading() {\n    const {\n      loading,\n      hidden\n    } = this.$state;\n    return !hidden() && loading();\n  }\n  #watchImg() {\n    const img = this.$state.img();\n    if (!img) return;\n    new EventsController(img).add(\"load\", this.#onLoad.bind(this)).add(\"error\", this.#onError.bind(this));\n    if (img.complete) this.#onLoad();\n  }\n  #prevSrc = \"\";\n  #watchSrc() {\n    const {\n        poster: defaultPoster\n      } = this.#media.$props,\n      {\n        canLoadPoster,\n        providedPoster,\n        inferredPoster\n      } = this.#media.$state;\n    const src = this.$props.src() || \"\",\n      poster = src || defaultPoster() || inferredPoster();\n    if (this.#prevSrc === providedPoster()) {\n      providedPoster.set(src);\n    }\n    this.$state.src.set(canLoadPoster() && poster.length ? poster : null);\n    this.#prevSrc = src;\n  }\n  #watchAlt() {\n    const {\n        src\n      } = this.$props,\n      {\n        alt\n      } = this.$state,\n      {\n        poster\n      } = this.#media.$state;\n    alt.set(src() || poster() ? this.$props.alt() : null);\n  }\n  #watchCrossOrigin() {\n    const {\n        crossOrigin: crossOriginProp\n      } = this.$props,\n      {\n        crossOrigin: crossOriginState\n      } = this.$state,\n      {\n        crossOrigin: mediaCrossOrigin,\n        poster: src\n      } = this.#media.$state,\n      crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(/ytimg\\.com|vimeo/.test(src() || \"\") ? null : crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #onLoadStart() {\n    const {\n        loading,\n        error\n      } = this.$state,\n      {\n        canLoadPoster,\n        poster\n      } = this.#media.$state;\n    loading.set(canLoadPoster() && !!poster());\n    error.set(null);\n  }\n  #onLoad() {\n    const {\n      loading,\n      error\n    } = this.$state;\n    loading.set(false);\n    error.set(null);\n  }\n  #onError(event) {\n    const {\n      loading,\n      error\n    } = this.$state;\n    loading.set(false);\n    error.set(event);\n  }\n}\nclass Time extends Component {\n  static props = {\n    type: \"current\",\n    showHours: false,\n    padHours: null,\n    padMinutes: null,\n    remainder: false,\n    toggle: false,\n    hidden: false\n  };\n  static state = new State({\n    timeText: \"\",\n    hidden: false\n  });\n  #media;\n  #invert = signal(null);\n  #isVisible = signal(true);\n  #isIntersecting = signal(true);\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#watchTime();\n    const {\n      type\n    } = this.$props;\n    this.setAttributes({\n      \"data-type\": type,\n      \"data-remainder\": this.#shouldInvert.bind(this)\n    });\n    new IntersectionObserverController({\n      callback: this.#onIntersectionChange.bind(this)\n    }).attach(this);\n  }\n  onAttach(el) {\n    if (!el.hasAttribute(\"role\")) effect(this.#watchRole.bind(this));\n    effect(this.#watchTime.bind(this));\n  }\n  onConnect(el) {\n    onDispose(observeVisibility(el, this.#isVisible.set));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#watchToggle.bind(this));\n  }\n  #onIntersectionChange(entries) {\n    this.#isIntersecting.set(entries[0].isIntersecting);\n  }\n  #watchHidden() {\n    const {\n      hidden\n    } = this.$props;\n    this.$state.hidden.set(hidden() || !this.#isVisible() || !this.#isIntersecting());\n  }\n  #watchToggle() {\n    if (!this.$props.toggle()) {\n      this.#invert.set(null);\n      return;\n    }\n    if (this.el) {\n      onPress(this.el, this.#onToggle.bind(this));\n    }\n  }\n  #watchTime() {\n    const {\n        hidden,\n        timeText\n      } = this.$state,\n      {\n        duration\n      } = this.#media.$state;\n    if (hidden()) return;\n    const {\n        type,\n        padHours,\n        padMinutes,\n        showHours\n      } = this.$props,\n      seconds = this.#getSeconds(type()),\n      $duration = duration(),\n      shouldInvert = this.#shouldInvert();\n    if (!Number.isFinite(seconds + $duration)) {\n      timeText.set(\"LIVE\");\n      return;\n    }\n    const time = shouldInvert ? Math.max(0, $duration - seconds) : seconds,\n      formattedTime = formatTime(time, {\n        padHrs: padHours(),\n        padMins: padMinutes(),\n        showHrs: showHours()\n      });\n    timeText.set((shouldInvert ? \"-\" : \"\") + formattedTime);\n  }\n  #watchRole() {\n    if (!this.el) return;\n    const {\n      toggle\n    } = this.$props;\n    setAttribute(this.el, \"role\", toggle() ? \"timer\" : null);\n    setAttribute(this.el, \"tabindex\", toggle() ? 0 : null);\n  }\n  #getSeconds(type) {\n    const {\n      bufferedEnd,\n      duration,\n      currentTime\n    } = this.#media.$state;\n    switch (type) {\n      case \"buffered\":\n        return bufferedEnd();\n      case \"duration\":\n        return duration();\n      default:\n        return currentTime();\n    }\n  }\n  #shouldInvert() {\n    return this.$props.remainder() && this.#invert() !== false;\n  }\n  #onToggle(event) {\n    event.preventDefault();\n    if (this.#invert() === null) {\n      this.#invert.set(!this.$props.remainder());\n      return;\n    }\n    this.#invert.set(v => !v);\n  }\n}\nclass MediaPlayerInstance extends MediaPlayer {}\nclass MediaProviderInstance extends MediaProvider {}\nclass MediaAnnouncerInstance extends MediaAnnouncer {}\nclass ControlsInstance extends Controls {}\nclass ControlsGroupInstance extends ControlsGroup {}\nclass ToggleButtonInstance extends ToggleButton {}\nclass CaptionButtonInstance extends CaptionButton {}\nclass FullscreenButtonInstance extends FullscreenButton {}\nclass LiveButtonInstance extends LiveButton {}\nclass MuteButtonInstance extends MuteButton {}\nclass PIPButtonInstance extends PIPButton {}\nclass PlayButtonInstance extends PlayButton {}\nclass AirPlayButtonInstance extends AirPlayButton {}\nclass GoogleCastButtonInstance extends GoogleCastButton {}\nclass SeekButtonInstance extends SeekButton {}\nclass TooltipInstance extends Tooltip {}\nclass TooltipTriggerInstance extends TooltipTrigger {}\nclass TooltipContentInstance extends TooltipContent {}\nclass SliderInstance extends Slider {}\nclass TimeSliderInstance extends TimeSlider {}\nclass VolumeSliderInstance extends VolumeSlider {}\nclass AudioGainSliderInstance extends AudioGainSlider {}\nclass SpeedSliderInstance extends SpeedSlider {}\nclass QualitySliderInstance extends QualitySlider {}\nclass SliderThumbnailInstance extends SliderThumbnail {}\nclass SliderValueInstance extends SliderValue {}\nclass SliderVideoInstance extends SliderVideo {}\nclass SliderPreviewInstance extends SliderPreview {}\nclass SliderChaptersInstance extends SliderChapters {}\nclass MenuInstance extends Menu {}\nclass MenuButtonInstance extends MenuButton {}\nclass MenuItemsInstance extends MenuItems {}\nclass MenuItemInstance extends MenuItem {}\nclass MenuPortalInstance extends MenuPortal {}\nclass RadioGroupInstance extends RadioGroup {}\nclass RadioInstance extends Radio {}\nclass CaptionsInstance extends Captions {}\nclass GestureInstance extends Gesture {}\nclass PosterInstance extends Poster {}\nclass ThumbnailInstance extends Thumbnail {}\nclass TimeInstance extends Time {}\nconst Slot = React.forwardRef((props, forwardedRef) => {\n  const {\n    children,\n    ...slotProps\n  } = props;\n  const childrenArray = React.Children.toArray(children);\n  const slottable = childrenArray.find(isSlottable);\n  if (slottable) {\n    const newElement = slottable.props.children;\n    const newChildren = childrenArray.map(child => {\n      if (child === slottable) {\n        if (React.Children.count(newElement) > 1) return React.Children.only(null);\n        return React.isValidElement(newElement) ? newElement.props.children : null;\n      } else {\n        return child;\n      }\n    });\n    return /* @__PURE__ */React.createElement(SlotClone, {\n      ...slotProps,\n      ref: forwardedRef\n    }, React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null);\n  }\n  return /* @__PURE__ */React.createElement(SlotClone, {\n    ...slotProps,\n    ref: forwardedRef\n  }, children);\n});\nSlot.displayName = \"Slot\";\nconst SlotClone = React.forwardRef((props, forwardedRef) => {\n  const {\n    children,\n    ...slotProps\n  } = props;\n  if (React.isValidElement(children)) {\n    return React.cloneElement(children, {\n      ...mergeProps(slotProps, children.props),\n      ref: forwardedRef ? composeRefs(forwardedRef, children.ref) : children.ref\n    });\n  }\n  return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n});\nSlotClone.displayName = \"SlotClone\";\nconst Slottable = ({\n  children\n}) => {\n  return /* @__PURE__ */React.createElement(React.Fragment, null, children);\n};\nfunction isSlottable(child) {\n  return React.isValidElement(child) && child.type === Slottable;\n}\nfunction mergeProps(slotProps, childProps) {\n  const overrideProps = {\n    ...childProps\n  };\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args) => {\n          childPropValue(...args);\n          slotPropValue(...args);\n        };\n      } else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    } else if (propName === \"style\") {\n      overrideProps[propName] = {\n        ...slotPropValue,\n        ...childPropValue\n      };\n    } else if (propName === \"className\") {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(\" \");\n    }\n  }\n  return {\n    ...slotProps,\n    ...overrideProps\n  };\n}\nconst NODES = [\"button\", \"div\", \"span\", \"img\", \"video\", \"audio\"];\nconst Primitive = NODES.reduce((primitives, node) => {\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const {\n      asChild,\n      ...primitiveProps\n    } = props;\n    const Comp = asChild ? Slot : node;\n    return /* @__PURE__ */React.createElement(Comp, {\n      ...primitiveProps,\n      ref: forwardedRef\n    });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return {\n    ...primitives,\n    [node]: Node\n  };\n}, {});\nfunction isRemotionProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"REMOTION\";\n}\nfunction isRemotionSrc(src) {\n  return src?.type === \"video/remotion\";\n}\nconst sliderStateRecord = SliderInstance.state.record,\n  initialSliderStore = Object.keys(sliderStateRecord).reduce((store, prop) => ({\n    ...store,\n    [prop]() {\n      return sliderStateRecord[prop];\n    }\n  }), {});\nfunction useSliderState(prop, ref) {\n  const $state = useStateContext(sliderState);\n  if (!$state && !ref) {\n    console.warn(`[vidstack] \\`useSliderState\\` requires \\`RefObject<SliderInstance>\\` argument if called outside of a slider component`);\n  }\n  return useSignal((ref?.current?.$state || $state || initialSliderStore)[prop]);\n}\nfunction useSliderStore(ref) {\n  const $state = useStateContext(sliderState);\n  if (!$state && !ref) {\n    console.warn(`[vidstack] \\`useSliderStore\\` requires \\`RefObject<SliderInstance>\\` argument if called outside of a slider component`);\n  }\n  return useSignalRecord(ref?.current ? ref.current.$state : $state || initialSliderStore);\n}\nconst mediaStateRecord = MediaPlayerInstance.state.record,\n  initialMediaStore = Object.keys(mediaStateRecord).reduce((store, prop) => ({\n    ...store,\n    [prop]() {\n      return mediaStateRecord[prop];\n    }\n  }), {});\nfunction useMediaState(prop, ref) {\n  const $state = useStateContext(mediaState);\n  if (!$state && !ref) {\n    console.warn(`[vidstack] \\`useMediaState\\` requires \\`RefObject<MediaPlayerInstance>\\` argument if called outside the \\`<MediaPlayer>\\` component`);\n  }\n  return useSignal((ref?.current?.$state || $state || initialMediaStore)[prop]);\n}\nfunction useMediaStore(ref) {\n  const $state = useStateContext(mediaState);\n  if (!$state && !ref) {\n    console.warn(`[vidstack] \\`useMediaStore\\` requires \\`RefObject<MediaPlayerInstance>\\` argument if called outside the \\`<MediaPlayer>\\` component`);\n  }\n  return useSignalRecord(ref?.current ? ref.current.$state : $state || initialMediaStore);\n}\nexport { ARIAKeyShortcuts, AUDIO_EXTENSIONS, AUDIO_TYPES, AirPlayButtonInstance, AudioGainSliderInstance, AudioProviderLoader, AudioTrackList, CaptionButtonInstance, CaptionsInstance, ControlsGroupInstance, ControlsInstance, DASHProviderLoader, DASH_VIDEO_EXTENSIONS, DASH_VIDEO_TYPES, FullscreenButtonInstance, FullscreenController, GestureInstance, GoogleCastButtonInstance, HLSProviderLoader, HLS_VIDEO_EXTENSIONS, HLS_VIDEO_TYPES, HTMLAirPlayAdapter, HTMLMediaProvider, IS_CHROME, IS_IOS, IS_SERVER, List, ListSymbol, LiveButtonInstance, LocalMediaStorage, Logger, MEDIA_KEY_SHORTCUTS, MediaAnnouncerInstance, MediaControls, MediaPlayerInstance, MediaProviderInstance, MediaRemoteControl, MenuButtonInstance, MenuInstance, MenuItemInstance, MenuItemsInstance, MenuPortalInstance, MuteButtonInstance, PIPButtonInstance, PlayButtonInstance, PosterInstance, Primitive, QualitySliderInstance, QualitySymbol, RAFLoop, RadioGroupController, RadioGroupInstance, RadioInstance, ScreenOrientationController, SeekButtonInstance, SliderChaptersInstance, SliderInstance, SliderPreviewInstance, SliderThumbnailInstance, SliderValueInstance, SliderVideoInstance, SpeedSliderInstance, TextRenderers, TextTrack, TextTrackList, TextTrackSymbol, ThumbnailInstance, ThumbnailsLoader, TimeInstance, TimeRange, TimeSliderInstance, ToggleButtonInstance, TooltipContentInstance, TooltipInstance, TooltipTriggerInstance, VIDEO_EXTENSIONS, VIDEO_TYPES, VideoProvider, VideoProviderLoader, VideoQualityList, VimeoProviderLoader, VolumeSliderInstance, YouTubeProviderLoader, appendParamsToURL, boundTime, canChangeVolume, canFullscreen, canGoogleCastSrc, canOrientScreen, canPlayHLSNatively, canRotateScreen, canUsePictureInPicture, canUseVideoPresentation, coerceToError, findActiveCue, formatSpokenTime, formatTime, getDownloadFile, getTimeRangesEnd, getTimeRangesStart, isAudioProvider, isAudioSrc, isCueActive, isDASHProvider, isDASHSrc, isGoogleCastProvider, isHLSProvider, isHLSSrc, isHLSSupported, isHTMLAudioElement, isHTMLIFrameElement, isHTMLMediaElement, isHTMLVideoElement, isMediaStream, isRemotionProvider, isRemotionSrc, isTrackCaptionKind, isVideoProvider, isVideoQualitySrc, isVideoSrc, isVimeoProvider, isYouTubeProvider, loadScript, mediaContext, mediaState, menuContext, normalizeTimeIntervals, parseJSONCaptionsFile, preconnect, sliderState, softResetMediaState, sortVideoQualities, updateSliderPreviewPlacement, updateTimeIntervals, useMediaContext, useMediaState, useMediaStore, useSliderState, useSliderStore, watchActiveTextTrack, watchCueTextChange };","map":{"version":3,"names":["React","isString","isNumber","isFunction","isUndefined","waitTimeout","isArray","isBoolean","isNull","deferredPromise","listenEvent","scoped","getScope","EventsTarget","DOMEvent","State","fscreen","tick","createContext","useContext","Component","functionThrottle","setAttribute","effect","isTouchEvent","isDOMNode","EventsController","isKeyboardClick","setStyle","onDispose","untrack","functionDebounce","ViewController","signal","peek","isKeyboardEvent","isNil","createScope","camelToKebabCase","waitIdlePeriod","prop","method","provideContext","animationFrameThrottle","uppercaseFirstChar","computed","noop","ariaBool","ariaBool$1","isWriteSignal","hasProvidedContext","isObject","useState","r","wasEnterKeyPressed","isPointerEvent","isMouseEvent","kebabToCamelCase","composeRefs","useStateContext","useSignal","useSignalRecord","autoUpdate","computePosition","flip","shift","isVideoQualitySrc","src","width","height","IS_SERVER","document","UA","navigator","userAgent","toLowerCase","IS_IOS","test","IS_IPHONE","platform","IS_CHROME","window","chrome","IS_SAFARI","safari","canOrientScreen","canRotateScreen","screen","orientation","unlock","lock","canPlayAudioType","audio","type","createElement","canPlayType","length","canPlayVideoType","video","canPlayHLSNatively","canUsePictureInPicture","pictureInPictureEnabled","disablePictureInPicture","canUseVideoPresentation","webkitSupportsPresentationMode","webkitSetPresentationMode","canChangeVolume","volume","getMediaSource","ManagedMediaSource","MediaSource","WebKitMediaSource","getSourceBuffer","SourceBuffer","WebKitSourceBuffer","isHLSSupported","isTypeSupported","isSourceBufferValid","prototype","appendBuffer","remove","isDASHSupported","TimeRange","ranges","constructor","start","end","index","throwIfEmpty","throwIfOutOfRange","Infinity","getTimeRangesStart","range","min","i","value","getTimeRangesEnd","max","Error","fnName","normalizeTimeIntervals","intervals","sort","a","b","normalized","current","next","Math","push","updateTimeIntervals","interval","AUDIO_EXTENSIONS","AUDIO_TYPES","Set","VIDEO_EXTENSIONS","VIDEO_TYPES","HLS_VIDEO_EXTENSIONS","DASH_VIDEO_EXTENSIONS","HLS_VIDEO_TYPES","DASH_VIDEO_TYPES","isAudioSrc","has","startsWith","isVideoSrc","isHLSSrc","isDASHSrc","canGoogleCastSrc","isMediaStream","MediaStream","appendParamsToURL","baseUrl","params","url","URL","key","Object","keys","searchParams","set","toString","preconnect","rel","exists","querySelector","link","href","crossOrigin","head","append","pendingRequests","loadScript","promise","resolve","script","onload","onerror","reject","setTimeout","getRequestCredentials","getDownloadFile","title","download","isValidFileDownload","name","filename","CROSS_ORIGIN","Symbol","READY_STATE","UPDATE_ACTIVE_CUES","CAN_LOAD","ON_MODE_CHANGE","NATIVE","NATIVE_HLS","TextTrackSymbol","readyState","updateActiveCues","canLoad","onModeChange","native","nativeHLS","findActiveCue","cues","time","len","isCueActive","cue","startTime","endTime","watchActiveTextTrack","tracks","kind","onChange","currentTrack","scope","kinds","track","toArray","find","track2","includes","mode","off","once","watchCueTextChange","callback","onCueChange","activeCue","activeCues","text","TextTrack","createId","label","content","encoding","id","language","default","currentTime","metadata","regions","setMode","init","parseContent","isTrackCaptionKind","console","warn","addCue","trigger","splice","TextTrackCue","dispatchEvent","detail","removeCue","indexOf","isActive","activeCuesChanged","load","changed","#parseContent","then","parseText","VTTCue","VTTRegion","parseJSON","ready","#load","parseResponse","response","fetch","headers","credentials","errors","code","error","#ready","managed","loadEvent","#error","#parseJSON","json","parseJSONCaptionsFile","#activeCuesChanged","captionRE","Cue","Region","JSON","parse","map","region","assign","filter","content2","mediaState","artist","artwork","audioTrack","audioTracks","autoPlay","autoPlayError","audioGain","buffered","canLoadPoster","canFullscreen","canPictureInPicture","canPlay","clipStartTime","clipEndTime","controls","iOSControls","mediaType","playsInline","fullscreenEnabled","fullscreen","nativeControls","controlsVisible","controlsHidden","ended","loop","providedLoop","userPrefersLoop","logLevel","muted","paused","played","playing","pictureInPicture","preload","playbackRate","qualities","quality","autoQuality","canSetQuality","canSetPlaybackRate","canSetVolume","canSetAudioGain","seekable","seeking","source","sources","started","textTracks","textTrack","hasCaptions","waiting","realCurrentTime","duration","providedDuration","intrinsicDuration","seekableWindow","providedTitle","inferredTitle","poster","providedPoster","inferredPoster","viewType","providedViewType","inferredViewType","streamType","providedStreamType","inferredStreamType","currentSrc","bufferedStart","bufferedEnd","seekableEnd","bufferedWindow","seekableStart","isLiveDVR","liveDVRWindow","liveSyncPosition","isNaN","canAirPlay","canGoogleCast","remotePlaybackState","remotePlaybackType","remotePlaybackLoader","remotePlaybackInfo","isAirPlayConnected","isGoogleCastConnected","pointer","mediaWidth","mediaHeight","lastKeyboardAction","userBehindLiveEdge","liveEdgeTolerance","minLiveDVRWindow","canSeek","Number","isFinite","live","liveEdgeStart","liveEdge","liveEdgeWindow","inferredLiveDVRWindow","autoPlaying","savedState","RESET_ON_SRC_QUALITY_CHANGE","RESET_ON_SRC_CHANGE","softResetMediaState","$media","isSourceQualityChange","reset","boundTime","store","clippedTime","isStart","floor","isEnd","mediaContext","useMediaContext","GROUPED_LOG","GroupedLog","logger","level","root","parent","logs","log","data","labelledLog","groupStart","groupEnd","dispatch","isGroupedLog","Logger","target","info","debug","errorGroup","warnGroup","infoGroup","debugGroup","setTarget","newTarget","bubbles","composed","MediaRemoteControl","player","prevTrackIndex","getPlayer","setPlayer","startLoading","dispatchRequest","startLoadingPoster","requestAirPlay","requestGoogleCast","play","pause","mute","unmute","enterFullscreen","exitFullscreen","lockScreenOrientation","lockType","unlockScreenOrientation","enterPictureInPicture","exitPictureInPicture","seek","seekToLiveEdge","changeDuration","changeClipStart","changeClipEnd","changeVolume","changeAudioTrack","changeQuality","requestAutoQuality","changeTextTrackMode","changePlaybackRate","rate","changeAudioGain","gain","resumeControls","pauseControls","togglePaused","noPlayerWarning","state","toggleControls","showing","show","hide","toggleMuted","toggleFullscreen","togglePictureInPicture","showCaptions","findIndex","disableCaptions","toggleCaptions","userPrefersLoopChange","prefersLoop","#dispatchRequest","request","cancelable","el","shouldUsePlayer","body","Node","contains","canPlayQueue","enqueue","#noPlayerWarning","LocalMediaStorage","playerId","mediaId","lang","captions","getVolume","setVolume","save","getMuted","setMuted","getTime","setTime","shouldClear","saveTime","saveTimeThrottled","getLang","setLang","getCaptions","setCaptions","enabled","getPlaybackRate","setPlaybackRate","getAudioGain","setAudioGain","getVideoQuality","setVideoQuality","savedData","localStorage","getItem","savedTime","stringify","setItem","bind","ADD","REMOVE","RESET","SELECT","READONLY","SET_READONLY","ON_RESET","ON_REMOVE","ON_USER_SELECT","ListSymbol","add","select","readonly","setReadonly","onReset","onRemove","onUserSelect","List","items","item","getById","iterator","values","defineProperty","get","SELECTED","SelectList","selected","selectedIndex","prev","AudioTrackList","round","num","decimalPlaces","toFixed","getNumberOfDecimalPlaces","String","split","clampNumber","isEventInside","event","composedPath","rafJobs","processJobs","job","e","requestAnimationFrame","scheduleRafJob","delete","setAttributeIfEmpty","hasAttribute","setARIALabel","$label","updateAriaDescription","isElementVisible","style","getComputedStyle","display","parseInt","opacity","checkVisibility","checkOpacity","checkVisibilityCSS","observeVisibility","isElementParent","owner","node","parentElement","onPress","handler","button","defaultPrevented","isTouchPinchEvent","touches","changedTouches","requestScopedAnimationFrame","cancelAnimationFrame","autoPlacement","placement","offsetVarName","xOffset","yOffset","options","floatingPlacement","replace","isTop","negateX","x","negateY","y","middleware","fallbackAxisSideDirection","crossAxis","middlewareData","hasFlipped","top","left","hasAnimation","styles","animationName","isHTMLElement","HTMLElement","NativeTextRenderer","priority","canRender","_","attach","onchange","addTrack","attachTrack","removeTrack","changeTrack","setDisplay","detach","clear","#attachTrack","createTrackElement","#createTrackElement","isDefault","isSupported","srclang","copyCues","#copyCues","#onChange","isShowing","TextRenderers","renderers","media","nativeDisplay","nativeRenderer","customRenderer","watchControls","onAddTrack","onRemoveTrack","update","#watchControls","$state","renderer","attachVideo","addNativeTrack","#addNativeTrack","removeNativeTrack","#removeNativeTrack","#onAddTrack","#onRemoveTrack","#update","#detach","TextTrackList","defaults","storage","preferredLang","t","saveLang","isTrack","addEventListener","onTrackModeChangeBind","selectTracks","pendingRemoval","removeEventListener","getByKind","Array","preferredTrack","defaultTrack","kind2","isCaptionsKind","saveCaptionsTrack","onTrackModeChange","#onTrackModeChange","#saveCaptionsTrack","#saveLang","setStorage","SET_AUTO","ENABLE_AUTO","QualitySymbol","setAuto","enableAuto","VideoQualityList","auto","switch","autoSelect","getBySrc","sortVideoQualities","desc","compareVideoQualityDesc","compareVideoQualityAsc","bitrate","isAudioProvider","provider","$$PROVIDER_TYPE","isVideoProvider","isHLSProvider","isDASHProvider","isYouTubeProvider","isVimeoProvider","isGoogleCastProvider","isHTMLAudioElement","element","HTMLAudioElement","isHTMLVideoElement","HTMLVideoElement","isHTMLMediaElement","isHTMLIFrameElement","HTMLIFrameElement","MediaPlayerController","MEDIA_KEY_SHORTCUTS","seekBackward","seekForward","volumeUp","volumeDown","speedUp","slowDown","MODIFIER_KEYS","BUTTON_SELECTORS","IGNORE_SELECTORS","MediaKeyboardController","onConnect","onTargetChange","#onTargetChange","keyDisabled","keyTarget","$props","$active","activePlayer","Element","localName","onKeyUp","onKeyDown","onPreventVideoKeys","capture","#onKeyUp","focusedEl","activeElement","matches","getMatchingMethod","remote","preventDefault","stopPropagation","timeSlider","forwardTimeKeyboardEvent","seekTotal","volumeSlider","KeyboardEvent","shiftKey","#onKeyDown","isNumberPress","metaKey","value2","action","#onPreventVideoKeys","#getMatchingMethod","keyShortcuts","ariaKeys","method2","join","combinations","replaceSymbolKeys","some","combo","modifierKeys","modKey","modKeyProp","every","calcSeekAmount","#calcSeekAmount","seekBy","#forwardTimeKeyboardEvent","forward","#seeking","SYMBOL_KEY_MAP","ARIAKeyShortcuts","shortcut","onAttach","getAttribute","shortcuts","keys2","MediaControls","idleTimer","pausedTracking","hideOnMouseLeave","isMouseOutside","focusedItem","canIdle","defaultDelay","hideControlsOnMouseLeave","delay","clearIdleTimer","changeVisibility","resume","#init","watchMouse","watchPaused","onPlay","onPause","onEnd","#watchMouse","events","shouldHideOnMouseLeave","onStopIdle","onMouseEnter","onMouseLeave","#watchPaused","isTouch","eventTypes","eventType","passive","#onPlay","triggers","hasType","#onPause","#onEnd","#onMouseEnter","#onMouseLeave","#clearIdleTimer","clearTimeout","#onStopIdle","MEDIA_GESTURE","focus","#changeVisibility","visible","preventScroll","CAN_FULLSCREEN","FullscreenController","listening","active","supported","onError","onDisconnect","#onDisconnect","exit","isFullscreen","#onError","enter","assertFullscreenAPI","requestFullscreen","host","fullscreenElement","fullscreenPseudoClass","ScreenOrientationController","getScreenOrientation","locked","currentLock","portrait","landscape","onOrientationChange","query","matchMedia","#onOrientationChange","assertScreenOrientationAPI","#assertScreenOrientationAPI","#getScreenOrientation","innerWidth","innerHeight","AudioProviderLoader","ctx","AudioProvider","VideoProviderLoader","Promise","provider$1","VideoProvider","HLSProviderLoader","context","HLSProvider","audioContext","gainNodes","elAudioSources","getOrCreateAudioCtx","AudioContext","createGainNode","audioCtx","gainNode","createGain","connect","destination","createElementSource","createMediaElementSource","destroyGainNode","idx","disconnect","freeAudioCtxWhenAllResourcesFreed","destroyElementSource","close","AudioGain","srcAudioNode","currentGain","setGain","currGain","removeGain","destroy","destroySrcNode","#destroySrcNode","#destroyGainNode","PAGE_EVENTS","PageVisibility","determinePageState","visibility","visibilityState","safariBeforeUnloadTimeout","handlePageEvent","returnValue","pageState","#handlePageEvent","hasFocus","RAFLoop","stop","#loop","HTMLMediaEvents","attachedLoadStart","attachedCanPlay","timeRAF","onAnimationFrame","pageVisibility","#media","attachInitialListeners","attachTimeUpdate","#onDispose","abort","devHandlers","lastSeenTime","seekedTo","#onAnimationFrame","newTime","didStutter","updateCurrentTime","#attachInitialListeners","attachEventListener","onLoadStart","onAbort","onEmptied","onVolumeChange","attachLoadStartListeners","#attachLoadStartListeners","onLoadedData","onLoadedMetadata","onCanPlay","onCanPlayThrough","onDurationChange","onProgress","onStalled","onSuspend","onRateChange","attachCanPlayListeners","#attachCanPlayListeners","onPlaying","onSeeked","onSeeking","onEnded","onWaiting","Map","handleDevEvent","onDevEvent","#attachEventListener","#onDevEvent","event2","call","#updateCurrentTime","notify","#onLoadStart","networkState","#onAbort","#onEmptied","#onLoadedData","#onLoadedMetadata","delegate","getCanPlayDetail","#getCanPlayDetail","$provider","#onCanPlay","#onCanPlayThrough","#onPlaying","#onStalled","#onWaiting","#onEnded","hasCustomControls","#attachTimeUpdate","isPaused","isPageHidden","shouldListenToTimeUpdates","onTimeUpdate","#onTimeUpdate","#onDurationChange","#onVolumeChange","#onSeeked","trunc","#onSeeking","#onProgress","#onSuspend","#onRateChange","message","mediaError","NativeAudioTracks","nativeTracks","#nativeTracks","onaddtrack","onAddNativeTrack","onremovetrack","onRemoveNativeTrack","onChangeNativeTrack","onChangeTrack","#onAddNativeTrack","nativeTrack","#onRemoveNativeTrack","#onChangeNativeTrack","enabledTrack","getEnabledNativeTrack","#getEnabledNativeTrack","from","#onChangeTrack","getTrackById","HTMLMediaProvider","setup","srcObject","removeAttribute","querySelectorAll","setCurrentTime","setPlaysInline","inline","loadSource","removeSource","appendSource","appendMediaFragment","createObjectURL","defaultType","prevSource","#appendMediaFragment","HTMLRemotePlaybackAdapter","#setup","canPrompt","watchAvailability","available","catch","watchSupported","#watchSupported","onStateChange","remoteEvents","prompt","webkitShowPlaybackTargetPicker","#onStateChange","HTMLAirPlayAdapter","NativeHLSTextTracks","findTextTrackElement","lastIndex","oncuechange","children","VideoPictureInPicture","onEnter","onExit","pictureInPictureElement","requestPictureInPicture","#onEnter","#onExit","VideoPresentation","setPresentationMode","#onModeChange","prevMode","webkitPresentationMode","forEach","FullscreenPresentationAdapter","presentation","PIPPresentationAdapter","airPlay","textRenderers","freeze","__proto__","getLangName","langCode","displayNames","Intl","DisplayNames","languages","languageName","of","err","toDOMEventType","DASHController","instance","callbacks","stopLiveSync","config","ctor","create","dispatcher","dispatchDASHEvent","on","ERROR","initialize","updateSettings","streaming","defaultEnabled","dispatchForManualRendering","buffer","fastSwitchEnabled","FRAGMENT_LOADING_STARTED","onFragmentLoadStart","FRAGMENT_LOADING_COMPLETED","onFragmentLoadComplete","MANIFEST_LOADED","onManifestLoaded","QUALITY_CHANGE_RENDERED","onQualityChange","TEXT_TRACKS_ADDED","onTextTracksAdded","TRACK_CHANGE_RENDERED","onTrackChange","enableAutoQuality","onUserQualityChange","onUserAudioChange","liveSync","createDOMEvent","#createDOMEvent","#liveSync","raf","#liveSyncPosition","position","#dispatchDASHEvent","cueTracker","onTextFragmentLoaded","#onTextFragmentLoaded","startIndex","positionAlign","#onTextTracksAdded","nativeTextTracks","textTrackInfo","nativeTextTrack","labels","setTextTrack","#onTrackChange","newMediaInfo","#onQualityChange","newQuality","#onManifestLoaded","mediaPresentationDuration","getVideoElement","videoQualities","getTracksForTypeFromManifest","supportedVideoMimeType","mimeType","type2","videoQuality","supportedAudioMimeType","bitrateList","bandwidth","codec","matchingLabel","label2","localTrack","onNetworkError","onFatalError","#onFragmentLoadStart","retryLoadingTimer","clearRetryTimer","#onFragmentLoadComplete","#onNetworkError","#clearRetryTimer","#onFatalError","#enableAutoQuality","switchAutoBitrate","setQualityFor","#switchAutoBitrate","abr","autoSwitchBitrate","#onUserQualityChange","#onUserAudioChange","selectedTrack","getTracksFor","setCurrentTrack","#reset","onInstance","attachSource","coerceToError","assert","condition","DASHLibLoader","lib","#startLoading","onLoaded","onLoadError","loadDASHScript","importDASH","dashjs","supportsMediaSource","#onLoaded","#onLoadError","loader","isDASHConstructor","isDASHNamespace","MediaPlayer","Function","JS_DELIVR_CDN","DASHProvider","controller","canLiveSync","library","DASHProviderLoader","VimeoProviderLoader","connections","VimeoProvider","loadPoster","resolveVimeoVideoId","getVimeoVideoInfo","videoId","hash","YouTubeProviderLoader","YouTubeProvider","findYouTubePoster","resolveYouTubeVideoId","padNumberWithZeroes","expectedLength","str","actualLength","shouldPad","padLength","padding","repeat","parseTime","hours","minutes","seconds","fraction","toPrecision","formatTime","padHrs","padMins","showHrs","showMs","paddedHours","paddedMinutes","paddedSeconds","paddedMs","formatSpokenTime","spokenParts","MEDIA_ATTRIBUTES","mediaAttributes","mediaPlayerProps","autoplay","crossorigin","fullscreenOrientation","googleCast","posterLoad","playsinline","preferNativeHLS","controlsDelay","MEDIA_EVENTS","MediaEventsLogger","onMediaEvent","#onMediaEvent","MediaLoadController","dispose","observer","IntersectionObserver","entries","isIntersecting","observe","seenAutoplayWarning","MediaPlayerDelegate","handle","onLoad","savedPlaybackTime","savedPausedState","storageTime","shouldAutoPlay","prefQuality","currentQuality","currentScore","score","abs","attemptAutoplay","#attemptAutoplay","attemptEvent","muteMsg","Queue","queue","serve","RequestQueue","serving","pending","size","isServing","waitForFlush","flush","release","#flush","#release","MediaRequestManager","stateMgr","providerQueue","listen","onFullscreenChange","names","getOwnPropertyNames","getPrototypeOf","handleRequest","attachLoadPlayListener","watchProvider","watchControlsDelayChange","watchAudioGainSupport","watchAirPlaySupport","watchGoogleCastSupport","watchFullscreenSupport","watchPiPSupport","onDestroy","destroyEvent","createEvent","#attachLoadPlayListener","handleLoadPlayStrategy","#watchProvider","#handleRequest","isAutoPlaying","throwIfNotReadyForPlayback","logError","errorEvent","#handleLoadPlayStrategy","wasPIPActive","adapter","getFullscreenAdapter","throwIfFullscreenNotSupported","result","#getFullscreenAdapter","throwIfPIPNotSupported","#throwIfPIPNotSupported","#watchControlsDelayChange","#watchAudioGainSupport","#watchAirPlaySupport","#watchGoogleCastSupport","#watchFullscreenSupport","#watchPiPSupport","media-airplay-request","media-google-cast-request","googleCastLoader","$module","n","GoogleCastLoader","isConnecting","media-clip-start-change-request","media-clip-end-change-request","media-duration-change-request","media-audio-track-change-request","media-enter-fullscreen-request","onFullscreenError","media-exit-fullscreen-request","#onFullscreenChange","#onFullscreenError","media-orientation-lock-request","media-orientation-unlock-request","media-enter-pip-request","onPictureInPictureError","media-exit-pip-request","#onPictureInPictureError","media-live-edge-request","media-loop-request","looping","replaying","media-user-loop-change-request","media-pause-request","media-play-request","media-rate-change-request","media-audio-gain-change-request","media-quality-change-request","isOriginTrusted","media-pause-controls-request","media-resume-controls-request","media-seek-request","seekTime","boundedTime","media-seeking-request","media-start-loading","media-poster-start-loading","media-text-track-change-request","media-mute-request","media-unmute-request","media-volume-change-request","newVolume","#logError","MediaRequestContext","TRACKED_EVENT","MediaStateManager","trackedEvents","clipEnded","playedIntervals","playedInterval","firingWaiting","waitingTrigger","watchCanSetVolume","addTextTrackListeners","addQualityListeners","addAudioTrackListeners","resumePlaybackOnConnect","pausePlaybackOnDisconnect","stopWatchingQualityResize","isPlayingOnDisconnect","#resumePlaybackOnConnect","#pausePlaybackOnDisconnect","resetTracking","#resetTracking","stopWaiting","satisfyRequest","#satisfyRequest","requestEvent","#addTextTrackListeners","onTextTracksChange","onTextTrackModeChange","#addQualityListeners","onQualitiesChange","onAutoQualityChange","onCanSetQualityChange","#addAudioTrackListeners","onAudioTracksChange","onAudioTrackChange","#onTextTracksChange","#onTextTrackModeChange","#onAudioTracksChange","#onAudioTrackChange","#onQualitiesChange","#onAutoQualityChange","isAuto","stopQualityResizeEffect","watchQualityResize","#watchQualityResize","w","h","selectedQuality","minScore","#stopWatchingQualityResize","#onCanSetQualityChange","#watchCanSetVolume","provider-change","prevProvider","newProvider","resetMediaState","provider-loader-change","auto-play","auto-play-fail","can-load","can-load-poster","media-type-change","sourceChangeEvent","currentViewType","stream-type-change","rate-change","remote-playback-change","isConnected","sources-change","prevSources","newSources","onSourceQualitiesChange","#onSourceQualitiesChange","added","removed","prevSrc","s","source-change","isQualityChange","originEvent","#resetMediaState","canLoadEvent","load-start","abortEvent","loaded-metadata","loadStartEvent","loaded-data","can-play","loadedMetadata","onCanPlayDetail","can-play-through","#onCanPlayDetail","duration-change","onEndPrecisionChange","stopImmediatePropagation","progress","newBuffered","newSeekable","newBufferedEnd","hasBufferedLengthChanged","hasBufferedEndChanged","newSeekableEnd","hasSeekableLengthChanged","hasSeekableEndChanged","resetPlaybackIfNeeded","waitingEvent","#resetPlaybackIfNeeded","shouldReset","play-fail","playEvent","seekedEvent","time-change","updatePlayed","#updatePlayed","#onEndPrecisionChange","isClipped","#saveTime","audio-gain-change","volume-change","fireWaiting","leading","seeked","seekingEvent","origin","isTrusted","MessageEvent","#stopWaiting","cancel","fullscreen-change","fullscreen-error","orientation-change","isLocked","picture-in-picture-change","isPiP","picture-in-picture-error","title-change","poster-change","MediaStateSync","onSetup","watchLogLevel","effects","watchMetadata","watchAutoplay","watchClipStartTime","watchClipEndTime","watchCrossOrigin","watchDuration","watchLive","watchLiveEdge","watchLiveTolerance","watchLoop","watchPlaysInline","watchPoster","watchProvidedTypes","watchTitle","providedProps","skip","#watchProvidedTypes","#watchLogLevel","#watchMetadata","#watchTitle","#watchAutoplay","#watchLoop","#watchPoster","#watchCrossOrigin","#watchDuration","#watchPlaysInline","#watchClipStartTime","#watchClipEndTime","#watchLive","#watchLiveTolerance","#watchLiveEdge","actions","NavigatorMediaSession","onMetadataChange","onPlaybackStateChange","handleAction","mediaSession","setActionHandler","#onMetadataChange","MediaMetadata","#onPlaybackStateChange","playbackState","#handleAction","details","seekOffset","LOCAL_STORAGE_KEY","savedColors","getLogColor","saveLogColor","color","generateColor","overwrite","random","colors","LogLevelValue","silent","LogLevelColor","m","d","ms","val","msAbs","LogPrinter","lastLogged","path","eventTargetName","$$COMPONENT_NAME","tagName","hint","groupCollapsed","toUpperCase","slice","unshift","printGroup","print","printTimeDiff","printStackTrace","#printTimeDiff","labelledPrint","calcLastLogTimeDiff","#calcLastLogTimeDiff","performance","now","diff","trace","groupedLog","$keyboard","altKey","ctrlKey","FocusVisibleController","focused","updateFocusAttr","onPointerEnter","onPointerLeave","onFocus","onBlur","#onFocus","#onBlur","#onPointerEnter","updateHoverAttr","#onPointerLeave","isFocused","isHovering","props","requestMgr","remoteControl","#provider","#props","$providerSetup","logPrinter","setupMediaAttributes","watchCanPlay","watchMuted","watchVolume","watchCurrentTime","watchPlaybackRate","watchStorage","watchOrientation","onFindPlayer","pointerQuery","onPointerChange","resize","ResizeObserver","onResize","skipTitleUpdate","$el","isLive","typeText","currentTitle","#watchOrientation","#watchCanPlay","#setupMediaAttributes","setAttributes","$attrs","data-load","data-captions","data-ios-controls","data-controls","data-buffering","data-error","data-autoplay-error","alias","prop2","attrName","#onFindPlayer","#onResize","clientWidth","clientHeight","#onPointerChange","queryList","newTitle","queuePausedUpdate","#queuePausedUpdate","queueMutedUpdate","#watchMuted","#queueMutedUpdate","queueCurrentTimeUpdate","#watchCurrentTime","#queueCurrentTimeUpdate","queueVolumeUpdate","#watchVolume","#queueVolumeUpdate","clampedVolume","queuePlaybackRateUpdate","#watchPlaybackRate","#queuePlaybackRateUpdate","queuePlaysInlineUpdate","#queuePlaysInlineUpdate","#watchStorage","storageValue","computeMediaId","#computeMediaId","mediaplayer__proto","resolveStreamTypeFromDASHManifest","manifestSrc","requestInit","res","manifest","resolveStreamTypeFromHLSManifest","renditionURI","resolveHLSRenditionURI","resolveTargetDuration","match","trim","lines","line","parseFloat","warned$1","sourceTypes","SourceSelection","loaders","domSources","customLoaders","DASH_LOADER","HLS_LOADER","VIDEO_LOADER","AUDIO_LOADER","YOUTUBE_LOADER","VIMEO_LOADER","EMBED_LOADERS","remoteLoader","normalizeSrc","loader2","loader3","notifySourceChange","notifyLoaderChange","onSourcesChange","onSourceChange","onLoadSource","onLoadPoster","#onSourcesChange","#onSourceChange","currentSource","newSource","findNewSource","noMatch","AbortController","all","sources2","aborted","newSource2","#findNewSource","newLoader","triggerEvent","sourceQuality","isSameSrc","#notifySourceChange","#notifyLoaderChange","#onSetup","#onLoadSource","#onLoadPoster","src2","inferType","Tracks","domTracks","prevTracks","onTracksChange","#onTracksChange","newTracks","oldTrack","newTrack","MediaProvider","mutations","MutationObserver","onMutation","attributes","childList","loadRafId","runLoader","#runLoader","destroyProvider","#destroyProvider","offsetWidth","offsetHeight","#onMutation","HTMLSourceElement","HTMLTrackElement","mediaprovider__proto","MediaAnnouncer","translations","busy","initializing","aria-busy","watchCaptions","watchFullscreen","watchPiP","watchSeeking","watchLabel","setLabel","#watchFullscreen","#watchPiP","#watchCaptions","translate","startedSeekingAt","seekTimer","#watchSeeking","isSeeking","isForward","spokenTime","#translate","word","#watchLabel","#setLabel","Controls","hideDelay","watchProps","hideControls","side","#hideControls","isHidden","#watchProps","#isShowing","ControlsGroup","pointerEvents","Popper","watchTrigger","stopAnimationEndListener","#watchTrigger","showTimerId","hideRafId","cancelShowing","removeProperty","showDelay","onHide","isAnimated","#cancelShowing","tooltipContext","Tooltip","onShowingChange","setProperty","attachTrigger","detachTrigger","attachContent","detachContent","#attachTrigger","tooltipName","#detachTrigger","#attachContent","#detachContent","#onShowingChange","TooltipTrigger","connectScope","tooltip","getButton","#attach","#getButton","candidate","firstElementChild","TooltipContent","offset","alignOffset","watchPlacement","#watchPlacement","mainOffset","getTrigger","#getTrigger","ToggleButtonController","disabled","keyShortcut","isPresssed","isARIAPressed","aria-disabled","onMaybePress","onInteraction","#isARIAPressed","onPressed","#onPressed","p","#onMaybePress","#onInteraction","ToggleButton","defaultPressed","pressed","togglebutton__proto","$ariaBool","AirPlayButton","isPressed","getState","getDefaultLabel","#onPress","#isPressed","#getState","#getDefaultLabel","GoogleCastButton","PlayButton","CaptionButton","data-supported","#isHidden","FullscreenButton","#isSupported","MuteButton","$volume","PIPButton","SeekButton","seekTo","LiveButton","sliderState","step","pointerValue","dragging","pointing","hidden","fillRate","calcRate","fillPercent","pointerRate","pointerPercent","IntersectionObserverController","sliderContext","sliderObserverContext","getClampedValue","getValueFromRate","boundRate","fill","stepRatio","steps","SliderKeyDirection","Left","ArrowLeft","Up","ArrowUp","Right","ArrowRight","Down","ArrowDown","SliderEventsController","attachEventListeners","attachPointerListeners","swipeGesture","watchSwipeGesture","#watchSwipeGesture","onTouchStart","onTouchMove","touch","touchStartValue","#onTouchStart","#onTouchMove","xDiff","clientX","yDiff","clientY","isDragging","onStartDragging","#attachEventListeners","isDisabled","onPointerMove","onPointerDown","#attachPointerListeners","onDocumentPointerUp","onDocumentPointerMove","onDocumentTouchMove","updatePointerValue","updateValue","#updateValue","newValue","clampedValue","onValueChange","onDragValueChange","#updatePointerValue","getPointerValue","#getPointerValue","thumbPositionRate","rect","getBoundingClientRect","bottom","trackBottom","trackHeight","trackLeft","trackWidth","roundValue","getStep","#onPointerMove","#onPointerDown","#onStartDragging","onDragStart","onStopDragging","#onStopDragging","onDragEnd","lastDownKey","repeatedKeys","isValidKey","jumpValue","calcJumpValue","calcNewKeyValue","#calcJumpValue","#calcNewKeyValue","shiftKeyMultiplier","keyStep","getKeyStep","modifiedStep","direction","currentValue","getValue","#onDocumentPointerUp","#onDocumentTouchMove","sliderValueFormatContext","SliderController","isVisible","preview","watchValue","watchStep","watchDisabled","setupAttrs","onIntersectionChange","watchCSSVars","watchHidden","#onIntersectionChange","#watchHidden","#watchValue","#watchStep","#watchDisabled","getARIADisabled","#getARIADisabled","#setupAttrs","aria","valueMin","valueMax","valueNow","valueText","#watchCSSVars","updateSliderVars","Slider","getARIAValueNow","getARIAValueText","watchMinMax","#getARIAValueNow","#getARIAValueText","#watchMinMax","cache","warned","ThumbnailsLoader","$images","onLoadCues","#onLoadCues","firstKey","currentKey","isJSON","processVTTCues","image","processStoryboard","images","finally","processImages","#processImages","baseURL","resolveBaseUrl","img","resolveURL","#processStoryboard","board","tiles","tileWidth","tile_width","tileHeight","tile_height","tile","coords","#processVTTCues","resolveData","#resolveBaseUrl","location","#resolveURL","#resolveData","hashProps","hashValues","Thumbnail","thumbnails","activeThumbnail","loading","styleResets","isLoading","hasError","watchImg","onFindActiveThumbnail","#watchImg","crossOriginProp","crossOriginState","mediaCrossOrigin","resetStyles","#isLoading","#hasError","#onFindActiveThumbnail","activeIndex","activeImage","#resize","rootEl","imgEl","thumbnail","naturalWidth","naturalHeight","maxWidth","maxHeight","minWidth","minHeight","elWidth","elHeight","minRatio","maxRatio","scale","#style","#resetStyles","SliderThumbnail","slider","SliderVideo","watchVideo","watchSrc","onSrcChange","onUpdateTime","#watchVideo","#watchSrc","#onSrcChange","#onUpdateTime","canUpdate","slidervideo__proto","SliderValue","format","showHours","padHours","padMinutes","getValueText","$format","sliderValue","percent","slidervalue__proto","SliderPreview","noClamp","updatePlacement","updateSliderPreviewPlacement","clamp","computedStyle","right","widthHalf","leftClamp","rightClamp","heightHalf","topClamp","bottomClamp","VolumeSlider","getARIAValueMax","#getARIAValueMax","#isDisabled","throttleVolumeChange","mediaVolume","#onValueChange","#onDragValueChange","AudioGainSlider","watchAudioGain","#watchAudioGain","onAudioGainChange","#onAudioGainChange","SpeedSlider","#roundValue","throttledSpeedChange","onPlaybackRateChange","#onPlaybackRateChange","QualitySlider","sortedQualities","watchMax","watchQuality","$supported","bitrateText","#watchMax","$qualities","#watchQuality","throttledQualityChange","TimeSlider","pauseWhileDragging","noSwipeGesture","seekingRequestThrottle","dispatchSeeking","chapter","formatValue","hasChapters","setStyles","calcBufferedPercent","watchSeekingThrottle","watchPreviewing","#calcBufferedPercent","#hasChapters","#watchSeekingThrottle","#watchPreviewing","#seek","playingBeforeDragStart","#onDragStart","percentToTime","#onDragEnd","#getValue","timeToPercent","#getStep","#getKeyStep","#percentToTime","#timeToPercent","#formatValue","#formatTime","SliderChapters","updateScope","titleRef","refs","$track","$cues","activePointerIndex","bufferedIndex","activePointerCue","setTrack","watchSource","setRefs","watch","#setTrack","#watch","watchUpdates","#watchUpdates","watchContainerWidths","watchFillPercent","watchPointerPercent","watchBufferedPercent","#watchContainerWidths","remainingWidth","#watchFillPercent","isLiveEdge","prevActiveIndex","currentChapter","currentActiveIndex","findActiveChapterIndex","updateFillPercents","calcPercent","getEndTime","updateFillPercent","#watchPointerPercent","#updateFillPercents","#updateFillPercent","ref","#findActiveChapterIndex","chapterPercent","#watchBufferedPercent","updateBufferedPercent","bufferedPercent","calcMediaBufferedPercent","#calcMediaBufferedPercent","#getEndTime","#calcPercent","cueStartTime","cueEndTime","startRatio","startPercent","endPercent","fillGaps","#fillGaps","chapters","firstCue","currentCue","nextCue","timeDiff","lastCue","endTime2","#watchSource","onCuesChange","watchMediaDuration","findChapterTitleRef","onChapterTitleChange","textContent","#watchMediaDuration","#onChapterTitleChange","findParentSlider","#findParentSlider","#findChapterTitleRef","sliderchapters__proto","menuContext","scrollIntoView","scrolls","el2","scroll","behavior","scrollIntoCenter","scrollMode","block","FOCUSABLE_ELEMENTS_SELECTOR","selector","VALID_KEYS","MenuFocusController","elements","attachMenu","getFocusableElements","findActiveIndex","boundary","focusActive","focusAt","#focusAt","#findActiveIndex","validateKeyEvent","#validateKeyEvent","role","closeMenu","nextIndex","#nextIndex","delta","offsetParent","#getFocusableElements","focusableElements","is","__defProp","__getOwnPropDesc","getOwnPropertyDescriptor","__decorateClass","decorators","decorator","idCount","Menu","menuId","menuButtonId","expanded","parentMenu","submenus","menuObserver","popper","isSliderActive","isTriggerDisabled","transitionCallbacks","triggerElement","contentElement","isSubmenu","closeTarget","getCloseTarget","onExpandedChange","currentIdCount","observeSliders","submenu","disable","attachMenuButton","attachMenuItems","attachObserver","disableMenuButton","addSubmenu","onTransitionEvent","watchExpanded","#observeSliders","sliderActiveTimer","parentSliderObserver","#watchExpanded","isExpanded","updateMenuItemsHidden","onPointerUp","onWindowPointerUp","#attachMenuButton","isMenuItem","isARIADisabled","watchAttrs","#attachMenuItems","onTransition","onResizeTransition","#attachObserver","#updateMenuItemsHidden","#disableMenuButton","wasKeyboardExpand","#onExpandedChange","Event","toggleMediaControls","activeMenu","onOpen","onClose","updateFocus","#updateFocus","isTransitionActive","isSubmenuOpen","#isExpanded","#disable","#onPointerUp","#onWindowPointerUp","#getCloseTarget","#toggleMediaControls","#addSubmenu","menu","onSubmenuOpenBind","onSubmenuCloseBind","removeSubmenuBind","removeSubmenu","#removeSubmenu","onSubmenuOpen","#onSubmenuOpen","child","onSubmenuClose","#onSubmenuClose","nodeType","fontSize","marginTop","marginBottom","#onResizeTransition","propertyName","open","MenuButton","hintEl","watchHintEl","attributeFilter","subtree","#watchHintEl","menubutton__proto","MenuItem","MenuPortal","container","menuPortalContext","attachElement","#attachElement","portal","#portal","shouldPortal","getContainer","isPortalled","#getContainer","MenuItems","#hide","radioControllerContext","RadioGroupController","group","radio","addRadio","removeRadio","#addRadio","onCheck","onChangeBind","check","#removeRadio","currentRadio","findRadio","newRadio","#findRadio","RadioGroup","radiogroup__proto","Radio","checked","addToGroup","#addToGroup","onSelect","#check","#onSelect","radio__proto","Gesture","attachListener","#attachListener","acceptEvent","presses","pressTimerId","#acceptEvent","inBounds","isDblEvent","handleEvent","queueMicrotask","#handleEvent","isTopLayer","performAction","#inBounds","#isTopLayer","gestures","zIndex","#performAction","willTriggerEvent","CaptionsTextRenderer","#changeTrack","Captions","textDir","exampleText","watchViewType","#watchViewType","setupAudioView","setupVideoView","#setupAudioView","listenToFontStyleChanges","onUpdateTimedNodes","#onCueChange","hideExampleTimer","removeExample","renderVTTCueString","displayEl","createCueDisplayElement","cueEl","createCueElement","innerHTML","#onUpdateTimedNodes","updateTimedVTTCueNodes","#setupVideoView","CaptionsRenderer","textRenderer","watchTextDirection","watchMediaTime","#watchTextDirection","dir","#watchMediaTime","#listenToFontStyleChanges","onFontStyleChange","#onFontStyleChange","hideExample","showExample","#showExample","#hideExample","#removeExample","#createCueDisplayElement","#createCueElement","Poster","alt","watchAlt","data-visible","onPreconnect","#onPreconnect","complete","defaultPoster","#watchAlt","#onLoad","Time","remainder","toggle","timeText","invert","watchTime","shouldInvert","watchRole","watchToggle","#watchToggle","onToggle","#watchTime","getSeconds","$duration","formattedTime","#watchRole","#getSeconds","#shouldInvert","#onToggle","v","MediaPlayerInstance","MediaProviderInstance","MediaAnnouncerInstance","ControlsInstance","ControlsGroupInstance","ToggleButtonInstance","CaptionButtonInstance","FullscreenButtonInstance","LiveButtonInstance","MuteButtonInstance","PIPButtonInstance","PlayButtonInstance","AirPlayButtonInstance","GoogleCastButtonInstance","SeekButtonInstance","TooltipInstance","TooltipTriggerInstance","TooltipContentInstance","SliderInstance","TimeSliderInstance","VolumeSliderInstance","AudioGainSliderInstance","SpeedSliderInstance","QualitySliderInstance","SliderThumbnailInstance","SliderValueInstance","SliderVideoInstance","SliderPreviewInstance","SliderChaptersInstance","MenuInstance","MenuButtonInstance","MenuItemsInstance","MenuItemInstance","MenuPortalInstance","RadioGroupInstance","RadioInstance","CaptionsInstance","GestureInstance","PosterInstance","ThumbnailInstance","TimeInstance","Slot","forwardRef","forwardedRef","slotProps","childrenArray","Children","slottable","isSlottable","newElement","newChildren","count","only","isValidElement","SlotClone","cloneElement","displayName","mergeProps","Slottable","Fragment","childProps","overrideProps","propName","slotPropValue","childPropValue","isHandler","args","Boolean","NODES","Primitive","reduce","primitives","asChild","primitiveProps","Comp","isRemotionProvider","isRemotionSrc","sliderStateRecord","record","initialSliderStore","useSliderState","useSliderStore","mediaStateRecord","initialMediaStore","useMediaState","useMediaStore"],"sources":["/Users/wanghley/Workspace/Projects/wanghley.com/node_modules/@vidstack/react/dev/chunks/vidstack-C-WrcxmD.js"],"sourcesContent":["\"use client\"\n\nimport * as React from 'react';\nimport { isString, isNumber, isFunction, isUndefined, waitTimeout, isArray, isBoolean, isNull, deferredPromise, listenEvent, scoped, getScope, EventsTarget, DOMEvent, State, fscreen, tick, createContext, useContext, Component, functionThrottle, setAttribute, effect, isTouchEvent, isDOMNode, EventsController, isKeyboardClick, setStyle, onDispose, untrack, functionDebounce, ViewController, signal, peek, isKeyboardEvent, isNil, createScope, camelToKebabCase, waitIdlePeriod, prop, method, provideContext, animationFrameThrottle, uppercaseFirstChar, computed, noop, ariaBool as ariaBool$1, isWriteSignal, hasProvidedContext, isObject, useState, r, wasEnterKeyPressed, isPointerEvent, isMouseEvent, kebabToCamelCase, composeRefs, useStateContext, useSignal, useSignalRecord } from './vidstack-CH225ns1.js';\nimport { autoUpdate, computePosition, flip, shift } from '@floating-ui/dom';\n\nfunction isVideoQualitySrc(src) {\n  return !isString(src) && \"width\" in src && \"height\" in src && isNumber(src.width) && isNumber(src.height);\n}\n\nconst IS_SERVER = typeof document === \"undefined\";\n\nconst UA = IS_SERVER ? \"\" : navigator?.userAgent.toLowerCase() || \"\";\nconst IS_IOS = !IS_SERVER && /iphone|ipad|ipod|ios|crios|fxios/i.test(UA);\nconst IS_IPHONE = !IS_SERVER && /(iphone|ipod)/gi.test(navigator?.platform || \"\");\nconst IS_CHROME = !IS_SERVER && !!window.chrome;\nconst IS_SAFARI = !IS_SERVER && (!!window.safari || IS_IOS);\nfunction canOrientScreen() {\n  return canRotateScreen() && isFunction(screen.orientation.unlock);\n}\nfunction canRotateScreen() {\n  return !IS_SERVER && !isUndefined(window.screen.orientation) && !isUndefined(window.screen.orientation.lock);\n}\nfunction canPlayAudioType(audio, type) {\n  if (IS_SERVER) return false;\n  if (!audio) audio = document.createElement(\"audio\");\n  return audio.canPlayType(type).length > 0;\n}\nfunction canPlayVideoType(video, type) {\n  if (IS_SERVER) return false;\n  if (!video) video = document.createElement(\"video\");\n  return video.canPlayType(type).length > 0;\n}\nfunction canPlayHLSNatively(video) {\n  if (IS_SERVER) return false;\n  if (!video) video = document.createElement(\"video\");\n  return video.canPlayType(\"application/vnd.apple.mpegurl\").length > 0;\n}\nfunction canUsePictureInPicture(video) {\n  if (IS_SERVER) return false;\n  return !!document.pictureInPictureEnabled && !video?.disablePictureInPicture;\n}\nfunction canUseVideoPresentation(video) {\n  if (IS_SERVER) return false;\n  return isFunction(video?.webkitSupportsPresentationMode) && isFunction(video?.webkitSetPresentationMode);\n}\nasync function canChangeVolume() {\n  const video = document.createElement(\"video\");\n  video.volume = 0.5;\n  await waitTimeout(0);\n  return video.volume === 0.5;\n}\nfunction getMediaSource() {\n  return IS_SERVER ? void 0 : window?.ManagedMediaSource ?? window?.MediaSource ?? window?.WebKitMediaSource;\n}\nfunction getSourceBuffer() {\n  return IS_SERVER ? void 0 : window?.SourceBuffer ?? window?.WebKitSourceBuffer;\n}\nfunction isHLSSupported() {\n  if (IS_SERVER) return false;\n  const MediaSource = getMediaSource();\n  if (isUndefined(MediaSource)) return false;\n  const isTypeSupported = MediaSource && isFunction(MediaSource.isTypeSupported) && MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n  const SourceBuffer = getSourceBuffer();\n  const isSourceBufferValid = isUndefined(SourceBuffer) || !isUndefined(SourceBuffer.prototype) && isFunction(SourceBuffer.prototype.appendBuffer) && isFunction(SourceBuffer.prototype.remove);\n  return !!isTypeSupported && !!isSourceBufferValid;\n}\nfunction isDASHSupported() {\n  return isHLSSupported();\n}\n\nclass TimeRange {\n  #ranges;\n  get length() {\n    return this.#ranges.length;\n  }\n  constructor(start, end) {\n    if (isArray(start)) {\n      this.#ranges = start;\n    } else if (!isUndefined(start) && !isUndefined(end)) {\n      this.#ranges = [[start, end]];\n    } else {\n      this.#ranges = [];\n    }\n  }\n  start(index) {\n    throwIfEmpty(this.#ranges.length);\n    throwIfOutOfRange(\"start\", index, this.#ranges.length - 1);\n    return this.#ranges[index][0] ?? Infinity;\n  }\n  end(index) {\n    throwIfEmpty(this.#ranges.length);\n    throwIfOutOfRange(\"end\", index, this.#ranges.length - 1);\n    return this.#ranges[index][1] ?? Infinity;\n  }\n}\nfunction getTimeRangesStart(range) {\n  if (!range.length) return null;\n  let min = range.start(0);\n  for (let i = 1; i < range.length; i++) {\n    const value = range.start(i);\n    if (value < min) min = value;\n  }\n  return min;\n}\nfunction getTimeRangesEnd(range) {\n  if (!range.length) return null;\n  let max = range.end(0);\n  for (let i = 1; i < range.length; i++) {\n    const value = range.end(i);\n    if (value > max) max = value;\n  }\n  return max;\n}\nfunction throwIfEmpty(length) {\n  if (!length) throw new Error(\"`TimeRanges` object is empty.\" );\n}\nfunction throwIfOutOfRange(fnName, index, end) {\n  if (!isNumber(index) || index < 0 || index > end) {\n    throw new Error(\n      `Failed to execute '${fnName}' on 'TimeRanges': The index provided (${index}) is non-numeric or out of bounds (0-${end}).`\n    );\n  }\n}\nfunction normalizeTimeIntervals(intervals) {\n  if (intervals.length <= 1) {\n    return intervals;\n  }\n  intervals.sort((a, b) => a[0] - b[0]);\n  let normalized = [], current = intervals[0];\n  for (let i = 1; i < intervals.length; i++) {\n    const next = intervals[i];\n    if (current[1] >= next[0] - 1) {\n      current = [current[0], Math.max(current[1], next[1])];\n    } else {\n      normalized.push(current);\n      current = next;\n    }\n  }\n  normalized.push(current);\n  return normalized;\n}\nfunction updateTimeIntervals(intervals, interval, value) {\n  let start = interval[0], end = interval[1];\n  if (value < start) {\n    return [value, -1];\n  } else if (value === start) {\n    return interval;\n  } else if (start === -1) {\n    interval[0] = value;\n    return interval;\n  } else if (value > start) {\n    interval[1] = value;\n    if (end === -1) intervals.push(interval);\n  }\n  normalizeTimeIntervals(intervals);\n  return interval;\n}\n\nconst AUDIO_EXTENSIONS = /\\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\\?)/i;\nconst AUDIO_TYPES = /* @__PURE__ */ new Set([\n  \"audio/mpeg\",\n  \"audio/ogg\",\n  \"audio/3gp\",\n  \"audio/mp3\",\n  \"audio/webm\",\n  \"audio/flac\",\n  \"audio/m4a\",\n  \"audio/m4b\",\n  \"audio/mp4a\",\n  \"audio/mp4\"\n]);\nconst VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\\d+]+)?($|\\?)/i;\nconst VIDEO_TYPES = /* @__PURE__ */ new Set([\n  \"video/mp4\",\n  \"video/webm\",\n  \"video/3gp\",\n  \"video/ogg\",\n  \"video/avi\",\n  \"video/mpeg\"\n]);\nconst HLS_VIDEO_EXTENSIONS = /\\.(m3u8)($|\\?)/i;\nconst DASH_VIDEO_EXTENSIONS = /\\.(mpd)($|\\?)/i;\nconst HLS_VIDEO_TYPES = /* @__PURE__ */ new Set([\n  // Apple sanctioned\n  \"application/vnd.apple.mpegurl\",\n  // Apple sanctioned for backwards compatibility\n  \"audio/mpegurl\",\n  // Very common\n  \"audio/x-mpegurl\",\n  // Very common\n  \"application/x-mpegurl\",\n  // Included for completeness\n  \"video/x-mpegurl\",\n  \"video/mpegurl\",\n  \"application/mpegurl\"\n]);\nconst DASH_VIDEO_TYPES = /* @__PURE__ */ new Set([\"application/dash+xml\"]);\nfunction isAudioSrc({ src, type }) {\n  return isString(src) ? AUDIO_EXTENSIONS.test(src) || AUDIO_TYPES.has(type) || src.startsWith(\"blob:\") && type === \"audio/object\" : type === \"audio/object\";\n}\nfunction isVideoSrc(src) {\n  return isString(src.src) ? VIDEO_EXTENSIONS.test(src.src) || VIDEO_TYPES.has(src.type) || src.src.startsWith(\"blob:\") && src.type === \"video/object\" || isHLSSrc(src) && (IS_SERVER || canPlayHLSNatively()) : src.type === \"video/object\";\n}\nfunction isHLSSrc({ src, type }) {\n  return isString(src) && HLS_VIDEO_EXTENSIONS.test(src) || HLS_VIDEO_TYPES.has(type);\n}\nfunction isDASHSrc({ src, type }) {\n  return isString(src) && DASH_VIDEO_EXTENSIONS.test(src) || DASH_VIDEO_TYPES.has(type);\n}\nfunction canGoogleCastSrc(src) {\n  return isString(src.src) && (isAudioSrc(src) || isVideoSrc(src) || isHLSSrc(src));\n}\nfunction isMediaStream(src) {\n  return !IS_SERVER && typeof window.MediaStream !== \"undefined\" && src instanceof window.MediaStream;\n}\n\nfunction appendParamsToURL(baseUrl, params) {\n  const url = new URL(baseUrl);\n  for (const key of Object.keys(params)) {\n    url.searchParams.set(key, params[key] + \"\");\n  }\n  return url.toString();\n}\nfunction preconnect(url, rel = \"preconnect\") {\n  if (IS_SERVER) return false;\n  const exists = document.querySelector(`link[href=\"${url}\"]`);\n  if (!isNull(exists)) return true;\n  const link = document.createElement(\"link\");\n  link.rel = rel;\n  link.href = url;\n  link.crossOrigin = \"true\";\n  document.head.append(link);\n  return true;\n}\nconst pendingRequests = {};\nfunction loadScript(src) {\n  if (pendingRequests[src]) return pendingRequests[src].promise;\n  const promise = deferredPromise(), exists = document.querySelector(`script[src=\"${src}\"]`);\n  if (!isNull(exists)) {\n    promise.resolve();\n    return promise.promise;\n  }\n  pendingRequests[src] = promise;\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.onload = () => {\n    promise.resolve();\n    delete pendingRequests[src];\n  };\n  script.onerror = () => {\n    promise.reject();\n    delete pendingRequests[src];\n  };\n  setTimeout(() => document.head.append(script), 0);\n  return promise.promise;\n}\nfunction getRequestCredentials(crossOrigin) {\n  return crossOrigin === \"use-credentials\" ? \"include\" : isString(crossOrigin) ? \"same-origin\" : void 0;\n}\nfunction getDownloadFile({\n  title,\n  src,\n  download\n}) {\n  const url = isBoolean(download) || download === \"\" ? src.src : isString(download) ? download : download?.url;\n  if (!isValidFileDownload({ url, src, download })) return null;\n  return {\n    url,\n    name: !isBoolean(download) && !isString(download) && download?.filename || title.toLowerCase() || \"media\"\n  };\n}\nfunction isValidFileDownload({\n  url,\n  src,\n  download\n}) {\n  return isString(url) && (download && download !== true || isAudioSrc(src) || isVideoSrc(src));\n}\n\nconst CROSS_ORIGIN = Symbol(\"TEXT_TRACK_CROSS_ORIGIN\" ), READY_STATE = Symbol(\"TEXT_TRACK_READY_STATE\" ), UPDATE_ACTIVE_CUES = Symbol(\"TEXT_TRACK_UPDATE_ACTIVE_CUES\" ), CAN_LOAD = Symbol(\"TEXT_TRACK_CAN_LOAD\" ), ON_MODE_CHANGE = Symbol(\"TEXT_TRACK_ON_MODE_CHANGE\" ), NATIVE = Symbol(\"TEXT_TRACK_NATIVE\" ), NATIVE_HLS = Symbol(\"TEXT_TRACK_NATIVE_HLS\" );\nconst TextTrackSymbol = {\n  crossOrigin: CROSS_ORIGIN,\n  readyState: READY_STATE,\n  updateActiveCues: UPDATE_ACTIVE_CUES,\n  canLoad: CAN_LOAD,\n  onModeChange: ON_MODE_CHANGE,\n  native: NATIVE,\n  nativeHLS: NATIVE_HLS\n};\n\nfunction findActiveCue(cues, time) {\n  for (let i = 0, len = cues.length; i < len; i++) {\n    if (isCueActive(cues[i], time)) return cues[i];\n  }\n  return null;\n}\nfunction isCueActive(cue, time) {\n  return time >= cue.startTime && time < cue.endTime;\n}\nfunction watchActiveTextTrack(tracks, kind, onChange) {\n  let currentTrack = null, scope = getScope();\n  function onModeChange() {\n    const kinds = isString(kind) ? [kind] : kind, track = tracks.toArray().find((track2) => kinds.includes(track2.kind) && track2.mode === \"showing\");\n    if (track === currentTrack) return;\n    if (!track) {\n      onChange(null);\n      currentTrack = null;\n      return;\n    }\n    if (track.readyState == 2) {\n      onChange(track);\n    } else {\n      onChange(null);\n      scoped(() => {\n        const off = listenEvent(\n          track,\n          \"load\",\n          () => {\n            onChange(track);\n            off();\n          },\n          { once: true }\n        );\n      }, scope);\n    }\n    currentTrack = track;\n  }\n  onModeChange();\n  return listenEvent(tracks, \"mode-change\", onModeChange);\n}\nfunction watchCueTextChange(tracks, kind, callback) {\n  watchActiveTextTrack(tracks, kind, (track) => {\n    if (!track) {\n      callback(\"\");\n      return;\n    }\n    const onCueChange = () => {\n      const activeCue = track?.activeCues[0];\n      callback(activeCue?.text || \"\");\n    };\n    onCueChange();\n    listenEvent(track, \"cue-change\", onCueChange);\n  });\n}\n\nclass TextTrack extends EventsTarget {\n  static createId(track) {\n    return `vds-${track.type}-${track.kind}-${track.src ?? track.label ?? \"?\"}`;\n  }\n  src;\n  content;\n  type;\n  encoding;\n  id = \"\";\n  label = \"\";\n  language = \"\";\n  kind;\n  default = false;\n  #canLoad = false;\n  #currentTime = 0;\n  #mode = \"disabled\";\n  #metadata = {};\n  #regions = [];\n  #cues = [];\n  #activeCues = [];\n  /** @internal */\n  [TextTrackSymbol.readyState] = 0;\n  /** @internal */\n  [TextTrackSymbol.crossOrigin];\n  /** @internal */\n  [TextTrackSymbol.onModeChange] = null;\n  /** @internal */\n  [TextTrackSymbol.native] = null;\n  get metadata() {\n    return this.#metadata;\n  }\n  get regions() {\n    return this.#regions;\n  }\n  get cues() {\n    return this.#cues;\n  }\n  get activeCues() {\n    return this.#activeCues;\n  }\n  /**\n   * - 0: Not Loading\n   * - 1: Loading\n   * - 2: Ready\n   * - 3: Error\n   */\n  get readyState() {\n    return this[TextTrackSymbol.readyState];\n  }\n  get mode() {\n    return this.#mode;\n  }\n  set mode(mode) {\n    this.setMode(mode);\n  }\n  constructor(init) {\n    super();\n    for (const prop of Object.keys(init)) this[prop] = init[prop];\n    if (!this.type) this.type = \"vtt\";\n    if (!IS_SERVER && init.content) {\n      this.#parseContent(init);\n    } else if (!init.src) {\n      this[TextTrackSymbol.readyState] = 2;\n    }\n    if (isTrackCaptionKind(this) && !this.label) {\n      console.warn(`[vidstack] captions text track created without label: \\`${this.src}\\``);\n    }\n  }\n  addCue(cue, trigger) {\n    let i = 0, length = this.#cues.length;\n    for (i = 0; i < length; i++) if (cue.endTime <= this.#cues[i].startTime) break;\n    if (i === length) this.#cues.push(cue);\n    else this.#cues.splice(i, 0, cue);\n    if (!(cue instanceof TextTrackCue)) {\n      this[TextTrackSymbol.native]?.track.addCue(cue);\n    }\n    this.dispatchEvent(new DOMEvent(\"add-cue\", { detail: cue, trigger }));\n    if (isCueActive(cue, this.#currentTime)) {\n      this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n    }\n  }\n  removeCue(cue, trigger) {\n    const index = this.#cues.indexOf(cue);\n    if (index >= 0) {\n      const isActive = this.#activeCues.includes(cue);\n      this.#cues.splice(index, 1);\n      this[TextTrackSymbol.native]?.track.removeCue(cue);\n      this.dispatchEvent(new DOMEvent(\"remove-cue\", { detail: cue, trigger }));\n      if (isActive) {\n        this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n      }\n    }\n  }\n  setMode(mode, trigger) {\n    if (this.#mode === mode) return;\n    this.#mode = mode;\n    if (mode === \"disabled\") {\n      this.#activeCues = [];\n      this.#activeCuesChanged();\n    } else if (this.readyState === 2) {\n      this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n    } else {\n      this.#load();\n    }\n    this.dispatchEvent(new DOMEvent(\"mode-change\", { detail: this, trigger }));\n    this[TextTrackSymbol.onModeChange]?.();\n  }\n  /** @internal */\n  [TextTrackSymbol.updateActiveCues](currentTime, trigger) {\n    this.#currentTime = currentTime;\n    if (this.mode === \"disabled\" || !this.#cues.length) return;\n    const activeCues = [];\n    for (let i = 0, length = this.#cues.length; i < length; i++) {\n      const cue = this.#cues[i];\n      if (isCueActive(cue, currentTime)) activeCues.push(cue);\n    }\n    let changed = activeCues.length !== this.#activeCues.length;\n    if (!changed) {\n      for (let i = 0; i < activeCues.length; i++) {\n        if (!this.#activeCues.includes(activeCues[i])) {\n          changed = true;\n          break;\n        }\n      }\n    }\n    this.#activeCues = activeCues;\n    if (changed) this.#activeCuesChanged(trigger);\n  }\n  /** @internal */\n  [TextTrackSymbol.canLoad]() {\n    this.#canLoad = true;\n    if (this.#mode !== \"disabled\") this.#load();\n  }\n  #parseContent(init) {\n    import('media-captions').then(({ parseText, VTTCue, VTTRegion }) => {\n      if (!isString(init.content) || init.type === \"json\") {\n        this.#parseJSON(init.content, VTTCue, VTTRegion);\n        if (this.readyState !== 3) this.#ready();\n      } else {\n        parseText(init.content, { type: init.type }).then(({ cues, regions }) => {\n          this.#cues = cues;\n          this.#regions = regions;\n          this.#ready();\n        });\n      }\n    });\n  }\n  async #load() {\n    if (!this.#canLoad || this[TextTrackSymbol.readyState] > 0) return;\n    this[TextTrackSymbol.readyState] = 1;\n    this.dispatchEvent(new DOMEvent(\"load-start\"));\n    if (!this.src) {\n      this.#ready();\n      return;\n    }\n    try {\n      const { parseResponse, VTTCue, VTTRegion } = await import('media-captions'), crossOrigin = this[TextTrackSymbol.crossOrigin]?.();\n      const response = fetch(this.src, {\n        headers: this.type === \"json\" ? { \"Content-Type\": \"application/json\" } : void 0,\n        credentials: getRequestCredentials(crossOrigin)\n      });\n      if (this.type === \"json\") {\n        this.#parseJSON(await (await response).text(), VTTCue, VTTRegion);\n      } else {\n        const { errors, metadata, regions, cues } = await parseResponse(response, {\n          type: this.type,\n          encoding: this.encoding\n        });\n        if (errors[0]?.code === 0) {\n          throw errors[0];\n        } else {\n          this.#metadata = metadata;\n          this.#regions = regions;\n          this.#cues = cues;\n        }\n      }\n      this.#ready();\n    } catch (error) {\n      this.#error(error);\n    }\n  }\n  #ready() {\n    this[TextTrackSymbol.readyState] = 2;\n    if (!this.src || this.type !== \"vtt\") {\n      const native = this[TextTrackSymbol.native];\n      if (native && !native.managed) {\n        for (const cue of this.#cues) native.track.addCue(cue);\n      }\n    }\n    const loadEvent = new DOMEvent(\"load\");\n    this[TextTrackSymbol.updateActiveCues](this.#currentTime, loadEvent);\n    this.dispatchEvent(loadEvent);\n  }\n  #error(error) {\n    this[TextTrackSymbol.readyState] = 3;\n    this.dispatchEvent(new DOMEvent(\"error\", { detail: error }));\n  }\n  #parseJSON(json, VTTCue, VTTRegion) {\n    try {\n      const { regions, cues } = parseJSONCaptionsFile(json, VTTCue, VTTRegion);\n      this.#regions = regions;\n      this.#cues = cues;\n    } catch (error) {\n      {\n        console.error(`[vidstack] failed to parse JSON captions at: \\`${this.src}\\`\n\n`, error);\n      }\n      this.#error(error);\n    }\n  }\n  #activeCuesChanged(trigger) {\n    this.dispatchEvent(new DOMEvent(\"cue-change\", { trigger }));\n  }\n}\nconst captionRE = /captions|subtitles/;\nfunction isTrackCaptionKind(track) {\n  return captionRE.test(track.kind);\n}\nfunction parseJSONCaptionsFile(json, Cue, Region) {\n  const content = isString(json) ? JSON.parse(json) : json;\n  let regions = [], cues = [];\n  if (content.regions && Region) {\n    regions = content.regions.map((region) => Object.assign(new Region(), region));\n  }\n  if (content.cues || isArray(content)) {\n    cues = (isArray(content) ? content : content.cues).filter((content2) => isNumber(content2.startTime) && isNumber(content2.endTime)).map((cue) => Object.assign(new Cue(0, 0, \"\"), cue));\n  }\n  return { regions, cues };\n}\n\nconst mediaState = new State({\n  artist: \"\",\n  artwork: null,\n  audioTrack: null,\n  audioTracks: [],\n  autoPlay: false,\n  autoPlayError: null,\n  audioGain: null,\n  buffered: new TimeRange(),\n  canLoad: false,\n  canLoadPoster: false,\n  canFullscreen: false,\n  canOrientScreen: canOrientScreen(),\n  canPictureInPicture: false,\n  canPlay: false,\n  clipStartTime: 0,\n  clipEndTime: 0,\n  controls: false,\n  get iOSControls() {\n    return IS_IPHONE && this.mediaType === \"video\" && (!this.playsInline || !fscreen.fullscreenEnabled && this.fullscreen);\n  },\n  get nativeControls() {\n    return this.controls || this.iOSControls;\n  },\n  controlsVisible: false,\n  get controlsHidden() {\n    return !this.controlsVisible;\n  },\n  crossOrigin: null,\n  ended: false,\n  error: null,\n  fullscreen: false,\n  get loop() {\n    return this.providedLoop || this.userPrefersLoop;\n  },\n  logLevel: \"warn\" ,\n  mediaType: \"unknown\",\n  muted: false,\n  paused: true,\n  played: new TimeRange(),\n  playing: false,\n  playsInline: false,\n  pictureInPicture: false,\n  preload: \"metadata\",\n  playbackRate: 1,\n  qualities: [],\n  quality: null,\n  autoQuality: false,\n  canSetQuality: true,\n  canSetPlaybackRate: true,\n  canSetVolume: false,\n  canSetAudioGain: false,\n  seekable: new TimeRange(),\n  seeking: false,\n  source: { src: \"\", type: \"\" },\n  sources: [],\n  started: false,\n  textTracks: [],\n  textTrack: null,\n  get hasCaptions() {\n    return this.textTracks.filter(isTrackCaptionKind).length > 0;\n  },\n  volume: 1,\n  waiting: false,\n  realCurrentTime: 0,\n  get currentTime() {\n    return this.ended ? this.duration : this.clipStartTime > 0 ? Math.max(0, Math.min(this.realCurrentTime - this.clipStartTime, this.duration)) : this.realCurrentTime;\n  },\n  providedDuration: -1,\n  intrinsicDuration: 0,\n  get duration() {\n    return this.seekableWindow;\n  },\n  get title() {\n    return this.providedTitle || this.inferredTitle;\n  },\n  get poster() {\n    return this.providedPoster || this.inferredPoster;\n  },\n  get viewType() {\n    return this.providedViewType !== \"unknown\" ? this.providedViewType : this.inferredViewType;\n  },\n  get streamType() {\n    return this.providedStreamType !== \"unknown\" ? this.providedStreamType : this.inferredStreamType;\n  },\n  get currentSrc() {\n    return this.source;\n  },\n  get bufferedStart() {\n    const start = getTimeRangesStart(this.buffered) ?? 0;\n    return Math.max(start, this.clipStartTime);\n  },\n  get bufferedEnd() {\n    const end = getTimeRangesEnd(this.buffered) ?? 0;\n    return Math.min(this.seekableEnd, Math.max(0, end - this.clipStartTime));\n  },\n  get bufferedWindow() {\n    return Math.max(0, this.bufferedEnd - this.bufferedStart);\n  },\n  get seekableStart() {\n    if (this.isLiveDVR && this.liveDVRWindow > 0) {\n      return Math.max(0, this.seekableEnd - this.liveDVRWindow);\n    }\n    const start = getTimeRangesStart(this.seekable) ?? 0;\n    return Math.max(start, this.clipStartTime);\n  },\n  get seekableEnd() {\n    if (this.providedDuration > 0) return this.providedDuration;\n    const end = this.liveSyncPosition > 0 ? this.liveSyncPosition : this.canPlay ? getTimeRangesEnd(this.seekable) ?? Infinity : 0;\n    return this.clipEndTime > 0 ? Math.min(this.clipEndTime, end) : end;\n  },\n  get seekableWindow() {\n    const window = this.seekableEnd - this.seekableStart;\n    return !isNaN(window) ? Math.max(0, window) : Infinity;\n  },\n  // ~~ remote playback ~~\n  canAirPlay: false,\n  canGoogleCast: false,\n  remotePlaybackState: \"disconnected\",\n  remotePlaybackType: \"none\",\n  remotePlaybackLoader: null,\n  remotePlaybackInfo: null,\n  get isAirPlayConnected() {\n    return this.remotePlaybackType === \"airplay\" && this.remotePlaybackState === \"connected\";\n  },\n  get isGoogleCastConnected() {\n    return this.remotePlaybackType === \"google-cast\" && this.remotePlaybackState === \"connected\";\n  },\n  // ~~ responsive design ~~\n  pointer: \"fine\",\n  orientation: \"landscape\",\n  width: 0,\n  height: 0,\n  mediaWidth: 0,\n  mediaHeight: 0,\n  lastKeyboardAction: null,\n  // ~~ user props ~~\n  userBehindLiveEdge: false,\n  // ~~ live props ~~\n  liveEdgeTolerance: 10,\n  minLiveDVRWindow: 60,\n  get canSeek() {\n    return /unknown|on-demand|:dvr/.test(this.streamType) && Number.isFinite(this.duration) && (!this.isLiveDVR || this.duration >= this.liveDVRWindow);\n  },\n  get live() {\n    return this.streamType.includes(\"live\") || !Number.isFinite(this.duration);\n  },\n  get liveEdgeStart() {\n    return this.live && Number.isFinite(this.seekableEnd) ? Math.max(0, this.seekableEnd - this.liveEdgeTolerance) : 0;\n  },\n  get liveEdge() {\n    return this.live && (!this.canSeek || !this.userBehindLiveEdge && this.currentTime >= this.liveEdgeStart);\n  },\n  get liveEdgeWindow() {\n    return this.live && Number.isFinite(this.seekableEnd) ? this.seekableEnd - this.liveEdgeStart : 0;\n  },\n  get isLiveDVR() {\n    return /:dvr/.test(this.streamType);\n  },\n  get liveDVRWindow() {\n    return Math.max(this.inferredLiveDVRWindow, this.minLiveDVRWindow);\n  },\n  // ~~ internal props ~~\n  autoPlaying: false,\n  providedTitle: \"\",\n  inferredTitle: \"\",\n  providedLoop: false,\n  userPrefersLoop: false,\n  providedPoster: \"\",\n  inferredPoster: \"\",\n  inferredViewType: \"unknown\",\n  providedViewType: \"unknown\",\n  providedStreamType: \"unknown\",\n  inferredStreamType: \"unknown\",\n  liveSyncPosition: null,\n  inferredLiveDVRWindow: 0,\n  savedState: null\n});\nconst RESET_ON_SRC_QUALITY_CHANGE = /* @__PURE__ */ new Set([\n  \"autoPlayError\",\n  \"autoPlaying\",\n  \"buffered\",\n  \"canPlay\",\n  \"error\",\n  \"paused\",\n  \"played\",\n  \"playing\",\n  \"seekable\",\n  \"seeking\",\n  \"waiting\"\n]);\nconst RESET_ON_SRC_CHANGE = /* @__PURE__ */ new Set([\n  ...RESET_ON_SRC_QUALITY_CHANGE,\n  \"ended\",\n  \"inferredPoster\",\n  \"inferredStreamType\",\n  \"inferredTitle\",\n  \"intrinsicDuration\",\n  \"inferredLiveDVRWindow\",\n  \"liveSyncPosition\",\n  \"realCurrentTime\",\n  \"savedState\",\n  \"started\",\n  \"userBehindLiveEdge\"\n]);\nfunction softResetMediaState($media, isSourceQualityChange = false) {\n  const filter = isSourceQualityChange ? RESET_ON_SRC_QUALITY_CHANGE : RESET_ON_SRC_CHANGE;\n  mediaState.reset($media, (prop) => filter.has(prop));\n  tick();\n}\nfunction boundTime(time, store) {\n  const clippedTime = time + store.clipStartTime(), isStart = Math.floor(time) === Math.floor(store.seekableStart()), isEnd = Math.floor(clippedTime) === Math.floor(store.seekableEnd());\n  if (isStart) {\n    return store.seekableStart();\n  }\n  if (isEnd) {\n    return store.seekableEnd();\n  }\n  if (store.isLiveDVR() && store.liveDVRWindow() > 0 && clippedTime < store.seekableEnd() - store.liveDVRWindow()) {\n    return store.bufferedStart();\n  }\n  return Math.min(Math.max(store.seekableStart() + 0.1, clippedTime), store.seekableEnd() - 0.1);\n}\n\nconst mediaContext = createContext();\nfunction useMediaContext() {\n  return useContext(mediaContext);\n}\n\nconst GROUPED_LOG = Symbol(\"GROUPED_LOG\" );\nclass GroupedLog {\n  constructor(logger, level, title, root, parent) {\n    this.logger = logger;\n    this.level = level;\n    this.title = title;\n    this.root = root;\n    this.parent = parent;\n  }\n  [GROUPED_LOG] = true;\n  logs = [];\n  log(...data) {\n    this.logs.push({ data });\n    return this;\n  }\n  labelledLog(label, ...data) {\n    this.logs.push({ label, data });\n    return this;\n  }\n  groupStart(title) {\n    return new GroupedLog(this.logger, this.level, title, this.root ?? this, this);\n  }\n  groupEnd() {\n    this.parent?.logs.push(this);\n    return this.parent ?? this;\n  }\n  dispatch() {\n    return this.logger.dispatch(this.level, this.root ?? this);\n  }\n}\nfunction isGroupedLog(data) {\n  return !!data?.[GROUPED_LOG];\n}\n\nclass Logger {\n  #target = null;\n  error(...data) {\n    return this.dispatch(\"error\", ...data);\n  }\n  warn(...data) {\n    return this.dispatch(\"warn\", ...data);\n  }\n  info(...data) {\n    return this.dispatch(\"info\", ...data);\n  }\n  debug(...data) {\n    return this.dispatch(\"debug\", ...data);\n  }\n  errorGroup(title) {\n    return new GroupedLog(this, \"error\", title);\n  }\n  warnGroup(title) {\n    return new GroupedLog(this, \"warn\", title);\n  }\n  infoGroup(title) {\n    return new GroupedLog(this, \"info\", title);\n  }\n  debugGroup(title) {\n    return new GroupedLog(this, \"debug\", title);\n  }\n  setTarget(newTarget) {\n    this.#target = newTarget;\n  }\n  dispatch(level, ...data) {\n    return this.#target?.dispatchEvent(\n      new DOMEvent(\"vds-log\", {\n        bubbles: true,\n        composed: true,\n        detail: { level, data }\n      })\n    ) || false;\n  }\n}\n\nclass MediaRemoteControl {\n  #target = null;\n  #player = null;\n  #prevTrackIndex = -1;\n  #logger;\n  constructor(logger = new Logger() ) {\n    this.#logger = logger;\n  }\n  /**\n   * Set the target from which to dispatch media requests events from. The events should bubble\n   * up from this target to the player element.\n   *\n   * @example\n   * ```ts\n   * const button = document.querySelector('button');\n   * remote.setTarget(button);\n   * ```\n   */\n  setTarget(target) {\n    this.#target = target;\n    this.#logger?.setTarget(target);\n  }\n  /**\n   * Returns the current player element. This method will attempt to find the player by\n   * searching up from either the given `target` or default target set via `remote.setTarget`.\n   *\n   * @example\n   * ```ts\n   * const player = remote.getPlayer();\n   * ```\n   */\n  getPlayer(target) {\n    if (this.#player) return this.#player;\n    (target ?? this.#target)?.dispatchEvent(\n      new DOMEvent(\"find-media-player\", {\n        detail: (player) => void (this.#player = player),\n        bubbles: true,\n        composed: true\n      })\n    );\n    return this.#player;\n  }\n  /**\n   * Set the current player element so the remote can support toggle methods such as\n   * `togglePaused` as they rely on the current media state.\n   */\n  setPlayer(player) {\n    this.#player = player;\n  }\n  /**\n   * Dispatch a request to start the media loading process. This will only work if the media\n   * player has been initialized with a custom loading strategy `load=\"custom\">`.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoading(trigger) {\n    this.#dispatchRequest(\"media-start-loading\", trigger);\n  }\n  /**\n   * Dispatch a request to start the poster loading process. This will only work if the media\n   * player has been initialized with a custom poster loading strategy `posterLoad=\"custom\">`.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoadingPoster(trigger) {\n    this.#dispatchRequest(\"media-poster-start-loading\", trigger);\n  }\n  /**\n   * Dispatch a request to connect to AirPlay.\n   *\n   * @see {@link https://www.apple.com/au/airplay}\n   */\n  requestAirPlay(trigger) {\n    this.#dispatchRequest(\"media-airplay-request\", trigger);\n  }\n  /**\n   * Dispatch a request to connect to Google Cast.\n   *\n   * @see {@link https://developers.google.com/cast/docs/overview}\n   */\n  requestGoogleCast(trigger) {\n    this.#dispatchRequest(\"media-google-cast-request\", trigger);\n  }\n  /**\n   * Dispatch a request to begin/resume media playback.\n   */\n  play(trigger) {\n    this.#dispatchRequest(\"media-play-request\", trigger);\n  }\n  /**\n   * Dispatch a request to pause media playback.\n   */\n  pause(trigger) {\n    this.#dispatchRequest(\"media-pause-request\", trigger);\n  }\n  /**\n   * Dispatch a request to set the media volume to mute (0).\n   */\n  mute(trigger) {\n    this.#dispatchRequest(\"media-mute-request\", trigger);\n  }\n  /**\n   * Dispatch a request to unmute the media volume and set it back to it's previous state.\n   */\n  unmute(trigger) {\n    this.#dispatchRequest(\"media-unmute-request\", trigger);\n  }\n  /**\n   * Dispatch a request to enter fullscreen.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  enterFullscreen(target, trigger) {\n    this.#dispatchRequest(\"media-enter-fullscreen-request\", trigger, target);\n  }\n  /**\n   * Dispatch a request to exit fullscreen.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  exitFullscreen(target, trigger) {\n    this.#dispatchRequest(\"media-exit-fullscreen-request\", trigger, target);\n  }\n  /**\n   * Dispatch a request to lock the screen orientation.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/screen-orientation#remote-control}\n   */\n  lockScreenOrientation(lockType, trigger) {\n    this.#dispatchRequest(\"media-orientation-lock-request\", trigger, lockType);\n  }\n  /**\n   * Dispatch a request to unlock the screen orientation.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/screen-orientation#remote-control}\n   */\n  unlockScreenOrientation(trigger) {\n    this.#dispatchRequest(\"media-orientation-unlock-request\", trigger);\n  }\n  /**\n   * Dispatch a request to enter picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  enterPictureInPicture(trigger) {\n    this.#dispatchRequest(\"media-enter-pip-request\", trigger);\n  }\n  /**\n   * Dispatch a request to exit picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  exitPictureInPicture(trigger) {\n    this.#dispatchRequest(\"media-exit-pip-request\", trigger);\n  }\n  /**\n   * Notify the media player that a seeking process is happening and to seek to the given `time`.\n   */\n  seeking(time, trigger) {\n    this.#dispatchRequest(\"media-seeking-request\", trigger, time);\n  }\n  /**\n   * Notify the media player that a seeking operation has completed and to seek to the given `time`.\n   * This is generally called after a series of `remote.seeking()` calls.\n   */\n  seek(time, trigger) {\n    this.#dispatchRequest(\"media-seek-request\", trigger, time);\n  }\n  seekToLiveEdge(trigger) {\n    this.#dispatchRequest(\"media-live-edge-request\", trigger);\n  }\n  /**\n   * Dispatch a request to update the length of the media in seconds.\n   *\n   * @example\n   * ```ts\n   * remote.changeDuration(100); // 100 seconds\n   * ```\n   */\n  changeDuration(duration, trigger) {\n    this.#dispatchRequest(\"media-duration-change-request\", trigger, duration);\n  }\n  /**\n   * Dispatch a request to update the clip start time. This is the time at which media playback\n   * should start at.\n   *\n   * @example\n   * ```ts\n   * remote.changeClipStart(100); // start at 100 seconds\n   * ```\n   */\n  changeClipStart(startTime, trigger) {\n    this.#dispatchRequest(\"media-clip-start-change-request\", trigger, startTime);\n  }\n  /**\n   * Dispatch a request to update the clip end time. This is the time at which media playback\n   * should end at.\n   *\n   * @example\n   * ```ts\n   * remote.changeClipEnd(100); // end at 100 seconds\n   * ```\n   */\n  changeClipEnd(endTime, trigger) {\n    this.#dispatchRequest(\"media-clip-end-change-request\", trigger, endTime);\n  }\n  /**\n   * Dispatch a request to update the media volume to the given `volume` level which is a value\n   * between 0 and 1.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/audio-gain#remote-control}\n   * @example\n   * ```ts\n   * remote.changeVolume(0); // 0%\n   * remote.changeVolume(0.05); // 5%\n   * remote.changeVolume(0.5); // 50%\n   * remote.changeVolume(0.75); // 70%\n   * remote.changeVolume(1); // 100%\n   * ```\n   */\n  changeVolume(volume, trigger) {\n    this.#dispatchRequest(\"media-volume-change-request\", trigger, Math.max(0, Math.min(1, volume)));\n  }\n  /**\n   * Dispatch a request to change the current audio track.\n   *\n   * @example\n   * ```ts\n   * remote.changeAudioTrack(1); // track at index 1\n   * ```\n   */\n  changeAudioTrack(index, trigger) {\n    this.#dispatchRequest(\"media-audio-track-change-request\", trigger, index);\n  }\n  /**\n   * Dispatch a request to change the video quality. The special value `-1` represents auto quality\n   * selection.\n   *\n   * @example\n   * ```ts\n   * remote.changeQuality(-1); // auto\n   * remote.changeQuality(1); // quality at index 1\n   * ```\n   */\n  changeQuality(index, trigger) {\n    this.#dispatchRequest(\"media-quality-change-request\", trigger, index);\n  }\n  /**\n   * Request auto quality selection.\n   */\n  requestAutoQuality(trigger) {\n    this.changeQuality(-1, trigger);\n  }\n  /**\n   * Dispatch a request to change the mode of the text track at the given index.\n   *\n   * @example\n   * ```ts\n   * remote.changeTextTrackMode(1, 'showing'); // track at index 1\n   * ```\n   */\n  changeTextTrackMode(index, mode, trigger) {\n    this.#dispatchRequest(\"media-text-track-change-request\", trigger, {\n      index,\n      mode\n    });\n  }\n  /**\n   * Dispatch a request to change the media playback rate.\n   *\n   * @example\n   * ```ts\n   * remote.changePlaybackRate(0.5); // Half the normal speed\n   * remote.changePlaybackRate(1); // Normal speed\n   * remote.changePlaybackRate(1.5); // 50% faster than normal\n   * remote.changePlaybackRate(2); // Double the normal speed\n   * ```\n   */\n  changePlaybackRate(rate, trigger) {\n    this.#dispatchRequest(\"media-rate-change-request\", trigger, rate);\n  }\n  /**\n   * Dispatch a request to change the media audio gain.\n   *\n   * @example\n   * ```ts\n   * remote.changeAudioGain(1); // Disable audio gain\n   * remote.changeAudioGain(1.5); // 50% louder\n   * remote.changeAudioGain(2); // 100% louder\n   * ```\n   */\n  changeAudioGain(gain, trigger) {\n    this.#dispatchRequest(\"media-audio-gain-change-request\", trigger, gain);\n  }\n  /**\n   * Dispatch a request to resume idle tracking on controls.\n   */\n  resumeControls(trigger) {\n    this.#dispatchRequest(\"media-resume-controls-request\", trigger);\n  }\n  /**\n   * Dispatch a request to pause controls idle tracking. Pausing tracking will result in the\n   * controls being visible until `remote.resumeControls()` is called. This method\n   * is generally used when building custom controls and you'd like to prevent the UI from\n   * disappearing.\n   *\n   * @example\n   * ```ts\n   * // Prevent controls hiding while menu is being interacted with.\n   * function onSettingsOpen() {\n   *   remote.pauseControls();\n   * }\n   *\n   * function onSettingsClose() {\n   *   remote.resumeControls();\n   * }\n   * ```\n   */\n  pauseControls(trigger) {\n    this.#dispatchRequest(\"media-pause-controls-request\", trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media playback state.\n   */\n  togglePaused(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.togglePaused.name);\n      return;\n    }\n    if (player.state.paused) this.play(trigger);\n    else this.pause(trigger);\n  }\n  /**\n   * Dispatch a request to toggle the controls visibility.\n   */\n  toggleControls(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleControls.name);\n      return;\n    }\n    if (!player.controls.showing) {\n      player.controls.show(0, trigger);\n    } else {\n      player.controls.hide(0, trigger);\n    }\n  }\n  /**\n   * Dispatch a request to toggle the media muted state.\n   */\n  toggleMuted(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleMuted.name);\n      return;\n    }\n    if (player.state.muted) this.unmute(trigger);\n    else this.mute(trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media fullscreen state.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  toggleFullscreen(target, trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleFullscreen.name);\n      return;\n    }\n    if (player.state.fullscreen) this.exitFullscreen(target, trigger);\n    else this.enterFullscreen(target, trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  togglePictureInPicture(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.togglePictureInPicture.name);\n      return;\n    }\n    if (player.state.pictureInPicture) this.exitPictureInPicture(trigger);\n    else this.enterPictureInPicture(trigger);\n  }\n  /**\n   * Show captions.\n   */\n  showCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.showCaptions.name);\n      return;\n    }\n    let tracks = player.state.textTracks, index = this.#prevTrackIndex;\n    if (!tracks[index] || !isTrackCaptionKind(tracks[index])) {\n      index = -1;\n    }\n    if (index === -1) {\n      index = tracks.findIndex((track) => isTrackCaptionKind(track) && track.default);\n    }\n    if (index === -1) {\n      index = tracks.findIndex((track) => isTrackCaptionKind(track));\n    }\n    if (index >= 0) this.changeTextTrackMode(index, \"showing\", trigger);\n    this.#prevTrackIndex = -1;\n  }\n  /**\n   * Turn captions off.\n   */\n  disableCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.disableCaptions.name);\n      return;\n    }\n    const tracks = player.state.textTracks, track = player.state.textTrack;\n    if (track) {\n      const index = tracks.indexOf(track);\n      this.changeTextTrackMode(index, \"disabled\", trigger);\n      this.#prevTrackIndex = index;\n    }\n  }\n  /**\n   * Dispatch a request to toggle the current captions mode.\n   */\n  toggleCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      this.#noPlayerWarning(this.toggleCaptions.name);\n      return;\n    }\n    if (player.state.textTrack) {\n      this.disableCaptions();\n    } else {\n      this.showCaptions();\n    }\n  }\n  userPrefersLoopChange(prefersLoop, trigger) {\n    this.#dispatchRequest(\"media-user-loop-change-request\", trigger, prefersLoop);\n  }\n  #dispatchRequest(type, trigger, detail) {\n    const request = new DOMEvent(type, {\n      bubbles: true,\n      composed: true,\n      cancelable: true,\n      detail,\n      trigger\n    });\n    let target = trigger?.target || null;\n    if (target && target instanceof Component) target = target.el;\n    const shouldUsePlayer = !target || target === document || target === window || target === document.body || this.#player?.el && target instanceof Node && !this.#player.el.contains(target);\n    target = shouldUsePlayer ? this.#target ?? this.getPlayer()?.el : target ?? this.#target;\n    {\n      this.#logger?.debugGroup(`\\u{1F4E8} dispatching \\`${type}\\``).labelledLog(\"Target\", target).labelledLog(\"Player\", this.#player).labelledLog(\"Request Event\", request).labelledLog(\"Trigger Event\", trigger).dispatch();\n    }\n    if (this.#player) {\n      if (type === \"media-play-request\" && !this.#player.state.canLoad) {\n        target?.dispatchEvent(request);\n      } else {\n        this.#player.canPlayQueue.enqueue(type, () => target?.dispatchEvent(request));\n      }\n    } else {\n      target?.dispatchEvent(request);\n    }\n  }\n  #noPlayerWarning(method) {\n    {\n      console.warn(\n        `[vidstack] attempted to call \\`MediaRemoteControl.${method}\\`() that requires player but failed because remote could not find a parent player element from target`\n      );\n    }\n  }\n}\n\nclass LocalMediaStorage {\n  playerId = \"vds-player\";\n  mediaId = null;\n  #data = {\n    volume: null,\n    muted: null,\n    audioGain: null,\n    time: null,\n    lang: null,\n    captions: null,\n    rate: null,\n    quality: null\n  };\n  async getVolume() {\n    return this.#data.volume;\n  }\n  async setVolume(volume) {\n    this.#data.volume = volume;\n    this.save();\n  }\n  async getMuted() {\n    return this.#data.muted;\n  }\n  async setMuted(muted) {\n    this.#data.muted = muted;\n    this.save();\n  }\n  async getTime() {\n    return this.#data.time;\n  }\n  async setTime(time, ended) {\n    const shouldClear = time < 0;\n    this.#data.time = !shouldClear ? time : null;\n    if (shouldClear || ended) this.saveTime();\n    else this.saveTimeThrottled();\n  }\n  async getLang() {\n    return this.#data.lang;\n  }\n  async setLang(lang) {\n    this.#data.lang = lang;\n    this.save();\n  }\n  async getCaptions() {\n    return this.#data.captions;\n  }\n  async setCaptions(enabled) {\n    this.#data.captions = enabled;\n    this.save();\n  }\n  async getPlaybackRate() {\n    return this.#data.rate;\n  }\n  async setPlaybackRate(rate) {\n    this.#data.rate = rate;\n    this.save();\n  }\n  async getAudioGain() {\n    return this.#data.audioGain;\n  }\n  async setAudioGain(gain) {\n    this.#data.audioGain = gain;\n    this.save();\n  }\n  async getVideoQuality() {\n    return this.#data.quality;\n  }\n  async setVideoQuality(quality) {\n    this.#data.quality = quality;\n    this.save();\n  }\n  onChange(src, mediaId, playerId = \"vds-player\") {\n    const savedData = playerId ? localStorage.getItem(playerId) : null, savedTime = mediaId ? localStorage.getItem(mediaId) : null;\n    this.playerId = playerId;\n    this.mediaId = mediaId;\n    this.#data = {\n      volume: null,\n      muted: null,\n      audioGain: null,\n      lang: null,\n      captions: null,\n      rate: null,\n      quality: null,\n      ...savedData ? JSON.parse(savedData) : {},\n      time: savedTime ? +savedTime : null\n    };\n  }\n  save() {\n    if (IS_SERVER || !this.playerId) return;\n    const data = JSON.stringify({ ...this.#data, time: void 0 });\n    localStorage.setItem(this.playerId, data);\n  }\n  saveTimeThrottled = functionThrottle(this.saveTime.bind(this), 1e3);\n  saveTime() {\n    if (IS_SERVER || !this.mediaId) return;\n    const data = (this.#data.time ?? 0).toString();\n    localStorage.setItem(this.mediaId, data);\n  }\n}\n\nconst ADD = Symbol(\"LIST_ADD\" ), REMOVE = Symbol(\"LIST_REMOVE\" ), RESET = Symbol(\"LIST_RESET\" ), SELECT = Symbol(\"LIST_SELECT\" ), READONLY = Symbol(\"LIST_READONLY\" ), SET_READONLY = Symbol(\"LIST_SET_READONLY\" ), ON_RESET = Symbol(\"LIST_ON_RESET\" ), ON_REMOVE = Symbol(\"LIST_ON_REMOVE\" ), ON_USER_SELECT = Symbol(\"LIST_ON_USER_SELECT\" );\nconst ListSymbol = {\n  add: ADD,\n  remove: REMOVE,\n  reset: RESET,\n  select: SELECT,\n  readonly: READONLY,\n  setReadonly: SET_READONLY,\n  onReset: ON_RESET,\n  onRemove: ON_REMOVE,\n  onUserSelect: ON_USER_SELECT\n};\n\nclass List extends EventsTarget {\n  items = [];\n  /** @internal */\n  [ListSymbol.readonly] = false;\n  get length() {\n    return this.items.length;\n  }\n  get readonly() {\n    return this[ListSymbol.readonly];\n  }\n  /**\n   * Returns the index of the first occurrence of the given item, or -1 if it is not present.\n   */\n  indexOf(item) {\n    return this.items.indexOf(item);\n  }\n  /**\n   * Returns an item matching the given `id`, or `null` if not present.\n   */\n  getById(id) {\n    if (id === \"\") return null;\n    return this.items.find((item) => item.id === id) ?? null;\n  }\n  /**\n   * Transform list to an array.\n   */\n  toArray() {\n    return [...this.items];\n  }\n  [Symbol.iterator]() {\n    return this.items.values();\n  }\n  /** @internal */\n  [ListSymbol.add](item, trigger) {\n    const index = this.items.length;\n    if (!(\"\" + index in this)) {\n      Object.defineProperty(this, index, {\n        get() {\n          return this.items[index];\n        }\n      });\n    }\n    if (this.items.includes(item)) return;\n    this.items.push(item);\n    this.dispatchEvent(new DOMEvent(\"add\", { detail: item, trigger }));\n  }\n  /** @internal */\n  [ListSymbol.remove](item, trigger) {\n    const index = this.items.indexOf(item);\n    if (index >= 0) {\n      this[ListSymbol.onRemove]?.(item, trigger);\n      this.items.splice(index, 1);\n      this.dispatchEvent(new DOMEvent(\"remove\", { detail: item, trigger }));\n    }\n  }\n  /** @internal */\n  [ListSymbol.reset](trigger) {\n    for (const item of [...this.items]) this[ListSymbol.remove](item, trigger);\n    this.items = [];\n    this[ListSymbol.setReadonly](false, trigger);\n    this[ListSymbol.onReset]?.();\n  }\n  /** @internal */\n  [ListSymbol.setReadonly](readonly, trigger) {\n    if (this[ListSymbol.readonly] === readonly) return;\n    this[ListSymbol.readonly] = readonly;\n    this.dispatchEvent(new DOMEvent(\"readonly-change\", { detail: readonly, trigger }));\n  }\n}\n\nconst SELECTED = Symbol(\"SELECTED\" );\nclass SelectList extends List {\n  get selected() {\n    return this.items.find((item) => item.selected) ?? null;\n  }\n  get selectedIndex() {\n    return this.items.findIndex((item) => item.selected);\n  }\n  /** @internal */\n  [ListSymbol.onRemove](item, trigger) {\n    this[ListSymbol.select](item, false, trigger);\n  }\n  /** @internal */\n  [ListSymbol.add](item, trigger) {\n    item[SELECTED] = false;\n    Object.defineProperty(item, \"selected\", {\n      get() {\n        return this[SELECTED];\n      },\n      set: (selected) => {\n        if (this.readonly) return;\n        this[ListSymbol.onUserSelect]?.();\n        this[ListSymbol.select](item, selected);\n      }\n    });\n    super[ListSymbol.add](item, trigger);\n  }\n  /** @internal */\n  [ListSymbol.select](item, selected, trigger) {\n    if (selected === item?.[SELECTED]) return;\n    const prev = this.selected;\n    if (item) item[SELECTED] = selected;\n    const changed = !selected ? prev === item : prev !== item;\n    if (changed) {\n      if (prev) prev[SELECTED] = false;\n      this.dispatchEvent(\n        new DOMEvent(\"change\", {\n          detail: {\n            prev,\n            current: this.selected\n          },\n          trigger\n        })\n      );\n    }\n  }\n}\n\nclass AudioTrackList extends SelectList {\n}\n\nfunction round(num, decimalPlaces = 2) {\n  return Number(num.toFixed(decimalPlaces));\n}\nfunction getNumberOfDecimalPlaces(num) {\n  return String(num).split(\".\")[1]?.length ?? 0;\n}\nfunction clampNumber(min, value, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction isEventInside(el, event) {\n  const target = event.composedPath()[0];\n  return isDOMNode(target) && el.contains(target);\n}\nconst rafJobs = /* @__PURE__ */ new Set();\nif (!IS_SERVER) {\n  let processJobs = function() {\n    for (const job of rafJobs) {\n      try {\n        job();\n      } catch (e) {\n        console.error(`[vidstack] failed job:\n\n${e}`);\n      }\n    }\n    window.requestAnimationFrame(processJobs);\n  };\n  processJobs();\n}\nfunction scheduleRafJob(job) {\n  rafJobs.add(job);\n  return () => rafJobs.delete(job);\n}\nfunction setAttributeIfEmpty(target, name, value) {\n  if (!target.hasAttribute(name)) target.setAttribute(name, value);\n}\nfunction setARIALabel(target, $label) {\n  if (target.hasAttribute(\"aria-label\") || target.hasAttribute(\"data-no-label\")) return;\n  if (!isFunction($label)) {\n    setAttribute(target, \"aria-label\", $label);\n    return;\n  }\n  function updateAriaDescription() {\n    setAttribute(target, \"aria-label\", $label());\n  }\n  if (IS_SERVER) updateAriaDescription();\n  else effect(updateAriaDescription);\n}\nfunction isElementVisible(el) {\n  const style = getComputedStyle(el);\n  return style.display !== \"none\" && parseInt(style.opacity) > 0;\n}\nfunction checkVisibility(el) {\n  return !!el && (\"checkVisibility\" in el ? el.checkVisibility({ checkOpacity: true, checkVisibilityCSS: true }) : isElementVisible(el));\n}\nfunction observeVisibility(el, callback) {\n  return scheduleRafJob(() => callback(checkVisibility(el)));\n}\nfunction isElementParent(owner, node, test) {\n  while (node) {\n    if (node === owner) {\n      return true;\n    } else if (test?.(node)) {\n      break;\n    } else {\n      node = node.parentElement;\n    }\n  }\n  return false;\n}\nfunction onPress(target, handler) {\n  return new EventsController(target).add(\"pointerup\", (event) => {\n    if (event.button === 0 && !event.defaultPrevented) handler(event);\n  }).add(\"keydown\", (event) => {\n    if (isKeyboardClick(event)) handler(event);\n  });\n}\nfunction isTouchPinchEvent(event) {\n  return isTouchEvent(event) && (event.touches.length > 1 || event.changedTouches.length > 1);\n}\nfunction requestScopedAnimationFrame(callback) {\n  if (IS_SERVER) return callback();\n  let scope = getScope(), id = window.requestAnimationFrame(() => {\n    scoped(callback, scope);\n    id = -1;\n  });\n  return () => void window.cancelAnimationFrame(id);\n}\nfunction autoPlacement(el, trigger, placement, {\n  offsetVarName,\n  xOffset,\n  yOffset,\n  ...options\n}) {\n  if (!el) return;\n  const floatingPlacement = placement.replace(\" \", \"-\").replace(\"-center\", \"\");\n  setStyle(el, \"visibility\", !trigger ? \"hidden\" : null);\n  if (!trigger) return;\n  let isTop = placement.includes(\"top\");\n  const negateX = (x) => placement.includes(\"left\") ? `calc(-1 * ${x})` : x, negateY = (y) => isTop ? `calc(-1 * ${y})` : y;\n  return autoUpdate(trigger, el, () => {\n    computePosition(trigger, el, {\n      placement: floatingPlacement,\n      middleware: [\n        ...options.middleware ?? [],\n        flip({ fallbackAxisSideDirection: \"start\", crossAxis: false }),\n        shift()\n      ],\n      ...options\n    }).then(({ x, y, middlewareData }) => {\n      const hasFlipped = !!middlewareData.flip?.index;\n      isTop = placement.includes(hasFlipped ? \"bottom\" : \"top\");\n      el.setAttribute(\n        \"data-placement\",\n        hasFlipped ? placement.startsWith(\"top\") ? placement.replace(\"top\", \"bottom\") : placement.replace(\"bottom\", \"top\") : placement\n      );\n      Object.assign(el.style, {\n        top: `calc(${y + \"px\"} + ${negateY(\n          yOffset ? yOffset + \"px\" : `var(--${offsetVarName}-y-offset, 0px)`\n        )})`,\n        left: `calc(${x + \"px\"} + ${negateX(\n          xOffset ? xOffset + \"px\" : `var(--${offsetVarName}-x-offset, 0px)`\n        )})`\n      });\n    });\n  });\n}\nfunction hasAnimation(el) {\n  const styles = getComputedStyle(el);\n  return styles.animationName !== \"none\";\n}\nfunction isHTMLElement(el) {\n  return el instanceof HTMLElement;\n}\n\nclass NativeTextRenderer {\n  priority = 0;\n  #display = true;\n  #video = null;\n  #track = null;\n  #tracks = /* @__PURE__ */ new Set();\n  canRender(_, video) {\n    return !!video;\n  }\n  attach(video) {\n    this.#video = video;\n    if (video) video.textTracks.onchange = this.#onChange.bind(this);\n  }\n  addTrack(track) {\n    this.#tracks.add(track);\n    this.#attachTrack(track);\n  }\n  removeTrack(track) {\n    track[TextTrackSymbol.native]?.remove?.();\n    track[TextTrackSymbol.native] = null;\n    this.#tracks.delete(track);\n  }\n  changeTrack(track) {\n    const current = track?.[TextTrackSymbol.native];\n    if (current && current.track.mode !== \"showing\") {\n      current.track.mode = \"showing\";\n    }\n    this.#track = track;\n  }\n  setDisplay(display) {\n    this.#display = display;\n    this.#onChange();\n  }\n  detach() {\n    if (this.#video) this.#video.textTracks.onchange = null;\n    for (const track of this.#tracks) this.removeTrack(track);\n    this.#tracks.clear();\n    this.#video = null;\n    this.#track = null;\n  }\n  #attachTrack(track) {\n    if (!this.#video) return;\n    const el = track[TextTrackSymbol.native] ??= this.#createTrackElement(track);\n    if (isHTMLElement(el)) {\n      this.#video.append(el);\n      el.track.mode = el.default ? \"showing\" : \"disabled\";\n    }\n  }\n  #createTrackElement(track) {\n    const el = document.createElement(\"track\"), isDefault = track.default || track.mode === \"showing\", isSupported = track.src && track.type === \"vtt\";\n    el.id = track.id;\n    el.src = isSupported ? track.src : \"\";\n    el.label = track.label;\n    el.kind = track.kind;\n    el.default = isDefault;\n    track.language && (el.srclang = track.language);\n    if (isDefault && !isSupported) {\n      this.#copyCues(track, el.track);\n    }\n    return el;\n  }\n  #copyCues(track, native) {\n    if (track.src && track.type === \"vtt\" || native.cues?.length) return;\n    for (const cue of track.cues) native.addCue(cue);\n  }\n  #onChange(event) {\n    for (const track of this.#tracks) {\n      const native = track[TextTrackSymbol.native];\n      if (!native) continue;\n      if (!this.#display) {\n        native.track.mode = native.managed ? \"hidden\" : \"disabled\";\n        continue;\n      }\n      const isShowing = native.track.mode === \"showing\";\n      if (isShowing) this.#copyCues(track, native.track);\n      track.setMode(isShowing ? \"showing\" : \"disabled\", event);\n    }\n  }\n}\n\nclass TextRenderers {\n  #video = null;\n  #textTracks;\n  #renderers = [];\n  #media;\n  #nativeDisplay = false;\n  #nativeRenderer = null;\n  #customRenderer = null;\n  constructor(media) {\n    this.#media = media;\n    const textTracks = media.textTracks;\n    this.#textTracks = textTracks;\n    effect(this.#watchControls.bind(this));\n    onDispose(this.#detach.bind(this));\n    new EventsController(textTracks).add(\"add\", this.#onAddTrack.bind(this)).add(\"remove\", this.#onRemoveTrack.bind(this)).add(\"mode-change\", this.#update.bind(this));\n  }\n  #watchControls() {\n    const { nativeControls } = this.#media.$state;\n    this.#nativeDisplay = nativeControls();\n    this.#update();\n  }\n  add(renderer) {\n    this.#renderers.push(renderer);\n    untrack(this.#update.bind(this));\n  }\n  remove(renderer) {\n    renderer.detach();\n    this.#renderers.splice(this.#renderers.indexOf(renderer), 1);\n    untrack(this.#update.bind(this));\n  }\n  /** @internal */\n  attachVideo(video) {\n    requestAnimationFrame(() => {\n      this.#video = video;\n      if (video) {\n        this.#nativeRenderer = new NativeTextRenderer();\n        this.#nativeRenderer.attach(video);\n        for (const track of this.#textTracks) this.#addNativeTrack(track);\n      }\n      this.#update();\n    });\n  }\n  #addNativeTrack(track) {\n    if (!isTrackCaptionKind(track)) return;\n    this.#nativeRenderer?.addTrack(track);\n  }\n  #removeNativeTrack(track) {\n    if (!isTrackCaptionKind(track)) return;\n    this.#nativeRenderer?.removeTrack(track);\n  }\n  #onAddTrack(event) {\n    this.#addNativeTrack(event.detail);\n  }\n  #onRemoveTrack(event) {\n    this.#removeNativeTrack(event.detail);\n  }\n  #update() {\n    const currentTrack = this.#textTracks.selected;\n    if (this.#video && (this.#nativeDisplay || currentTrack?.[TextTrackSymbol.nativeHLS])) {\n      this.#customRenderer?.changeTrack(null);\n      this.#nativeRenderer?.setDisplay(true);\n      this.#nativeRenderer?.changeTrack(currentTrack);\n      return;\n    }\n    this.#nativeRenderer?.setDisplay(false);\n    this.#nativeRenderer?.changeTrack(null);\n    if (!currentTrack) {\n      this.#customRenderer?.changeTrack(null);\n      return;\n    }\n    const customRenderer = this.#renderers.sort((a, b) => a.priority - b.priority).find((renderer) => renderer.canRender(currentTrack, this.#video));\n    if (this.#customRenderer !== customRenderer) {\n      this.#customRenderer?.detach();\n      customRenderer?.attach(this.#video);\n      this.#customRenderer = customRenderer ?? null;\n    }\n    customRenderer?.changeTrack(currentTrack);\n  }\n  #detach() {\n    this.#nativeRenderer?.detach();\n    this.#nativeRenderer = null;\n    this.#customRenderer?.detach();\n    this.#customRenderer = null;\n  }\n}\n\nclass TextTrackList extends List {\n  #canLoad = false;\n  #defaults = {};\n  #storage = null;\n  #preferredLang = null;\n  /** @internal */\n  [TextTrackSymbol.crossOrigin];\n  constructor() {\n    super();\n  }\n  get selected() {\n    const track = this.items.find((t) => t.mode === \"showing\" && isTrackCaptionKind(t));\n    return track ?? null;\n  }\n  get selectedIndex() {\n    const selected = this.selected;\n    return selected ? this.indexOf(selected) : -1;\n  }\n  get preferredLang() {\n    return this.#preferredLang;\n  }\n  set preferredLang(lang) {\n    this.#preferredLang = lang;\n    this.#saveLang(lang);\n  }\n  add(init, trigger) {\n    const isTrack = init instanceof TextTrack, track = isTrack ? init : new TextTrack(init), kind = init.kind === \"captions\" || init.kind === \"subtitles\" ? \"captions\" : init.kind;\n    if (this.#defaults[kind] && init.default) delete init.default;\n    track.addEventListener(\"mode-change\", this.#onTrackModeChangeBind);\n    this[ListSymbol.add](track, trigger);\n    track[TextTrackSymbol.crossOrigin] = this[TextTrackSymbol.crossOrigin];\n    if (this.#canLoad) track[TextTrackSymbol.canLoad]();\n    if (init.default) this.#defaults[kind] = track;\n    this.#selectTracks();\n    return this;\n  }\n  remove(track, trigger) {\n    this.#pendingRemoval = track;\n    if (!this.items.includes(track)) return;\n    if (track === this.#defaults[track.kind]) delete this.#defaults[track.kind];\n    track.mode = \"disabled\";\n    track[TextTrackSymbol.onModeChange] = null;\n    track.removeEventListener(\"mode-change\", this.#onTrackModeChangeBind);\n    this[ListSymbol.remove](track, trigger);\n    this.#pendingRemoval = null;\n    return this;\n  }\n  clear(trigger) {\n    for (const track of [...this.items]) {\n      this.remove(track, trigger);\n    }\n    return this;\n  }\n  getByKind(kind) {\n    const kinds = Array.isArray(kind) ? kind : [kind];\n    return this.items.filter((track) => kinds.includes(track.kind));\n  }\n  /** @internal */\n  [TextTrackSymbol.canLoad]() {\n    if (this.#canLoad) return;\n    for (const track of this.items) track[TextTrackSymbol.canLoad]();\n    this.#canLoad = true;\n    this.#selectTracks();\n  }\n  #selectTracks = functionDebounce(async () => {\n    if (!this.#canLoad) return;\n    if (!this.#preferredLang && this.#storage) {\n      this.#preferredLang = await this.#storage.getLang();\n    }\n    const showCaptions = await this.#storage?.getCaptions(), kinds = [\n      [\"captions\", \"subtitles\"],\n      \"chapters\",\n      \"descriptions\",\n      \"metadata\"\n    ];\n    for (const kind of kinds) {\n      const tracks = this.getByKind(kind);\n      if (tracks.find((t) => t.mode === \"showing\")) continue;\n      const preferredTrack = this.#preferredLang ? tracks.find((track2) => track2.language === this.#preferredLang) : null;\n      const defaultTrack = isArray(kind) ? this.#defaults[kind.find((kind2) => this.#defaults[kind2]) || \"\"] : this.#defaults[kind];\n      const track = preferredTrack ?? defaultTrack, isCaptionsKind = track && isTrackCaptionKind(track);\n      if (track && (!isCaptionsKind || showCaptions !== false)) {\n        track.mode = \"showing\";\n        if (isCaptionsKind) this.#saveCaptionsTrack(track);\n      }\n    }\n  }, 300);\n  #pendingRemoval = null;\n  #onTrackModeChangeBind = this.#onTrackModeChange.bind(this);\n  #onTrackModeChange(event) {\n    const track = event.detail;\n    if (this.#storage && isTrackCaptionKind(track) && track !== this.#pendingRemoval) {\n      this.#saveCaptionsTrack(track);\n    }\n    if (track.mode === \"showing\") {\n      const kinds = isTrackCaptionKind(track) ? [\"captions\", \"subtitles\"] : [track.kind];\n      for (const t of this.items) {\n        if (t.mode === \"showing\" && t != track && kinds.includes(t.kind)) {\n          t.mode = \"disabled\";\n        }\n      }\n    }\n    this.dispatchEvent(\n      new DOMEvent(\"mode-change\", {\n        detail: event.detail,\n        trigger: event\n      })\n    );\n  }\n  #saveCaptionsTrack(track) {\n    if (track.mode !== \"disabled\") {\n      this.#saveLang(track.language);\n    }\n    this.#storage?.setCaptions?.(track.mode === \"showing\");\n  }\n  #saveLang(lang) {\n    this.#storage?.setLang?.(this.#preferredLang = lang);\n  }\n  setStorage(storage) {\n    this.#storage = storage;\n  }\n}\n\nconst SET_AUTO = Symbol(\"SET_AUTO_QUALITY\" ), ENABLE_AUTO = Symbol(\"ENABLE_AUTO_QUALITY\" );\nconst QualitySymbol = {\n  setAuto: SET_AUTO,\n  enableAuto: ENABLE_AUTO\n};\n\nclass VideoQualityList extends SelectList {\n  #auto = false;\n  /**\n   * Configures quality switching:\n   *\n   * - `current`: Trigger an immediate quality level switch. This will abort the current fragment\n   * request if any, flush the whole buffer, and fetch fragment matching with current position\n   * and requested quality level.\n   *\n   * - `next`: Trigger a quality level switch for next fragment. This could eventually flush\n   * already buffered next fragment.\n   *\n   * - `load`: Set quality level for next loaded fragment.\n   *\n   * @see {@link https://www.vidstack.io/docs/player/api/video-quality#switch}\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#quality-switch-control-api}\n   */\n  switch = \"current\";\n  /**\n   * Whether automatic quality selection is enabled.\n   */\n  get auto() {\n    return this.#auto || this.readonly;\n  }\n  /** @internal */\n  [QualitySymbol.enableAuto];\n  /** @internal */\n  [ListSymbol.onUserSelect]() {\n    this[QualitySymbol.setAuto](false);\n  }\n  /** @internal */\n  [ListSymbol.onReset](trigger) {\n    this[QualitySymbol.enableAuto] = void 0;\n    this[QualitySymbol.setAuto](false, trigger);\n  }\n  /**\n   * Request automatic quality selection (if supported). This will be a no-op if the list is\n   * `readonly` as that already implies auto-selection.\n   */\n  autoSelect(trigger) {\n    if (this.readonly || this.#auto || !this[QualitySymbol.enableAuto]) return;\n    this[QualitySymbol.enableAuto]?.(trigger);\n    this[QualitySymbol.setAuto](true, trigger);\n  }\n  getBySrc(src) {\n    return this.items.find((quality) => quality.src === src);\n  }\n  /** @internal */\n  [QualitySymbol.setAuto](auto, trigger) {\n    if (this.#auto === auto) return;\n    this.#auto = auto;\n    this.dispatchEvent(\n      new DOMEvent(\"auto-change\", {\n        detail: auto,\n        trigger\n      })\n    );\n  }\n}\n\nfunction sortVideoQualities(qualities, desc) {\n  return [...qualities].sort(desc ? compareVideoQualityDesc : compareVideoQualityAsc);\n}\nfunction compareVideoQualityAsc(a, b) {\n  return a.height === b.height ? (a.bitrate ?? 0) - (b.bitrate ?? 0) : a.height - b.height;\n}\nfunction compareVideoQualityDesc(a, b) {\n  return b.height === a.height ? (b.bitrate ?? 0) - (a.bitrate ?? 0) : b.height - a.height;\n}\n\nfunction isAudioProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"AUDIO\";\n}\nfunction isVideoProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"VIDEO\";\n}\nfunction isHLSProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"HLS\";\n}\nfunction isDASHProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"DASH\";\n}\nfunction isYouTubeProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"YOUTUBE\";\n}\nfunction isVimeoProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"VIMEO\";\n}\nfunction isGoogleCastProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"GOOGLE_CAST\";\n}\nfunction isHTMLAudioElement(element) {\n  return !IS_SERVER && element instanceof HTMLAudioElement;\n}\nfunction isHTMLVideoElement(element) {\n  return !IS_SERVER && element instanceof HTMLVideoElement;\n}\nfunction isHTMLMediaElement(element) {\n  return isHTMLAudioElement(element) || isHTMLVideoElement(element);\n}\nfunction isHTMLIFrameElement(element) {\n  return !IS_SERVER && element instanceof HTMLIFrameElement;\n}\n\nclass MediaPlayerController extends ViewController {\n}\n\nconst MEDIA_KEY_SHORTCUTS = {\n  togglePaused: \"k Space\",\n  toggleMuted: \"m\",\n  toggleFullscreen: \"f\",\n  togglePictureInPicture: \"i\",\n  toggleCaptions: \"c\",\n  seekBackward: \"j J ArrowLeft\",\n  seekForward: \"l L ArrowRight\",\n  volumeUp: \"ArrowUp\",\n  volumeDown: \"ArrowDown\",\n  speedUp: \">\",\n  slowDown: \"<\"\n};\nconst MODIFIER_KEYS = /* @__PURE__ */ new Set([\"Shift\", \"Alt\", \"Meta\", \"Ctrl\"]), BUTTON_SELECTORS = 'button, [role=\"button\"]', IGNORE_SELECTORS = 'input, textarea, select, [contenteditable], [role^=\"menuitem\"], [role=\"timer\"]';\nclass MediaKeyboardController extends MediaPlayerController {\n  #media;\n  constructor(media) {\n    super();\n    this.#media = media;\n  }\n  onConnect() {\n    effect(this.#onTargetChange.bind(this));\n  }\n  #onTargetChange() {\n    const { keyDisabled, keyTarget } = this.$props;\n    if (keyDisabled()) return;\n    const target = keyTarget() === \"player\" ? this.el : document, $active = signal(false);\n    if (target === this.el) {\n      new EventsController(this.el).add(\"focusin\", () => $active.set(true)).add(\"focusout\", (event) => {\n        if (!this.el.contains(event.target)) $active.set(false);\n      });\n    } else {\n      if (!peek($active)) $active.set(document.querySelector(\"[data-media-player]\") === this.el);\n      listenEvent(document, \"focusin\", (event) => {\n        const activePlayer = event.composedPath().find((el) => el instanceof Element && el.localName === \"media-player\");\n        if (activePlayer !== void 0) $active.set(this.el === activePlayer);\n      });\n    }\n    effect(() => {\n      if (!$active()) return;\n      new EventsController(target).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this)).add(\"keydown\", this.#onPreventVideoKeys.bind(this), { capture: true });\n    });\n  }\n  #onKeyUp(event) {\n    const focusedEl = document.activeElement;\n    if (!event.key || !this.$state.canSeek() || focusedEl?.matches(IGNORE_SELECTORS)) {\n      return;\n    }\n    let { method, value } = this.#getMatchingMethod(event);\n    if (!isString(value) && !isArray(value)) {\n      value?.onKeyUp?.({\n        event,\n        player: this.#media.player,\n        remote: this.#media.remote\n      });\n      value?.callback?.(event, this.#media.remote);\n      return;\n    }\n    if (method?.startsWith(\"seek\")) {\n      event.preventDefault();\n      event.stopPropagation();\n      if (this.#timeSlider) {\n        this.#forwardTimeKeyboardEvent(event, method === \"seekForward\");\n        this.#timeSlider = null;\n      } else {\n        this.#media.remote.seek(this.#seekTotal, event);\n        this.#seekTotal = void 0;\n      }\n    }\n    if (method?.startsWith(\"volume\")) {\n      const volumeSlider = this.el.querySelector(\"[data-media-volume-slider]\");\n      volumeSlider?.dispatchEvent(\n        new KeyboardEvent(\"keyup\", {\n          key: method === \"volumeUp\" ? \"Up\" : \"Down\",\n          shiftKey: event.shiftKey,\n          trigger: event\n        })\n      );\n    }\n  }\n  #onKeyDown(event) {\n    if (!event.key || MODIFIER_KEYS.has(event.key)) return;\n    const focusedEl = document.activeElement;\n    if (focusedEl?.matches(IGNORE_SELECTORS) || isKeyboardClick(event) && focusedEl?.matches(BUTTON_SELECTORS)) {\n      return;\n    }\n    let { method, value } = this.#getMatchingMethod(event), isNumberPress = !event.metaKey && /^[0-9]$/.test(event.key);\n    if (!isString(value) && !isArray(value) && !isNumberPress) {\n      value?.onKeyDown?.({\n        event,\n        player: this.#media.player,\n        remote: this.#media.remote\n      });\n      value?.callback?.(event, this.#media.remote);\n      return;\n    }\n    if (!method && isNumberPress) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.#media.remote.seek(this.$state.duration() / 10 * Number(event.key), event);\n      return;\n    }\n    if (!method) return;\n    event.preventDefault();\n    event.stopPropagation();\n    switch (method) {\n      case \"seekForward\":\n      case \"seekBackward\":\n        this.#seeking(event, method, method === \"seekForward\");\n        break;\n      case \"volumeUp\":\n      case \"volumeDown\":\n        const volumeSlider = this.el.querySelector(\"[data-media-volume-slider]\");\n        if (volumeSlider) {\n          volumeSlider.dispatchEvent(\n            new KeyboardEvent(\"keydown\", {\n              key: method === \"volumeUp\" ? \"Up\" : \"Down\",\n              shiftKey: event.shiftKey,\n              trigger: event\n            })\n          );\n        } else {\n          const value2 = event.shiftKey ? 0.1 : 0.05;\n          this.#media.remote.changeVolume(\n            this.$state.volume() + (method === \"volumeUp\" ? +value2 : -value2),\n            event\n          );\n        }\n        break;\n      case \"toggleFullscreen\":\n        this.#media.remote.toggleFullscreen(\"prefer-media\", event);\n        break;\n      case \"speedUp\":\n      case \"slowDown\":\n        const playbackRate = this.$state.playbackRate();\n        this.#media.remote.changePlaybackRate(\n          Math.max(0.25, Math.min(2, playbackRate + (method === \"speedUp\" ? 0.25 : -0.25))),\n          event\n        );\n        break;\n      default:\n        this.#media.remote[method]?.(event);\n    }\n    this.$state.lastKeyboardAction.set({\n      action: method,\n      event\n    });\n  }\n  #onPreventVideoKeys(event) {\n    if (isHTMLMediaElement(event.target) && this.#getMatchingMethod(event).method) {\n      event.preventDefault();\n    }\n  }\n  #getMatchingMethod(event) {\n    const keyShortcuts = {\n      ...this.$props.keyShortcuts(),\n      ...this.#media.ariaKeys\n    };\n    const method = Object.keys(keyShortcuts).find((method2) => {\n      const value = keyShortcuts[method2], keys = isArray(value) ? value.join(\" \") : isString(value) ? value : value?.keys;\n      const combinations = (isArray(keys) ? keys : keys?.split(\" \"))?.map(\n        (key) => replaceSymbolKeys(key).replace(/Control/g, \"Ctrl\").split(\"+\")\n      );\n      return combinations?.some((combo) => {\n        const modifierKeys = new Set(combo.filter((key) => MODIFIER_KEYS.has(key)));\n        for (const modKey of MODIFIER_KEYS) {\n          const modKeyProp = modKey.toLowerCase() + \"Key\";\n          if (!modifierKeys.has(modKey) && event[modKeyProp]) {\n            return false;\n          }\n        }\n        return combo.every((key) => {\n          return MODIFIER_KEYS.has(key) ? event[key.toLowerCase() + \"Key\"] : event.key === key.replace(\"Space\", \" \");\n        });\n      });\n    });\n    return {\n      method,\n      value: method ? keyShortcuts[method] : null\n    };\n  }\n  #seekTotal;\n  #calcSeekAmount(event, type) {\n    const seekBy = event.shiftKey ? 10 : 5;\n    return this.#seekTotal = Math.max(\n      0,\n      Math.min(\n        (this.#seekTotal ?? this.$state.currentTime()) + (type === \"seekForward\" ? +seekBy : -seekBy),\n        this.$state.duration()\n      )\n    );\n  }\n  #timeSlider = null;\n  #forwardTimeKeyboardEvent(event, forward) {\n    this.#timeSlider?.dispatchEvent(\n      new KeyboardEvent(event.type, {\n        key: !forward ? \"Left\" : \"Right\",\n        shiftKey: event.shiftKey,\n        trigger: event\n      })\n    );\n  }\n  #seeking(event, type, forward) {\n    if (!this.$state.canSeek()) return;\n    if (!this.#timeSlider) {\n      this.#timeSlider = this.el.querySelector(\"[data-media-time-slider]\");\n    }\n    if (this.#timeSlider) {\n      this.#forwardTimeKeyboardEvent(event, forward);\n    } else {\n      this.#media.remote.seeking(this.#calcSeekAmount(event, type), event);\n    }\n  }\n}\nconst SYMBOL_KEY_MAP = [\"!\", \"@\", \"#\", \"$\", \"%\", \"^\", \"&\", \"*\", \"(\", \")\"];\nfunction replaceSymbolKeys(key) {\n  return key.replace(/Shift\\+(\\d)/g, (_, num) => SYMBOL_KEY_MAP[num - 1]);\n}\n\nclass ARIAKeyShortcuts extends ViewController {\n  #shortcut;\n  constructor(shortcut) {\n    super();\n    this.#shortcut = shortcut;\n  }\n  onAttach(el) {\n    const { $props, ariaKeys } = useMediaContext(), keys = el.getAttribute(\"aria-keyshortcuts\");\n    if (keys) {\n      ariaKeys[this.#shortcut] = keys;\n      if (!IS_SERVER) {\n        onDispose(() => {\n          delete ariaKeys[this.#shortcut];\n        });\n      }\n      return;\n    }\n    const shortcuts = $props.keyShortcuts()[this.#shortcut];\n    if (shortcuts) {\n      const keys2 = isArray(shortcuts) ? shortcuts.join(\" \") : isString(shortcuts) ? shortcuts : shortcuts?.keys;\n      el.setAttribute(\"aria-keyshortcuts\", isArray(keys2) ? keys2.join(\" \") : keys2);\n    }\n  }\n}\n\nclass MediaControls extends MediaPlayerController {\n  #idleTimer = -2;\n  #pausedTracking = false;\n  #hideOnMouseLeave = signal(false);\n  #isMouseOutside = signal(false);\n  #focusedItem = null;\n  #canIdle = signal(true);\n  /**\n   * The default amount of delay in milliseconds while media playback is progressing without user\n   * activity to indicate an idle state (i.e., hide controls).\n   *\n   * @defaultValue 2000\n   */\n  defaultDelay = 2e3;\n  /**\n   * Whether controls can hide after a delay in user interaction. If this is false, controls will\n   * not hide and be user controlled.\n   */\n  get canIdle() {\n    return this.#canIdle();\n  }\n  set canIdle(canIdle) {\n    this.#canIdle.set(canIdle);\n  }\n  /**\n   * Whether controls visibility should be toggled when the mouse enters and leaves the player\n   * container.\n   *\n   * @defaultValue false\n   */\n  get hideOnMouseLeave() {\n    const { hideControlsOnMouseLeave } = this.$props;\n    return this.#hideOnMouseLeave() || hideControlsOnMouseLeave();\n  }\n  set hideOnMouseLeave(hide) {\n    this.#hideOnMouseLeave.set(hide);\n  }\n  /**\n   * Whether media controls are currently visible.\n   */\n  get showing() {\n    return this.$state.controlsVisible();\n  }\n  /**\n   * Show controls.\n   */\n  show(delay = 0, trigger) {\n    this.#clearIdleTimer();\n    if (!this.#pausedTracking) {\n      this.#changeVisibility(true, delay, trigger);\n    }\n  }\n  /**\n   * Hide controls.\n   */\n  hide(delay = this.defaultDelay, trigger) {\n    this.#clearIdleTimer();\n    if (!this.#pausedTracking) {\n      this.#changeVisibility(false, delay, trigger);\n    }\n  }\n  /**\n   * Whether all idle tracking on controls should be paused until resumed again.\n   */\n  pause(trigger) {\n    this.#pausedTracking = true;\n    this.#clearIdleTimer();\n    this.#changeVisibility(true, 0, trigger);\n  }\n  resume(trigger) {\n    this.#pausedTracking = false;\n    if (this.$state.paused()) return;\n    this.#changeVisibility(false, this.defaultDelay, trigger);\n  }\n  onConnect() {\n    effect(this.#init.bind(this));\n  }\n  #init() {\n    const { viewType } = this.$state;\n    if (!this.el || !this.#canIdle()) return;\n    if (viewType() === \"audio\") {\n      this.show();\n      return;\n    }\n    effect(this.#watchMouse.bind(this));\n    effect(this.#watchPaused.bind(this));\n    const onPlay = this.#onPlay.bind(this), onPause = this.#onPause.bind(this), onEnd = this.#onEnd.bind(this);\n    new EventsController(this.el).add(\"can-play\", (event) => this.show(0, event)).add(\"play\", onPlay).add(\"pause\", onPause).add(\"end\", onEnd).add(\"auto-play-fail\", onPause);\n  }\n  #watchMouse() {\n    if (!this.el) return;\n    const { started, pointer, paused } = this.$state;\n    if (!started() || pointer() !== \"fine\") return;\n    const events = new EventsController(this.el), shouldHideOnMouseLeave = this.hideOnMouseLeave;\n    if (!shouldHideOnMouseLeave || !this.#isMouseOutside()) {\n      effect(() => {\n        if (!paused()) events.add(\"pointermove\", this.#onStopIdle.bind(this));\n      });\n    }\n    if (shouldHideOnMouseLeave) {\n      events.add(\"mouseenter\", this.#onMouseEnter.bind(this)).add(\"mouseleave\", this.#onMouseLeave.bind(this));\n    }\n  }\n  #watchPaused() {\n    const { paused, started, autoPlayError } = this.$state;\n    if (paused() || autoPlayError() && !started()) return;\n    const onStopIdle = this.#onStopIdle.bind(this);\n    effect(() => {\n      if (!this.el) return;\n      const pointer = this.$state.pointer(), isTouch = pointer === \"coarse\", events = new EventsController(this.el), eventTypes = [isTouch ? \"touchend\" : \"pointerup\", \"keydown\"];\n      for (const eventType of eventTypes) {\n        events.add(eventType, onStopIdle, { passive: false });\n      }\n    });\n  }\n  #onPlay(event) {\n    if (event.triggers.hasType(\"ended\")) return;\n    this.show(0, event);\n    this.hide(void 0, event);\n  }\n  #onPause(event) {\n    this.show(0, event);\n  }\n  #onEnd(event) {\n    const { loop } = this.$state;\n    if (loop()) this.hide(0, event);\n  }\n  #onMouseEnter(event) {\n    this.#isMouseOutside.set(false);\n    this.show(0, event);\n    this.hide(void 0, event);\n  }\n  #onMouseLeave(event) {\n    this.#isMouseOutside.set(true);\n    this.hide(0, event);\n  }\n  #clearIdleTimer() {\n    window.clearTimeout(this.#idleTimer);\n    this.#idleTimer = -1;\n  }\n  #onStopIdle(event) {\n    if (\n      // @ts-expect-error\n      event.MEDIA_GESTURE || this.#pausedTracking || isTouchPinchEvent(event)\n    ) {\n      return;\n    }\n    if (isKeyboardEvent(event)) {\n      if (event.key === \"Escape\") {\n        this.el?.focus();\n        this.#focusedItem = null;\n      } else if (this.#focusedItem) {\n        event.preventDefault();\n        requestAnimationFrame(() => {\n          this.#focusedItem?.focus();\n          this.#focusedItem = null;\n        });\n      }\n    }\n    this.show(0, event);\n    this.hide(this.defaultDelay, event);\n  }\n  #changeVisibility(visible, delay, trigger) {\n    if (delay === 0) {\n      this.#onChange(visible, trigger);\n      return;\n    }\n    this.#idleTimer = window.setTimeout(() => {\n      if (!this.scope) return;\n      this.#onChange(visible && !this.#pausedTracking, trigger);\n    }, delay);\n  }\n  #onChange(visible, trigger) {\n    if (this.$state.controlsVisible() === visible) return;\n    this.$state.controlsVisible.set(visible);\n    if (!visible && document.activeElement && this.el?.contains(document.activeElement)) {\n      this.#focusedItem = document.activeElement;\n      requestAnimationFrame(() => {\n        this.el?.focus({ preventScroll: true });\n      });\n    }\n    this.dispatch(\"controls-change\", {\n      detail: visible,\n      trigger\n    });\n  }\n}\n\nconst CAN_FULLSCREEN = fscreen.fullscreenEnabled;\nclass FullscreenController extends ViewController {\n  /**\n   * Tracks whether we're the active fullscreen event listener. Fullscreen events can only be\n   * listened to globally on the document so we need to know if they relate to the current host\n   * element or not.\n   */\n  #listening = false;\n  #active = false;\n  get active() {\n    return this.#active;\n  }\n  get supported() {\n    return CAN_FULLSCREEN;\n  }\n  onConnect() {\n    new EventsController(fscreen).add(\"fullscreenchange\", this.#onChange.bind(this)).add(\"fullscreenerror\", this.#onError.bind(this));\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  async #onDisconnect() {\n    if (CAN_FULLSCREEN) await this.exit();\n  }\n  #onChange(event) {\n    const active = isFullscreen(this.el);\n    if (active === this.#active) return;\n    if (!active) this.#listening = false;\n    this.#active = active;\n    this.dispatch(\"fullscreen-change\", { detail: active, trigger: event });\n  }\n  #onError(event) {\n    if (!this.#listening) return;\n    this.dispatch(\"fullscreen-error\", { detail: null, trigger: event });\n    this.#listening = false;\n  }\n  async enter() {\n    try {\n      this.#listening = true;\n      if (!this.el || isFullscreen(this.el)) return;\n      assertFullscreenAPI();\n      return fscreen.requestFullscreen(this.el);\n    } catch (error) {\n      this.#listening = false;\n      throw error;\n    }\n  }\n  async exit() {\n    if (!this.el || !isFullscreen(this.el)) return;\n    assertFullscreenAPI();\n    return fscreen.exitFullscreen();\n  }\n}\nfunction canFullscreen() {\n  return CAN_FULLSCREEN;\n}\nfunction isFullscreen(host) {\n  if (fscreen.fullscreenElement === host) return true;\n  try {\n    return host.matches(\n      // @ts-expect-error - `fullscreenPseudoClass` is missing from `@types/fscreen`.\n      fscreen.fullscreenPseudoClass\n    );\n  } catch (error) {\n    return false;\n  }\n}\nfunction assertFullscreenAPI() {\n  if (CAN_FULLSCREEN) return;\n  throw Error(\n    \"[vidstack] fullscreen API is not enabled or supported in this environment\" \n  );\n}\n\nclass ScreenOrientationController extends ViewController {\n  #type = signal(this.#getScreenOrientation());\n  #locked = signal(false);\n  #currentLock;\n  /**\n   * The current screen orientation type.\n   *\n   * @signal\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation}\n   * @see https://w3c.github.io/screen-orientation/#screen-orientation-types-and-locks\n   */\n  get type() {\n    return this.#type();\n  }\n  /**\n   * Whether the screen orientation is currently locked.\n   *\n   * @signal\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation}\n   * @see https://w3c.github.io/screen-orientation/#screen-orientation-types-and-locks\n   */\n  get locked() {\n    return this.#locked();\n  }\n  /**\n   * Whether the viewport is in a portrait orientation.\n   *\n   * @signal\n   */\n  get portrait() {\n    return this.#type().startsWith(\"portrait\");\n  }\n  /**\n   * Whether the viewport is in a landscape orientation.\n   *\n   * @signal\n   */\n  get landscape() {\n    return this.#type().startsWith(\"landscape\");\n  }\n  /**\n   * Whether the native Screen Orientation API is available.\n   */\n  static supported = canOrientScreen();\n  /**\n   * Whether the native Screen Orientation API is available.\n   */\n  get supported() {\n    return ScreenOrientationController.supported;\n  }\n  onConnect() {\n    if (this.supported) {\n      listenEvent(screen.orientation, \"change\", this.#onOrientationChange.bind(this));\n    } else {\n      const query = window.matchMedia(\"(orientation: landscape)\");\n      query.onchange = this.#onOrientationChange.bind(this);\n      onDispose(() => query.onchange = null);\n    }\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  async #onDisconnect() {\n    if (this.supported && this.#locked()) await this.unlock();\n  }\n  #onOrientationChange(event) {\n    this.#type.set(this.#getScreenOrientation());\n    this.dispatch(\"orientation-change\", {\n      detail: {\n        orientation: peek(this.#type),\n        lock: this.#currentLock\n      },\n      trigger: event\n    });\n  }\n  /**\n   * Locks the orientation of the screen to the desired orientation type using the\n   * Screen Orientation API.\n   *\n   * @param lockType - The screen lock orientation type.\n   * @throws Error - If screen orientation API is unavailable.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation}\n   * @see {@link https://w3c.github.io/screen-orientation}\n   */\n  async lock(lockType) {\n    if (peek(this.#locked) || this.#currentLock === lockType) return;\n    this.#assertScreenOrientationAPI();\n    await screen.orientation.lock(lockType);\n    this.#locked.set(true);\n    this.#currentLock = lockType;\n  }\n  /**\n   * Unlocks the orientation of the screen to it's default state using the Screen Orientation\n   * API. This method will throw an error if the API is unavailable.\n   *\n   * @throws Error - If screen orientation API is unavailable.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation}\n   * @see {@link https://w3c.github.io/screen-orientation}\n   */\n  async unlock() {\n    if (!peek(this.#locked)) return;\n    this.#assertScreenOrientationAPI();\n    this.#currentLock = void 0;\n    await screen.orientation.unlock();\n    this.#locked.set(false);\n  }\n  #assertScreenOrientationAPI() {\n    if (this.supported) return;\n    throw Error(\n      \"[vidstack] screen orientation API is not available\" \n    );\n  }\n  #getScreenOrientation() {\n    if (IS_SERVER) return \"portrait-primary\";\n    if (this.supported) return window.screen.orientation.type;\n    return window.innerWidth >= window.innerHeight ? \"landscape-primary\" : \"portrait-primary\";\n  }\n}\n\nclass AudioProviderLoader {\n  name = \"audio\";\n  target;\n  canPlay(src) {\n    if (!isAudioSrc(src)) return false;\n    return IS_SERVER || !isString(src.src) || src.type === \"?\" || canPlayAudioType(this.target, src.type);\n  }\n  mediaType() {\n    return \"audio\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load audio provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\n        \"[vidstack] `<audio>` element was not found - did you forget to include `<media-provider>`?\"\n      );\n    }\n    return new (await import('./vidstack-CvY7pagE.js')).AudioProvider(this.target, ctx);\n  }\n}\n\nclass VideoProviderLoader {\n  name = \"video\";\n  target;\n  canPlay(src) {\n    if (!isVideoSrc(src)) return false;\n    return IS_SERVER || !isString(src.src) || src.type === \"?\" || canPlayVideoType(this.target, src.type);\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load video provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\n        \"[vidstack] `<video>` element was not found - did you forget to include media provider?\"\n      );\n    }\n    return new (await Promise.resolve().then(function () { return provider$1; })).VideoProvider(this.target, ctx);\n  }\n}\n\nclass HLSProviderLoader extends VideoProviderLoader {\n  static supported = isHLSSupported();\n  name = \"hls\";\n  canPlay(src) {\n    return HLSProviderLoader.supported && isHLSSrc(src);\n  }\n  async load(context) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load hls provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\n        \"[vidstack] `<video>` element was not found - did you forget to include `<media-provider>`?\"\n      );\n    }\n    return new (await import('./vidstack-GNfRj3wa.js')).HLSProvider(this.target, context);\n  }\n}\n\nlet audioContext = null, gainNodes = [], elAudioSources = [];\nfunction getOrCreateAudioCtx() {\n  return audioContext ??= new AudioContext();\n}\nfunction createGainNode() {\n  const audioCtx = getOrCreateAudioCtx(), gainNode = audioCtx.createGain();\n  gainNode.connect(audioCtx.destination);\n  gainNodes.push(gainNode);\n  return gainNode;\n}\nfunction createElementSource(el, gainNode) {\n  const audioCtx = getOrCreateAudioCtx(), src = audioCtx.createMediaElementSource(el);\n  if (gainNode) {\n    src.connect(gainNode);\n  }\n  elAudioSources.push(src);\n  return src;\n}\nfunction destroyGainNode(node) {\n  const idx = gainNodes.indexOf(node);\n  if (idx !== -1) {\n    gainNodes.splice(idx, 1);\n    node.disconnect();\n    freeAudioCtxWhenAllResourcesFreed();\n  }\n}\nfunction destroyElementSource(src) {\n  const idx = elAudioSources.indexOf(src);\n  if (idx !== -1) {\n    elAudioSources.splice(idx, 1);\n    src.disconnect();\n    freeAudioCtxWhenAllResourcesFreed();\n  }\n}\nfunction freeAudioCtxWhenAllResourcesFreed() {\n  if (audioContext && gainNodes.length === 0 && elAudioSources.length === 0) {\n    audioContext.close().then(() => {\n      audioContext = null;\n    });\n  }\n}\n\nclass AudioGain {\n  #media;\n  #onChange;\n  #gainNode = null;\n  #srcAudioNode = null;\n  get currentGain() {\n    return this.#gainNode?.gain?.value ?? null;\n  }\n  get supported() {\n    return true;\n  }\n  constructor(media, onChange) {\n    this.#media = media;\n    this.#onChange = onChange;\n  }\n  setGain(gain) {\n    const currGain = this.currentGain;\n    if (gain === this.currentGain) {\n      return;\n    }\n    if (gain === 1 && currGain !== 1) {\n      this.removeGain();\n      return;\n    }\n    if (!this.#gainNode) {\n      this.#gainNode = createGainNode();\n      if (this.#srcAudioNode) {\n        this.#srcAudioNode.connect(this.#gainNode);\n      }\n    }\n    if (!this.#srcAudioNode) {\n      this.#srcAudioNode = createElementSource(this.#media, this.#gainNode);\n    }\n    this.#gainNode.gain.value = gain;\n    this.#onChange(gain);\n  }\n  removeGain() {\n    if (!this.#gainNode) return;\n    if (this.#srcAudioNode) {\n      this.#srcAudioNode.connect(getOrCreateAudioCtx().destination);\n    }\n    this.#destroyGainNode();\n    this.#onChange(null);\n  }\n  destroy() {\n    this.#destroySrcNode();\n    this.#destroyGainNode();\n  }\n  #destroySrcNode() {\n    if (!this.#srcAudioNode) return;\n    try {\n      destroyElementSource(this.#srcAudioNode);\n    } catch (e) {\n    } finally {\n      this.#srcAudioNode = null;\n    }\n  }\n  #destroyGainNode() {\n    if (!this.#gainNode) return;\n    try {\n      destroyGainNode(this.#gainNode);\n    } catch (e) {\n    } finally {\n      this.#gainNode = null;\n    }\n  }\n}\n\nconst PAGE_EVENTS = [\"focus\", \"blur\", \"visibilitychange\", \"pageshow\", \"pagehide\"];\nclass PageVisibility {\n  #state = signal(determinePageState());\n  #visibility = signal(IS_SERVER ? \"visible\" : document.visibilityState);\n  #safariBeforeUnloadTimeout;\n  connect() {\n    const events = new EventsController(window), handlePageEvent = this.#handlePageEvent.bind(this);\n    for (const eventType of PAGE_EVENTS) {\n      events.add(eventType, handlePageEvent);\n    }\n    if (IS_SAFARI) {\n      events.add(\"beforeunload\", (event) => {\n        this.#safariBeforeUnloadTimeout = setTimeout(() => {\n          if (!(event.defaultPrevented || event.returnValue.length > 0)) {\n            this.#state.set(\"hidden\");\n            this.#visibility.set(\"hidden\");\n          }\n        }, 0);\n      });\n    }\n  }\n  /**\n   * The current page state. Important to note we only account for a subset of page states, as\n   * the rest aren't valuable to the player at the moment.\n   *\n   * - **active:** A page is in the active state if it is visible and has input focus.\n   * - **passive:** A page is in the passive state if it is visible and does not have input focus.\n   * - **hidden:** A page is in the hidden state if it is not visible.\n   *\n   * @see https://developers.google.com/web/updates/2018/07/page-lifecycle-api#states\n   */\n  get pageState() {\n    return this.#state();\n  }\n  /**\n   * The current document visibility state.\n   *\n   * - **visible:** The page content may be at least partially visible. In practice, this means that\n   * the page is the foreground tab of a non-minimized window.\n   * - **hidden:** The page content is not visible to the user. In practice this means that the\n   * document is either a background tab or part of a minimized window, or the OS screen lock is\n   * active.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState\n   */\n  get visibility() {\n    return this.#visibility();\n  }\n  #handlePageEvent(event) {\n    if (IS_SAFARI) window.clearTimeout(this.#safariBeforeUnloadTimeout);\n    if (event.type !== \"blur\" || this.#state() === \"active\") {\n      this.#state.set(determinePageState(event));\n      this.#visibility.set(document.visibilityState == \"hidden\" ? \"hidden\" : \"visible\");\n    }\n  }\n}\nfunction determinePageState(event) {\n  if (IS_SERVER) return \"hidden\";\n  if (event?.type === \"blur\" || document.visibilityState === \"hidden\") return \"hidden\";\n  if (document.hasFocus()) return \"active\";\n  return \"passive\";\n}\n\nclass RAFLoop {\n  #id;\n  #callback;\n  constructor(callback) {\n    this.#callback = callback;\n  }\n  start() {\n    if (!isUndefined(this.#id)) return;\n    this.#loop();\n  }\n  stop() {\n    if (isNumber(this.#id)) window.cancelAnimationFrame(this.#id);\n    this.#id = void 0;\n  }\n  #loop() {\n    this.#id = window.requestAnimationFrame(() => {\n      if (isUndefined(this.#id)) return;\n      this.#callback();\n      this.#loop();\n    });\n  }\n}\n\nclass HTMLMediaEvents {\n  #provider;\n  #ctx;\n  #waiting = false;\n  #attachedLoadStart = false;\n  #attachedCanPlay = false;\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #pageVisibility = new PageVisibility();\n  #events;\n  get #media() {\n    return this.#provider.media;\n  }\n  constructor(provider, ctx) {\n    this.#provider = provider;\n    this.#ctx = ctx;\n    this.#events = new EventsController(provider.media);\n    this.#attachInitialListeners();\n    this.#pageVisibility.connect();\n    effect(this.#attachTimeUpdate.bind(this));\n    onDispose(this.#onDispose.bind(this));\n  }\n  #onDispose() {\n    this.#attachedLoadStart = false;\n    this.#attachedCanPlay = false;\n    this.#timeRAF.stop();\n    this.#events.abort();\n    this.#devHandlers?.clear();\n  }\n  /**\n   * The `timeupdate` event fires surprisingly infrequently during playback, meaning your progress\n   * bar (or whatever else is synced to the currentTime) moves in a choppy fashion. This helps\n   * resolve that by retrieving time updates in a request animation frame loop.\n   */\n  #lastSeenTime = 0;\n  #seekedTo = -1;\n  #onAnimationFrame() {\n    const newTime = this.#media.currentTime;\n    const didStutter = IS_SAFARI && newTime - this.#seekedTo < 0.35;\n    if (!didStutter && this.#lastSeenTime !== newTime) {\n      this.#updateCurrentTime(newTime);\n      this.#lastSeenTime = newTime;\n    }\n  }\n  #attachInitialListeners() {\n    {\n      this.#ctx.logger?.info(\"attaching initial listeners\");\n    }\n    this.#attachEventListener(\"loadstart\", this.#onLoadStart);\n    this.#attachEventListener(\"abort\", this.#onAbort);\n    this.#attachEventListener(\"emptied\", this.#onEmptied);\n    this.#attachEventListener(\"error\", this.#onError);\n    this.#attachEventListener(\"volumechange\", this.#onVolumeChange);\n    this.#ctx.logger?.debug(\"attached initial media event listeners\");\n  }\n  #attachLoadStartListeners() {\n    if (this.#attachedLoadStart) return;\n    {\n      this.#ctx.logger?.info(\"attaching load start listeners\");\n    }\n    this.#attachEventListener(\"loadeddata\", this.#onLoadedData);\n    this.#attachEventListener(\"loadedmetadata\", this.#onLoadedMetadata);\n    this.#attachEventListener(\"canplay\", this.#onCanPlay);\n    this.#attachEventListener(\"canplaythrough\", this.#onCanPlayThrough);\n    this.#attachEventListener(\"durationchange\", this.#onDurationChange);\n    this.#attachEventListener(\"play\", this.#onPlay);\n    this.#attachEventListener(\"progress\", this.#onProgress);\n    this.#attachEventListener(\"stalled\", this.#onStalled);\n    this.#attachEventListener(\"suspend\", this.#onSuspend);\n    this.#attachEventListener(\"ratechange\", this.#onRateChange);\n    this.#attachedLoadStart = true;\n  }\n  #attachCanPlayListeners() {\n    if (this.#attachedCanPlay) return;\n    {\n      this.#ctx.logger?.info(\"attaching can play listeners\");\n    }\n    this.#attachEventListener(\"pause\", this.#onPause);\n    this.#attachEventListener(\"playing\", this.#onPlaying);\n    this.#attachEventListener(\"seeked\", this.#onSeeked);\n    this.#attachEventListener(\"seeking\", this.#onSeeking);\n    this.#attachEventListener(\"ended\", this.#onEnded);\n    this.#attachEventListener(\"waiting\", this.#onWaiting);\n    this.#attachedCanPlay = true;\n  }\n  #devHandlers = /* @__PURE__ */ new Map() ;\n  #handleDevEvent = this.#onDevEvent.bind(this) ;\n  #attachEventListener(eventType, handler) {\n    this.#devHandlers.set(eventType, handler);\n    this.#events.add(eventType, this.#handleDevEvent );\n  }\n  #onDevEvent(event2) {\n    this.#ctx.logger?.debugGroup(`\\u{1F4FA} provider fired \\`${event2.type}\\``).labelledLog(\"Provider\", this.#provider).labelledLog(\"Event\", event2).labelledLog(\"Media Store\", { ...this.#ctx.$state }).dispatch();\n    this.#devHandlers.get(event2.type)?.call(this, event2);\n  }\n  #updateCurrentTime(time, trigger) {\n    const newTime = Math.min(time, this.#ctx.$state.seekableEnd());\n    this.#ctx.notify(\"time-change\", newTime, trigger);\n  }\n  #onLoadStart(event2) {\n    if (this.#media.networkState === 3) {\n      this.#onAbort(event2);\n      return;\n    }\n    this.#attachLoadStartListeners();\n    this.#ctx.notify(\"load-start\", void 0, event2);\n  }\n  #onAbort(event2) {\n    this.#ctx.notify(\"abort\", void 0, event2);\n  }\n  #onEmptied() {\n    this.#ctx.notify(\"emptied\", void 0, event);\n  }\n  #onLoadedData(event2) {\n    this.#ctx.notify(\"loaded-data\", void 0, event2);\n  }\n  #onLoadedMetadata(event2) {\n    this.#lastSeenTime = 0;\n    this.#seekedTo = -1;\n    this.#attachCanPlayListeners();\n    this.#ctx.notify(\"loaded-metadata\", void 0, event2);\n    if (IS_IOS || IS_SAFARI && isHLSSrc(this.#ctx.$state.source())) {\n      this.#ctx.delegate.ready(this.#getCanPlayDetail(), event2);\n    }\n  }\n  #getCanPlayDetail() {\n    return {\n      provider: peek(this.#ctx.$provider),\n      duration: this.#media.duration,\n      buffered: this.#media.buffered,\n      seekable: this.#media.seekable\n    };\n  }\n  #onPlay(event2) {\n    if (!this.#ctx.$state.canPlay) return;\n    this.#ctx.notify(\"play\", void 0, event2);\n  }\n  #onPause(event2) {\n    if (this.#media.readyState === 1 && !this.#waiting) return;\n    this.#waiting = false;\n    this.#timeRAF.stop();\n    this.#ctx.notify(\"pause\", void 0, event2);\n  }\n  #onCanPlay(event2) {\n    this.#ctx.delegate.ready(this.#getCanPlayDetail(), event2);\n  }\n  #onCanPlayThrough(event2) {\n    if (this.#ctx.$state.started()) return;\n    this.#ctx.notify(\"can-play-through\", this.#getCanPlayDetail(), event2);\n  }\n  #onPlaying(event2) {\n    if (this.#media.paused) return;\n    this.#waiting = false;\n    this.#ctx.notify(\"playing\", void 0, event2);\n    this.#timeRAF.start();\n  }\n  #onStalled(event2) {\n    this.#ctx.notify(\"stalled\", void 0, event2);\n    if (this.#media.readyState < 3) {\n      this.#waiting = true;\n      this.#ctx.notify(\"waiting\", void 0, event2);\n    }\n  }\n  #onWaiting(event2) {\n    if (this.#media.readyState < 3) {\n      this.#waiting = true;\n      this.#ctx.notify(\"waiting\", void 0, event2);\n    }\n  }\n  #onEnded(event2) {\n    this.#timeRAF.stop();\n    this.#updateCurrentTime(this.#media.duration, event2);\n    this.#ctx.notify(\"end\", void 0, event2);\n    if (this.#ctx.$state.loop()) {\n      const hasCustomControls = isNil(this.#media.controls);\n      if (hasCustomControls) this.#media.controls = false;\n    }\n  }\n  #attachTimeUpdate() {\n    const isPaused = this.#ctx.$state.paused(), isPageHidden = this.#pageVisibility.visibility === \"hidden\", shouldListenToTimeUpdates = isPaused || isPageHidden;\n    if (shouldListenToTimeUpdates) {\n      listenEvent(this.#media, \"timeupdate\", this.#onTimeUpdate.bind(this));\n    }\n  }\n  #onTimeUpdate(event2) {\n    this.#updateCurrentTime(this.#media.currentTime, event2);\n  }\n  #onDurationChange(event2) {\n    if (this.#ctx.$state.ended()) {\n      this.#updateCurrentTime(this.#media.duration, event2);\n    }\n    this.#ctx.notify(\"duration-change\", this.#media.duration, event2);\n  }\n  #onVolumeChange(event2) {\n    const detail = {\n      volume: this.#media.volume,\n      muted: this.#media.muted\n    };\n    this.#ctx.notify(\"volume-change\", detail, event2);\n  }\n  #onSeeked(event2) {\n    this.#seekedTo = this.#media.currentTime;\n    this.#updateCurrentTime(this.#media.currentTime, event2);\n    this.#ctx.notify(\"seeked\", this.#media.currentTime, event2);\n    if (Math.trunc(this.#media.currentTime) === Math.trunc(this.#media.duration) && getNumberOfDecimalPlaces(this.#media.duration) > getNumberOfDecimalPlaces(this.#media.currentTime)) {\n      this.#updateCurrentTime(this.#media.duration, event2);\n      if (!this.#media.ended) {\n        this.#ctx.player.dispatch(\n          new DOMEvent(\"media-play-request\", {\n            trigger: event2\n          })\n        );\n      }\n    }\n  }\n  #onSeeking(event2) {\n    this.#ctx.notify(\"seeking\", this.#media.currentTime, event2);\n  }\n  #onProgress(event2) {\n    const detail = {\n      buffered: this.#media.buffered,\n      seekable: this.#media.seekable\n    };\n    this.#ctx.notify(\"progress\", detail, event2);\n  }\n  #onSuspend(event2) {\n    this.#ctx.notify(\"suspend\", void 0, event2);\n  }\n  #onRateChange(event2) {\n    this.#ctx.notify(\"rate-change\", this.#media.playbackRate, event2);\n  }\n  #onError(event2) {\n    const error = this.#media.error;\n    if (!error) return;\n    const detail = {\n      message: error.message,\n      code: error.code,\n      mediaError: error\n    };\n    this.#ctx.notify(\"error\", detail, event2);\n  }\n}\n\nclass NativeAudioTracks {\n  #provider;\n  #ctx;\n  get #nativeTracks() {\n    return this.#provider.media.audioTracks;\n  }\n  constructor(provider, ctx) {\n    this.#provider = provider;\n    this.#ctx = ctx;\n    this.#nativeTracks.onaddtrack = this.#onAddNativeTrack.bind(this);\n    this.#nativeTracks.onremovetrack = this.#onRemoveNativeTrack.bind(this);\n    this.#nativeTracks.onchange = this.#onChangeNativeTrack.bind(this);\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onChangeTrack.bind(this));\n  }\n  #onAddNativeTrack(event) {\n    const nativeTrack = event.track;\n    if (nativeTrack.label === \"\") return;\n    const id = nativeTrack.id.toString() || `native-audio-${this.#ctx.audioTracks.length}`, audioTrack = {\n      id,\n      label: nativeTrack.label,\n      language: nativeTrack.language,\n      kind: nativeTrack.kind,\n      selected: false\n    };\n    this.#ctx.audioTracks[ListSymbol.add](audioTrack, event);\n    if (nativeTrack.enabled) audioTrack.selected = true;\n  }\n  #onRemoveNativeTrack(event) {\n    const track = this.#ctx.audioTracks.getById(event.track.id);\n    if (track) this.#ctx.audioTracks[ListSymbol.remove](track, event);\n  }\n  #onChangeNativeTrack(event) {\n    let enabledTrack = this.#getEnabledNativeTrack();\n    if (!enabledTrack) return;\n    const track = this.#ctx.audioTracks.getById(enabledTrack.id);\n    if (track) this.#ctx.audioTracks[ListSymbol.select](track, true, event);\n  }\n  #getEnabledNativeTrack() {\n    return Array.from(this.#nativeTracks).find((track) => track.enabled);\n  }\n  #onChangeTrack(event) {\n    const { current } = event.detail;\n    if (!current) return;\n    const track = this.#nativeTracks.getTrackById(current.id);\n    if (track) {\n      const prev = this.#getEnabledNativeTrack();\n      if (prev) prev.enabled = false;\n      track.enabled = true;\n    }\n  }\n}\n\nclass HTMLMediaProvider {\n  constructor(media, ctx) {\n    this.media = media;\n    this.ctx = ctx;\n    this.audioGain = new AudioGain(media, (gain) => {\n      this.ctx.notify(\"audio-gain-change\", gain);\n    });\n  }\n  scope = createScope();\n  currentSrc = null;\n  audioGain;\n  setup() {\n    new HTMLMediaEvents(this, this.ctx);\n    if (\"audioTracks\" in this.media) new NativeAudioTracks(this, this.ctx);\n    onDispose(() => {\n      this.audioGain.destroy();\n      this.media.srcObject = null;\n      this.media.removeAttribute(\"src\");\n      for (const source of this.media.querySelectorAll(\"source\")) source.remove();\n      this.media.load();\n    });\n  }\n  get type() {\n    return \"\";\n  }\n  setPlaybackRate(rate) {\n    this.media.playbackRate = rate;\n  }\n  async play() {\n    return this.media.play();\n  }\n  async pause() {\n    return this.media.pause();\n  }\n  setMuted(muted) {\n    this.media.muted = muted;\n  }\n  setVolume(volume) {\n    this.media.volume = volume;\n  }\n  setCurrentTime(time) {\n    this.media.currentTime = time;\n  }\n  setPlaysInline(inline) {\n    setAttribute(this.media, \"playsinline\", inline);\n  }\n  async loadSource({ src, type }, preload) {\n    this.media.preload = preload || \"\";\n    if (isMediaStream(src)) {\n      this.removeSource();\n      this.media.srcObject = src;\n    } else {\n      this.media.srcObject = null;\n      if (isString(src)) {\n        if (type !== \"?\") {\n          this.appendSource({ src, type });\n        } else {\n          this.removeSource();\n          this.media.src = this.#appendMediaFragment(src);\n        }\n      } else {\n        this.removeSource();\n        this.media.src = window.URL.createObjectURL(src);\n      }\n    }\n    this.media.load();\n    this.currentSrc = { src, type };\n  }\n  /**\n   * Append source so it works when requesting AirPlay since hls.js will remove it.\n   */\n  appendSource(src, defaultType) {\n    const prevSource = this.media.querySelector(\"source[data-vds]\"), source = prevSource ?? document.createElement(\"source\");\n    setAttribute(source, \"src\", this.#appendMediaFragment(src.src));\n    setAttribute(source, \"type\", src.type !== \"?\" ? src.type : defaultType);\n    setAttribute(source, \"data-vds\", \"\");\n    if (!prevSource) this.media.append(source);\n  }\n  removeSource() {\n    this.media.querySelector(\"source[data-vds]\")?.remove();\n  }\n  #appendMediaFragment(src) {\n    const { clipStartTime, clipEndTime } = this.ctx.$state, startTime = clipStartTime(), endTime = clipEndTime();\n    if (startTime > 0 && endTime > 0) {\n      return `${src}#t=${startTime},${endTime}`;\n    } else if (startTime > 0) {\n      return `${src}#t=${startTime}`;\n    } else if (endTime > 0) {\n      return `${src}#t=0,${endTime}`;\n    }\n    return src;\n  }\n}\n\nclass HTMLRemotePlaybackAdapter {\n  #media;\n  #ctx;\n  #state;\n  #supported = signal(false);\n  get supported() {\n    return this.#supported();\n  }\n  constructor(media, ctx) {\n    this.#media = media;\n    this.#ctx = ctx;\n    this.#setup();\n  }\n  #setup() {\n    if (IS_SERVER || !this.#media?.remote || !this.canPrompt) return;\n    this.#media.remote.watchAvailability((available) => {\n      this.#supported.set(available);\n    }).catch(() => {\n      this.#supported.set(false);\n    });\n    effect(this.#watchSupported.bind(this));\n  }\n  #watchSupported() {\n    if (!this.#supported()) return;\n    const events = [\"connecting\", \"connect\", \"disconnect\"], onStateChange = this.#onStateChange.bind(this);\n    onStateChange();\n    listenEvent(this.#media, \"playing\", onStateChange);\n    const remoteEvents = new EventsController(this.#media.remote);\n    for (const type of events) {\n      remoteEvents.add(type, onStateChange);\n    }\n  }\n  async prompt() {\n    if (!this.supported) throw Error(\"Not supported on this platform.\");\n    if (this.type === \"airplay\" && this.#media.webkitShowPlaybackTargetPicker) {\n      return this.#media.webkitShowPlaybackTargetPicker();\n    }\n    return this.#media.remote.prompt();\n  }\n  #onStateChange(event) {\n    const state = this.#media.remote.state;\n    if (state === this.#state) return;\n    const detail = { type: this.type, state };\n    this.#ctx.notify(\"remote-playback-change\", detail, event);\n    this.#state = state;\n  }\n}\nclass HTMLAirPlayAdapter extends HTMLRemotePlaybackAdapter {\n  type = \"airplay\";\n  get canPrompt() {\n    return \"WebKitPlaybackTargetAvailabilityEvent\" in window;\n  }\n}\n\nclass NativeHLSTextTracks {\n  #video;\n  #ctx;\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n    video.textTracks.onaddtrack = this.#onAddTrack.bind(this);\n    onDispose(this.#onDispose.bind(this));\n  }\n  #onAddTrack(event) {\n    const nativeTrack = event.track;\n    if (!nativeTrack || findTextTrackElement(this.#video, nativeTrack)) return;\n    const track = new TextTrack({\n      id: nativeTrack.id,\n      kind: nativeTrack.kind,\n      label: nativeTrack.label ?? \"\",\n      language: nativeTrack.language,\n      type: \"vtt\"\n    });\n    track[TextTrackSymbol.native] = { track: nativeTrack };\n    track[TextTrackSymbol.readyState] = 2;\n    track[TextTrackSymbol.nativeHLS] = true;\n    let lastIndex = 0;\n    const onCueChange = (event2) => {\n      if (!nativeTrack.cues) return;\n      for (let i = lastIndex; i < nativeTrack.cues.length; i++) {\n        track.addCue(nativeTrack.cues[i], event2);\n        lastIndex++;\n      }\n    };\n    onCueChange(event);\n    nativeTrack.oncuechange = onCueChange;\n    this.#ctx.textTracks.add(track, event);\n    track.setMode(nativeTrack.mode, event);\n  }\n  #onDispose() {\n    this.#video.textTracks.onaddtrack = null;\n    for (const track of this.#ctx.textTracks) {\n      const nativeTrack = track[TextTrackSymbol.native]?.track;\n      if (nativeTrack?.oncuechange) nativeTrack.oncuechange = null;\n    }\n  }\n}\nfunction findTextTrackElement(video, track) {\n  return Array.from(video.children).find((el) => el.track === track);\n}\n\nclass VideoPictureInPicture {\n  #video;\n  #media;\n  constructor(video, media) {\n    this.#video = video;\n    this.#media = media;\n    new EventsController(video).add(\"enterpictureinpicture\", this.#onEnter.bind(this)).add(\"leavepictureinpicture\", this.#onExit.bind(this));\n  }\n  get active() {\n    return document.pictureInPictureElement === this.#video;\n  }\n  get supported() {\n    return canUsePictureInPicture(this.#video);\n  }\n  async enter() {\n    return this.#video.requestPictureInPicture();\n  }\n  exit() {\n    return document.exitPictureInPicture();\n  }\n  #onEnter(event) {\n    this.#onChange(true, event);\n  }\n  #onExit(event) {\n    this.#onChange(false, event);\n  }\n  #onChange = (active, event) => {\n    this.#media.notify(\"picture-in-picture-change\", active, event);\n  };\n}\n\nclass VideoPresentation {\n  #video;\n  #media;\n  #mode = \"inline\";\n  get mode() {\n    return this.#mode;\n  }\n  constructor(video, media) {\n    this.#video = video;\n    this.#media = media;\n    listenEvent(video, \"webkitpresentationmodechanged\", this.#onModeChange.bind(this));\n  }\n  get supported() {\n    return canUseVideoPresentation(this.#video);\n  }\n  async setPresentationMode(mode) {\n    if (this.#mode === mode) return;\n    this.#video.webkitSetPresentationMode(mode);\n  }\n  #onModeChange(event) {\n    const prevMode = this.#mode;\n    this.#mode = this.#video.webkitPresentationMode;\n    {\n      this.#media.logger?.infoGroup(\"presentation mode change\").labelledLog(\"Mode\", this.#mode).labelledLog(\"Event\", event).dispatch();\n    }\n    this.#media.player?.dispatch(\n      new DOMEvent(\"video-presentation-change\", {\n        detail: this.#mode,\n        trigger: event\n      })\n    );\n    [\"fullscreen\", \"picture-in-picture\"].forEach((type) => {\n      if (this.#mode === type || prevMode === type) {\n        this.#media.notify(`${type}-change`, this.#mode === type, event);\n      }\n    });\n  }\n}\nclass FullscreenPresentationAdapter {\n  #presentation;\n  get active() {\n    return this.#presentation.mode === \"fullscreen\";\n  }\n  get supported() {\n    return this.#presentation.supported;\n  }\n  constructor(presentation) {\n    this.#presentation = presentation;\n  }\n  async enter() {\n    this.#presentation.setPresentationMode(\"fullscreen\");\n  }\n  async exit() {\n    this.#presentation.setPresentationMode(\"inline\");\n  }\n}\nclass PIPPresentationAdapter {\n  #presentation;\n  get active() {\n    return this.#presentation.mode === \"picture-in-picture\";\n  }\n  get supported() {\n    return this.#presentation.supported;\n  }\n  constructor(presentation) {\n    this.#presentation = presentation;\n  }\n  async enter() {\n    this.#presentation.setPresentationMode(\"picture-in-picture\");\n  }\n  async exit() {\n    this.#presentation.setPresentationMode(\"inline\");\n  }\n}\n\nclass VideoProvider extends HTMLMediaProvider {\n  $$PROVIDER_TYPE = \"VIDEO\";\n  get type() {\n    return \"video\";\n  }\n  airPlay;\n  fullscreen;\n  pictureInPicture;\n  constructor(video, ctx) {\n    super(video, ctx);\n    scoped(() => {\n      this.airPlay = new HTMLAirPlayAdapter(video, ctx);\n      if (canUseVideoPresentation(video)) {\n        const presentation = new VideoPresentation(video, ctx);\n        this.fullscreen = new FullscreenPresentationAdapter(presentation);\n        this.pictureInPicture = new PIPPresentationAdapter(presentation);\n      } else if (canUsePictureInPicture(video)) {\n        this.pictureInPicture = new VideoPictureInPicture(video, ctx);\n      }\n    }, this.scope);\n  }\n  setup() {\n    super.setup();\n    if (canPlayHLSNatively(this.video)) {\n      new NativeHLSTextTracks(this.video, this.ctx);\n    }\n    this.ctx.textRenderers.attachVideo(this.video);\n    onDispose(() => {\n      this.ctx.textRenderers.attachVideo(null);\n    });\n    if (this.type === \"video\") this.ctx.notify(\"provider-setup\", this);\n  }\n  /**\n   * The native HTML `<video>` element.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement}\n   */\n  get video() {\n    return this.media;\n  }\n}\n\nvar provider$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  VideoProvider: VideoProvider\n});\n\nfunction getLangName(langCode) {\n  try {\n    const displayNames = new Intl.DisplayNames(navigator.languages, { type: \"language\" });\n    const languageName = displayNames.of(langCode);\n    return languageName ?? null;\n  } catch (err) {\n    return null;\n  }\n}\n\nconst toDOMEventType = (type) => `dash-${camelToKebabCase(type)}`;\nclass DASHController {\n  #video;\n  #ctx;\n  #instance = null;\n  #callbacks = /* @__PURE__ */ new Set();\n  #stopLiveSync = null;\n  config = {};\n  get instance() {\n    return this.#instance;\n  }\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n  }\n  setup(ctor) {\n    this.#instance = ctor().create();\n    const dispatcher = this.#dispatchDASHEvent.bind(this);\n    for (const event of Object.values(ctor.events)) this.#instance.on(event, dispatcher);\n    this.#instance.on(ctor.events.ERROR, this.#onError.bind(this));\n    for (const callback of this.#callbacks) callback(this.#instance);\n    this.#ctx.player.dispatch(\"dash-instance\", {\n      detail: this.#instance\n    });\n    this.#instance.initialize(this.#video, void 0, false);\n    this.#instance.updateSettings({\n      streaming: {\n        text: {\n          // Disabling text rendering by dash.\n          defaultEnabled: false,\n          dispatchForManualRendering: true\n        },\n        buffer: {\n          /// Enables buffer replacement when switching bitrates for faster switching.\n          fastSwitchEnabled: true\n        }\n      },\n      ...this.config\n    });\n    this.#instance.on(ctor.events.FRAGMENT_LOADING_STARTED, this.#onFragmentLoadStart.bind(this));\n    this.#instance.on(\n      ctor.events.FRAGMENT_LOADING_COMPLETED,\n      this.#onFragmentLoadComplete.bind(this)\n    );\n    this.#instance.on(ctor.events.MANIFEST_LOADED, this.#onManifestLoaded.bind(this));\n    this.#instance.on(ctor.events.QUALITY_CHANGE_RENDERED, this.#onQualityChange.bind(this));\n    this.#instance.on(ctor.events.TEXT_TRACKS_ADDED, this.#onTextTracksAdded.bind(this));\n    this.#instance.on(ctor.events.TRACK_CHANGE_RENDERED, this.#onTrackChange.bind(this));\n    this.#ctx.qualities[QualitySymbol.enableAuto] = this.#enableAutoQuality.bind(this);\n    listenEvent(this.#ctx.qualities, \"change\", this.#onUserQualityChange.bind(this));\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onUserAudioChange.bind(this));\n    this.#stopLiveSync = effect(this.#liveSync.bind(this));\n  }\n  #createDOMEvent(event) {\n    return new DOMEvent(toDOMEventType(event.type), { detail: event });\n  }\n  #liveSync() {\n    if (!this.#ctx.$state.live()) return;\n    const raf = new RAFLoop(this.#liveSyncPosition.bind(this));\n    raf.start();\n    return raf.stop.bind(raf);\n  }\n  #liveSyncPosition() {\n    if (!this.#instance) return;\n    const position = this.#instance.duration() - this.#instance.time();\n    this.#ctx.$state.liveSyncPosition.set(!isNaN(position) ? position : Infinity);\n  }\n  #dispatchDASHEvent(event) {\n    this.#ctx.player?.dispatch(this.#createDOMEvent(event));\n  }\n  #currentTrack = null;\n  #cueTracker = {};\n  #onTextFragmentLoaded(event) {\n    const native = this.#currentTrack?.[TextTrackSymbol.native], cues = (native?.track).cues;\n    if (!native || !cues) return;\n    const id = this.#currentTrack.id, startIndex = this.#cueTracker[id] ?? 0, trigger = this.#createDOMEvent(event);\n    for (let i = startIndex; i < cues.length; i++) {\n      const cue = cues[i];\n      if (!cue.positionAlign) cue.positionAlign = \"auto\";\n      this.#currentTrack.addCue(cue, trigger);\n    }\n    this.#cueTracker[id] = cues.length;\n  }\n  #onTextTracksAdded(event) {\n    if (!this.#instance) return;\n    const data = event.tracks, nativeTextTracks = [...this.#video.textTracks].filter((track) => \"manualMode\" in track), trigger = this.#createDOMEvent(event);\n    for (let i = 0; i < nativeTextTracks.length; i++) {\n      const textTrackInfo = data[i], nativeTextTrack = nativeTextTracks[i];\n      const id = `dash-${textTrackInfo.kind}-${i}`, track = new TextTrack({\n        id,\n        label: textTrackInfo?.label ?? textTrackInfo.labels.find((t) => t.text)?.text ?? (textTrackInfo?.lang && getLangName(textTrackInfo.lang)) ?? textTrackInfo?.lang ?? void 0,\n        language: textTrackInfo.lang ?? void 0,\n        kind: textTrackInfo.kind,\n        default: textTrackInfo.defaultTrack\n      });\n      track[TextTrackSymbol.native] = {\n        managed: true,\n        track: nativeTextTrack\n      };\n      track[TextTrackSymbol.readyState] = 2;\n      track[TextTrackSymbol.onModeChange] = () => {\n        if (!this.#instance) return;\n        if (track.mode === \"showing\") {\n          this.#instance.setTextTrack(i);\n          this.#currentTrack = track;\n        } else {\n          this.#instance.setTextTrack(-1);\n          this.#currentTrack = null;\n        }\n      };\n      this.#ctx.textTracks.add(track, trigger);\n    }\n  }\n  #onTrackChange(event) {\n    const { mediaType, newMediaInfo } = event;\n    if (mediaType === \"audio\") {\n      const track = this.#ctx.audioTracks.getById(`dash-audio-${newMediaInfo.index}`);\n      if (track) {\n        const trigger = this.#createDOMEvent(event);\n        this.#ctx.audioTracks[ListSymbol.select](track, true, trigger);\n      }\n    }\n  }\n  #onQualityChange(event) {\n    if (event.mediaType !== \"video\") return;\n    const quality = this.#ctx.qualities[event.newQuality];\n    if (quality) {\n      const trigger = this.#createDOMEvent(event);\n      this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n  }\n  #onManifestLoaded(event) {\n    if (this.#ctx.$state.canPlay() || !this.#instance) return;\n    const { type, mediaPresentationDuration } = event.data, trigger = this.#createDOMEvent(event);\n    this.#ctx.notify(\"stream-type-change\", type !== \"static\" ? \"live\" : \"on-demand\", trigger);\n    this.#ctx.notify(\"duration-change\", mediaPresentationDuration, trigger);\n    this.#ctx.qualities[QualitySymbol.setAuto](true, trigger);\n    const media = this.#instance.getVideoElement();\n    const videoQualities = this.#instance.getTracksForTypeFromManifest(\n      \"video\",\n      event.data\n    );\n    const supportedVideoMimeType = [...new Set(videoQualities.map((e) => e.mimeType))].find(\n      (type2) => type2 && canPlayVideoType(media, type2)\n    );\n    const videoQuality = videoQualities.filter(\n      (track) => supportedVideoMimeType === track.mimeType\n    )[0];\n    let audioTracks = this.#instance.getTracksForTypeFromManifest(\n      \"audio\",\n      event.data\n    );\n    const supportedAudioMimeType = [...new Set(audioTracks.map((e) => e.mimeType))].find(\n      (type2) => type2 && canPlayAudioType(media, type2)\n    );\n    audioTracks = audioTracks.filter((track) => supportedAudioMimeType === track.mimeType);\n    videoQuality.bitrateList.forEach((bitrate, index) => {\n      const quality = {\n        id: bitrate.id?.toString() ?? `dash-bitrate-${index}`,\n        width: bitrate.width ?? 0,\n        height: bitrate.height ?? 0,\n        bitrate: bitrate.bandwidth ?? 0,\n        codec: videoQuality.codec,\n        index\n      };\n      this.#ctx.qualities[ListSymbol.add](quality, trigger);\n    });\n    if (isNumber(videoQuality.index)) {\n      const quality = this.#ctx.qualities[videoQuality.index];\n      if (quality) this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n    audioTracks.forEach((audioTrack, index) => {\n      const matchingLabel = audioTrack.labels.find((label2) => {\n        return navigator.languages.some((language) => {\n          return label2.lang && language.toLowerCase().startsWith(label2.lang.toLowerCase());\n        });\n      });\n      const label = matchingLabel || audioTrack.labels[0];\n      const localTrack = {\n        id: `dash-audio-${audioTrack?.index}`,\n        label: label?.text ?? (audioTrack.lang && getLangName(audioTrack.lang)) ?? audioTrack.lang ?? \"\",\n        language: audioTrack.lang ?? \"\",\n        kind: \"main\",\n        mimeType: audioTrack.mimeType,\n        codec: audioTrack.codec,\n        index\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localTrack, trigger);\n    });\n    media.dispatchEvent(new DOMEvent(\"canplay\", { trigger }));\n  }\n  #onError(event) {\n    const { type: eventType, error: data } = event;\n    {\n      this.#ctx.logger?.errorGroup(`[vidstack] DASH error \\`${data.message}\\``).labelledLog(\"Media Element\", this.#video).labelledLog(\"DASH Instance\", this.#instance).labelledLog(\"Event Type\", eventType).labelledLog(\"Data\", data).labelledLog(\"Src\", peek(this.#ctx.$state.source)).labelledLog(\"Media Store\", { ...this.#ctx.$state }).dispatch();\n    }\n    switch (data.code) {\n      case 27:\n        this.#onNetworkError(data);\n        break;\n      default:\n        this.#onFatalError(data);\n        break;\n    }\n  }\n  #onFragmentLoadStart() {\n    if (this.#retryLoadingTimer >= 0) this.#clearRetryTimer();\n  }\n  #onFragmentLoadComplete(event) {\n    const mediaType = event.mediaType;\n    if (mediaType === \"text\") {\n      requestAnimationFrame(this.#onTextFragmentLoaded.bind(this, event));\n    }\n  }\n  #retryLoadingTimer = -1;\n  #onNetworkError(error) {\n    this.#clearRetryTimer();\n    this.#instance?.play();\n    this.#retryLoadingTimer = window.setTimeout(() => {\n      this.#retryLoadingTimer = -1;\n      this.#onFatalError(error);\n    }, 5e3);\n  }\n  #clearRetryTimer() {\n    clearTimeout(this.#retryLoadingTimer);\n    this.#retryLoadingTimer = -1;\n  }\n  #onFatalError(error) {\n    this.#ctx.notify(\"error\", {\n      message: error.message ?? \"\",\n      code: 1,\n      error\n    });\n  }\n  #enableAutoQuality() {\n    this.#switchAutoBitrate(\"video\", true);\n    const { qualities } = this.#ctx;\n    this.#instance?.setQualityFor(\"video\", qualities.selectedIndex, true);\n  }\n  #switchAutoBitrate(type, auto) {\n    this.#instance?.updateSettings({\n      streaming: { abr: { autoSwitchBitrate: { [type]: auto } } }\n    });\n  }\n  #onUserQualityChange() {\n    const { qualities } = this.#ctx;\n    if (!this.#instance || qualities.auto || !qualities.selected) return;\n    this.#switchAutoBitrate(\"video\", false);\n    this.#instance.setQualityFor(\"video\", qualities.selectedIndex, qualities.switch === \"current\");\n    if (IS_CHROME) {\n      this.#video.currentTime = this.#video.currentTime;\n    }\n  }\n  #onUserAudioChange() {\n    if (!this.#instance) return;\n    const { audioTracks } = this.#ctx, selectedTrack = this.#instance.getTracksFor(\"audio\").find(\n      (track) => audioTracks.selected && audioTracks.selected.id === `dash-audio-${track.index}`\n    );\n    if (selectedTrack) this.#instance.setCurrentTrack(selectedTrack);\n  }\n  #reset() {\n    this.#clearRetryTimer();\n    this.#currentTrack = null;\n    this.#cueTracker = {};\n  }\n  onInstance(callback) {\n    this.#callbacks.add(callback);\n    return () => this.#callbacks.delete(callback);\n  }\n  loadSource(src) {\n    this.#reset();\n    if (!isString(src.src)) return;\n    this.#instance?.attachSource(src.src);\n  }\n  destroy() {\n    this.#reset();\n    this.#instance?.destroy();\n    this.#instance = null;\n    this.#stopLiveSync?.();\n    this.#stopLiveSync = null;\n    this.#ctx?.logger?.info(\"\\u{1F3D7}\\uFE0F Destroyed DASH instance\");\n  }\n}\n\nfunction coerceToError(error) {\n  return error instanceof Error ? error : Error(typeof error === \"string\" ? error : JSON.stringify(error));\n}\nfunction assert(condition, message) {\n  if (!condition) {\n    throw Error(message || \"Assertion failed.\");\n  }\n}\n\nclass DASHLibLoader {\n  #lib;\n  #ctx;\n  #callback;\n  constructor(lib, ctx, callback) {\n    this.#lib = lib;\n    this.#ctx = ctx;\n    this.#callback = callback;\n    this.#startLoading();\n  }\n  async #startLoading() {\n    this.#ctx.logger?.info(\"\\u{1F3D7}\\uFE0F Loading DASH Library\");\n    const callbacks = {\n      onLoadStart: this.#onLoadStart.bind(this),\n      onLoaded: this.#onLoaded.bind(this),\n      onLoadError: this.#onLoadError.bind(this)\n    };\n    let ctor = await loadDASHScript(this.#lib, callbacks);\n    if (isUndefined(ctor) && !isString(this.#lib)) ctor = await importDASH(this.#lib, callbacks);\n    if (!ctor) return null;\n    if (!window.dashjs.supportsMediaSource()) {\n      const message = \"[vidstack] `dash.js` is not supported in this environment\";\n      this.#ctx.logger?.error(message);\n      this.#ctx.player.dispatch(new DOMEvent(\"dash-unsupported\"));\n      this.#ctx.notify(\"error\", { message, code: 4 });\n      return null;\n    }\n    return ctor;\n  }\n  #onLoadStart() {\n    {\n      this.#ctx.logger?.infoGroup(\"Starting to load `dash.js`\").labelledLog(\"URL\", this.#lib).dispatch();\n    }\n    this.#ctx.player.dispatch(new DOMEvent(\"dash-lib-load-start\"));\n  }\n  #onLoaded(ctor) {\n    {\n      this.#ctx.logger?.infoGroup(\"Loaded `dash.js`\").labelledLog(\"Library\", this.#lib).labelledLog(\"Constructor\", ctor).dispatch();\n    }\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"dash-lib-loaded\", {\n        detail: ctor\n      })\n    );\n    this.#callback(ctor);\n  }\n  #onLoadError(e) {\n    const error = coerceToError(e);\n    {\n      this.#ctx.logger?.errorGroup(\"[vidstack] Failed to load `dash.js`\").labelledLog(\"Library\", this.#lib).labelledLog(\"Error\", e).dispatch();\n    }\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"dash-lib-load-error\", {\n        detail: error\n      })\n    );\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importDASH(loader, callbacks = {}) {\n  if (isUndefined(loader)) return void 0;\n  callbacks.onLoadStart?.();\n  if (isDASHConstructor(loader)) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  if (isDASHNamespace(loader)) {\n    const ctor = loader.MediaPlayer;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (isDASHNamespace(ctor)) {\n      callbacks.onLoaded?.(ctor.MediaPlayer);\n      return ctor.MediaPlayer;\n    }\n    if (ctor) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(\n        true ? \"[vidstack] failed importing `dash.js`. Dynamic import returned invalid object.\" : \"\"\n      );\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadDASHScript(src, callbacks = {}) {\n  if (!isString(src)) return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.dashjs.MediaPlayer)) {\n      throw Error(\n        true ? \"[vidstack] failed loading `dash.js`. Could not find a valid `Dash` constructor on window\" : \"\"\n      );\n    }\n    const ctor = window.dashjs.MediaPlayer;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nfunction isDASHConstructor(value) {\n  return value && value.prototype && value.prototype !== Function;\n}\nfunction isDASHNamespace(value) {\n  return value && \"MediaPlayer\" in value;\n}\n\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass DASHProvider extends VideoProvider {\n  $$PROVIDER_TYPE = \"DASH\";\n  #ctor = null;\n  #controller = new DASHController(this.video, this.ctx);\n  /**\n   * The `dash.js` constructor.\n   */\n  get ctor() {\n    return this.#ctor;\n  }\n  /**\n   * The current `dash.js` instance.\n   */\n  get instance() {\n    return this.#controller.instance;\n  }\n  /**\n   * Whether `dash.js` is supported in this environment.\n   */\n  static supported = isDASHSupported();\n  get type() {\n    return \"dash\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  #library = `${JS_DELIVR_CDN}/npm/dashjs@4.7.4/dist/dash${\".all.debug.js\" }`;\n  /**\n   * The `dash.js` configuration object.\n   *\n   * @see {@link https://cdn.dashjs.org/latest/jsdoc/module-Settings.html}\n   */\n  get config() {\n    return this.#controller.config;\n  }\n  set config(config) {\n    this.#controller.config = config;\n  }\n  /**\n   * The `dash.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/dashjs@4.7.4/dist/dash.all.min.js`\n   */\n  get library() {\n    return this.#library;\n  }\n  set library(library) {\n    this.#library = library;\n  }\n  preconnect() {\n    if (!isString(this.#library)) return;\n    preconnect(this.#library);\n  }\n  setup() {\n    super.setup();\n    new DASHLibLoader(this.#library, this.ctx, (ctor) => {\n      this.#ctor = ctor;\n      this.#controller.setup(ctor);\n      this.ctx.notify(\"provider-setup\", this);\n      const src = peek(this.ctx.$state.source);\n      if (src) this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.removeSource();\n      return;\n    }\n    this.media.preload = preload || \"\";\n    this.appendSource(src, \"application/x-mpegurl\");\n    this.#controller.loadSource(src);\n    this.currentSrc = src;\n  }\n  /**\n   * The given callback is invoked when a new `dash.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.#controller.instance;\n    if (instance) callback(instance);\n    return this.#controller.onInstance(callback);\n  }\n  destroy() {\n    this.#controller.destroy();\n  }\n}\n\nvar provider = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DASHProvider: DASHProvider\n});\n\nclass DASHProviderLoader extends VideoProviderLoader {\n  static supported = isDASHSupported();\n  name = \"dash\";\n  canPlay(src) {\n    return DASHProviderLoader.supported && isDASHSrc(src);\n  }\n  async load(context) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load dash provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\n        \"[vidstack] `<video>` element was not found - did you forget to include `<media-provider>`?\"\n      );\n    }\n    return new (await Promise.resolve().then(function () { return provider; })).DASHProvider(this.target, context);\n  }\n}\n\nclass VimeoProviderLoader {\n  name = \"vimeo\";\n  target;\n  preconnect() {\n    const connections = [\n      \"https://i.vimeocdn.com\",\n      \"https://f.vimeocdn.com\",\n      \"https://fresnel.vimeocdn.com\"\n    ];\n    for (const url of connections) {\n      preconnect(url);\n    }\n  }\n  canPlay(src) {\n    return isString(src.src) && src.type === \"video/vimeo\";\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load vimeo provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\n        \"[vidstack] `<iframe>` element was not found - did you forget to include media provider?\"\n      );\n    }\n    return new (await import('./vidstack-DF6waG6B.js')).VimeoProvider(this.target, ctx);\n  }\n  async loadPoster(src, ctx, abort) {\n    const { resolveVimeoVideoId, getVimeoVideoInfo } = await import('./vidstack-krOAtKMi.js');\n    if (!isString(src.src)) return null;\n    const { videoId, hash } = resolveVimeoVideoId(src.src);\n    if (videoId) {\n      return getVimeoVideoInfo(videoId, abort, hash).then((info) => info ? info.poster : null);\n    }\n    return null;\n  }\n}\n\nclass YouTubeProviderLoader {\n  name = \"youtube\";\n  target;\n  preconnect() {\n    const connections = [\n      // Botguard script.\n      \"https://www.google.com\",\n      // Posters.\n      \"https://i.ytimg.com\",\n      // Ads.\n      \"https://googleads.g.doubleclick.net\",\n      \"https://static.doubleclick.net\"\n    ];\n    for (const url of connections) {\n      preconnect(url);\n    }\n  }\n  canPlay(src) {\n    return isString(src.src) && src.type === \"video/youtube\";\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load youtube provider server-side\");\n    }\n    if (!this.target) {\n      throw Error(\n        \"[vidstack] `<iframe>` element was not found - did you forget to include media provider?\"\n      );\n    }\n    return new (await import('./vidstack-Breph70c.js')).YouTubeProvider(this.target, ctx);\n  }\n  async loadPoster(src, ctx, abort) {\n    const { findYouTubePoster, resolveYouTubeVideoId } = await import('./vidstack-Zc3I7oOd.js');\n    const videoId = isString(src.src) && resolveYouTubeVideoId(src.src);\n    if (videoId) return findYouTubePoster(videoId, abort);\n    return null;\n  }\n}\n\nfunction padNumberWithZeroes(num, expectedLength) {\n  const str = String(num);\n  const actualLength = str.length;\n  const shouldPad = actualLength < expectedLength;\n  if (shouldPad) {\n    const padLength = expectedLength - actualLength;\n    const padding = `0`.repeat(padLength);\n    return `${padding}${num}`;\n  }\n  return str;\n}\nfunction parseTime(duration) {\n  const hours = Math.trunc(duration / 3600);\n  const minutes = Math.trunc(duration % 3600 / 60);\n  const seconds = Math.trunc(duration % 60);\n  const fraction = Number((duration - Math.trunc(duration)).toPrecision(3));\n  return {\n    hours,\n    minutes,\n    seconds,\n    fraction\n  };\n}\nfunction formatTime(duration, { padHrs = null, padMins = null, showHrs = false, showMs = false } = {}) {\n  const { hours, minutes, seconds, fraction } = parseTime(duration), paddedHours = padHrs ? padNumberWithZeroes(hours, 2) : hours, paddedMinutes = padMins || isNull(padMins) && duration >= 3600 ? padNumberWithZeroes(minutes, 2) : minutes, paddedSeconds = padNumberWithZeroes(seconds, 2), paddedMs = showMs && fraction > 0 ? `.${String(fraction).replace(/^0?\\./, \"\")}` : \"\", time = `${paddedMinutes}:${paddedSeconds}${paddedMs}`;\n  return hours > 0 || showHrs ? `${paddedHours}:${time}` : time;\n}\nfunction formatSpokenTime(duration) {\n  const spokenParts = [];\n  const { hours, minutes, seconds } = parseTime(duration);\n  if (hours > 0) {\n    spokenParts.push(`${hours} hour`);\n  }\n  if (minutes > 0) {\n    spokenParts.push(`${minutes} min`);\n  }\n  if (seconds > 0 || spokenParts.length === 0) {\n    spokenParts.push(`${seconds} sec`);\n  }\n  return spokenParts.join(\" \");\n}\n\nconst MEDIA_ATTRIBUTES = Symbol(\"MEDIA_ATTRIBUTES\" );\nconst mediaAttributes = [\n  \"autoPlay\",\n  \"canAirPlay\",\n  \"canFullscreen\",\n  \"canGoogleCast\",\n  \"canLoad\",\n  \"canLoadPoster\",\n  \"canPictureInPicture\",\n  \"canPlay\",\n  \"canSeek\",\n  \"ended\",\n  \"fullscreen\",\n  \"isAirPlayConnected\",\n  \"isGoogleCastConnected\",\n  \"live\",\n  \"liveEdge\",\n  \"loop\",\n  \"mediaType\",\n  \"muted\",\n  \"paused\",\n  \"pictureInPicture\",\n  \"playing\",\n  \"playsInline\",\n  \"remotePlaybackState\",\n  \"remotePlaybackType\",\n  \"seeking\",\n  \"started\",\n  \"streamType\",\n  \"viewType\",\n  \"waiting\"\n];\n\nconst mediaPlayerProps = {\n  artist: \"\",\n  artwork: null,\n  autoplay: false,\n  autoPlay: false,\n  clipStartTime: 0,\n  clipEndTime: 0,\n  controls: false,\n  currentTime: 0,\n  crossorigin: null,\n  crossOrigin: null,\n  duration: -1,\n  fullscreenOrientation: \"landscape\",\n  googleCast: {},\n  load: \"visible\",\n  posterLoad: \"visible\",\n  logLevel: \"warn\" ,\n  loop: false,\n  muted: false,\n  paused: true,\n  playsinline: false,\n  playsInline: false,\n  playbackRate: 1,\n  poster: \"\",\n  preload: \"metadata\",\n  preferNativeHLS: false,\n  src: \"\",\n  title: \"\",\n  controlsDelay: 2e3,\n  hideControlsOnMouseLeave: false,\n  viewType: \"unknown\",\n  streamType: \"unknown\",\n  volume: 1,\n  liveEdgeTolerance: 10,\n  minLiveDVRWindow: 60,\n  keyDisabled: false,\n  keyTarget: \"player\",\n  keyShortcuts: MEDIA_KEY_SHORTCUTS,\n  storage: null\n};\n\nconst MEDIA_EVENTS = [\n  \"abort\",\n  \"can-play\",\n  \"can-play-through\",\n  \"duration-change\",\n  \"emptied\",\n  \"ended\",\n  \"error\",\n  \"fullscreen-change\",\n  \"loaded-data\",\n  \"loaded-metadata\",\n  \"load-start\",\n  \"media-type-change\",\n  \"pause\",\n  \"play\",\n  \"playing\",\n  \"progress\",\n  \"seeked\",\n  \"seeking\",\n  \"source-change\",\n  \"sources-change\",\n  \"stalled\",\n  \"started\",\n  \"suspend\",\n  \"stream-type-change\",\n  \"replay\",\n  // time-change,\n  // 'time-update',\n  \"view-type-change\",\n  \"volume-change\",\n  \"waiting\"\n] ;\nclass MediaEventsLogger extends MediaPlayerController {\n  #media;\n  constructor(media) {\n    super();\n    this.#media = media;\n  }\n  onConnect(el) {\n    const events = new EventsController(el), handler = this.#onMediaEvent.bind(this);\n    for (const eventType of MEDIA_EVENTS) {\n      events.add(eventType, handler);\n    }\n  }\n  #onMediaEvent(event) {\n    this.#media.logger?.debugGroup(`\\u{1F4E1} dispatching \\`${event.type}\\``).labelledLog(\"Media Store\", { ...this.$state }).labelledLog(\"Event\", event).dispatch();\n  }\n}\n\nclass MediaLoadController extends MediaPlayerController {\n  #type;\n  #callback;\n  constructor(type, callback) {\n    super();\n    this.#type = type;\n    this.#callback = callback;\n  }\n  async onAttach(el) {\n    if (IS_SERVER) return;\n    const load = this.$props[this.#type]();\n    if (load === \"eager\") {\n      requestAnimationFrame(this.#callback);\n    } else if (load === \"idle\") {\n      waitIdlePeriod(this.#callback);\n    } else if (load === \"visible\") {\n      let dispose, observer = new IntersectionObserver((entries) => {\n        if (!this.scope) return;\n        if (entries[0].isIntersecting) {\n          dispose?.();\n          dispose = void 0;\n          this.#callback();\n        }\n      });\n      observer.observe(el);\n      dispose = onDispose(() => observer.disconnect());\n    }\n  }\n}\n\nlet seenAutoplayWarning = false;\nclass MediaPlayerDelegate {\n  #handle;\n  #media;\n  constructor(handle, media) {\n    this.#handle = handle;\n    this.#media = media;\n  }\n  notify(type, ...init) {\n    if (IS_SERVER) return;\n    this.#handle(\n      new DOMEvent(type, {\n        detail: init?.[0],\n        trigger: init?.[1]\n      })\n    );\n  }\n  async ready(info, trigger) {\n    if (IS_SERVER) return;\n    return untrack(async () => {\n      const { logger } = this.#media, {\n        autoPlay,\n        canPlay,\n        started,\n        duration,\n        seekable,\n        buffered,\n        remotePlaybackInfo,\n        playsInline,\n        savedState,\n        source\n      } = this.#media.$state;\n      if (canPlay()) return;\n      const detail = {\n        duration: info?.duration ?? duration(),\n        seekable: info?.seekable ?? seekable(),\n        buffered: info?.buffered ?? buffered(),\n        provider: this.#media.$provider()\n      };\n      this.notify(\"can-play\", detail, trigger);\n      tick();\n      {\n        logger?.infoGroup(\"-~-~-~-~-~-~- \\u2705 MEDIA READY -~-~-~-~-~-~-\").labelledLog(\"Media\", this.#media).labelledLog(\"Trigger Event\", trigger).dispatch();\n      }\n      let provider = this.#media.$provider(), { storage, qualities } = this.#media, { muted, volume, clipStartTime, playbackRate } = this.#media.$props;\n      await storage?.onLoad?.(source());\n      const savedPlaybackTime = savedState()?.currentTime, savedPausedState = savedState()?.paused, storageTime = await storage?.getTime(), startTime = savedPlaybackTime ?? storageTime ?? clipStartTime(), shouldAutoPlay = savedPausedState === false || savedPausedState !== true && !started() && autoPlay();\n      if (provider) {\n        provider.setVolume(await storage?.getVolume() ?? volume());\n        provider.setMuted(muted() || !!await storage?.getMuted());\n        const audioGain = await storage?.getAudioGain() ?? 1;\n        if (audioGain > 1) provider.audioGain?.setGain?.(audioGain);\n        provider.setPlaybackRate?.(await storage?.getPlaybackRate() ?? playbackRate());\n        provider.setPlaysInline?.(playsInline());\n        if (startTime > 0) provider.setCurrentTime(startTime);\n      }\n      const prefQuality = await storage?.getVideoQuality();\n      if (prefQuality && qualities.length) {\n        let currentQuality = null, currentScore = Infinity;\n        for (const quality of qualities) {\n          const score = Math.abs(prefQuality.width - quality.width) + Math.abs(prefQuality.height - quality.height) + (prefQuality.bitrate ? Math.abs(prefQuality.bitrate - (quality.bitrate ?? 0)) : 0);\n          if (score < currentScore) {\n            currentQuality = quality;\n            currentScore = score;\n          }\n        }\n        if (currentQuality) currentQuality.selected = true;\n      }\n      if (canPlay() && shouldAutoPlay) {\n        await this.#attemptAutoplay(trigger);\n      } else if (storageTime && storageTime > 0) {\n        this.notify(\"started\", void 0, trigger);\n      }\n      remotePlaybackInfo.set(null);\n    });\n  }\n  async #attemptAutoplay(trigger) {\n    const {\n      player,\n      $state: { autoPlaying, muted }\n    } = this.#media;\n    autoPlaying.set(true);\n    const attemptEvent = new DOMEvent(\"auto-play-attempt\", { trigger });\n    try {\n      await player.play(attemptEvent);\n    } catch (error) {\n      if (!seenAutoplayWarning) {\n        const muteMsg = !muted() ? \" Attempting with volume muted will most likely resolve the issue.\" : \"\";\n        this.#media.logger?.errorGroup(\"[vidstack] auto-play request failed\").labelledLog(\n          \"Message\",\n          `Autoplay was requested but failed most likely due to browser autoplay policies.${muteMsg}`\n        ).labelledLog(\"Trigger Event\", trigger).labelledLog(\"Error\", error).labelledLog(\"See\", \"https://developer.chrome.com/blog/autoplay\").dispatch();\n        seenAutoplayWarning = true;\n      }\n    }\n  }\n}\n\nclass Queue {\n  #queue = /* @__PURE__ */ new Map();\n  /**\n   * Queue the given `item` under the given `key` to be processed at a later time by calling\n   * `serve(key)`.\n   */\n  enqueue(key, item) {\n    this.#queue.set(key, item);\n  }\n  /**\n   * Process item in queue for the given `key`.\n   */\n  serve(key) {\n    const value = this.peek(key);\n    this.#queue.delete(key);\n    return value;\n  }\n  /**\n   * Peek at item in queue for the given `key`.\n   */\n  peek(key) {\n    return this.#queue.get(key);\n  }\n  /**\n   * Removes queued item under the given `key`.\n   */\n  delete(key) {\n    this.#queue.delete(key);\n  }\n  /**\n   * Clear all items in the queue.\n   */\n  clear() {\n    this.#queue.clear();\n  }\n}\n\nclass RequestQueue {\n  #serving = false;\n  #pending = deferredPromise();\n  #queue = /* @__PURE__ */ new Map();\n  /**\n   * The number of callbacks that are currently in queue.\n   */\n  get size() {\n    return this.#queue.size;\n  }\n  /**\n   * Whether items in the queue are being served immediately, otherwise they're queued to\n   * be processed later.\n   */\n  get isServing() {\n    return this.#serving;\n  }\n  /**\n   * Waits for the queue to be flushed (ie: start serving).\n   */\n  async waitForFlush() {\n    if (this.#serving) return;\n    await this.#pending.promise;\n  }\n  /**\n   * Queue the given `callback` to be invoked at a later time by either calling the `serve()` or\n   * `start()` methods. If the queue has started serving (i.e., `start()` was already called),\n   * then the callback will be invoked immediately.\n   *\n   * @param key - Uniquely identifies this callback so duplicates are ignored.\n   * @param callback - The function to call when this item in the queue is being served.\n   */\n  enqueue(key, callback) {\n    if (this.#serving) {\n      callback();\n      return;\n    }\n    this.#queue.delete(key);\n    this.#queue.set(key, callback);\n  }\n  /**\n   * Invokes the callback with the given `key` in the queue (if it exists).\n   */\n  serve(key) {\n    this.#queue.get(key)?.();\n    this.#queue.delete(key);\n  }\n  /**\n   * Flush all queued items and start serving future requests immediately until `stop()` is called.\n   */\n  start() {\n    this.#flush();\n    this.#serving = true;\n    if (this.#queue.size > 0) this.#flush();\n  }\n  /**\n   * Stop serving requests, they'll be queued until you begin processing again by calling `start()`.\n   */\n  stop() {\n    this.#serving = false;\n  }\n  /**\n   * Stop serving requests, empty the request queue, and release any promises waiting for the\n   * queue to flush.\n   */\n  reset() {\n    this.stop();\n    this.#queue.clear();\n    this.#release();\n  }\n  #flush() {\n    for (const key of this.#queue.keys()) this.serve(key);\n    this.#release();\n  }\n  #release() {\n    this.#pending.resolve();\n    this.#pending = deferredPromise();\n  }\n}\n\nclass MediaRequestManager extends MediaPlayerController {\n  #stateMgr;\n  #request;\n  #media;\n  controls;\n  #fullscreen;\n  #orientation;\n  #$provider;\n  #providerQueue = new RequestQueue();\n  constructor(stateMgr, request, media) {\n    super();\n    this.#stateMgr = stateMgr;\n    this.#request = request;\n    this.#media = media;\n    this.#$provider = media.$provider;\n    this.controls = new MediaControls();\n    this.#fullscreen = new FullscreenController();\n    this.#orientation = new ScreenOrientationController();\n  }\n  onAttach() {\n    this.listen(\"fullscreen-change\", this.#onFullscreenChange.bind(this));\n  }\n  onConnect(el) {\n    const names = Object.getOwnPropertyNames(Object.getPrototypeOf(this)), events = new EventsController(el), handleRequest = this.#handleRequest.bind(this);\n    for (const name of names) {\n      if (name.startsWith(\"media-\")) {\n        events.add(name, handleRequest);\n      }\n    }\n    this.#attachLoadPlayListener();\n    effect(this.#watchProvider.bind(this));\n    effect(this.#watchControlsDelayChange.bind(this));\n    effect(this.#watchAudioGainSupport.bind(this));\n    effect(this.#watchAirPlaySupport.bind(this));\n    effect(this.#watchGoogleCastSupport.bind(this));\n    effect(this.#watchFullscreenSupport.bind(this));\n    effect(this.#watchPiPSupport.bind(this));\n  }\n  onDestroy() {\n    try {\n      const destroyEvent = this.createEvent(\"destroy\"), { pictureInPicture, fullscreen } = this.$state;\n      if (fullscreen()) this.exitFullscreen(\"prefer-media\", destroyEvent);\n      if (pictureInPicture()) this.exitPictureInPicture(destroyEvent);\n    } catch (e) {\n    }\n    this.#providerQueue.reset();\n  }\n  #attachLoadPlayListener() {\n    const { load } = this.$props, { canLoad } = this.$state;\n    if (load() !== \"play\" || canLoad()) return;\n    const off = this.listen(\"media-play-request\", (event) => {\n      this.#handleLoadPlayStrategy(event);\n      off();\n    });\n  }\n  #watchProvider() {\n    const provider = this.#$provider(), canPlay = this.$state.canPlay();\n    if (provider && canPlay) {\n      this.#providerQueue.start();\n    }\n    return () => {\n      this.#providerQueue.stop();\n    };\n  }\n  #handleRequest(event) {\n    event.stopPropagation();\n    if (event.defaultPrevented) return;\n    {\n      this.#media.logger?.infoGroup(`\\u{1F4EC} received \\`${event.type}\\``).labelledLog(\"Request\", event).dispatch();\n    }\n    if (!this[event.type]) return;\n    if (peek(this.#$provider)) {\n      this[event.type](event);\n    } else {\n      this.#providerQueue.enqueue(event.type, () => {\n        if (peek(this.#$provider)) this[event.type](event);\n      });\n    }\n  }\n  async play(trigger) {\n    if (IS_SERVER) return;\n    const { canPlay, paused, autoPlaying } = this.$state;\n    if (this.#handleLoadPlayStrategy(trigger)) return;\n    if (!peek(paused)) return;\n    if (trigger) this.#request.queue.enqueue(\"media-play-request\", trigger);\n    const isAutoPlaying = peek(autoPlaying);\n    try {\n      const provider = peek(this.#$provider);\n      throwIfNotReadyForPlayback(provider, peek(canPlay));\n      return await provider.play();\n    } catch (error) {\n      this.#logError(\"play request failed\", error, trigger);\n      const errorEvent = this.createEvent(\"play-fail\", {\n        detail: coerceToError(error),\n        trigger\n      });\n      errorEvent.autoPlay = isAutoPlaying;\n      this.#stateMgr.handle(errorEvent);\n      throw error;\n    }\n  }\n  #handleLoadPlayStrategy(trigger) {\n    const { load } = this.$props, { canLoad } = this.$state;\n    if (load() === \"play\" && !canLoad()) {\n      const event = this.createEvent(\"media-start-loading\", { trigger });\n      this.dispatchEvent(event);\n      this.#providerQueue.enqueue(\"media-play-request\", async () => {\n        try {\n          await this.play(event);\n        } catch (error) {\n        }\n      });\n      return true;\n    }\n    return false;\n  }\n  async pause(trigger) {\n    if (IS_SERVER) return;\n    const { canPlay, paused } = this.$state;\n    if (peek(paused)) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-pause-request\", trigger);\n    }\n    try {\n      const provider = peek(this.#$provider);\n      throwIfNotReadyForPlayback(provider, peek(canPlay));\n      return await provider.pause();\n    } catch (error) {\n      this.#request.queue.delete(\"media-pause-request\");\n      {\n        this.#logError(\"pause request failed\", error, trigger);\n      }\n      throw error;\n    }\n  }\n  setAudioGain(gain, trigger) {\n    const { audioGain, canSetAudioGain } = this.$state;\n    if (audioGain() === gain) return;\n    const provider = this.#$provider();\n    if (!provider?.audioGain || !canSetAudioGain()) {\n      throw Error(\"[vidstack] audio gain api not available\");\n    }\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-audio-gain-change-request\", trigger);\n    }\n    provider.audioGain.setGain(gain);\n  }\n  seekToLiveEdge(trigger) {\n    if (IS_SERVER) return;\n    const { canPlay, live, liveEdge, canSeek, liveSyncPosition, seekableEnd, userBehindLiveEdge } = this.$state;\n    userBehindLiveEdge.set(false);\n    if (peek(() => !live() || liveEdge() || !canSeek())) return;\n    const provider = peek(this.#$provider);\n    throwIfNotReadyForPlayback(provider, peek(canPlay));\n    if (trigger) this.#request.queue.enqueue(\"media-seek-request\", trigger);\n    const end = seekableEnd() - 2;\n    provider.setCurrentTime(Math.min(end, liveSyncPosition() ?? end));\n  }\n  #wasPIPActive = false;\n  async enterFullscreen(target = \"prefer-media\", trigger) {\n    if (IS_SERVER) return;\n    const adapter = this.#getFullscreenAdapter(target);\n    throwIfFullscreenNotSupported(target, adapter);\n    if (adapter.active) return;\n    if (peek(this.$state.pictureInPicture)) {\n      this.#wasPIPActive = true;\n      await this.exitPictureInPicture(trigger);\n    }\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-enter-fullscreen-request\", trigger);\n    }\n    return adapter.enter();\n  }\n  async exitFullscreen(target = \"prefer-media\", trigger) {\n    if (IS_SERVER) return;\n    const adapter = this.#getFullscreenAdapter(target);\n    throwIfFullscreenNotSupported(target, adapter);\n    if (!adapter.active) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-exit-fullscreen-request\", trigger);\n    }\n    try {\n      const result = await adapter.exit();\n      if (this.#wasPIPActive && peek(this.$state.canPictureInPicture)) {\n        await this.enterPictureInPicture();\n      }\n      return result;\n    } finally {\n      this.#wasPIPActive = false;\n    }\n  }\n  #getFullscreenAdapter(target) {\n    const provider = peek(this.#$provider);\n    return target === \"prefer-media\" && this.#fullscreen.supported || target === \"media\" ? this.#fullscreen : provider?.fullscreen;\n  }\n  async enterPictureInPicture(trigger) {\n    if (IS_SERVER) return;\n    this.#throwIfPIPNotSupported();\n    if (this.$state.pictureInPicture()) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-enter-pip-request\", trigger);\n    }\n    return await this.#$provider().pictureInPicture.enter();\n  }\n  async exitPictureInPicture(trigger) {\n    if (IS_SERVER) return;\n    this.#throwIfPIPNotSupported();\n    if (!this.$state.pictureInPicture()) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-exit-pip-request\", trigger);\n    }\n    return await this.#$provider().pictureInPicture.exit();\n  }\n  #throwIfPIPNotSupported() {\n    if (this.$state.canPictureInPicture()) return;\n    throw Error(\n      `[vidstack] picture-in-picture is not currently available` \n    );\n  }\n  #watchControlsDelayChange() {\n    this.controls.defaultDelay = this.$props.controlsDelay();\n  }\n  #watchAudioGainSupport() {\n    const { canSetAudioGain } = this.$state, supported = !!this.#$provider()?.audioGain?.supported;\n    canSetAudioGain.set(supported);\n  }\n  #watchAirPlaySupport() {\n    const { canAirPlay } = this.$state, supported = !!this.#$provider()?.airPlay?.supported;\n    canAirPlay.set(supported);\n  }\n  #watchGoogleCastSupport() {\n    const { canGoogleCast, source } = this.$state, supported = IS_CHROME && !IS_IOS && canGoogleCastSrc(source());\n    canGoogleCast.set(supported);\n  }\n  #watchFullscreenSupport() {\n    const { canFullscreen } = this.$state, supported = this.#fullscreen.supported || !!this.#$provider()?.fullscreen?.supported;\n    canFullscreen.set(supported);\n  }\n  #watchPiPSupport() {\n    const { canPictureInPicture } = this.$state, supported = !!this.#$provider()?.pictureInPicture?.supported;\n    canPictureInPicture.set(supported);\n  }\n  async [\"media-airplay-request\"](event) {\n    try {\n      await this.requestAirPlay(event);\n    } catch (error) {\n    }\n  }\n  async requestAirPlay(trigger) {\n    try {\n      const adapter = this.#$provider()?.airPlay;\n      if (!adapter?.supported) {\n        throw Error(true ? \"AirPlay adapter not available on provider.\" : \"No AirPlay adapter.\");\n      }\n      if (trigger) {\n        this.#request.queue.enqueue(\"media-airplay-request\", trigger);\n      }\n      return await adapter.prompt();\n    } catch (error) {\n      this.#request.queue.delete(\"media-airplay-request\");\n      {\n        this.#logError(\"airplay request failed\", error, trigger);\n      }\n      throw error;\n    }\n  }\n  async [\"media-google-cast-request\"](event) {\n    try {\n      await this.requestGoogleCast(event);\n    } catch (error) {\n    }\n  }\n  #googleCastLoader;\n  async requestGoogleCast(trigger) {\n    try {\n      const { canGoogleCast } = this.$state;\n      if (!peek(canGoogleCast)) {\n        const error = Error(\n          true ? \"Google Cast not available on this platform.\" : \"Cast not available.\"\n        );\n        error.code = \"CAST_NOT_AVAILABLE\";\n        throw error;\n      }\n      preconnect(\"https://www.gstatic.com\");\n      if (!this.#googleCastLoader) {\n        const $module = await import('./vidstack-C8ZxSSGF.js').then(function (n) { return n.loader; });\n        this.#googleCastLoader = new $module.GoogleCastLoader();\n      }\n      await this.#googleCastLoader.prompt(this.#media);\n      if (trigger) {\n        this.#request.queue.enqueue(\"media-google-cast-request\", trigger);\n      }\n      const isConnecting = peek(this.$state.remotePlaybackState) !== \"disconnected\";\n      if (isConnecting) {\n        this.$state.savedState.set({\n          paused: peek(this.$state.paused),\n          currentTime: peek(this.$state.currentTime)\n        });\n      }\n      this.$state.remotePlaybackLoader.set(isConnecting ? this.#googleCastLoader : null);\n    } catch (error) {\n      this.#request.queue.delete(\"media-google-cast-request\");\n      {\n        this.#logError(\"google cast request failed\", error, trigger);\n      }\n      throw error;\n    }\n  }\n  [\"media-clip-start-change-request\"](event) {\n    const { clipStartTime } = this.$state;\n    clipStartTime.set(event.detail);\n  }\n  [\"media-clip-end-change-request\"](event) {\n    const { clipEndTime } = this.$state;\n    clipEndTime.set(event.detail);\n    this.dispatch(\"duration-change\", {\n      detail: event.detail,\n      trigger: event\n    });\n  }\n  [\"media-duration-change-request\"](event) {\n    const { providedDuration, clipEndTime } = this.$state;\n    providedDuration.set(event.detail);\n    if (clipEndTime() <= 0) {\n      this.dispatch(\"duration-change\", {\n        detail: event.detail,\n        trigger: event\n      });\n    }\n  }\n  [\"media-audio-track-change-request\"](event) {\n    const { logger, audioTracks } = this.#media;\n    if (audioTracks.readonly) {\n      {\n        logger?.warnGroup(`[vidstack] attempted to change audio track but it is currently read-only`).labelledLog(\"Request Event\", event).dispatch();\n      }\n      return;\n    }\n    const index = event.detail, track = audioTracks[index];\n    if (track) {\n      const key = event.type;\n      this.#request.queue.enqueue(key, event);\n      track.selected = true;\n    } else {\n      logger?.warnGroup(\"[vidstack] failed audio track change request (invalid index)\").labelledLog(\"Audio Tracks\", audioTracks.toArray()).labelledLog(\"Index\", index).labelledLog(\"Request Event\", event).dispatch();\n    }\n  }\n  async [\"media-enter-fullscreen-request\"](event) {\n    try {\n      await this.enterFullscreen(event.detail, event);\n    } catch (error) {\n      this.#onFullscreenError(error, event);\n    }\n  }\n  async [\"media-exit-fullscreen-request\"](event) {\n    try {\n      await this.exitFullscreen(event.detail, event);\n    } catch (error) {\n      this.#onFullscreenError(error, event);\n    }\n  }\n  async #onFullscreenChange(event) {\n    const lockType = peek(this.$props.fullscreenOrientation), isFullscreen = event.detail;\n    if (isUndefined(lockType) || lockType === \"none\" || !this.#orientation.supported) return;\n    if (isFullscreen) {\n      if (this.#orientation.locked) return;\n      this.dispatch(\"media-orientation-lock-request\", {\n        detail: lockType,\n        trigger: event\n      });\n    } else if (this.#orientation.locked) {\n      this.dispatch(\"media-orientation-unlock-request\", {\n        trigger: event\n      });\n    }\n  }\n  #onFullscreenError(error, request) {\n    {\n      this.#logError(\"fullscreen request failed\", error, request);\n    }\n    this.#stateMgr.handle(\n      this.createEvent(\"fullscreen-error\", {\n        detail: coerceToError(error)\n      })\n    );\n  }\n  async [\"media-orientation-lock-request\"](event) {\n    const key = event.type;\n    try {\n      this.#request.queue.enqueue(key, event);\n      await this.#orientation.lock(event.detail);\n    } catch (error) {\n      this.#request.queue.delete(key);\n      {\n        this.#logError(\"failed to lock screen orientation\", error, event);\n      }\n    }\n  }\n  async [\"media-orientation-unlock-request\"](event) {\n    const key = event.type;\n    try {\n      this.#request.queue.enqueue(key, event);\n      await this.#orientation.unlock();\n    } catch (error) {\n      this.#request.queue.delete(key);\n      {\n        this.#logError(\"failed to unlock screen orientation\", error, event);\n      }\n    }\n  }\n  async [\"media-enter-pip-request\"](event) {\n    try {\n      await this.enterPictureInPicture(event);\n    } catch (error) {\n      this.#onPictureInPictureError(error, event);\n    }\n  }\n  async [\"media-exit-pip-request\"](event) {\n    try {\n      await this.exitPictureInPicture(event);\n    } catch (error) {\n      this.#onPictureInPictureError(error, event);\n    }\n  }\n  #onPictureInPictureError(error, request) {\n    {\n      this.#logError(\"pip request failed\", error, request);\n    }\n    this.#stateMgr.handle(\n      this.createEvent(\"picture-in-picture-error\", {\n        detail: coerceToError(error)\n      })\n    );\n  }\n  [\"media-live-edge-request\"](event) {\n    const { live, liveEdge, canSeek } = this.$state;\n    if (!live() || liveEdge() || !canSeek()) return;\n    this.#request.queue.enqueue(\"media-seek-request\", event);\n    try {\n      this.seekToLiveEdge();\n    } catch (error) {\n      this.#request.queue.delete(\"media-seek-request\");\n      {\n        this.#logError(\"seek to live edge fail\", error, event);\n      }\n    }\n  }\n  async [\"media-loop-request\"](event) {\n    try {\n      this.#request.looping = true;\n      this.#request.replaying = true;\n      await this.play(event);\n    } catch (error) {\n      this.#request.looping = false;\n    }\n  }\n  [\"media-user-loop-change-request\"](event) {\n    this.$state.userPrefersLoop.set(event.detail);\n  }\n  async [\"media-pause-request\"](event) {\n    if (this.$state.paused()) return;\n    try {\n      await this.pause(event);\n    } catch (error) {\n    }\n  }\n  async [\"media-play-request\"](event) {\n    if (!this.$state.paused()) return;\n    try {\n      await this.play(event);\n    } catch (e) {\n    }\n  }\n  [\"media-rate-change-request\"](event) {\n    const { playbackRate, canSetPlaybackRate } = this.$state;\n    if (playbackRate() === event.detail || !canSetPlaybackRate()) return;\n    const provider = this.#$provider();\n    if (!provider?.setPlaybackRate) return;\n    this.#request.queue.enqueue(\"media-rate-change-request\", event);\n    provider.setPlaybackRate(event.detail);\n  }\n  [\"media-audio-gain-change-request\"](event) {\n    try {\n      this.setAudioGain(event.detail, event);\n    } catch (e) {\n    }\n  }\n  [\"media-quality-change-request\"](event) {\n    const { qualities, storage, logger } = this.#media;\n    if (qualities.readonly) {\n      {\n        logger?.warnGroup(`[vidstack] attempted to change video quality but it is currently read-only`).labelledLog(\"Request Event\", event).dispatch();\n      }\n      return;\n    }\n    this.#request.queue.enqueue(\"media-quality-change-request\", event);\n    const index = event.detail;\n    if (index < 0) {\n      qualities.autoSelect(event);\n      if (event.isOriginTrusted) storage?.setVideoQuality?.(null);\n    } else {\n      const quality = qualities[index];\n      if (quality) {\n        quality.selected = true;\n        if (event.isOriginTrusted) {\n          storage?.setVideoQuality?.({\n            id: quality.id,\n            width: quality.width,\n            height: quality.height,\n            bitrate: quality.bitrate\n          });\n        }\n      } else {\n        logger?.warnGroup(\"[vidstack] failed quality change request (invalid index)\").labelledLog(\"Qualities\", qualities.toArray()).labelledLog(\"Index\", index).labelledLog(\"Request Event\", event).dispatch();\n      }\n    }\n  }\n  [\"media-pause-controls-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.controls.pause(event);\n  }\n  [\"media-resume-controls-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.controls.resume(event);\n  }\n  [\"media-seek-request\"](event) {\n    const { canSeek, ended, live, seekableEnd, userBehindLiveEdge } = this.$state, seekTime = event.detail;\n    if (ended()) this.#request.replaying = true;\n    const key = event.type;\n    this.#request.seeking = false;\n    this.#request.queue.delete(key);\n    const boundedTime = boundTime(seekTime, this.$state);\n    if (!Number.isFinite(boundedTime) || !canSeek()) return;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setCurrentTime(boundedTime);\n    if (live() && event.isOriginTrusted && Math.abs(seekableEnd() - boundedTime) >= 2) {\n      userBehindLiveEdge.set(true);\n    }\n  }\n  [\"media-seeking-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.$state.seeking.set(true);\n    this.#request.seeking = true;\n  }\n  [\"media-start-loading\"](event) {\n    if (this.$state.canLoad()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#stateMgr.handle(this.createEvent(\"can-load\"));\n  }\n  [\"media-poster-start-loading\"](event) {\n    if (this.$state.canLoadPoster()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#stateMgr.handle(this.createEvent(\"can-load-poster\"));\n  }\n  [\"media-text-track-change-request\"](event) {\n    const { index, mode } = event.detail, track = this.#media.textTracks[index];\n    if (track) {\n      const key = event.type;\n      this.#request.queue.enqueue(key, event);\n      track.setMode(mode, event);\n    } else {\n      this.#media.logger?.warnGroup(\"[vidstack] failed text track change request (invalid index)\").labelledLog(\"Text Tracks\", this.#media.textTracks.toArray()).labelledLog(\"Index\", index).labelledLog(\"Request Event\", event).dispatch();\n    }\n  }\n  [\"media-mute-request\"](event) {\n    if (this.$state.muted()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setMuted(true);\n  }\n  [\"media-unmute-request\"](event) {\n    const { muted, volume } = this.$state;\n    if (!muted()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#media.$provider().setMuted(false);\n    if (volume() === 0) {\n      this.#request.queue.enqueue(key, event);\n      this.#$provider().setVolume(0.25);\n    }\n  }\n  [\"media-volume-change-request\"](event) {\n    const { muted, volume } = this.$state;\n    const newVolume = event.detail;\n    if (volume() === newVolume) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setVolume(newVolume);\n    if (newVolume > 0 && muted()) {\n      this.#request.queue.enqueue(key, event);\n      this.#$provider().setMuted(false);\n    }\n  }\n  #logError(title, error, request) {\n    this.#media.logger?.errorGroup(`[vidstack] ${title}`).labelledLog(\"Error\", error).labelledLog(\"Media Context\", { ...this.#media }).labelledLog(\"Trigger Event\", request).dispatch();\n  }\n}\nfunction throwIfNotReadyForPlayback(provider, canPlay) {\n  if (provider && canPlay) return;\n  throw Error(\n    `[vidstack] media is not ready - wait for \\`can-play\\` event.` \n  );\n}\nfunction throwIfFullscreenNotSupported(target, fullscreen) {\n  if (fullscreen?.supported) return;\n  throw Error(\n    `[vidstack] fullscreen is not currently available on target \\`${target}\\`` \n  );\n}\nclass MediaRequestContext {\n  seeking = false;\n  looping = false;\n  replaying = false;\n  queue = new Queue();\n}\n\nconst TRACKED_EVENT = /* @__PURE__ */ new Set([\n  \"auto-play\",\n  \"auto-play-fail\",\n  \"can-load\",\n  \"sources-change\",\n  \"source-change\",\n  \"load-start\",\n  \"abort\",\n  \"error\",\n  \"loaded-metadata\",\n  \"loaded-data\",\n  \"can-play\",\n  \"play\",\n  \"play-fail\",\n  \"pause\",\n  \"playing\",\n  \"seeking\",\n  \"seeked\",\n  \"waiting\"\n]);\n\nclass MediaStateManager extends MediaPlayerController {\n  #request;\n  #media;\n  #trackedEvents = /* @__PURE__ */ new Map();\n  #clipEnded = false;\n  #playedIntervals = [];\n  #playedInterval = [-1, -1];\n  #firingWaiting = false;\n  #waitingTrigger;\n  constructor(request, media) {\n    super();\n    this.#request = request;\n    this.#media = media;\n  }\n  onAttach(el) {\n    el.setAttribute(\"aria-busy\", \"true\");\n    new EventsController(this).add(\"fullscreen-change\", this[\"fullscreen-change\"].bind(this)).add(\"fullscreen-error\", this[\"fullscreen-error\"].bind(this)).add(\"orientation-change\", this[\"orientation-change\"].bind(this));\n  }\n  onConnect(el) {\n    effect(this.#watchCanSetVolume.bind(this));\n    this.#addTextTrackListeners();\n    this.#addQualityListeners();\n    this.#addAudioTrackListeners();\n    this.#resumePlaybackOnConnect();\n    onDispose(this.#pausePlaybackOnDisconnect.bind(this));\n  }\n  onDestroy() {\n    const { audioTracks, qualities, textTracks } = this.#media;\n    audioTracks[ListSymbol.reset]();\n    qualities[ListSymbol.reset]();\n    textTracks[ListSymbol.reset]();\n    this.#stopWatchingQualityResize();\n  }\n  handle(event) {\n    if (!this.scope) return;\n    const type = event.type;\n    untrack(() => this[event.type]?.(event));\n    if (!IS_SERVER) {\n      if (TRACKED_EVENT.has(type)) this.#trackedEvents.set(type, event);\n      this.dispatch(event);\n    }\n  }\n  #isPlayingOnDisconnect = false;\n  #resumePlaybackOnConnect() {\n    if (!this.#isPlayingOnDisconnect) return;\n    requestAnimationFrame(() => {\n      if (!this.scope) return;\n      this.#media.remote.play(new DOMEvent(\"dom-connect\"));\n    });\n    this.#isPlayingOnDisconnect = false;\n  }\n  #pausePlaybackOnDisconnect() {\n    if (this.#isPlayingOnDisconnect) return;\n    this.#isPlayingOnDisconnect = !this.$state.paused();\n    this.#media.$provider()?.pause();\n  }\n  #resetTracking() {\n    this.#stopWaiting();\n    this.#clipEnded = false;\n    this.#request.replaying = false;\n    this.#request.looping = false;\n    this.#firingWaiting = false;\n    this.#waitingTrigger = void 0;\n    this.#trackedEvents.clear();\n  }\n  #satisfyRequest(request, event) {\n    const requestEvent = this.#request.queue.serve(request);\n    if (!requestEvent) return;\n    event.request = requestEvent;\n    event.triggers.add(requestEvent);\n  }\n  #addTextTrackListeners() {\n    this.#onTextTracksChange();\n    this.#onTextTrackModeChange();\n    const textTracks = this.#media.textTracks;\n    new EventsController(textTracks).add(\"add\", this.#onTextTracksChange.bind(this)).add(\"remove\", this.#onTextTracksChange.bind(this)).add(\"mode-change\", this.#onTextTrackModeChange.bind(this));\n  }\n  #addQualityListeners() {\n    const qualities = this.#media.qualities;\n    new EventsController(qualities).add(\"add\", this.#onQualitiesChange.bind(this)).add(\"remove\", this.#onQualitiesChange.bind(this)).add(\"change\", this.#onQualityChange.bind(this)).add(\"auto-change\", this.#onAutoQualityChange.bind(this)).add(\"readonly-change\", this.#onCanSetQualityChange.bind(this));\n  }\n  #addAudioTrackListeners() {\n    const audioTracks = this.#media.audioTracks;\n    new EventsController(audioTracks).add(\"add\", this.#onAudioTracksChange.bind(this)).add(\"remove\", this.#onAudioTracksChange.bind(this)).add(\"change\", this.#onAudioTrackChange.bind(this));\n  }\n  #onTextTracksChange(event) {\n    const { textTracks } = this.$state;\n    textTracks.set(this.#media.textTracks.toArray());\n    this.dispatch(\"text-tracks-change\", {\n      detail: textTracks(),\n      trigger: event\n    });\n  }\n  #onTextTrackModeChange(event) {\n    if (event) this.#satisfyRequest(\"media-text-track-change-request\", event);\n    const current = this.#media.textTracks.selected, { textTrack } = this.$state;\n    if (textTrack() !== current) {\n      textTrack.set(current);\n      this.dispatch(\"text-track-change\", {\n        detail: current,\n        trigger: event\n      });\n    }\n  }\n  #onAudioTracksChange(event) {\n    const { audioTracks } = this.$state;\n    audioTracks.set(this.#media.audioTracks.toArray());\n    this.dispatch(\"audio-tracks-change\", {\n      detail: audioTracks(),\n      trigger: event\n    });\n  }\n  #onAudioTrackChange(event) {\n    const { audioTrack } = this.$state;\n    audioTrack.set(this.#media.audioTracks.selected);\n    if (event) this.#satisfyRequest(\"media-audio-track-change-request\", event);\n    this.dispatch(\"audio-track-change\", {\n      detail: audioTrack(),\n      trigger: event\n    });\n  }\n  #onQualitiesChange(event) {\n    const { qualities } = this.$state;\n    qualities.set(this.#media.qualities.toArray());\n    this.dispatch(\"qualities-change\", {\n      detail: qualities(),\n      trigger: event\n    });\n  }\n  #onQualityChange(event) {\n    const { quality } = this.$state;\n    quality.set(this.#media.qualities.selected);\n    if (event) this.#satisfyRequest(\"media-quality-change-request\", event);\n    this.dispatch(\"quality-change\", {\n      detail: quality(),\n      trigger: event\n    });\n  }\n  #onAutoQualityChange() {\n    const { qualities } = this.#media, isAuto = qualities.auto;\n    this.$state.autoQuality.set(isAuto);\n    if (!isAuto) this.#stopWatchingQualityResize();\n  }\n  #stopQualityResizeEffect = null;\n  #watchQualityResize() {\n    this.#stopWatchingQualityResize();\n    this.#stopQualityResizeEffect = effect(() => {\n      const { qualities } = this.#media, { mediaWidth, mediaHeight } = this.$state, w = mediaWidth(), h = mediaHeight();\n      if (w === 0 || h === 0) return;\n      let selectedQuality = null, minScore = Infinity;\n      for (const quality of qualities) {\n        const score = Math.abs(quality.width - w) + Math.abs(quality.height - h);\n        if (score < minScore) {\n          minScore = score;\n          selectedQuality = quality;\n        }\n      }\n      if (selectedQuality) {\n        qualities[ListSymbol.select](\n          selectedQuality,\n          true,\n          new DOMEvent(\"resize\", { detail: { width: w, height: h } })\n        );\n      }\n    });\n  }\n  #stopWatchingQualityResize() {\n    this.#stopQualityResizeEffect?.();\n    this.#stopQualityResizeEffect = null;\n  }\n  #onCanSetQualityChange() {\n    this.$state.canSetQuality.set(!this.#media.qualities.readonly);\n  }\n  #watchCanSetVolume() {\n    const { canSetVolume, isGoogleCastConnected } = this.$state;\n    if (isGoogleCastConnected()) {\n      canSetVolume.set(false);\n      return;\n    }\n    canChangeVolume().then(canSetVolume.set);\n  }\n  [\"provider-change\"](event) {\n    const prevProvider = this.#media.$provider(), newProvider = event.detail;\n    if (prevProvider?.type === newProvider?.type) return;\n    prevProvider?.destroy?.();\n    prevProvider?.scope?.dispose();\n    this.#media.$provider.set(event.detail);\n    if (prevProvider && event.detail === null) {\n      this.#resetMediaState(event);\n    }\n  }\n  [\"provider-loader-change\"](event) {\n    {\n      this.#media.logger?.infoGroup(`Loader change \\`${event.detail?.constructor.name}\\``).labelledLog(\"Event\", event).dispatch();\n    }\n  }\n  [\"auto-play\"](event) {\n    this.$state.autoPlayError.set(null);\n  }\n  [\"auto-play-fail\"](event) {\n    this.$state.autoPlayError.set(event.detail);\n    this.#resetTracking();\n  }\n  [\"can-load\"](event) {\n    this.$state.canLoad.set(true);\n    this.#trackedEvents.set(\"can-load\", event);\n    this.#media.textTracks[TextTrackSymbol.canLoad]();\n    this.#satisfyRequest(\"media-start-loading\", event);\n  }\n  [\"can-load-poster\"](event) {\n    this.$state.canLoadPoster.set(true);\n    this.#trackedEvents.set(\"can-load-poster\", event);\n    this.#satisfyRequest(\"media-poster-start-loading\", event);\n  }\n  [\"media-type-change\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const viewType = this.$state.viewType();\n    this.$state.mediaType.set(event.detail);\n    const providedViewType = this.$state.providedViewType(), currentViewType = providedViewType === \"unknown\" ? event.detail : providedViewType;\n    if (viewType !== currentViewType) {\n      if (IS_SERVER) {\n        this.$state.inferredViewType.set(currentViewType);\n      } else {\n        setTimeout(() => {\n          requestAnimationFrame(() => {\n            if (!this.scope) return;\n            this.$state.inferredViewType.set(event.detail);\n            this.dispatch(\"view-type-change\", {\n              detail: currentViewType,\n              trigger: event\n            });\n          });\n        }, 0);\n      }\n    }\n  }\n  [\"stream-type-change\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const { streamType, inferredStreamType } = this.$state;\n    inferredStreamType.set(event.detail);\n    event.detail = streamType();\n  }\n  [\"rate-change\"](event) {\n    const { storage } = this.#media, { canPlay } = this.$state;\n    this.$state.playbackRate.set(event.detail);\n    this.#satisfyRequest(\"media-rate-change-request\", event);\n    if (canPlay()) {\n      storage?.setPlaybackRate?.(event.detail);\n    }\n  }\n  [\"remote-playback-change\"](event) {\n    const { remotePlaybackState, remotePlaybackType } = this.$state, { type, state } = event.detail, isConnected = state === \"connected\";\n    remotePlaybackType.set(type);\n    remotePlaybackState.set(state);\n    const key = type === \"airplay\" ? \"media-airplay-request\" : \"media-google-cast-request\";\n    if (isConnected) {\n      this.#satisfyRequest(key, event);\n    } else {\n      const requestEvent = this.#request.queue.peek(key);\n      if (requestEvent) {\n        event.request = requestEvent;\n        event.triggers.add(requestEvent);\n      }\n    }\n  }\n  [\"sources-change\"](event) {\n    const prevSources = this.$state.sources(), newSources = event.detail;\n    this.$state.sources.set(newSources);\n    this.#onSourceQualitiesChange(prevSources, newSources, event);\n  }\n  #onSourceQualitiesChange(prevSources, newSources, trigger) {\n    let { qualities } = this.#media, added = false, removed = false;\n    for (const prevSrc of prevSources) {\n      if (!isVideoQualitySrc(prevSrc)) continue;\n      const exists = newSources.some((s) => s.src === prevSrc.src);\n      if (!exists) {\n        const quality = qualities.getBySrc(prevSrc.src);\n        if (quality) {\n          qualities[ListSymbol.remove](quality, trigger);\n          removed = true;\n        }\n      }\n    }\n    if (removed && !qualities.length) {\n      this.$state.savedState.set(null);\n      qualities[ListSymbol.reset](trigger);\n    }\n    for (const src of newSources) {\n      if (!isVideoQualitySrc(src) || qualities.getBySrc(src.src)) continue;\n      const quality = {\n        id: src.id ?? src.height + \"p\",\n        bitrate: null,\n        codec: null,\n        ...src,\n        selected: false\n      };\n      qualities[ListSymbol.add](quality, trigger);\n      added = true;\n    }\n    if (added && !qualities[QualitySymbol.enableAuto]) {\n      this.#watchQualityResize();\n      qualities[QualitySymbol.enableAuto] = this.#watchQualityResize.bind(this);\n      qualities[QualitySymbol.setAuto](true, trigger);\n    }\n  }\n  [\"source-change\"](event) {\n    event.isQualityChange = event.originEvent?.type === \"quality-change\";\n    const source = event.detail;\n    this.#resetMediaState(event, event.isQualityChange);\n    this.#trackedEvents.set(event.type, event);\n    this.$state.source.set(source);\n    this.el?.setAttribute(\"aria-busy\", \"true\");\n    {\n      this.#media.logger?.infoGroup(\"\\u{1F4FC} Media source change\").labelledLog(\"Source\", source).dispatch();\n    }\n  }\n  #resetMediaState(event, isSourceQualityChange = false) {\n    const { audioTracks, qualities } = this.#media;\n    if (!isSourceQualityChange) {\n      this.#playedIntervals = [];\n      this.#playedInterval = [-1, -1];\n      audioTracks[ListSymbol.reset](event);\n      qualities[ListSymbol.reset](event);\n      softResetMediaState(this.$state, isSourceQualityChange);\n      this.#resetTracking();\n      return;\n    }\n    softResetMediaState(this.$state, isSourceQualityChange);\n    this.#resetTracking();\n  }\n  [\"abort\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const canLoadEvent = this.#trackedEvents.get(\"can-load\");\n    if (canLoadEvent && !event.triggers.hasType(\"can-load\")) {\n      event.triggers.add(canLoadEvent);\n    }\n  }\n  [\"load-start\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n  }\n  [\"error\"](event) {\n    this.$state.error.set(event.detail);\n    const abortEvent = this.#trackedEvents.get(\"abort\");\n    if (abortEvent) event.triggers.add(abortEvent);\n    {\n      this.#media.logger?.errorGroup(\"Media Error\").labelledLog(\"Error\", event.detail).labelledLog(\"Event\", event).labelledLog(\"Context\", this.#media).dispatch();\n    }\n  }\n  [\"loaded-metadata\"](event) {\n    const loadStartEvent = this.#trackedEvents.get(\"load-start\");\n    if (loadStartEvent) event.triggers.add(loadStartEvent);\n  }\n  [\"loaded-data\"](event) {\n    const loadStartEvent = this.#trackedEvents.get(\"load-start\");\n    if (loadStartEvent) event.triggers.add(loadStartEvent);\n  }\n  [\"can-play\"](event) {\n    const loadedMetadata = this.#trackedEvents.get(\"loaded-metadata\");\n    if (loadedMetadata) event.triggers.add(loadedMetadata);\n    this.#onCanPlayDetail(event.detail);\n    this.el?.setAttribute(\"aria-busy\", \"false\");\n  }\n  [\"can-play-through\"](event) {\n    this.#onCanPlayDetail(event.detail);\n    const canPlay = this.#trackedEvents.get(\"can-play\");\n    if (canPlay) event.triggers.add(canPlay);\n  }\n  #onCanPlayDetail(detail) {\n    const { seekable, buffered, intrinsicDuration, canPlay } = this.$state;\n    canPlay.set(true);\n    buffered.set(detail.buffered);\n    seekable.set(detail.seekable);\n    const seekableEnd = getTimeRangesEnd(detail.seekable) ?? Infinity;\n    intrinsicDuration.set(seekableEnd);\n  }\n  [\"duration-change\"](event) {\n    const { live, intrinsicDuration, providedDuration, clipEndTime, ended } = this.$state, time = event.detail;\n    if (!live()) {\n      const duration = !Number.isNaN(time) ? time : 0;\n      intrinsicDuration.set(duration);\n      if (ended()) this.#onEndPrecisionChange(event);\n    }\n    if (providedDuration() > 0 || clipEndTime() > 0) {\n      event.stopImmediatePropagation();\n    }\n  }\n  [\"progress\"](event) {\n    const { buffered, seekable } = this.$state, { buffered: newBuffered, seekable: newSeekable } = event.detail, newBufferedEnd = getTimeRangesEnd(newBuffered), hasBufferedLengthChanged = newBuffered.length !== buffered().length, hasBufferedEndChanged = newBufferedEnd !== getTimeRangesEnd(buffered()), newSeekableEnd = getTimeRangesEnd(newSeekable), hasSeekableLengthChanged = newSeekable.length !== seekable().length, hasSeekableEndChanged = newSeekableEnd !== getTimeRangesEnd(seekable());\n    if (hasBufferedLengthChanged || hasBufferedEndChanged) {\n      buffered.set(newBuffered);\n    }\n    if (hasSeekableLengthChanged || hasSeekableEndChanged) {\n      seekable.set(newSeekable);\n    }\n  }\n  [\"play\"](event) {\n    const {\n      paused,\n      autoPlayError,\n      ended,\n      autoPlaying,\n      playsInline,\n      pointer,\n      muted,\n      viewType,\n      live,\n      userBehindLiveEdge\n    } = this.$state;\n    this.#resetPlaybackIfNeeded();\n    if (!paused()) {\n      event.stopImmediatePropagation();\n      return;\n    }\n    event.autoPlay = autoPlaying();\n    const waitingEvent = this.#trackedEvents.get(\"waiting\");\n    if (waitingEvent) event.triggers.add(waitingEvent);\n    this.#satisfyRequest(\"media-play-request\", event);\n    this.#trackedEvents.set(\"play\", event);\n    paused.set(false);\n    autoPlayError.set(null);\n    if (event.autoPlay) {\n      this.handle(\n        this.createEvent(\"auto-play\", {\n          detail: { muted: muted() },\n          trigger: event\n        })\n      );\n      autoPlaying.set(false);\n    }\n    if (ended() || this.#request.replaying) {\n      this.#request.replaying = false;\n      ended.set(false);\n      this.handle(this.createEvent(\"replay\", { trigger: event }));\n    }\n    if (!playsInline() && viewType() === \"video\" && pointer() === \"coarse\") {\n      this.#media.remote.enterFullscreen(\"prefer-media\", event);\n    }\n    if (live() && !userBehindLiveEdge()) {\n      this.#media.remote.seekToLiveEdge(event);\n    }\n  }\n  #resetPlaybackIfNeeded(trigger) {\n    const provider = peek(this.#media.$provider);\n    if (!provider) return;\n    const { ended, seekableStart, clipEndTime, currentTime, realCurrentTime, duration } = this.$state;\n    const shouldReset = ended() || realCurrentTime() < seekableStart() || clipEndTime() > 0 && realCurrentTime() >= clipEndTime() || Math.abs(currentTime() - duration()) < 0.1;\n    if (shouldReset) {\n      this.dispatch(\"media-seek-request\", {\n        detail: seekableStart(),\n        trigger\n      });\n    }\n    return shouldReset;\n  }\n  [\"play-fail\"](event) {\n    const { muted, autoPlaying } = this.$state;\n    const playEvent = this.#trackedEvents.get(\"play\");\n    if (playEvent) event.triggers.add(playEvent);\n    this.#satisfyRequest(\"media-play-request\", event);\n    const { paused, playing } = this.$state;\n    paused.set(true);\n    playing.set(false);\n    this.#resetTracking();\n    this.#trackedEvents.set(\"play-fail\", event);\n    if (event.autoPlay) {\n      this.handle(\n        this.createEvent(\"auto-play-fail\", {\n          detail: {\n            muted: muted(),\n            error: event.detail\n          },\n          trigger: event\n        })\n      );\n      autoPlaying.set(false);\n    }\n  }\n  [\"playing\"](event) {\n    const playEvent = this.#trackedEvents.get(\"play\"), seekedEvent = this.#trackedEvents.get(\"seeked\");\n    if (playEvent) event.triggers.add(playEvent);\n    else if (seekedEvent) event.triggers.add(seekedEvent);\n    setTimeout(() => this.#resetTracking(), 0);\n    const {\n      paused,\n      playing,\n      live,\n      liveSyncPosition,\n      seekableEnd,\n      started,\n      currentTime,\n      seeking,\n      ended\n    } = this.$state;\n    paused.set(false);\n    playing.set(true);\n    seeking.set(false);\n    ended.set(false);\n    if (this.#request.looping) {\n      this.#request.looping = false;\n      return;\n    }\n    if (live() && !started() && currentTime() === 0) {\n      const end = liveSyncPosition() ?? seekableEnd() - 2;\n      if (Number.isFinite(end)) this.#media.$provider().setCurrentTime(end);\n    }\n    this[\"started\"](event);\n  }\n  [\"started\"](event) {\n    const { started } = this.$state;\n    if (!started()) {\n      started.set(true);\n      this.handle(this.createEvent(\"started\", { trigger: event }));\n    }\n  }\n  [\"pause\"](event) {\n    if (!this.el?.isConnected) {\n      this.#isPlayingOnDisconnect = true;\n    }\n    this.#satisfyRequest(\"media-pause-request\", event);\n    const seekedEvent = this.#trackedEvents.get(\"seeked\");\n    if (seekedEvent) event.triggers.add(seekedEvent);\n    const { paused, playing } = this.$state;\n    paused.set(true);\n    playing.set(false);\n    if (this.#clipEnded) {\n      setTimeout(() => {\n        this.handle(this.createEvent(\"end\", { trigger: event }));\n        this.#clipEnded = false;\n      }, 0);\n    }\n    this.#resetTracking();\n  }\n  [\"time-change\"](event) {\n    if (this.#request.looping) {\n      event.stopImmediatePropagation();\n      return;\n    }\n    let { waiting, played, clipEndTime, realCurrentTime, currentTime } = this.$state, newTime = event.detail, endTime = clipEndTime();\n    realCurrentTime.set(newTime);\n    this.#updatePlayed();\n    waiting.set(false);\n    for (const track of this.#media.textTracks) {\n      track[TextTrackSymbol.updateActiveCues](newTime, event);\n    }\n    if (endTime > 0 && newTime >= endTime) {\n      this.#clipEnded = true;\n      this.dispatch(\"media-pause-request\", { trigger: event });\n    }\n    this.#saveTime();\n    this.dispatch(\"time-update\", {\n      detail: { currentTime: currentTime(), played: played() },\n      trigger: event\n    });\n  }\n  #updatePlayed() {\n    const { currentTime, played, paused } = this.$state;\n    if (paused()) return;\n    this.#playedInterval = updateTimeIntervals(\n      this.#playedIntervals,\n      this.#playedInterval,\n      currentTime()\n    );\n    played.set(new TimeRange(this.#playedIntervals));\n  }\n  // Called to update time again incase duration precision has changed.\n  #onEndPrecisionChange(trigger) {\n    const { clipStartTime, clipEndTime, duration } = this.$state, isClipped = clipStartTime() > 0 || clipEndTime() > 0;\n    if (isClipped) return;\n    this.handle(\n      this.createEvent(\"time-change\", {\n        detail: duration(),\n        trigger\n      })\n    );\n  }\n  #saveTime() {\n    const { storage } = this.#media, { canPlay, realCurrentTime } = this.$state;\n    if (canPlay()) {\n      storage?.setTime?.(realCurrentTime());\n    }\n  }\n  [\"audio-gain-change\"](event) {\n    const { storage } = this.#media, { canPlay, audioGain } = this.$state;\n    audioGain.set(event.detail);\n    this.#satisfyRequest(\"media-audio-gain-change-request\", event);\n    if (canPlay()) storage?.setAudioGain?.(audioGain());\n  }\n  [\"volume-change\"](event) {\n    const { storage } = this.#media, { volume, muted, canPlay } = this.$state, detail = event.detail;\n    volume.set(detail.volume);\n    muted.set(detail.muted || detail.volume === 0);\n    this.#satisfyRequest(\"media-volume-change-request\", event);\n    this.#satisfyRequest(detail.muted ? \"media-mute-request\" : \"media-unmute-request\", event);\n    if (canPlay()) {\n      storage?.setVolume?.(volume());\n      storage?.setMuted?.(muted());\n    }\n  }\n  [\"seeking\"] = functionThrottle(\n    (event) => {\n      const { seeking, realCurrentTime, paused } = this.$state;\n      seeking.set(true);\n      realCurrentTime.set(event.detail);\n      this.#satisfyRequest(\"media-seeking-request\", event);\n      if (paused()) {\n        this.#waitingTrigger = event;\n        this.#fireWaiting();\n      }\n      this.#playedInterval = [-1, -1];\n    },\n    150,\n    { leading: true }\n  );\n  [\"seeked\"](event) {\n    const { seeking, currentTime, realCurrentTime, paused, seekableEnd, ended, live } = this.$state;\n    if (this.#request.seeking) {\n      seeking.set(true);\n      event.stopImmediatePropagation();\n    } else if (seeking()) {\n      const waitingEvent = this.#trackedEvents.get(\"waiting\");\n      if (waitingEvent) event.triggers.add(waitingEvent);\n      const seekingEvent = this.#trackedEvents.get(\"seeking\");\n      if (seekingEvent && !event.triggers.has(seekingEvent)) {\n        event.triggers.add(seekingEvent);\n      }\n      if (paused()) this.#stopWaiting();\n      seeking.set(false);\n      realCurrentTime.set(event.detail);\n      this.#satisfyRequest(\"media-seek-request\", event);\n      const origin = event?.originEvent;\n      if (origin?.isTrusted && !(origin instanceof MessageEvent) && !/seek/.test(origin.type)) {\n        this[\"started\"](event);\n      }\n    }\n    if (!live()) {\n      if (Math.floor(currentTime()) !== Math.floor(seekableEnd())) {\n        ended.set(false);\n      } else {\n        this.end(event);\n      }\n    }\n  }\n  [\"waiting\"](event) {\n    if (this.#firingWaiting || this.#request.seeking) return;\n    event.stopImmediatePropagation();\n    this.#waitingTrigger = event;\n    this.#fireWaiting();\n  }\n  #fireWaiting = functionDebounce(() => {\n    if (!this.#waitingTrigger) return;\n    this.#firingWaiting = true;\n    const { waiting, playing } = this.$state;\n    waiting.set(true);\n    playing.set(false);\n    const event = this.createEvent(\"waiting\", { trigger: this.#waitingTrigger });\n    this.#trackedEvents.set(\"waiting\", event);\n    this.dispatch(event);\n    this.#waitingTrigger = void 0;\n    this.#firingWaiting = false;\n  }, 300);\n  [\"end\"](event) {\n    const { loop, ended } = this.$state;\n    if (!loop() && ended()) return;\n    if (loop()) {\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          this.#resetPlaybackIfNeeded(event);\n          this.dispatch(\"media-loop-request\", { trigger: event });\n        });\n      }, 10);\n      return;\n    }\n    setTimeout(() => this.#onEnded(event), 0);\n  }\n  #onEnded(event) {\n    const { storage } = this.#media, { paused, seeking, ended, duration } = this.$state;\n    this.#onEndPrecisionChange(event);\n    if (!paused()) {\n      this.dispatch(\"pause\", { trigger: event });\n    }\n    if (seeking()) {\n      this.dispatch(\"seeked\", {\n        detail: duration(),\n        trigger: event\n      });\n    }\n    ended.set(true);\n    this.#resetTracking();\n    storage?.setTime?.(duration(), true);\n    this.dispatch(\"ended\", {\n      trigger: event\n    });\n  }\n  #stopWaiting() {\n    this.#fireWaiting.cancel();\n    this.$state.waiting.set(false);\n  }\n  [\"fullscreen-change\"](event) {\n    const isFullscreen = event.detail;\n    this.$state.fullscreen.set(isFullscreen);\n    this.#satisfyRequest(\n      isFullscreen ? \"media-enter-fullscreen-request\" : \"media-exit-fullscreen-request\",\n      event\n    );\n  }\n  [\"fullscreen-error\"](event) {\n    this.#satisfyRequest(\"media-enter-fullscreen-request\", event);\n    this.#satisfyRequest(\"media-exit-fullscreen-request\", event);\n  }\n  [\"orientation-change\"](event) {\n    const isLocked = event.detail.lock;\n    this.#satisfyRequest(\n      isLocked ? \"media-orientation-lock-request\" : \"media-orientation-unlock-request\",\n      event\n    );\n  }\n  [\"picture-in-picture-change\"](event) {\n    const isPiP = event.detail;\n    this.$state.pictureInPicture.set(isPiP);\n    this.#satisfyRequest(isPiP ? \"media-enter-pip-request\" : \"media-exit-pip-request\", event);\n  }\n  [\"picture-in-picture-error\"](event) {\n    this.#satisfyRequest(\"media-enter-pip-request\", event);\n    this.#satisfyRequest(\"media-exit-pip-request\", event);\n  }\n  [\"title-change\"](event) {\n    if (!event.trigger) return;\n    event.stopImmediatePropagation();\n    this.$state.inferredTitle.set(event.detail);\n  }\n  [\"poster-change\"](event) {\n    if (!event.trigger) return;\n    event.stopImmediatePropagation();\n    this.$state.inferredPoster.set(event.detail);\n  }\n}\n\nclass MediaStateSync extends MediaPlayerController {\n  onSetup() {\n    this.#init();\n    if (IS_SERVER) return;\n    effect(this.#watchLogLevel.bind(this));\n    const effects = [\n      this.#watchMetadata,\n      this.#watchAutoplay,\n      this.#watchClipStartTime,\n      this.#watchClipEndTime,\n      this.#watchControls,\n      this.#watchCrossOrigin,\n      this.#watchDuration,\n      this.#watchLive,\n      this.#watchLiveEdge,\n      this.#watchLiveTolerance,\n      this.#watchLoop,\n      this.#watchPlaysInline,\n      this.#watchPoster,\n      this.#watchProvidedTypes,\n      this.#watchTitle\n    ];\n    for (const callback of effects) {\n      effect(callback.bind(this));\n    }\n  }\n  #init() {\n    const providedProps = {\n      duration: \"providedDuration\",\n      loop: \"providedLoop\",\n      poster: \"providedPoster\",\n      streamType: \"providedStreamType\",\n      title: \"providedTitle\",\n      viewType: \"providedViewType\"\n    };\n    const skip = /* @__PURE__ */ new Set([\n      \"currentTime\",\n      \"paused\",\n      \"playbackRate\",\n      \"volume\"\n    ]);\n    for (const prop of Object.keys(this.$props)) {\n      if (skip.has(prop)) continue;\n      this.$state[providedProps[prop] ?? prop]?.set(this.$props[prop]());\n    }\n    this.$state.muted.set(this.$props.muted() || this.$props.volume() === 0);\n  }\n  // Sync \"provided\" props with internal state. Provided props are used to differentiate from\n  // provider inferred values.\n  #watchProvidedTypes() {\n    const { viewType, streamType, title, poster, loop } = this.$props, $state = this.$state;\n    $state.providedPoster.set(poster());\n    $state.providedStreamType.set(streamType());\n    $state.providedViewType.set(viewType());\n    $state.providedTitle.set(title());\n    $state.providedLoop.set(loop());\n  }\n  #watchLogLevel() {\n    this.$state.logLevel.set(this.$props.logLevel());\n  }\n  #watchMetadata() {\n    const { artist, artwork } = this.$props;\n    this.$state.artist.set(artist());\n    this.$state.artwork.set(artwork());\n  }\n  #watchTitle() {\n    const { title } = this.$state;\n    this.dispatch(\"title-change\", { detail: title() });\n  }\n  #watchAutoplay() {\n    const autoPlay = this.$props.autoPlay() || this.$props.autoplay();\n    this.$state.autoPlay.set(autoPlay);\n    this.dispatch(\"auto-play-change\", { detail: autoPlay });\n  }\n  #watchLoop() {\n    const loop = this.$state.loop();\n    this.dispatch(\"loop-change\", { detail: loop });\n  }\n  #watchControls() {\n    const controls = this.$props.controls();\n    this.$state.controls.set(controls);\n  }\n  #watchPoster() {\n    const { poster } = this.$state;\n    this.dispatch(\"poster-change\", { detail: poster() });\n  }\n  #watchCrossOrigin() {\n    const crossOrigin = this.$props.crossOrigin() ?? this.$props.crossorigin(), value = crossOrigin === true ? \"\" : crossOrigin;\n    this.$state.crossOrigin.set(value);\n  }\n  #watchDuration() {\n    const { duration } = this.$props;\n    this.dispatch(\"media-duration-change-request\", {\n      detail: duration()\n    });\n  }\n  #watchPlaysInline() {\n    const inline = this.$props.playsInline() || this.$props.playsinline();\n    this.$state.playsInline.set(inline);\n    this.dispatch(\"plays-inline-change\", { detail: inline });\n  }\n  #watchClipStartTime() {\n    const { clipStartTime } = this.$props;\n    this.dispatch(\"media-clip-start-change-request\", {\n      detail: clipStartTime()\n    });\n  }\n  #watchClipEndTime() {\n    const { clipEndTime } = this.$props;\n    this.dispatch(\"media-clip-end-change-request\", {\n      detail: clipEndTime()\n    });\n  }\n  #watchLive() {\n    this.dispatch(\"live-change\", { detail: this.$state.live() });\n  }\n  #watchLiveTolerance() {\n    this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance());\n    this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow());\n  }\n  #watchLiveEdge() {\n    this.dispatch(\"live-edge-change\", { detail: this.$state.liveEdge() });\n  }\n}\n\nconst actions = [\"play\", \"pause\", \"seekforward\", \"seekbackward\", \"seekto\"];\nclass NavigatorMediaSession extends MediaPlayerController {\n  onConnect() {\n    effect(this.#onMetadataChange.bind(this));\n    effect(this.#onPlaybackStateChange.bind(this));\n    const handleAction = this.#handleAction.bind(this);\n    for (const action of actions) {\n      navigator.mediaSession.setActionHandler(action, handleAction);\n    }\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  #onDisconnect() {\n    for (const action of actions) {\n      navigator.mediaSession.setActionHandler(action, null);\n    }\n  }\n  #onMetadataChange() {\n    const { title, artist, artwork, poster } = this.$state;\n    navigator.mediaSession.metadata = new MediaMetadata({\n      title: title(),\n      artist: artist(),\n      artwork: artwork() ?? [{ src: poster() }]\n    });\n  }\n  #onPlaybackStateChange() {\n    const { canPlay, paused } = this.$state;\n    navigator.mediaSession.playbackState = !canPlay() ? \"none\" : paused() ? \"paused\" : \"playing\";\n  }\n  #handleAction(details) {\n    const trigger = new DOMEvent(`media-session-action`, { detail: details });\n    switch (details.action) {\n      case \"play\":\n        this.dispatch(\"media-play-request\", { trigger });\n        break;\n      case \"pause\":\n        this.dispatch(\"media-pause-request\", { trigger });\n        break;\n      case \"seekto\":\n      case \"seekforward\":\n      case \"seekbackward\":\n        this.dispatch(\"media-seek-request\", {\n          detail: isNumber(details.seekTime) ? details.seekTime : this.$state.currentTime() + (details.seekOffset ?? (details.action === \"seekforward\" ? 10 : -10)),\n          trigger\n        });\n        break;\n    }\n  }\n}\n\nconst LOCAL_STORAGE_KEY = \"@vidstack/log-colors\";\nconst savedColors = init();\nfunction getLogColor(key) {\n  return savedColors.get(key);\n}\nfunction saveLogColor(key, { color = generateColor(), overwrite = false } = {}) {\n  if (!savedColors.has(key) || overwrite) {\n    savedColors.set(key, color);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(Object.entries(savedColors)));\n  }\n}\nfunction generateColor() {\n  return `hsl(${Math.random() * 360}, 55%, 70%)`;\n}\nfunction init() {\n  let colors;\n  try {\n    colors = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  } catch {\n  }\n  return new Map(Object.entries(colors ?? {}));\n}\n\nconst LogLevelValue = Object.freeze({\n  silent: 0,\n  error: 1,\n  warn: 2,\n  info: 3,\n  debug: 4\n});\nconst LogLevelColor = Object.freeze({\n  silent: \"white\",\n  error: \"hsl(6, 58%, 50%)\",\n  warn: \"hsl(51, 58%, 50%)\",\n  info: \"hsl(219, 58%, 50%)\",\n  debug: \"hsl(280, 58%, 50%)\"\n});\n\nconst s = 1e3;\nconst m = s * 60;\nconst h = m * 60;\nconst d = h * 24;\nfunction ms(val) {\n  const msAbs = Math.abs(val);\n  if (msAbs >= d) {\n    return Math.round(val / d) + \"d\";\n  }\n  if (msAbs >= h) {\n    return Math.round(val / h) + \"h\";\n  }\n  if (msAbs >= m) {\n    return Math.round(val / m) + \"m\";\n  }\n  if (msAbs >= s) {\n    return Math.round(val / s) + \"s\";\n  }\n  return round(val, 2) + \"ms\";\n}\n\nclass LogPrinter extends ViewController {\n  #level = \"warn\" ;\n  #lastLogged;\n  /**\n   * The current log level.\n   */\n  get logLevel() {\n    return this.#level ;\n  }\n  set logLevel(level) {\n    this.#level = level;\n  }\n  onConnect() {\n    this.listen(\"vds-log\", (event) => {\n      event.stopPropagation();\n      const element = event.path?.[0] ?? (event.target instanceof ViewController ? event.target.el : event.target), eventTargetName = element?.$$COMPONENT_NAME?.replace(/^_/, \"\").replace(/Instance$/, \"\") ?? element?.tagName.toLowerCase() ?? \"unknown\";\n      const { level = \"warn\", data } = event.detail ?? {};\n      if (LogLevelValue[this.#level] < LogLevelValue[level]) {\n        return;\n      }\n      saveLogColor(eventTargetName);\n      const hint = data?.length === 1 && isGroupedLog(data[0]) ? data[0].title : isString(data?.[0]) ? data[0] : \"\";\n      console.groupCollapsed(\n        `%c${level.toUpperCase()}%c ${eventTargetName}%c ${hint.slice(0, 50)}${hint.length > 50 ? \"...\" : \"\"}`,\n        `background: ${LogLevelColor[level]}; color: white; padding: 1.5px 2.2px; border-radius: 2px; font-size: 11px;`,\n        `color: ${getLogColor(eventTargetName)}; padding: 4px 0px; font-size: 11px;`,\n        \"color: gray; font-size: 11px; padding-left: 4px;\"\n      );\n      if (data?.length === 1 && isGroupedLog(data[0])) {\n        if (element) data[0].logs.unshift({ label: \"Element\", data: [element] });\n        printGroup(level, data[0]);\n      } else if (data) {\n        print(level, ...data);\n      }\n      this.#printTimeDiff();\n      printStackTrace();\n      console.groupEnd();\n    });\n    onDispose(() => {\n      this.#lastLogged = void 0;\n    });\n  }\n  #printTimeDiff() {\n    labelledPrint(\"Time since last log\", this.#calcLastLogTimeDiff());\n  }\n  #calcLastLogTimeDiff() {\n    const time = performance.now();\n    const diff = time - (this.#lastLogged ?? (this.#lastLogged = performance.now()));\n    this.#lastLogged = time;\n    return ms(diff);\n  }\n}\nfunction print(level, ...data) {\n  console[level](...data);\n}\nfunction labelledPrint(label, ...data) {\n  console.log(`%c${label}:`, \"color: gray\", ...data);\n}\nfunction printStackTrace() {\n  console.groupCollapsed(\"%cStack Trace\", \"color: gray\");\n  console.trace();\n  console.groupEnd();\n}\nfunction printGroup(level, groupedLog) {\n  for (const log of groupedLog.logs) {\n    if (isGroupedLog(log)) {\n      console.groupCollapsed(groupedLog.title);\n      printGroup(level, log);\n      console.groupEnd();\n    } else if (\"label\" in log && !isUndefined(log.label)) {\n      labelledPrint(log.label, ...log.data);\n    } else {\n      print(level, ...log.data);\n    }\n  }\n}\n\nlet $keyboard = signal(false);\nif (!IS_SERVER) {\n  listenEvent(document, \"pointerdown\", () => {\n    $keyboard.set(false);\n  });\n  listenEvent(document, \"keydown\", (e) => {\n    if (e.metaKey || e.altKey || e.ctrlKey) return;\n    $keyboard.set(true);\n  });\n}\nclass FocusVisibleController extends ViewController {\n  #focused = signal(false);\n  onConnect(el) {\n    effect(() => {\n      const events = new EventsController(el);\n      if (!$keyboard()) {\n        this.#focused.set(false);\n        updateFocusAttr(el, false);\n        events.add(\"pointerenter\", this.#onPointerEnter.bind(this)).add(\"pointerleave\", this.#onPointerLeave.bind(this));\n        return;\n      }\n      const active = document.activeElement === el;\n      this.#focused.set(active);\n      updateFocusAttr(el, active);\n      events.add(\"focus\", this.#onFocus.bind(this)).add(\"blur\", this.#onBlur.bind(this));\n    });\n  }\n  focused() {\n    return this.#focused();\n  }\n  #onFocus() {\n    this.#focused.set(true);\n    updateFocusAttr(this.el, true);\n  }\n  #onBlur() {\n    this.#focused.set(false);\n    updateFocusAttr(this.el, false);\n  }\n  #onPointerEnter() {\n    updateHoverAttr(this.el, true);\n  }\n  #onPointerLeave() {\n    updateHoverAttr(this.el, false);\n  }\n}\nfunction updateFocusAttr(el, isFocused) {\n  setAttribute(el, \"data-focus\", isFocused);\n  setAttribute(el, \"data-hocus\", isFocused);\n}\nfunction updateHoverAttr(el, isHovering) {\n  setAttribute(el, \"data-hocus\", isHovering);\n  setAttribute(el, \"data-hover\", isHovering);\n}\n\nclass MediaPlayer extends Component {\n  static props = mediaPlayerProps;\n  static state = mediaState;\n  #media;\n  #stateMgr;\n  #requestMgr;\n  canPlayQueue = new RequestQueue();\n  remoteControl;\n  get #provider() {\n    return this.#media.$provider();\n  }\n  get #props() {\n    return this.$props;\n  }\n  constructor() {\n    super();\n    new MediaStateSync();\n    const context = {\n      player: this,\n      qualities: new VideoQualityList(),\n      audioTracks: new AudioTrackList(),\n      storage: null,\n      $provider: signal(null),\n      $providerSetup: signal(false),\n      $props: this.$props,\n      $state: this.$state\n    };\n    {\n      const logPrinter = new LogPrinter();\n      effect(() => {\n        logPrinter.logLevel = this.$props.logLevel();\n      });\n    }\n    context.logger = new Logger();\n    context.remote = this.remoteControl = new MediaRemoteControl(\n      context.logger \n    );\n    context.remote.setPlayer(this);\n    context.textTracks = new TextTrackList();\n    context.textTracks[TextTrackSymbol.crossOrigin] = this.$state.crossOrigin;\n    context.textRenderers = new TextRenderers(context);\n    context.ariaKeys = {};\n    this.#media = context;\n    provideContext(mediaContext, context);\n    this.orientation = new ScreenOrientationController();\n    new FocusVisibleController();\n    new MediaKeyboardController(context);\n    new MediaEventsLogger(context);\n    const request = new MediaRequestContext();\n    this.#stateMgr = new MediaStateManager(request, context);\n    this.#requestMgr = new MediaRequestManager(this.#stateMgr, request, context);\n    context.delegate = new MediaPlayerDelegate(this.#stateMgr.handle.bind(this.#stateMgr), context);\n    context.notify = context.delegate.notify.bind(context.delegate);\n    if (typeof navigator !== \"undefined\" && \"mediaSession\" in navigator) {\n      new NavigatorMediaSession();\n    }\n    new MediaLoadController(\"load\", this.startLoading.bind(this));\n    new MediaLoadController(\"posterLoad\", this.startLoadingPoster.bind(this));\n  }\n  onSetup() {\n    this.#setupMediaAttributes();\n    effect(this.#watchCanPlay.bind(this));\n    effect(this.#watchMuted.bind(this));\n    effect(this.#watchPaused.bind(this));\n    effect(this.#watchVolume.bind(this));\n    effect(this.#watchCurrentTime.bind(this));\n    effect(this.#watchPlaysInline.bind(this));\n    effect(this.#watchPlaybackRate.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-player\", \"\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"region\");\n    effect(this.#watchStorage.bind(this));\n    if (IS_SERVER) this.#watchTitle();\n    else effect(this.#watchTitle.bind(this));\n    if (IS_SERVER) this.#watchOrientation();\n    else effect(this.#watchOrientation.bind(this));\n    listenEvent(el, \"find-media-player\", this.#onFindPlayer.bind(this));\n  }\n  onConnect(el) {\n    if (IS_IPHONE) setAttribute(el, \"data-iphone\", \"\");\n    const pointerQuery = window.matchMedia(\"(pointer: coarse)\");\n    this.#onPointerChange(pointerQuery);\n    pointerQuery.onchange = this.#onPointerChange.bind(this);\n    const resize = new ResizeObserver(animationFrameThrottle(this.#onResize.bind(this)));\n    resize.observe(el);\n    effect(this.#onResize.bind(this));\n    this.dispatch(\"media-player-connect\", {\n      detail: this,\n      bubbles: true,\n      composed: true\n    });\n    this.#media.logger.setTarget(el);\n    onDispose(() => {\n      resize.disconnect();\n      pointerQuery.onchange = null;\n      this.#media.logger.setTarget(null);\n    });\n  }\n  onDestroy() {\n    this.#media.player = null;\n    this.canPlayQueue.reset();\n  }\n  #skipTitleUpdate = false;\n  #watchTitle() {\n    const el = this.$el, { title, live, viewType, providedTitle } = this.$state, isLive = live(), type = uppercaseFirstChar(viewType()), typeText = type !== \"Unknown\" ? `${isLive ? \"Live \" : \"\"}${type}` : isLive ? \"Live\" : \"Media\", currentTitle = title();\n    setAttribute(\n      this.el,\n      \"aria-label\",\n      `${typeText} Player` + (currentTitle ? ` - ${currentTitle}` : \"\")\n    );\n    if (!IS_SERVER && el?.hasAttribute(\"title\")) {\n      this.#skipTitleUpdate = true;\n      el?.removeAttribute(\"title\");\n    }\n  }\n  #watchOrientation() {\n    const orientation = this.orientation.landscape ? \"landscape\" : \"portrait\";\n    this.$state.orientation.set(orientation);\n    setAttribute(this.el, \"data-orientation\", orientation);\n    this.#onResize();\n  }\n  #watchCanPlay() {\n    if (this.$state.canPlay() && this.#provider) this.canPlayQueue.start();\n    else this.canPlayQueue.stop();\n  }\n  #setupMediaAttributes() {\n    if (MediaPlayer[MEDIA_ATTRIBUTES]) {\n      this.setAttributes(MediaPlayer[MEDIA_ATTRIBUTES]);\n      return;\n    }\n    const $attrs = {\n      \"data-load\": function() {\n        return this.$props.load();\n      },\n      \"data-captions\": function() {\n        const track = this.$state.textTrack();\n        return !!track && isTrackCaptionKind(track);\n      },\n      \"data-ios-controls\": function() {\n        return this.$state.iOSControls();\n      },\n      \"data-controls\": function() {\n        return this.controls.showing;\n      },\n      \"data-buffering\": function() {\n        const { canLoad, canPlay, waiting } = this.$state;\n        return canLoad() && (!canPlay() || waiting());\n      },\n      \"data-error\": function() {\n        const { error } = this.$state;\n        return !!error();\n      },\n      \"data-autoplay-error\": function() {\n        const { autoPlayError } = this.$state;\n        return !!autoPlayError();\n      }\n    };\n    const alias = {\n      autoPlay: \"autoplay\",\n      canAirPlay: \"can-airplay\",\n      canPictureInPicture: \"can-pip\",\n      pictureInPicture: \"pip\",\n      playsInline: \"playsinline\",\n      remotePlaybackState: \"remote-state\",\n      remotePlaybackType: \"remote-type\",\n      isAirPlayConnected: \"airplay\",\n      isGoogleCastConnected: \"google-cast\"\n    };\n    for (const prop2 of mediaAttributes) {\n      const attrName = \"data-\" + (alias[prop2] ?? camelToKebabCase(prop2));\n      $attrs[attrName] = function() {\n        return this.$state[prop2]();\n      };\n    }\n    delete $attrs.title;\n    MediaPlayer[MEDIA_ATTRIBUTES] = $attrs;\n    this.setAttributes($attrs);\n  }\n  #onFindPlayer(event) {\n    event.detail(this);\n  }\n  #onResize() {\n    if (IS_SERVER || !this.el) return;\n    const width = this.el.clientWidth, height = this.el.clientHeight;\n    this.$state.width.set(width);\n    this.$state.height.set(height);\n    setStyle(this.el, \"--player-width\", width + \"px\");\n    setStyle(this.el, \"--player-height\", height + \"px\");\n  }\n  #onPointerChange(queryList) {\n    if (IS_SERVER) return;\n    const pointer = queryList.matches ? \"coarse\" : \"fine\";\n    setAttribute(this.el, \"data-pointer\", pointer);\n    this.$state.pointer.set(pointer);\n    this.#onResize();\n  }\n  /**\n   * The current media provider.\n   */\n  get provider() {\n    return this.#provider;\n  }\n  /**\n   * Media controls settings.\n   */\n  get controls() {\n    return this.#requestMgr.controls;\n  }\n  set controls(controls) {\n    this.#props.controls.set(controls);\n  }\n  /**\n   * Controls the screen orientation of the current browser window and dispatches orientation\n   * change events on the player.\n   */\n  orientation;\n  /**\n   * The title of the current media.\n   */\n  get title() {\n    return peek(this.$state.title);\n  }\n  set title(newTitle) {\n    if (this.#skipTitleUpdate) {\n      this.#skipTitleUpdate = false;\n      return;\n    }\n    this.#props.title.set(newTitle);\n  }\n  /**\n   * A list of all `VideoQuality` objects representing the set of available video renditions.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/video-quality}\n   */\n  get qualities() {\n    return this.#media.qualities;\n  }\n  /**\n   * A list of all `AudioTrack` objects representing the set of available audio tracks.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/audio-tracks}\n   */\n  get audioTracks() {\n    return this.#media.audioTracks;\n  }\n  /**\n   * A list of all `TextTrack` objects representing the set of available text tracks.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/text-tracks}\n   */\n  get textTracks() {\n    return this.#media.textTracks;\n  }\n  /**\n   * Contains text renderers which are responsible for loading, parsing, and rendering text\n   * tracks.\n   */\n  get textRenderers() {\n    return this.#media.textRenderers;\n  }\n  get duration() {\n    return this.$state.duration();\n  }\n  set duration(duration) {\n    this.#props.duration.set(duration);\n  }\n  get paused() {\n    return peek(this.$state.paused);\n  }\n  set paused(paused) {\n    this.#queuePausedUpdate(paused);\n  }\n  #watchPaused() {\n    this.#queuePausedUpdate(this.$props.paused());\n  }\n  #queuePausedUpdate(paused) {\n    if (paused) {\n      this.canPlayQueue.enqueue(\"paused\", () => this.#requestMgr.pause());\n    } else this.canPlayQueue.enqueue(\"paused\", () => this.#requestMgr.play());\n  }\n  get muted() {\n    return peek(this.$state.muted);\n  }\n  set muted(muted) {\n    this.#queueMutedUpdate(muted);\n  }\n  #watchMuted() {\n    this.#queueMutedUpdate(this.$props.muted());\n  }\n  #queueMutedUpdate(muted) {\n    this.canPlayQueue.enqueue(\"muted\", () => {\n      if (this.#provider) this.#provider.setMuted(muted);\n    });\n  }\n  get currentTime() {\n    return peek(this.$state.currentTime);\n  }\n  set currentTime(time) {\n    this.#queueCurrentTimeUpdate(time);\n  }\n  #watchCurrentTime() {\n    this.#queueCurrentTimeUpdate(this.$props.currentTime());\n  }\n  #queueCurrentTimeUpdate(time) {\n    this.canPlayQueue.enqueue(\"currentTime\", () => {\n      const { currentTime } = this.$state;\n      if (time === peek(currentTime)) return;\n      peek(() => {\n        if (!this.#provider) return;\n        const boundedTime = boundTime(time, this.$state);\n        if (Number.isFinite(boundedTime)) {\n          this.#provider.setCurrentTime(boundedTime);\n        }\n      });\n    });\n  }\n  get volume() {\n    return peek(this.$state.volume);\n  }\n  set volume(volume) {\n    this.#queueVolumeUpdate(volume);\n  }\n  #watchVolume() {\n    this.#queueVolumeUpdate(this.$props.volume());\n  }\n  #queueVolumeUpdate(volume) {\n    const clampedVolume = clampNumber(0, volume, 1);\n    this.canPlayQueue.enqueue(\"volume\", () => {\n      if (this.#provider) this.#provider.setVolume(clampedVolume);\n    });\n  }\n  get playbackRate() {\n    return peek(this.$state.playbackRate);\n  }\n  set playbackRate(rate) {\n    this.#queuePlaybackRateUpdate(rate);\n  }\n  #watchPlaybackRate() {\n    this.#queuePlaybackRateUpdate(this.$props.playbackRate());\n  }\n  #queuePlaybackRateUpdate(rate) {\n    this.canPlayQueue.enqueue(\"rate\", () => {\n      if (this.#provider) this.#provider.setPlaybackRate?.(rate);\n    });\n  }\n  #watchPlaysInline() {\n    this.#queuePlaysInlineUpdate(this.$props.playsInline());\n  }\n  #queuePlaysInlineUpdate(inline) {\n    this.canPlayQueue.enqueue(\"playsinline\", () => {\n      if (this.#provider) this.#provider.setPlaysInline?.(inline);\n    });\n  }\n  #watchStorage() {\n    let storageValue = this.$props.storage(), storage = isString(storageValue) ? new LocalMediaStorage() : storageValue;\n    if (storage?.onChange) {\n      const { source } = this.$state, playerId = isString(storageValue) ? storageValue : this.el?.id, mediaId = computed(this.#computeMediaId.bind(this));\n      effect(() => storage.onChange(source(), mediaId(), playerId || void 0));\n    }\n    this.#media.storage = storage;\n    this.#media.textTracks.setStorage(storage);\n    onDispose(() => {\n      storage?.onDestroy?.();\n      this.#media.storage = null;\n      this.#media.textTracks.setStorage(null);\n    });\n  }\n  #computeMediaId() {\n    const { clipStartTime, clipEndTime } = this.$props, { source } = this.$state, src = source();\n    return src.src ? `${src.src}:${clipStartTime()}:${clipEndTime()}` : null;\n  }\n  /**\n   * Begins/resumes playback of the media. If this method is called programmatically before the\n   * user has interacted with the player, the promise may be rejected subject to the browser's\n   * autoplay policies. This method will throw if called before media is ready for playback.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play}\n   */\n  async play(trigger) {\n    return this.#requestMgr.play(trigger);\n  }\n  /**\n   * Pauses playback of the media. This method will throw if called before media is ready for\n   * playback.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause}\n   */\n  async pause(trigger) {\n    return this.#requestMgr.pause(trigger);\n  }\n  /**\n   * Attempts to display the player in fullscreen. The promise will resolve if successful, and\n   * reject if not. This method will throw if any fullscreen API is _not_ currently available.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/fullscreen}\n   */\n  async enterFullscreen(target, trigger) {\n    return this.#requestMgr.enterFullscreen(target, trigger);\n  }\n  /**\n   * Attempts to display the player inline by exiting fullscreen. This method will throw if any\n   * fullscreen API is _not_ currently available.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/fullscreen}\n   */\n  async exitFullscreen(target, trigger) {\n    return this.#requestMgr.exitFullscreen(target, trigger);\n  }\n  /**\n   * Attempts to display the player in picture-in-picture mode. This method will throw if PIP is\n   * not supported. This method will also return a `PictureInPictureWindow` if the current\n   * provider supports it.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/picture-in-picture}\n   */\n  enterPictureInPicture(trigger) {\n    return this.#requestMgr.enterPictureInPicture(trigger);\n  }\n  /**\n   * Attempts to display the player in inline by exiting picture-in-picture mode. This method\n   * will throw if not supported.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/picture-in-picture}\n   */\n  exitPictureInPicture(trigger) {\n    return this.#requestMgr.exitPictureInPicture(trigger);\n  }\n  /**\n   * Sets the current time to the live edge (i.e., `duration`). This is a no-op for non-live\n   * streams and will throw if called before media is ready for playback.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/live}\n   */\n  seekToLiveEdge(trigger) {\n    this.#requestMgr.seekToLiveEdge(trigger);\n  }\n  /**\n   * Called when media can begin loading. Calling this method will trigger the initial provider\n   * loading process. Calling it more than once has no effect.\n   *\n   * @see {@link https://vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoading(trigger) {\n    this.#media.notify(\"can-load\", void 0, trigger);\n  }\n  /**\n   * Called when the poster image can begin loading. Calling it more than once has no effect.\n   *\n   * @see {@link https://vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoadingPoster(trigger) {\n    this.#media.notify(\"can-load-poster\", void 0, trigger);\n  }\n  /**\n   * Request Apple AirPlay picker to open.\n   */\n  requestAirPlay(trigger) {\n    return this.#requestMgr.requestAirPlay(trigger);\n  }\n  /**\n   * Request Google Cast device picker to open. The Google Cast framework will be loaded if it\n   * hasn't yet.\n   */\n  requestGoogleCast(trigger) {\n    return this.#requestMgr.requestGoogleCast(trigger);\n  }\n  /**\n   * Set the audio gain, amplifying volume and enabling a maximum volume above 100%.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/audio-gain}\n   */\n  setAudioGain(gain, trigger) {\n    return this.#requestMgr.setAudioGain(gain, trigger);\n  }\n  destroy() {\n    super.destroy();\n    this.#media.remote.setPlayer(null);\n    this.dispatch(\"destroy\");\n  }\n}\nconst mediaplayer__proto = MediaPlayer.prototype;\nprop(mediaplayer__proto, \"canPlayQueue\");\nprop(mediaplayer__proto, \"remoteControl\");\nprop(mediaplayer__proto, \"provider\");\nprop(mediaplayer__proto, \"controls\");\nprop(mediaplayer__proto, \"orientation\");\nprop(mediaplayer__proto, \"title\");\nprop(mediaplayer__proto, \"qualities\");\nprop(mediaplayer__proto, \"audioTracks\");\nprop(mediaplayer__proto, \"textTracks\");\nprop(mediaplayer__proto, \"textRenderers\");\nprop(mediaplayer__proto, \"duration\");\nprop(mediaplayer__proto, \"paused\");\nprop(mediaplayer__proto, \"muted\");\nprop(mediaplayer__proto, \"currentTime\");\nprop(mediaplayer__proto, \"volume\");\nprop(mediaplayer__proto, \"playbackRate\");\nmethod(mediaplayer__proto, \"play\");\nmethod(mediaplayer__proto, \"pause\");\nmethod(mediaplayer__proto, \"enterFullscreen\");\nmethod(mediaplayer__proto, \"exitFullscreen\");\nmethod(mediaplayer__proto, \"enterPictureInPicture\");\nmethod(mediaplayer__proto, \"exitPictureInPicture\");\nmethod(mediaplayer__proto, \"seekToLiveEdge\");\nmethod(mediaplayer__proto, \"startLoading\");\nmethod(mediaplayer__proto, \"startLoadingPoster\");\nmethod(mediaplayer__proto, \"requestAirPlay\");\nmethod(mediaplayer__proto, \"requestGoogleCast\");\nmethod(mediaplayer__proto, \"setAudioGain\");\n\nfunction resolveStreamTypeFromDASHManifest(manifestSrc, requestInit) {\n  return fetch(manifestSrc, requestInit).then((res) => res.text()).then((manifest) => {\n    return /type=\"static\"/.test(manifest) ? \"on-demand\" : \"live\";\n  });\n}\nfunction resolveStreamTypeFromHLSManifest(manifestSrc, requestInit) {\n  return fetch(manifestSrc, requestInit).then((res) => res.text()).then((manifest) => {\n    const renditionURI = resolveHLSRenditionURI(manifest);\n    if (renditionURI) {\n      return resolveStreamTypeFromHLSManifest(\n        /^https?:/.test(renditionURI) ? renditionURI : new URL(renditionURI, manifestSrc).href,\n        requestInit\n      );\n    }\n    const streamType = /EXT-X-PLAYLIST-TYPE:\\s*VOD/.test(manifest) ? \"on-demand\" : \"live\";\n    if (streamType === \"live\" && resolveTargetDuration(manifest) >= 10 && (/#EXT-X-DVR-ENABLED:\\s*true/.test(manifest) || manifest.includes(\"#EXT-X-DISCONTINUITY\"))) {\n      return \"live:dvr\";\n    }\n    return streamType;\n  });\n}\nfunction resolveHLSRenditionURI(manifest) {\n  const matches = manifest.match(/#EXT-X-STREAM-INF:[^\\n]+(\\n[^\\n]+)*/g);\n  return matches ? matches[0].split(\"\\n\")[1].trim() : null;\n}\nfunction resolveTargetDuration(manifest) {\n  const lines = manifest.split(\"\\n\");\n  for (const line of lines) {\n    if (line.startsWith(\"#EXT-X-TARGETDURATION\")) {\n      const duration = parseFloat(line.split(\":\")[1]);\n      if (!isNaN(duration)) {\n        return duration;\n      }\n    }\n  }\n  return -1;\n}\n\nlet warned$1 = /* @__PURE__ */ new Set() ;\nconst sourceTypes = /* @__PURE__ */ new Map();\nclass SourceSelection {\n  #initialize = false;\n  #loaders;\n  #domSources;\n  #media;\n  #loader;\n  constructor(domSources, media, loader, customLoaders = []) {\n    this.#domSources = domSources;\n    this.#media = media;\n    this.#loader = loader;\n    const DASH_LOADER = new DASHProviderLoader(), HLS_LOADER = new HLSProviderLoader(), VIDEO_LOADER = new VideoProviderLoader(), AUDIO_LOADER = new AudioProviderLoader(), YOUTUBE_LOADER = new YouTubeProviderLoader(), VIMEO_LOADER = new VimeoProviderLoader(), EMBED_LOADERS = [YOUTUBE_LOADER, VIMEO_LOADER];\n    this.#loaders = computed(() => {\n      const remoteLoader = media.$state.remotePlaybackLoader();\n      const loaders = media.$props.preferNativeHLS() ? [VIDEO_LOADER, AUDIO_LOADER, DASH_LOADER, HLS_LOADER, ...EMBED_LOADERS, ...customLoaders] : [HLS_LOADER, VIDEO_LOADER, AUDIO_LOADER, DASH_LOADER, ...EMBED_LOADERS, ...customLoaders];\n      return remoteLoader ? [remoteLoader, ...loaders] : loaders;\n    });\n    const { $state } = media;\n    $state.sources.set(normalizeSrc(media.$props.src()));\n    for (const src of $state.sources()) {\n      const loader2 = this.#loaders().find((loader3) => loader3.canPlay(src));\n      if (!loader2) continue;\n      const mediaType = loader2.mediaType(src);\n      media.$state.source.set(src);\n      media.$state.mediaType.set(mediaType);\n      media.$state.inferredViewType.set(mediaType);\n      this.#loader.set(loader2);\n      this.#initialize = true;\n      break;\n    }\n  }\n  connect() {\n    const loader = this.#loader();\n    if (this.#initialize) {\n      this.#notifySourceChange(this.#media.$state.source(), loader);\n      this.#notifyLoaderChange(loader);\n      this.#initialize = false;\n    }\n    effect(this.#onSourcesChange.bind(this));\n    effect(this.#onSourceChange.bind(this));\n    effect(this.#onSetup.bind(this));\n    effect(this.#onLoadSource.bind(this));\n    effect(this.#onLoadPoster.bind(this));\n  }\n  #onSourcesChange() {\n    this.#media.notify(\"sources-change\", [\n      ...normalizeSrc(this.#media.$props.src()),\n      ...this.#domSources()\n    ]);\n  }\n  #onSourceChange() {\n    const { $state } = this.#media;\n    const sources = $state.sources(), currentSource = peek($state.source), newSource = this.#findNewSource(currentSource, sources), noMatch = sources[0]?.src && !newSource.src && !newSource.type;\n    if (noMatch && !warned$1.has(newSource.src) && !peek(this.#loader)) {\n      const source = sources[0];\n      console.warn(\n        `[vidstack] could not find a loader for any of the given media sources, consider providing \\`type\\`:\n\n--- HTML ---\n\n<media-provider>\n  <source src=\"${source.src}\" type=\"video/mp4\" />\n</media-provider>\"\n\n--- React ---\n\n<MediaPlayer src={{ src: \"${source.src}\", type: \"video/mp4\" }}>\n\n---\n\nFalling back to fetching source headers...`\n      );\n      warned$1.add(newSource.src);\n    }\n    if (noMatch) {\n      const { crossOrigin } = $state, credentials = getRequestCredentials(crossOrigin()), abort = new AbortController();\n      Promise.all(\n        sources.map(\n          (source) => isString(source.src) && source.type === \"?\" ? fetch(source.src, {\n            method: \"HEAD\",\n            credentials,\n            signal: abort.signal\n          }).then((res) => {\n            source.type = res.headers.get(\"content-type\") || \"??\";\n            sourceTypes.set(source.src, source.type);\n            return source;\n          }).catch(() => source) : source\n        )\n      ).then((sources2) => {\n        if (abort.signal.aborted) return;\n        const newSource2 = this.#findNewSource(peek($state.source), sources2);\n        tick();\n        if (!newSource2.src) {\n          this.#media.notify(\"error\", {\n            message: \"Failed to load resource.\",\n            code: 4\n          });\n        }\n      });\n      return () => abort.abort();\n    }\n    tick();\n  }\n  #findNewSource(currentSource, sources) {\n    let newSource = { src: \"\", type: \"\" }, newLoader = null, triggerEvent = new DOMEvent(\"sources-change\", { detail: { sources } }), loaders = this.#loaders(), { started, paused, currentTime, quality, savedState } = this.#media.$state;\n    for (const src of sources) {\n      const loader = loaders.find((loader2) => loader2.canPlay(src));\n      if (loader) {\n        newSource = src;\n        newLoader = loader;\n        break;\n      }\n    }\n    if (isVideoQualitySrc(newSource)) {\n      const currentQuality = quality(), sourceQuality = sources.find((s) => s.src === currentQuality?.src);\n      if (peek(started)) {\n        savedState.set({\n          paused: peek(paused),\n          currentTime: peek(currentTime)\n        });\n      } else {\n        savedState.set(null);\n      }\n      if (sourceQuality) {\n        newSource = sourceQuality;\n        triggerEvent = new DOMEvent(\"quality-change\", {\n          detail: { quality: currentQuality }\n        });\n      }\n    }\n    if (!isSameSrc(currentSource, newSource)) {\n      this.#notifySourceChange(newSource, newLoader, triggerEvent);\n    }\n    if (newLoader !== peek(this.#loader)) {\n      this.#notifyLoaderChange(newLoader, triggerEvent);\n    }\n    return newSource;\n  }\n  #notifySourceChange(src, loader, trigger) {\n    this.#media.notify(\"source-change\", src, trigger);\n    this.#media.notify(\"media-type-change\", loader?.mediaType(src) || \"unknown\", trigger);\n  }\n  #notifyLoaderChange(loader, trigger) {\n    this.#media.$providerSetup.set(false);\n    this.#media.notify(\"provider-change\", null, trigger);\n    loader && peek(() => loader.preconnect?.(this.#media));\n    this.#loader.set(loader);\n    this.#media.notify(\"provider-loader-change\", loader, trigger);\n  }\n  #onSetup() {\n    const provider = this.#media.$provider();\n    if (!provider || peek(this.#media.$providerSetup)) return;\n    if (this.#media.$state.canLoad()) {\n      scoped(() => provider.setup(), provider.scope);\n      this.#media.$providerSetup.set(true);\n      return;\n    }\n    peek(() => provider.preconnect?.());\n  }\n  #onLoadSource() {\n    if (!this.#media.$providerSetup()) return;\n    const provider = this.#media.$provider(), source = this.#media.$state.source(), crossOrigin = peek(this.#media.$state.crossOrigin), preferNativeHLS = peek(this.#media.$props.preferNativeHLS);\n    if (isSameSrc(provider?.currentSrc, source)) {\n      return;\n    }\n    if (this.#media.$state.canLoad()) {\n      const abort = new AbortController();\n      if (isHLSSrc(source)) {\n        if (preferNativeHLS || !isHLSSupported()) {\n          resolveStreamTypeFromHLSManifest(source.src, {\n            credentials: getRequestCredentials(crossOrigin),\n            signal: abort.signal\n          }).then((streamType) => {\n            this.#media.notify(\"stream-type-change\", streamType);\n          }).catch(noop);\n        }\n      } else if (isDASHSrc(source)) {\n        resolveStreamTypeFromDASHManifest(source.src, {\n          credentials: getRequestCredentials(crossOrigin),\n          signal: abort.signal\n        }).then((streamType) => {\n          this.#media.notify(\"stream-type-change\", streamType);\n        }).catch(noop);\n      } else {\n        this.#media.notify(\"stream-type-change\", \"on-demand\");\n      }\n      peek(() => {\n        const preload = peek(this.#media.$state.preload);\n        return provider?.loadSource(source, preload).catch((error) => {\n          {\n            this.#media.logger?.errorGroup(\"[vidstack] failed to load source\").labelledLog(\"Error\", error).labelledLog(\"Source\", source).labelledLog(\"Provider\", provider).labelledLog(\"Media Context\", { ...this.#media }).dispatch();\n          }\n        });\n      });\n      return () => abort.abort();\n    }\n    try {\n      isString(source.src) && preconnect(new URL(source.src).origin);\n    } catch (error) {\n      {\n        this.#media.logger?.infoGroup(`Failed to preconnect to source: ${source.src}`).labelledLog(\"Error\", error).dispatch();\n      }\n    }\n  }\n  #onLoadPoster() {\n    const loader = this.#loader(), { providedPoster, source, canLoadPoster } = this.#media.$state;\n    if (!loader || !loader.loadPoster || !source() || !canLoadPoster() || providedPoster()) return;\n    const abort = new AbortController(), trigger = new DOMEvent(\"source-change\", { detail: source });\n    loader.loadPoster(source(), this.#media, abort).then((url) => {\n      this.#media.notify(\"poster-change\", url || \"\", trigger);\n    }).catch(() => {\n      this.#media.notify(\"poster-change\", \"\", trigger);\n    });\n    return () => {\n      abort.abort();\n    };\n  }\n}\nfunction normalizeSrc(src) {\n  return (isArray(src) ? src : [src]).map((src2) => {\n    if (isString(src2)) {\n      return { src: src2, type: inferType(src2) };\n    } else {\n      return { ...src2, type: inferType(src2.src, src2.type) };\n    }\n  });\n}\nfunction inferType(src, type) {\n  if (isString(type) && type.length) {\n    return type;\n  } else if (isString(src) && sourceTypes.has(src)) {\n    return sourceTypes.get(src);\n  } else if (!type && isHLSSrc({ src, type: \"\" })) {\n    return \"application/x-mpegurl\";\n  } else if (!type && isDASHSrc({ src, type: \"\" })) {\n    return \"application/dash+xml\";\n  } else if (!isString(src) || src.startsWith(\"blob:\")) {\n    return \"video/object\";\n  } else if (src.includes(\"youtube\") || src.includes(\"youtu.be\")) {\n    return \"video/youtube\";\n  } else if (src.includes(\"vimeo\") && !src.includes(\"progressive_redirect\") && !src.includes(\".m3u8\")) {\n    return \"video/vimeo\";\n  }\n  return \"?\";\n}\nfunction isSameSrc(a, b) {\n  return a?.src === b?.src && a?.type === b?.type;\n}\n\nclass Tracks {\n  #domTracks;\n  #media;\n  #prevTracks = [];\n  constructor(domTracks, media) {\n    this.#domTracks = domTracks;\n    this.#media = media;\n    effect(this.#onTracksChange.bind(this));\n  }\n  #onTracksChange() {\n    const newTracks = this.#domTracks();\n    for (const oldTrack of this.#prevTracks) {\n      if (!newTracks.some((t) => t.id === oldTrack.id)) {\n        const track = oldTrack.id && this.#media.textTracks.getById(oldTrack.id);\n        if (track) this.#media.textTracks.remove(track);\n      }\n    }\n    for (const newTrack of newTracks) {\n      const id = newTrack.id || TextTrack.createId(newTrack);\n      if (!this.#media.textTracks.getById(id)) {\n        newTrack.id = id;\n        this.#media.textTracks.add(newTrack);\n      }\n    }\n    this.#prevTracks = newTracks;\n  }\n}\n\nclass MediaProvider extends Component {\n  static props = {\n    loaders: []\n  };\n  static state = new State({\n    loader: null\n  });\n  #media;\n  #sources;\n  #domSources = signal([]);\n  #domTracks = signal([]);\n  #loader = null;\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#sources = new SourceSelection(\n      this.#domSources,\n      this.#media,\n      this.$state.loader,\n      this.$props.loaders()\n    );\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-provider\", \"\");\n  }\n  onConnect(el) {\n    this.#sources.connect();\n    new Tracks(this.#domTracks, this.#media);\n    const resize = new ResizeObserver(animationFrameThrottle(this.#onResize.bind(this)));\n    resize.observe(el);\n    const mutations = new MutationObserver(this.#onMutation.bind(this));\n    mutations.observe(el, { attributes: true, childList: true });\n    this.#onResize();\n    this.#onMutation();\n    onDispose(() => {\n      resize.disconnect();\n      mutations.disconnect();\n    });\n  }\n  #loadRafId = -1;\n  load(target) {\n    target?.setAttribute(\"aria-hidden\", \"true\");\n    window.cancelAnimationFrame(this.#loadRafId);\n    this.#loadRafId = requestAnimationFrame(() => this.#runLoader(target));\n    onDispose(() => {\n      window.cancelAnimationFrame(this.#loadRafId);\n    });\n  }\n  #runLoader(target) {\n    if (!this.scope) return;\n    const loader = this.$state.loader(), { $provider } = this.#media;\n    if (this.#loader === loader && loader?.target === target && peek($provider)) return;\n    this.#destroyProvider();\n    this.#loader = loader;\n    if (loader) loader.target = target || null;\n    if (!loader || !target) return;\n    loader.load(this.#media).then((provider) => {\n      if (!this.scope) return;\n      if (peek(this.$state.loader) !== loader) return;\n      this.#media.notify(\"provider-change\", provider);\n    });\n  }\n  onDestroy() {\n    this.#loader = null;\n    this.#destroyProvider();\n  }\n  #destroyProvider() {\n    this.#media?.notify(\"provider-change\", null);\n  }\n  #onResize() {\n    if (!this.el) return;\n    const { player, $state } = this.#media, width = this.el.offsetWidth, height = this.el.offsetHeight;\n    if (!player) return;\n    $state.mediaWidth.set(width);\n    $state.mediaHeight.set(height);\n    if (player.el) {\n      setStyle(player.el, \"--media-width\", width + \"px\");\n      setStyle(player.el, \"--media-height\", height + \"px\");\n    }\n  }\n  #onMutation() {\n    const sources = [], tracks = [], children = this.el.children;\n    for (const el of children) {\n      if (el.hasAttribute(\"data-vds\")) continue;\n      if (el instanceof HTMLSourceElement) {\n        const src = {\n          id: el.id,\n          src: el.src,\n          type: el.type\n        };\n        for (const prop of [\"id\", \"src\", \"width\", \"height\", \"bitrate\", \"codec\"]) {\n          const value = el.getAttribute(`data-${prop}`);\n          if (isString(value)) src[prop] = /id|src|codec/.test(prop) ? value : Number(value);\n        }\n        sources.push(src);\n      } else if (el instanceof HTMLTrackElement) {\n        const track = {\n          src: el.src,\n          kind: el.track.kind,\n          language: el.srclang,\n          label: el.label,\n          default: el.default,\n          type: el.getAttribute(\"data-type\")\n        };\n        tracks.push({\n          id: el.id || TextTrack.createId(track),\n          ...track\n        });\n      }\n    }\n    this.#domSources.set(sources);\n    this.#domTracks.set(tracks);\n    tick();\n  }\n}\nconst mediaprovider__proto = MediaProvider.prototype;\nmethod(mediaprovider__proto, \"load\");\n\nclass MediaAnnouncer extends Component {\n  static props = {\n    translations: null\n  };\n  static state = new State({\n    label: null,\n    busy: false\n  });\n  #media;\n  #initializing = false;\n  onSetup() {\n    this.#media = useMediaContext();\n  }\n  onAttach(el) {\n    el.style.display = \"contents\";\n  }\n  onConnect(el) {\n    el.setAttribute(\"data-media-announcer\", \"\");\n    setAttributeIfEmpty(el, \"role\", \"status\");\n    setAttributeIfEmpty(el, \"aria-live\", \"polite\");\n    const { busy } = this.$state;\n    this.setAttributes({\n      \"aria-busy\": () => busy() ? \"true\" : null\n    });\n    this.#initializing = true;\n    effect(this.#watchPaused.bind(this));\n    effect(this.#watchVolume.bind(this));\n    effect(this.#watchCaptions.bind(this));\n    effect(this.#watchFullscreen.bind(this));\n    effect(this.#watchPiP.bind(this));\n    effect(this.#watchSeeking.bind(this));\n    effect(this.#watchLabel.bind(this));\n    tick();\n    this.#initializing = false;\n  }\n  #watchPaused() {\n    const { paused } = this.#media.$state;\n    this.#setLabel(!paused() ? \"Play\" : \"Pause\");\n  }\n  #watchFullscreen() {\n    const { fullscreen } = this.#media.$state;\n    this.#setLabel(fullscreen() ? \"Enter Fullscreen\" : \"Exit Fullscreen\");\n  }\n  #watchPiP() {\n    const { pictureInPicture } = this.#media.$state;\n    this.#setLabel(pictureInPicture() ? \"Enter PiP\" : \"Exit PiP\");\n  }\n  #watchCaptions() {\n    const { textTrack } = this.#media.$state;\n    this.#setLabel(textTrack() ? \"Closed-Captions On\" : \"Closed-Captions Off\");\n  }\n  #watchVolume() {\n    const { muted, volume, audioGain } = this.#media.$state;\n    this.#setLabel(\n      muted() || volume() === 0 ? \"Mute\" : `${Math.round(volume() * (audioGain() ?? 1) * 100)}% ${this.#translate(\"Volume\")}`\n    );\n  }\n  #startedSeekingAt = -1;\n  #seekTimer = -1;\n  #watchSeeking() {\n    const { seeking, currentTime } = this.#media.$state, isSeeking = seeking();\n    if (this.#startedSeekingAt > 0) {\n      window.clearTimeout(this.#seekTimer);\n      this.#seekTimer = window.setTimeout(() => {\n        if (!this.scope) return;\n        const newTime = peek(currentTime), seconds = Math.abs(newTime - this.#startedSeekingAt);\n        if (seconds >= 1) {\n          const isForward = newTime >= this.#startedSeekingAt, spokenTime = formatSpokenTime(seconds);\n          this.#setLabel(\n            `${this.#translate(isForward ? \"Seek Forward\" : \"Seek Backward\")} ${spokenTime}`\n          );\n        }\n        this.#startedSeekingAt = -1;\n        this.#seekTimer = -1;\n      }, 300);\n    } else if (isSeeking) {\n      this.#startedSeekingAt = peek(currentTime);\n    }\n  }\n  #translate(word) {\n    const { translations } = this.$props;\n    return translations?.()?.[word || \"\"] ?? word;\n  }\n  #watchLabel() {\n    const { label, busy } = this.$state, $label = this.#translate(label());\n    if (this.#initializing) return;\n    busy.set(true);\n    const id = window.setTimeout(() => void busy.set(false), 150);\n    this.el && setAttribute(this.el, \"aria-label\", $label);\n    if (isString($label)) {\n      this.dispatch(\"change\", { detail: $label });\n    }\n    return () => window.clearTimeout(id);\n  }\n  #setLabel(word) {\n    const { label } = this.$state;\n    label.set(word);\n  }\n}\n\nclass Controls extends Component {\n  static props = {\n    hideDelay: 2e3,\n    hideOnMouseLeave: false\n  };\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    effect(this.#watchProps.bind(this));\n  }\n  onAttach(el) {\n    const { pictureInPicture, fullscreen } = this.#media.$state;\n    setStyle(el, \"pointer-events\", \"none\");\n    setAttributeIfEmpty(el, \"role\", \"group\");\n    this.setAttributes({\n      \"data-visible\": this.#isShowing.bind(this),\n      \"data-fullscreen\": fullscreen,\n      \"data-pip\": pictureInPicture\n    });\n    effect(() => {\n      this.dispatch(\"change\", { detail: this.#isShowing() });\n    });\n    effect(this.#hideControls.bind(this));\n    effect(() => {\n      const isFullscreen = fullscreen();\n      for (const side of [\"top\", \"right\", \"bottom\", \"left\"]) {\n        setStyle(el, `padding-${side}`, isFullscreen && `env(safe-area-inset-${side})`);\n      }\n    });\n  }\n  #hideControls() {\n    if (!this.el) return;\n    const { nativeControls } = this.#media.$state, isHidden = nativeControls();\n    setAttribute(this.el, \"aria-hidden\", isHidden ? \"true\" : null);\n    setStyle(this.el, \"display\", isHidden ? \"none\" : null);\n  }\n  #watchProps() {\n    const { controls } = this.#media.player, { hideDelay, hideOnMouseLeave } = this.$props;\n    controls.defaultDelay = hideDelay() === 2e3 ? this.#media.$props.controlsDelay() : hideDelay();\n    controls.hideOnMouseLeave = hideOnMouseLeave();\n  }\n  #isShowing() {\n    const { controlsVisible } = this.#media.$state;\n    return controlsVisible();\n  }\n}\n\nclass ControlsGroup extends Component {\n  onAttach(el) {\n    if (!el.style.pointerEvents) setStyle(el, \"pointer-events\", \"auto\");\n  }\n}\n\nclass Popper extends ViewController {\n  #delegate;\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n    effect(this.#watchTrigger.bind(this));\n  }\n  onDestroy() {\n    this.#stopAnimationEndListener?.();\n    this.#stopAnimationEndListener = null;\n  }\n  #watchTrigger() {\n    const trigger = this.#delegate.trigger();\n    if (!trigger) {\n      this.hide();\n      return;\n    }\n    const show = this.show.bind(this), hide = this.hide.bind(this);\n    this.#delegate.listen(trigger, show, hide);\n  }\n  #showTimerId = -1;\n  #hideRafId = -1;\n  #stopAnimationEndListener = null;\n  show(trigger) {\n    this.#cancelShowing();\n    window.cancelAnimationFrame(this.#hideRafId);\n    this.#hideRafId = -1;\n    this.#stopAnimationEndListener?.();\n    this.#stopAnimationEndListener = null;\n    this.#showTimerId = window.setTimeout(() => {\n      this.#showTimerId = -1;\n      const content = this.#delegate.content();\n      if (content) content.style.removeProperty(\"display\");\n      peek(() => this.#delegate.onChange(true, trigger));\n    }, this.#delegate.showDelay?.() ?? 0);\n  }\n  hide(trigger) {\n    this.#cancelShowing();\n    peek(() => this.#delegate.onChange(false, trigger));\n    this.#hideRafId = requestAnimationFrame(() => {\n      this.#cancelShowing();\n      this.#hideRafId = -1;\n      const content = this.#delegate.content();\n      if (content) {\n        const onHide = () => {\n          content.style.display = \"none\";\n          this.#stopAnimationEndListener = null;\n        };\n        const isAnimated = hasAnimation(content);\n        if (isAnimated) {\n          this.#stopAnimationEndListener?.();\n          const stop = listenEvent(content, \"animationend\", onHide, { once: true });\n          this.#stopAnimationEndListener = stop;\n        } else {\n          onHide();\n        }\n      }\n    });\n  }\n  #cancelShowing() {\n    window.clearTimeout(this.#showTimerId);\n    this.#showTimerId = -1;\n  }\n}\n\nconst tooltipContext = createContext();\n\nlet id = 0;\nclass Tooltip extends Component {\n  static props = {\n    showDelay: 700\n  };\n  #id = `media-tooltip-${++id}`;\n  #trigger = signal(null);\n  #content = signal(null);\n  #showing = signal(false);\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const { showDelay } = this.$props;\n    new Popper({\n      trigger: this.#trigger,\n      content: this.#content,\n      showDelay,\n      listen(trigger, show, hide) {\n        effect(() => {\n          if ($keyboard()) listenEvent(trigger, \"focus\", show);\n          listenEvent(trigger, \"blur\", hide);\n        });\n        new EventsController(trigger).add(\"touchstart\", (e) => e.preventDefault(), { passive: false }).add(\"mouseenter\", show).add(\"mouseleave\", hide);\n      },\n      onChange: this.#onShowingChange.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  onSetup() {\n    provideContext(tooltipContext, {\n      trigger: this.#trigger,\n      content: this.#content,\n      showing: this.#showing,\n      attachTrigger: this.#attachTrigger.bind(this),\n      detachTrigger: this.#detachTrigger.bind(this),\n      attachContent: this.#attachContent.bind(this),\n      detachContent: this.#detachContent.bind(this)\n    });\n  }\n  #attachTrigger(el) {\n    this.#trigger.set(el);\n    let tooltipName = el.getAttribute(\"data-media-tooltip\");\n    if (tooltipName) {\n      this.el?.setAttribute(`data-media-${tooltipName}-tooltip`, \"\");\n    }\n    setAttribute(el, \"data-describedby\", this.#id);\n  }\n  #detachTrigger(el) {\n    el.removeAttribute(\"data-describedby\");\n    el.removeAttribute(\"aria-describedby\");\n    this.#trigger.set(null);\n  }\n  #attachContent(el) {\n    el.setAttribute(\"id\", this.#id);\n    el.style.display = \"none\";\n    setAttributeIfEmpty(el, \"role\", \"tooltip\");\n    this.#content.set(el);\n  }\n  #detachContent(el) {\n    el.removeAttribute(\"id\");\n    el.removeAttribute(\"role\");\n    this.#content.set(null);\n  }\n  #onShowingChange(isShowing) {\n    const trigger = this.#trigger(), content = this.#content();\n    if (trigger) {\n      setAttribute(trigger, \"aria-describedby\", isShowing ? this.#id : null);\n    }\n    for (const el of [this.el, trigger, content]) {\n      el && setAttribute(el, \"data-visible\", isShowing);\n    }\n    this.#showing.set(isShowing);\n  }\n}\n\nclass TooltipTrigger extends Component {\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onConnect(el) {\n    onDispose(\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        this.#attach();\n        const tooltip = useContext(tooltipContext);\n        onDispose(() => {\n          const button = this.#getButton();\n          button && tooltip.detachTrigger(button);\n        });\n      })\n    );\n  }\n  #attach() {\n    const button = this.#getButton(), tooltip = useContext(tooltipContext);\n    button && tooltip.attachTrigger(button);\n  }\n  #getButton() {\n    const candidate = this.el.firstElementChild;\n    return candidate?.localName === \"button\" || candidate?.getAttribute(\"role\") === \"button\" ? candidate : this.el;\n  }\n}\n\nclass TooltipContent extends Component {\n  static props = {\n    placement: \"top center\",\n    offset: 0,\n    alignOffset: 0\n  };\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const { placement } = this.$props;\n    this.setAttributes({\n      \"data-placement\": placement\n    });\n  }\n  onAttach(el) {\n    this.#attach(el);\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n  }\n  onConnect(el) {\n    this.#attach(el);\n    const tooltip = useContext(tooltipContext);\n    onDispose(() => tooltip.detachContent(el));\n    onDispose(\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        effect(this.#watchPlacement.bind(this));\n      })\n    );\n  }\n  #attach(el) {\n    const tooltip = useContext(tooltipContext);\n    tooltip.attachContent(el);\n  }\n  #watchPlacement() {\n    const { showing } = useContext(tooltipContext);\n    if (!showing()) return;\n    const { placement, offset: mainOffset, alignOffset } = this.$props;\n    return autoPlacement(this.el, this.#getTrigger(), placement(), {\n      offsetVarName: \"media-tooltip\",\n      xOffset: alignOffset(),\n      yOffset: mainOffset()\n    });\n  }\n  #getTrigger() {\n    return useContext(tooltipContext).trigger();\n  }\n}\n\nclass ToggleButtonController extends ViewController {\n  static props = {\n    disabled: false\n  };\n  #delegate;\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n    new FocusVisibleController();\n    if (delegate.keyShortcut) {\n      new ARIAKeyShortcuts(delegate.keyShortcut);\n    }\n  }\n  onSetup() {\n    const { disabled } = this.$props;\n    this.setAttributes({\n      \"data-pressed\": this.#delegate.isPresssed,\n      \"aria-pressed\": this.#isARIAPressed.bind(this),\n      \"aria-disabled\": () => disabled() ? \"true\" : null\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n  }\n  onConnect(el) {\n    const events = onPress(el, this.#onMaybePress.bind(this));\n    for (const type of [\"click\", \"touchstart\"]) {\n      events.add(type, this.#onInteraction.bind(this), {\n        passive: true\n      });\n    }\n  }\n  #isARIAPressed() {\n    return ariaBool$1(this.#delegate.isPresssed());\n  }\n  #onPressed(event) {\n    if (isWriteSignal(this.#delegate.isPresssed)) {\n      this.#delegate.isPresssed.set((p) => !p);\n    }\n  }\n  #onMaybePress(event) {\n    const disabled = this.$props.disabled() || this.el.hasAttribute(\"data-disabled\");\n    if (disabled) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n      return;\n    }\n    event.preventDefault();\n    (this.#delegate.onPress ?? this.#onPressed).call(this, event);\n  }\n  #onInteraction(event) {\n    if (this.$props.disabled()) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n}\n\nclass ToggleButton extends Component {\n  static props = {\n    disabled: false,\n    defaultPressed: false\n  };\n  #pressed = signal(false);\n  /**\n   * Whether the toggle is currently in a `pressed` state.\n   */\n  get pressed() {\n    return this.#pressed();\n  }\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#pressed\n    });\n  }\n}\nconst togglebutton__proto = ToggleButton.prototype;\nprop(togglebutton__proto, \"pressed\");\n\nfunction ariaBool(value) {\n  return value ? \"true\" : \"false\";\n}\nfunction $ariaBool(signal) {\n  return () => ariaBool(signal());\n}\n\nclass AirPlayButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { canAirPlay, isAirPlayConnected } = this.#media.$state;\n    this.setAttributes({\n      \"data-active\": isAirPlayConnected,\n      \"data-supported\": canAirPlay,\n      \"data-state\": this.#getState.bind(this),\n      \"aria-hidden\": $ariaBool(() => !canAirPlay())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"airplay\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    remote.requestAirPlay(event);\n  }\n  #isPressed() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"airplay\" && remotePlaybackState() !== \"disconnected\";\n  }\n  #getState() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"airplay\" && remotePlaybackState();\n  }\n  #getDefaultLabel() {\n    const { remotePlaybackState } = this.#media.$state;\n    return `AirPlay ${remotePlaybackState()}`;\n  }\n}\n\nclass GoogleCastButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { canGoogleCast, isGoogleCastConnected } = this.#media.$state;\n    this.setAttributes({\n      \"data-active\": isGoogleCastConnected,\n      \"data-supported\": canGoogleCast,\n      \"data-state\": this.#getState.bind(this),\n      \"aria-hidden\": $ariaBool(() => !canGoogleCast())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"google-cast\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    remote.requestGoogleCast(event);\n  }\n  #isPressed() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"google-cast\" && remotePlaybackState() !== \"disconnected\";\n  }\n  #getState() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"google-cast\" && remotePlaybackState();\n  }\n  #getDefaultLabel() {\n    const { remotePlaybackState } = this.#media.$state;\n    return `Google Cast ${remotePlaybackState()}`;\n  }\n}\n\nclass PlayButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"togglePaused\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { paused, ended } = this.#media.$state;\n    this.setAttributes({\n      \"data-paused\": paused,\n      \"data-ended\": ended\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"play\");\n    setARIALabel(el, \"Play\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.pause(event) : remote.play(event);\n  }\n  #isPressed() {\n    const { paused } = this.#media.$state;\n    return !paused();\n  }\n}\n\nclass CaptionButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleCaptions\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"data-active\": this.#isPressed.bind(this),\n      \"data-supported\": () => !this.#isHidden(),\n      \"aria-hidden\": $ariaBool(this.#isHidden.bind(this))\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"caption\");\n    setARIALabel(el, \"Captions\");\n  }\n  #onPress(event) {\n    this.#media.remote.toggleCaptions(event);\n  }\n  #isPressed() {\n    const { textTrack } = this.#media.$state, track = textTrack();\n    return !!track && isTrackCaptionKind(track);\n  }\n  #isHidden() {\n    const { hasCaptions } = this.#media.$state;\n    return !hasCaptions();\n  }\n}\n\nclass FullscreenButton extends Component {\n  static props = {\n    ...ToggleButtonController.props,\n    target: \"prefer-media\"\n  };\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleFullscreen\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { fullscreen } = this.#media.$state, isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      \"data-active\": fullscreen,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"fullscreen\");\n    setARIALabel(el, \"Fullscreen\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote, target = this.$props.target();\n    this.#isPressed() ? remote.exitFullscreen(target, event) : remote.enterFullscreen(target, event);\n  }\n  #isPressed() {\n    const { fullscreen } = this.#media.$state;\n    return fullscreen();\n  }\n  #isSupported() {\n    const { canFullscreen } = this.#media.$state;\n    return canFullscreen();\n  }\n}\n\nclass MuteButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleMuted\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"data-muted\": this.#isPressed.bind(this),\n      \"data-state\": this.#getState.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-mute-button\", \"\");\n    el.setAttribute(\"data-media-tooltip\", \"mute\");\n    setARIALabel(el, \"Mute\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.unmute(event) : remote.mute(event);\n  }\n  #isPressed() {\n    const { muted, volume } = this.#media.$state;\n    return muted() || volume() === 0;\n  }\n  #getState() {\n    const { muted, volume } = this.#media.$state, $volume = volume();\n    if (muted() || $volume === 0) return \"muted\";\n    else if ($volume >= 0.5) return \"high\";\n    else if ($volume < 0.5) return \"low\";\n  }\n}\n\nclass PIPButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"togglePictureInPicture\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { pictureInPicture } = this.#media.$state, isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      \"data-active\": pictureInPicture,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"pip\");\n    setARIALabel(el, \"PiP\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.exitPictureInPicture(event) : remote.enterPictureInPicture(event);\n  }\n  #isPressed() {\n    const { pictureInPicture } = this.#media.$state;\n    return pictureInPicture();\n  }\n  #isSupported() {\n    const { canPictureInPicture } = this.#media.$state;\n    return canPictureInPicture();\n  }\n}\n\nclass SeekButton extends Component {\n  static props = {\n    disabled: false,\n    seconds: 30\n  };\n  #media;\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { seeking } = this.#media.$state, { seconds } = this.$props, isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      seconds,\n      \"data-seeking\": seeking,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n    el.setAttribute(\"data-media-tooltip\", \"seek\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  onConnect(el) {\n    onPress(el, this.#onPress.bind(this));\n  }\n  #isSupported() {\n    const { canSeek } = this.#media.$state;\n    return canSeek();\n  }\n  #getDefaultLabel() {\n    const { seconds } = this.$props;\n    return `Seek ${seconds() > 0 ? \"forward\" : \"backward\"} ${seconds()} seconds`;\n  }\n  #onPress(event) {\n    const { seconds, disabled } = this.$props;\n    if (disabled()) return;\n    const { currentTime } = this.#media.$state, seekTo = currentTime() + seconds();\n    this.#media.remote.seek(seekTo, event);\n  }\n}\n\nclass LiveButton extends Component {\n  static props = {\n    disabled: false\n  };\n  #media;\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { disabled } = this.$props, { live, liveEdge } = this.#media.$state, isHidden = () => !live();\n    this.setAttributes({\n      \"data-edge\": liveEdge,\n      \"data-hidden\": isHidden,\n      \"aria-disabled\": $ariaBool(() => disabled() || liveEdge()),\n      \"aria-hidden\": $ariaBool(isHidden)\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n    el.setAttribute(\"data-media-tooltip\", \"live\");\n  }\n  onConnect(el) {\n    onPress(el, this.#onPress.bind(this));\n  }\n  #onPress(event) {\n    const { disabled } = this.$props, { liveEdge } = this.#media.$state;\n    if (disabled() || liveEdge()) return;\n    this.#media.remote.seekToLiveEdge(event);\n  }\n}\n\nconst sliderState = new State({\n  min: 0,\n  max: 100,\n  value: 0,\n  step: 1,\n  pointerValue: 0,\n  focused: false,\n  dragging: false,\n  pointing: false,\n  hidden: false,\n  get active() {\n    return this.dragging || this.focused || this.pointing;\n  },\n  get fillRate() {\n    return calcRate(this.min, this.max, this.value);\n  },\n  get fillPercent() {\n    return this.fillRate * 100;\n  },\n  get pointerRate() {\n    return calcRate(this.min, this.max, this.pointerValue);\n  },\n  get pointerPercent() {\n    return this.pointerRate * 100;\n  }\n});\nfunction calcRate(min, max, value) {\n  const range = max - min, offset = value - min;\n  return range > 0 ? offset / range : 0;\n}\n\nclass IntersectionObserverController extends ViewController {\n  #init;\n  #observer;\n  constructor(init) {\n    super();\n    this.#init = init;\n  }\n  onConnect(el) {\n    this.#observer = new IntersectionObserver((entries) => {\n      this.#init.callback?.(entries, this.#observer);\n    }, this.#init);\n    this.#observer.observe(el);\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  /**\n   * Disconnect any active intersection observers.\n   */\n  #onDisconnect() {\n    this.#observer?.disconnect();\n    this.#observer = void 0;\n  }\n}\n\nconst sliderContext = createContext();\nconst sliderObserverContext = createContext();\n\nfunction getClampedValue(min, max, value, step) {\n  return clampNumber(min, round(value, getNumberOfDecimalPlaces(step)), max);\n}\nfunction getValueFromRate(min, max, rate, step) {\n  const boundRate = clampNumber(0, rate, 1), range = max - min, fill = range * boundRate, stepRatio = fill / step, steps = step * Math.round(stepRatio);\n  return min + steps;\n}\n\nconst SliderKeyDirection = {\n  Left: -1,\n  ArrowLeft: -1,\n  Up: 1,\n  ArrowUp: 1,\n  Right: 1,\n  ArrowRight: 1,\n  Down: -1,\n  ArrowDown: -1\n};\nclass SliderEventsController extends ViewController {\n  #delegate;\n  #media;\n  #observer;\n  constructor(delegate, media) {\n    super();\n    this.#delegate = delegate;\n    this.#media = media;\n  }\n  onSetup() {\n    if (hasProvidedContext(sliderObserverContext)) {\n      this.#observer = useContext(sliderObserverContext);\n    }\n  }\n  onConnect(el) {\n    effect(this.#attachEventListeners.bind(this, el));\n    effect(this.#attachPointerListeners.bind(this, el));\n    if (this.#delegate.swipeGesture) effect(this.#watchSwipeGesture.bind(this));\n  }\n  #watchSwipeGesture() {\n    const { pointer } = this.#media.$state;\n    if (pointer() !== \"coarse\" || !this.#delegate.swipeGesture()) {\n      this.#provider = null;\n      return;\n    }\n    this.#provider = this.#media.player.el?.querySelector(\n      \"media-provider,[data-media-provider]\"\n    );\n    if (!this.#provider) return;\n    new EventsController(this.#provider).add(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: true\n    }).add(\"touchmove\", this.#onTouchMove.bind(this), { passive: false });\n  }\n  #provider = null;\n  #touch = null;\n  #touchStartValue = null;\n  #onTouchStart(event) {\n    this.#touch = event.touches[0];\n  }\n  #onTouchMove(event) {\n    if (isNull(this.#touch) || isTouchPinchEvent(event)) return;\n    const touch = event.touches[0], xDiff = touch.clientX - this.#touch.clientX, yDiff = touch.clientY - this.#touch.clientY, isDragging = this.$state.dragging();\n    if (!isDragging && Math.abs(yDiff) > 5) {\n      return;\n    }\n    if (isDragging) return;\n    event.preventDefault();\n    if (Math.abs(xDiff) > 20) {\n      this.#touch = touch;\n      this.#touchStartValue = this.$state.value();\n      this.#onStartDragging(this.#touchStartValue, event);\n    }\n  }\n  #attachEventListeners(el) {\n    const { hidden } = this.$props;\n    listenEvent(el, \"focus\", this.#onFocus.bind(this));\n    if (hidden() || this.#delegate.isDisabled()) return;\n    new EventsController(el).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this)).add(\"pointerenter\", this.#onPointerEnter.bind(this)).add(\"pointermove\", this.#onPointerMove.bind(this)).add(\"pointerleave\", this.#onPointerLeave.bind(this)).add(\"pointerdown\", this.#onPointerDown.bind(this));\n  }\n  #attachPointerListeners(el) {\n    if (this.#delegate.isDisabled() || !this.$state.dragging()) return;\n    new EventsController(document).add(\"pointerup\", this.#onDocumentPointerUp.bind(this), { capture: true }).add(\"pointermove\", this.#onDocumentPointerMove.bind(this)).add(\"touchmove\", this.#onDocumentTouchMove.bind(this), {\n      passive: false\n    });\n  }\n  #onFocus() {\n    this.#updatePointerValue(this.$state.value());\n  }\n  #updateValue(newValue, trigger) {\n    const { value, min, max, dragging } = this.$state;\n    const clampedValue = Math.max(min(), Math.min(newValue, max()));\n    value.set(clampedValue);\n    const event = this.createEvent(\"value-change\", { detail: clampedValue, trigger });\n    this.dispatch(event);\n    this.#delegate.onValueChange?.(event);\n    if (dragging()) {\n      const event2 = this.createEvent(\"drag-value-change\", { detail: clampedValue, trigger });\n      this.dispatch(event2);\n      this.#delegate.onDragValueChange?.(event2);\n    }\n  }\n  #updatePointerValue(value, trigger) {\n    const { pointerValue, dragging } = this.$state;\n    pointerValue.set(value);\n    this.dispatch(\"pointer-value-change\", { detail: value, trigger });\n    if (dragging()) {\n      this.#updateValue(value, trigger);\n    }\n  }\n  #getPointerValue(event) {\n    let thumbPositionRate, rect = this.el.getBoundingClientRect(), { min, max } = this.$state;\n    if (this.$props.orientation() === \"vertical\") {\n      const { bottom: trackBottom, height: trackHeight } = rect;\n      thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n    } else {\n      if (this.#touch && isNumber(this.#touchStartValue)) {\n        const { width } = this.#provider.getBoundingClientRect(), rate = (event.clientX - this.#touch.clientX) / width, range = max() - min(), diff = range * Math.abs(rate);\n        thumbPositionRate = (rate < 0 ? this.#touchStartValue - diff : this.#touchStartValue + diff) / range;\n      } else {\n        const { left: trackLeft, width: trackWidth } = rect;\n        thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n      }\n    }\n    return Math.max(\n      min(),\n      Math.min(\n        max(),\n        this.#delegate.roundValue(\n          getValueFromRate(min(), max(), thumbPositionRate, this.#delegate.getStep())\n        )\n      )\n    );\n  }\n  #onPointerEnter(event) {\n    this.$state.pointing.set(true);\n  }\n  #onPointerMove(event) {\n    const { dragging } = this.$state;\n    if (dragging()) return;\n    this.#updatePointerValue(this.#getPointerValue(event), event);\n  }\n  #onPointerLeave(event) {\n    this.$state.pointing.set(false);\n  }\n  #onPointerDown(event) {\n    if (event.button !== 0) return;\n    const value = this.#getPointerValue(event);\n    this.#onStartDragging(value, event);\n    this.#updatePointerValue(value, event);\n  }\n  #onStartDragging(value, trigger) {\n    const { dragging } = this.$state;\n    if (dragging()) return;\n    dragging.set(true);\n    this.#media.remote.pauseControls(trigger);\n    const event = this.createEvent(\"drag-start\", { detail: value, trigger });\n    this.dispatch(event);\n    this.#delegate.onDragStart?.(event);\n    this.#observer?.onDragStart?.();\n  }\n  #onStopDragging(value, trigger) {\n    const { dragging } = this.$state;\n    if (!dragging()) return;\n    dragging.set(false);\n    this.#media.remote.resumeControls(trigger);\n    const event = this.createEvent(\"drag-end\", { detail: value, trigger });\n    this.dispatch(event);\n    this.#delegate.onDragEnd?.(event);\n    this.#touch = null;\n    this.#touchStartValue = null;\n    this.#observer?.onDragEnd?.();\n  }\n  // -------------------------------------------------------------------------------------------\n  // Keyboard Events\n  // -------------------------------------------------------------------------------------------\n  #lastDownKey;\n  #repeatedKeys = false;\n  #onKeyDown(event) {\n    const isValidKey = Object.keys(SliderKeyDirection).includes(event.key);\n    if (!isValidKey) return;\n    const { key } = event, jumpValue = this.#calcJumpValue(event);\n    if (!isNull(jumpValue)) {\n      this.#updatePointerValue(jumpValue, event);\n      this.#updateValue(jumpValue, event);\n      return;\n    }\n    const newValue = this.#calcNewKeyValue(event);\n    if (!this.#repeatedKeys) {\n      this.#repeatedKeys = key === this.#lastDownKey;\n      if (!this.$state.dragging() && this.#repeatedKeys) {\n        this.#onStartDragging(newValue, event);\n      }\n    }\n    this.#updatePointerValue(newValue, event);\n    this.#lastDownKey = key;\n  }\n  #onKeyUp(event) {\n    const isValidKey = Object.keys(SliderKeyDirection).includes(event.key);\n    if (!isValidKey || !isNull(this.#calcJumpValue(event))) return;\n    const newValue = this.#repeatedKeys ? this.$state.pointerValue() : this.#calcNewKeyValue(event);\n    this.#updateValue(newValue, event);\n    this.#onStopDragging(newValue, event);\n    this.#lastDownKey = \"\";\n    this.#repeatedKeys = false;\n  }\n  #calcJumpValue(event) {\n    let key = event.key, { min, max } = this.$state;\n    if (key === \"Home\" || key === \"PageUp\") {\n      return min();\n    } else if (key === \"End\" || key === \"PageDown\") {\n      return max();\n    } else if (!event.metaKey && /^[0-9]$/.test(key)) {\n      return (max() - min()) / 10 * Number(key);\n    }\n    return null;\n  }\n  #calcNewKeyValue(event) {\n    const { key, shiftKey } = event;\n    event.preventDefault();\n    event.stopPropagation();\n    const { shiftKeyMultiplier } = this.$props;\n    const { min, max, value, pointerValue } = this.$state, step = this.#delegate.getStep(), keyStep = this.#delegate.getKeyStep();\n    const modifiedStep = !shiftKey ? keyStep : keyStep * shiftKeyMultiplier(), direction = Number(SliderKeyDirection[key]), diff = modifiedStep * direction, currentValue = this.#repeatedKeys ? pointerValue() : this.#delegate.getValue?.() ?? value(), steps = (currentValue + diff) / step;\n    return Math.max(min(), Math.min(max(), Number((step * steps).toFixed(3))));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Document (Pointer Events)\n  // -------------------------------------------------------------------------------------------\n  #onDocumentPointerUp(event) {\n    if (event.button !== 0) return;\n    event.preventDefault();\n    event.stopImmediatePropagation();\n    const value = this.#getPointerValue(event);\n    this.#updatePointerValue(value, event);\n    this.#onStopDragging(value, event);\n  }\n  #onDocumentTouchMove(event) {\n    event.preventDefault();\n  }\n  #onDocumentPointerMove = functionThrottle(\n    (event) => {\n      this.#updatePointerValue(this.#getPointerValue(event), event);\n    },\n    20,\n    { leading: true }\n  );\n}\n\nconst sliderValueFormatContext = createContext(() => ({}));\n\nclass SliderController extends ViewController {\n  static props = {\n    hidden: false,\n    disabled: false,\n    step: 1,\n    keyStep: 1,\n    orientation: \"horizontal\",\n    shiftKeyMultiplier: 5\n  };\n  #media;\n  #delegate;\n  #isVisible = signal(true);\n  #isIntersecting = signal(true);\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const focus = new FocusVisibleController();\n    focus.attach(this);\n    this.$state.focused = focus.focused.bind(focus);\n    if (!hasProvidedContext(sliderValueFormatContext)) {\n      provideContext(sliderValueFormatContext, {\n        default: \"value\"\n      });\n    }\n    provideContext(sliderContext, {\n      orientation: this.$props.orientation,\n      disabled: this.#delegate.isDisabled,\n      preview: signal(null)\n    });\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchStep.bind(this));\n    effect(this.#watchDisabled.bind(this));\n    this.#setupAttrs();\n    new SliderEventsController(this.#delegate, this.#media).attach(this);\n    new IntersectionObserverController({\n      callback: this.#onIntersectionChange.bind(this)\n    }).attach(this);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"role\", \"slider\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"autocomplete\", \"off\");\n    if (IS_SERVER) this.#watchCSSVars();\n    else effect(this.#watchCSSVars.bind(this));\n  }\n  onConnect(el) {\n    onDispose(observeVisibility(el, this.#isVisible.set));\n    effect(this.#watchHidden.bind(this));\n  }\n  #onIntersectionChange(entries) {\n    this.#isIntersecting.set(entries[0].isIntersecting);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  #watchHidden() {\n    const { hidden } = this.$props;\n    this.$state.hidden.set(hidden() || !this.#isVisible() || !this.#isIntersecting.bind(this));\n  }\n  #watchValue() {\n    const { dragging, value, min, max } = this.$state;\n    if (peek(dragging)) return;\n    value.set(getClampedValue(min(), max(), value(), this.#delegate.getStep()));\n  }\n  #watchStep() {\n    this.$state.step.set(this.#delegate.getStep());\n  }\n  #watchDisabled() {\n    if (!this.#delegate.isDisabled()) return;\n    const { dragging, pointing } = this.$state;\n    dragging.set(false);\n    pointing.set(false);\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  #getARIADisabled() {\n    return ariaBool$1(this.#delegate.isDisabled());\n  }\n  // -------------------------------------------------------------------------------------------\n  // Attributes\n  // -------------------------------------------------------------------------------------------\n  #setupAttrs() {\n    const { orientation } = this.$props, { dragging, active, pointing } = this.$state;\n    this.setAttributes({\n      \"data-dragging\": dragging,\n      \"data-pointing\": pointing,\n      \"data-active\": active,\n      \"aria-disabled\": this.#getARIADisabled.bind(this),\n      \"aria-valuemin\": this.#delegate.aria.valueMin ?? this.$state.min,\n      \"aria-valuemax\": this.#delegate.aria.valueMax ?? this.$state.max,\n      \"aria-valuenow\": this.#delegate.aria.valueNow,\n      \"aria-valuetext\": this.#delegate.aria.valueText,\n      \"aria-orientation\": orientation\n    });\n  }\n  #watchCSSVars() {\n    const { fillPercent, pointerPercent } = this.$state;\n    this.#updateSliderVars(round(fillPercent(), 3), round(pointerPercent(), 3));\n  }\n  #updateSliderVars = animationFrameThrottle((fillPercent, pointerPercent) => {\n    this.el?.style.setProperty(\"--slider-fill\", fillPercent + \"%\");\n    this.el?.style.setProperty(\"--slider-pointer\", pointerPercent + \"%\");\n  });\n}\n\nclass Slider extends Component {\n  static props = {\n    ...SliderController.props,\n    min: 0,\n    max: 100,\n    value: 0\n  };\n  static state = sliderState;\n  constructor() {\n    super();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.$props.disabled,\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      }\n    });\n  }\n  onSetup() {\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchMinMax.bind(this));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const { value, max } = this.$state;\n    return round(value() / max() * 100, 2) + \"%\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  #watchValue() {\n    const { value } = this.$props;\n    this.$state.value.set(value());\n  }\n  #watchMinMax() {\n    const { min, max } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n}\n\nconst cache = /* @__PURE__ */ new Map(), pending = /* @__PURE__ */ new Map(), warned = /* @__PURE__ */ new Set() ;\nclass ThumbnailsLoader {\n  #media;\n  #src;\n  #crossOrigin;\n  $images = signal([]);\n  static create(src, crossOrigin) {\n    const media = useMediaContext();\n    return new ThumbnailsLoader(src, crossOrigin, media);\n  }\n  constructor(src, crossOrigin, media) {\n    this.#src = src;\n    this.#crossOrigin = crossOrigin;\n    this.#media = media;\n    effect(this.#onLoadCues.bind(this));\n  }\n  #onLoadCues() {\n    const { canLoad } = this.#media.$state;\n    if (!canLoad()) return;\n    const src = this.#src();\n    if (!src) return;\n    if (isString(src) && cache.has(src)) {\n      const cues = cache.get(src);\n      cache.delete(src);\n      cache.set(src, cues);\n      if (cache.size > 99) {\n        const firstKey = cache.keys().next().value;\n        cache.delete(firstKey);\n      }\n      this.$images.set(cache.get(src));\n    } else if (isString(src)) {\n      const crossOrigin = this.#crossOrigin(), currentKey = src + \"::\" + crossOrigin;\n      if (!pending.has(currentKey)) {\n        const promise = new Promise(async (resolve, reject) => {\n          try {\n            const response = await fetch(src, {\n              credentials: getRequestCredentials(crossOrigin)\n            }), isJSON = response.headers.get(\"content-type\") === \"application/json\";\n            if (isJSON) {\n              const json = await response.json();\n              if (isArray(json)) {\n                if (json[0] && \"text\" in json[0]) {\n                  resolve(this.#processVTTCues(json));\n                } else {\n                  for (let i = 0; i < json.length; i++) {\n                    const image = json[i];\n                    assert(isObject(image), `Item not an object at index ${i}`);\n                    assert(\n                      \"url\" in image && isString(image.url),\n                      `Invalid or missing \\`url\\` property at index ${i}`\n                    );\n                    assert(\n                      \"startTime\" in image && isNumber(image.startTime),\n                      `Invalid or missing \\`startTime\\` property at index ${i}`\n                    );\n                  }\n                  resolve(json);\n                }\n              } else {\n                resolve(this.#processStoryboard(json));\n              }\n              return;\n            }\n            import('media-captions').then(async ({ parseResponse }) => {\n              try {\n                const { cues } = await parseResponse(response);\n                resolve(this.#processVTTCues(cues));\n              } catch (e) {\n                reject(e);\n              }\n            });\n          } catch (e) {\n            reject(e);\n          }\n        }).then((images) => {\n          cache.set(currentKey, images);\n          return images;\n        }).catch((error) => {\n          this.#onError(src, error);\n        }).finally(() => {\n          if (isString(currentKey)) pending.delete(currentKey);\n        });\n        pending.set(currentKey, promise);\n      }\n      pending.get(currentKey)?.then((images) => {\n        this.$images.set(images || []);\n      });\n    } else if (isArray(src)) {\n      try {\n        this.$images.set(this.#processImages(src));\n      } catch (error) {\n        this.#onError(src, error);\n      }\n    } else {\n      try {\n        this.$images.set(this.#processStoryboard(src));\n      } catch (error) {\n        this.#onError(src, error);\n      }\n    }\n    return () => {\n      this.$images.set([]);\n    };\n  }\n  #processImages(images) {\n    const baseURL = this.#resolveBaseUrl();\n    return images.map((img, i) => {\n      assert(\n        img.url && isString(img.url),\n        `Invalid or missing \\`url\\` property at index ${i}`\n      );\n      assert(\n        \"startTime\" in img && isNumber(img.startTime),\n        `Invalid or missing \\`startTime\\` property at index ${i}`\n      );\n      return {\n        ...img,\n        url: isString(img.url) ? this.#resolveURL(img.url, baseURL) : img.url\n      };\n    });\n  }\n  #processStoryboard(board) {\n    assert(isString(board.url), \"Missing `url` in storyboard object\");\n    assert(isArray(board.tiles) && board.tiles?.length, `Empty tiles in storyboard`);\n    const url = new URL(board.url), images = [];\n    const tileWidth = \"tile_width\" in board ? board.tile_width : board.tileWidth, tileHeight = \"tile_height\" in board ? board.tile_height : board.tileHeight;\n    for (const tile of board.tiles) {\n      images.push({\n        url,\n        startTime: \"start\" in tile ? tile.start : tile.startTime,\n        width: tileWidth,\n        height: tileHeight,\n        coords: { x: tile.x, y: tile.y }\n      });\n    }\n    return images;\n  }\n  #processVTTCues(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      const cue = cues[i];\n      assert(\n        \"startTime\" in cue && isNumber(cue.startTime),\n        `Invalid or missing \\`startTime\\` property at index ${i}`\n      );\n      assert(\n        \"text\" in cue && isString(cue.text),\n        `Invalid or missing \\`text\\` property at index ${i}`\n      );\n    }\n    const images = [], baseURL = this.#resolveBaseUrl();\n    for (const cue of cues) {\n      const [url, hash] = cue.text.split(\"#\"), data = this.#resolveData(hash);\n      images.push({\n        url: this.#resolveURL(url, baseURL),\n        startTime: cue.startTime,\n        endTime: cue.endTime,\n        width: data?.w,\n        height: data?.h,\n        coords: data && isNumber(data.x) && isNumber(data.y) ? { x: data.x, y: data.y } : void 0\n      });\n    }\n    return images;\n  }\n  #resolveBaseUrl() {\n    let baseURL = peek(this.#src);\n    if (!isString(baseURL) || !/^https?:/.test(baseURL)) {\n      return location.href;\n    }\n    return baseURL;\n  }\n  #resolveURL(src, baseURL) {\n    return /^https?:/.test(src) ? new URL(src) : new URL(src, baseURL);\n  }\n  #resolveData(hash) {\n    if (!hash) return {};\n    const [hashProps, values] = hash.split(\"=\"), hashValues = values?.split(\",\"), data = {};\n    if (!hashProps || !hashValues) {\n      return null;\n    }\n    for (let i = 0; i < hashProps.length; i++) {\n      const value = +hashValues[i];\n      if (!isNaN(value)) data[hashProps[i]] = value;\n    }\n    return data;\n  }\n  #onError(src, error) {\n    if (warned?.has(src)) return;\n    this.#media.logger?.errorGroup(\"[vidstack] failed to load thumbnails\").labelledLog(\"Src\", src).labelledLog(\"Error\", error).dispatch();\n    warned?.add(src);\n  }\n}\n\nclass Thumbnail extends Component {\n  static props = {\n    src: null,\n    time: 0,\n    crossOrigin: null\n  };\n  static state = new State({\n    src: \"\",\n    img: null,\n    thumbnails: [],\n    activeThumbnail: null,\n    crossOrigin: null,\n    loading: false,\n    error: null,\n    hidden: false\n  });\n  media;\n  #loader;\n  #styleResets = [];\n  onSetup() {\n    this.media = useMediaContext();\n    this.#loader = ThumbnailsLoader.create(this.$props.src, this.$state.crossOrigin);\n    this.#watchCrossOrigin();\n    this.setAttributes({\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-error\": this.#hasError.bind(this),\n      \"data-hidden\": this.$state.hidden,\n      \"aria-hidden\": $ariaBool(this.$state.hidden)\n    });\n  }\n  onConnect(el) {\n    effect(this.#watchImg.bind(this));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#onLoadStart.bind(this));\n    effect(this.#onFindActiveThumbnail.bind(this));\n    effect(this.#resize.bind(this));\n  }\n  #watchImg() {\n    const img = this.$state.img();\n    if (!img) return;\n    new EventsController(img).add(\"load\", this.#onLoaded.bind(this)).add(\"error\", this.#onError.bind(this));\n  }\n  #watchCrossOrigin() {\n    const { crossOrigin: crossOriginProp } = this.$props, { crossOrigin: crossOriginState } = this.$state, { crossOrigin: mediaCrossOrigin } = this.media.$state, crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #onLoadStart() {\n    const { src, loading, error } = this.$state;\n    if (src()) {\n      loading.set(true);\n      error.set(null);\n    }\n    return () => {\n      this.#resetStyles();\n      loading.set(false);\n      error.set(null);\n    };\n  }\n  #onLoaded() {\n    const { loading, error } = this.$state;\n    this.#resize();\n    loading.set(false);\n    error.set(null);\n  }\n  #onError(event) {\n    const { loading, error } = this.$state;\n    loading.set(false);\n    error.set(event);\n  }\n  #isLoading() {\n    const { loading, hidden } = this.$state;\n    return !hidden() && loading();\n  }\n  #hasError() {\n    const { error } = this.$state;\n    return !isNull(error());\n  }\n  #watchHidden() {\n    const { hidden } = this.$state, { duration } = this.media.$state, images = this.#loader.$images();\n    hidden.set(this.#hasError() || !Number.isFinite(duration()) || images.length === 0);\n  }\n  getTime() {\n    return this.$props.time();\n  }\n  #onFindActiveThumbnail() {\n    let images = this.#loader.$images();\n    if (!images.length) return;\n    let time = this.getTime(), { src, activeThumbnail } = this.$state, activeIndex = -1, activeImage = null;\n    for (let i = images.length - 1; i >= 0; i--) {\n      const image = images[i];\n      if (time >= image.startTime && (!image.endTime || time < image.endTime)) {\n        activeIndex = i;\n        break;\n      }\n    }\n    if (images[activeIndex]) {\n      activeImage = images[activeIndex];\n    }\n    activeThumbnail.set(activeImage);\n    src.set(activeImage?.url.href || \"\");\n  }\n  #resize() {\n    if (!this.scope || this.$state.hidden()) return;\n    const rootEl = this.el, imgEl = this.$state.img(), thumbnail = this.$state.activeThumbnail();\n    if (!imgEl || !thumbnail || !rootEl) return;\n    let width = thumbnail.width ?? imgEl.naturalWidth, height = thumbnail?.height ?? imgEl.naturalHeight, {\n      maxWidth,\n      maxHeight,\n      minWidth,\n      minHeight,\n      width: elWidth,\n      height: elHeight\n    } = getComputedStyle(this.el);\n    if (minWidth === \"100%\") minWidth = parseFloat(elWidth) + \"\";\n    if (minHeight === \"100%\") minHeight = parseFloat(elHeight) + \"\";\n    let minRatio = Math.max(parseInt(minWidth) / width, parseInt(minHeight) / height), maxRatio = Math.min(\n      Math.max(parseInt(minWidth), parseInt(maxWidth)) / width,\n      Math.max(parseInt(minHeight), parseInt(maxHeight)) / height\n    ), scale = !isNaN(maxRatio) && maxRatio < 1 ? maxRatio : minRatio > 1 ? minRatio : 1;\n    this.#style(rootEl, \"--thumbnail-width\", `${width * scale}px`);\n    this.#style(rootEl, \"--thumbnail-height\", `${height * scale}px`);\n    this.#style(rootEl, \"--thumbnail-aspect-ratio\", String(round(width / height, 5)));\n    this.#style(imgEl, \"width\", `${imgEl.naturalWidth * scale}px`);\n    this.#style(imgEl, \"height\", `${imgEl.naturalHeight * scale}px`);\n    this.#style(\n      imgEl,\n      \"transform\",\n      thumbnail.coords ? `translate(-${thumbnail.coords.x * scale}px, -${thumbnail.coords.y * scale}px)` : \"\"\n    );\n    this.#style(imgEl, \"max-width\", \"none\");\n  }\n  #style(el, name, value) {\n    el.style.setProperty(name, value);\n    this.#styleResets.push(() => el.style.removeProperty(name));\n  }\n  #resetStyles() {\n    for (const reset of this.#styleResets) reset();\n    this.#styleResets = [];\n  }\n}\n\nclass SliderThumbnail extends Thumbnail {\n  #slider;\n  onAttach(el) {\n    this.#slider = useState(Slider.state);\n  }\n  getTime() {\n    const { duration, clipStartTime } = this.media.$state;\n    return clipStartTime() + this.#slider.pointerRate() * duration();\n  }\n}\n\nclass SliderVideo extends Component {\n  static props = {\n    src: null,\n    crossOrigin: null\n  };\n  static state = new State({\n    video: null,\n    src: null,\n    crossOrigin: null,\n    canPlay: false,\n    error: null,\n    hidden: false\n  });\n  #media;\n  #slider;\n  get video() {\n    return this.$state.video();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#slider = useState(Slider.state);\n    this.#watchCrossOrigin();\n    this.setAttributes({\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-hidden\": this.$state.hidden,\n      \"data-error\": this.#hasError.bind(this),\n      \"aria-hidden\": $ariaBool(this.$state.hidden)\n    });\n  }\n  onAttach(el) {\n    effect(this.#watchVideo.bind(this));\n    effect(this.#watchSrc.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#onSrcChange.bind(this));\n    effect(this.#onUpdateTime.bind(this));\n  }\n  #watchVideo() {\n    const video = this.$state.video();\n    if (!video) return;\n    if (video.readyState >= 2) this.#onCanPlay();\n    new EventsController(video).add(\"canplay\", this.#onCanPlay.bind(this)).add(\"error\", this.#onError.bind(this));\n  }\n  #watchSrc() {\n    const { src } = this.$state, { canLoad } = this.#media.$state;\n    src.set(canLoad() ? this.$props.src() : null);\n  }\n  #watchCrossOrigin() {\n    const { crossOrigin: crossOriginProp } = this.$props, { crossOrigin: crossOriginState } = this.$state, { crossOrigin: mediaCrossOrigin } = this.#media.$state, crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #isLoading() {\n    const { canPlay, hidden } = this.$state;\n    return !canPlay() && !hidden();\n  }\n  #hasError() {\n    const { error } = this.$state;\n    return !isNull(error);\n  }\n  #watchHidden() {\n    const { src, hidden } = this.$state, { canLoad, duration } = this.#media.$state;\n    hidden.set(canLoad() && (!src() || this.#hasError() || !Number.isFinite(duration())));\n  }\n  #onSrcChange() {\n    const { src, canPlay, error } = this.$state;\n    src();\n    canPlay.set(false);\n    error.set(null);\n  }\n  #onCanPlay(event) {\n    const { canPlay, error } = this.$state;\n    canPlay.set(true);\n    error.set(null);\n    this.dispatch(\"can-play\", { trigger: event });\n  }\n  #onError(event) {\n    const { canPlay, error } = this.$state;\n    canPlay.set(false);\n    error.set(event);\n    this.dispatch(\"error\", { trigger: event });\n  }\n  #onUpdateTime() {\n    const { video, canPlay } = this.$state, { duration } = this.#media.$state, { pointerRate } = this.#slider, media = video(), canUpdate = canPlay() && media && Number.isFinite(duration()) && Number.isFinite(pointerRate());\n    if (canUpdate) {\n      media.currentTime = pointerRate() * duration();\n    }\n  }\n}\nconst slidervideo__proto = SliderVideo.prototype;\nprop(slidervideo__proto, \"video\");\n\nclass SliderValue extends Component {\n  static props = {\n    type: \"pointer\",\n    format: null,\n    showHours: false,\n    showMs: false,\n    padHours: null,\n    padMinutes: null,\n    decimalPlaces: 2\n  };\n  #format;\n  #text;\n  #slider;\n  onSetup() {\n    this.#slider = useState(Slider.state);\n    this.#format = useContext(sliderValueFormatContext);\n    this.#text = computed(this.getValueText.bind(this));\n  }\n  /**\n   * Returns the current value formatted as text based on prop settings.\n   */\n  getValueText() {\n    const {\n      type,\n      format: $format,\n      decimalPlaces,\n      padHours,\n      padMinutes,\n      showHours,\n      showMs\n    } = this.$props, { value: sliderValue, pointerValue, min, max } = this.#slider, format = $format?.() ?? this.#format.default;\n    const value = type() === \"current\" ? sliderValue() : pointerValue();\n    if (format === \"percent\") {\n      const range = max() - min();\n      const percent = value / range * 100;\n      return (this.#format.percent ?? round)(percent, decimalPlaces()) + \"%\";\n    } else if (format === \"time\") {\n      return (this.#format.time ?? formatTime)(value, {\n        padHrs: padHours(),\n        padMins: padMinutes(),\n        showHrs: showHours(),\n        showMs: showMs()\n      });\n    } else {\n      return (this.#format.value?.(value) ?? value.toFixed(2)) + \"\";\n    }\n  }\n}\nconst slidervalue__proto = SliderValue.prototype;\nmethod(slidervalue__proto, \"getValueText\");\n\nclass SliderPreview extends Component {\n  static props = {\n    offset: 0,\n    noClamp: false\n  };\n  #slider;\n  onSetup() {\n    this.#slider = useContext(sliderContext);\n    const { active } = useState(Slider.state);\n    this.setAttributes({\n      \"data-visible\": active\n    });\n  }\n  onAttach(el) {\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n  }\n  onConnect(el) {\n    const { preview } = this.#slider;\n    preview.set(el);\n    onDispose(() => preview.set(null));\n    effect(this.#updatePlacement.bind(this));\n    const resize = new ResizeObserver(this.#updatePlacement.bind(this));\n    resize.observe(el);\n    onDispose(() => resize.disconnect());\n  }\n  #updatePlacement = animationFrameThrottle(() => {\n    const { disabled, orientation } = this.#slider;\n    if (disabled()) return;\n    const el = this.el, { offset, noClamp } = this.$props;\n    if (!el) return;\n    updateSliderPreviewPlacement(el, {\n      clamp: !noClamp(),\n      offset: offset(),\n      orientation: orientation()\n    });\n  });\n}\nfunction updateSliderPreviewPlacement(el, {\n  clamp,\n  offset,\n  orientation\n}) {\n  const computedStyle = getComputedStyle(el), width = parseFloat(computedStyle.width), height = parseFloat(computedStyle.height), styles = {\n    top: null,\n    right: null,\n    bottom: null,\n    left: null\n  };\n  styles[orientation === \"horizontal\" ? \"bottom\" : \"left\"] = `calc(100% + var(--media-slider-preview-offset, ${offset}px))`;\n  if (orientation === \"horizontal\") {\n    const widthHalf = width / 2;\n    if (!clamp) {\n      styles.left = `calc(var(--slider-pointer) - ${widthHalf}px)`;\n    } else {\n      const leftClamp = `max(0px, calc(var(--slider-pointer) - ${widthHalf}px))`, rightClamp = `calc(100% - ${width}px)`;\n      styles.left = `min(${leftClamp}, ${rightClamp})`;\n    }\n  } else {\n    const heightHalf = height / 2;\n    if (!clamp) {\n      styles.bottom = `calc(var(--slider-pointer) - ${heightHalf}px)`;\n    } else {\n      const topClamp = `max(${heightHalf}px, calc(var(--slider-pointer) - ${heightHalf}px))`, bottomClamp = `calc(100% - ${height}px)`;\n      styles.bottom = `min(${topClamp}, ${bottomClamp})`;\n    }\n  }\n  Object.assign(el.style, styles);\n}\n\nclass VolumeSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    keyStep: 5,\n    shiftKeyMultiplier: 2\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    const { audioGain } = this.#media.$state;\n    provideContext(sliderValueFormatContext, {\n      default: \"percent\",\n      value(value) {\n        return (value * (audioGain() ?? 1)).toFixed(2);\n      },\n      percent(value) {\n        return Math.round(value * (audioGain() ?? 1));\n      }\n    });\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueMax: this.#getARIAValueMax.bind(this),\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchVolume.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-volume-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Volume\");\n    const { canSetVolume } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetVolume,\n      \"aria-hidden\": $ariaBool(() => !canSetVolume())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state, { audioGain } = this.#media.$state;\n    return Math.round(value() * (audioGain() ?? 1));\n  }\n  #getARIAValueText() {\n    const { value, max } = this.$state, { audioGain } = this.#media.$state;\n    return round(value() / max() * (audioGain() ?? 1) * 100, 2) + \"%\";\n  }\n  #getARIAValueMax() {\n    const { audioGain } = this.#media.$state;\n    return this.$state.max() * (audioGain() ?? 1);\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetVolume } = this.#media.$state;\n    return disabled() || !canSetVolume();\n  }\n  #watchVolume() {\n    const { muted, volume } = this.#media.$state;\n    const newValue = muted() ? 0 : volume() * 100;\n    this.$state.value.set(newValue);\n    this.dispatch(\"value-change\", { detail: newValue });\n  }\n  #throttleVolumeChange = functionThrottle(this.#onVolumeChange.bind(this), 25);\n  #onVolumeChange(event) {\n    if (!event.trigger) return;\n    const mediaVolume = round(event.detail / 100, 3);\n    this.#media.remote.changeVolume(mediaVolume, event);\n  }\n  #onValueChange(event) {\n    this.#throttleVolumeChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttleVolumeChange(event);\n  }\n}\n\nclass AudioGainSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 25,\n    keyStep: 25,\n    shiftKeyMultiplier: 2,\n    min: 0,\n    max: 300\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(sliderValueFormatContext, {\n      default: \"percent\",\n      percent: (_, decimalPlaces) => {\n        return round(this.$state.value(), decimalPlaces) + \"%\";\n      }\n    });\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMinMax.bind(this));\n    effect(this.#watchAudioGain.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-audio-gain-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Audio Boost\");\n    const { canSetAudioGain } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetAudioGain,\n      \"aria-hidden\": $ariaBool(() => !canSetAudioGain())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const { value } = this.$state;\n    return value() + \"%\";\n  }\n  #watchMinMax() {\n    const { min, max } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n  #watchAudioGain() {\n    const { audioGain } = this.#media.$state, value = ((audioGain() ?? 1) - 1) * 100;\n    this.$state.value.set(value);\n    this.dispatch(\"value-change\", { detail: value });\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetAudioGain } = this.#media.$state;\n    return disabled() || !canSetAudioGain();\n  }\n  #onAudioGainChange(event) {\n    if (!event.trigger) return;\n    const gain = round(1 + event.detail / 100, 2);\n    this.#media.remote.changeAudioGain(gain, event);\n  }\n  #onValueChange(event) {\n    this.#onAudioGainChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#onAudioGainChange(event);\n  }\n}\n\nclass SpeedSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 0.25,\n    keyStep: 0.25,\n    shiftKeyMultiplier: 2,\n    min: 0,\n    max: 2\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: this.#roundValue,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMinMax.bind(this));\n    effect(this.#watchPlaybackRate.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-speed-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Speed\");\n    const { canSetPlaybackRate } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetPlaybackRate,\n      \"aria-hidden\": $ariaBool(() => !canSetPlaybackRate())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return value();\n  }\n  #getARIAValueText() {\n    const { value } = this.$state;\n    return value() + \"x\";\n  }\n  #watchMinMax() {\n    const { min, max } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n  #watchPlaybackRate() {\n    const { playbackRate } = this.#media.$state;\n    const newValue = playbackRate();\n    this.$state.value.set(newValue);\n    this.dispatch(\"value-change\", { detail: newValue });\n  }\n  #roundValue(value) {\n    return round(value, 2);\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetPlaybackRate } = this.#media.$state;\n    return disabled() || !canSetPlaybackRate();\n  }\n  #throttledSpeedChange = functionThrottle(this.#onPlaybackRateChange.bind(this), 25);\n  #onPlaybackRateChange(event) {\n    if (!event.trigger) return;\n    const rate = event.detail;\n    this.#media.remote.changePlaybackRate(rate, event);\n  }\n  #onValueChange(event) {\n    this.#throttledSpeedChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttledSpeedChange(event);\n  }\n}\n\nclass QualitySlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 1,\n    keyStep: 1,\n    shiftKeyMultiplier: 1\n  };\n  static state = sliderState;\n  #media;\n  #sortedQualities = computed(() => {\n    const { qualities } = this.#media.$state;\n    return sortVideoQualities(qualities());\n  });\n  onSetup() {\n    this.#media = useMediaContext();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMax.bind(this));\n    effect(this.#watchQuality.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-quality-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Video Quality\");\n    const { qualities, canSetQuality } = this.#media.$state, $supported = computed(() => canSetQuality() && qualities().length > 0);\n    this.setAttributes({\n      \"data-supported\": $supported,\n      \"aria-hidden\": $ariaBool(() => !$supported())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return value();\n  }\n  #getARIAValueText() {\n    const { quality } = this.#media.$state;\n    if (!quality()) return \"\";\n    const { height, bitrate } = quality(), bitrateText = bitrate && bitrate > 0 ? `${(bitrate / 1e6).toFixed(2)} Mbps` : null;\n    return height ? `${height}p${bitrateText ? ` (${bitrateText})` : \"\"}` : \"Auto\";\n  }\n  #watchMax() {\n    const $qualities = this.#sortedQualities();\n    this.$state.max.set(Math.max(0, $qualities.length - 1));\n  }\n  #watchQuality() {\n    let { quality } = this.#media.$state, $qualities = this.#sortedQualities(), value = Math.max(0, $qualities.indexOf(quality()));\n    this.$state.value.set(value);\n    this.dispatch(\"value-change\", { detail: value });\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetQuality, qualities } = this.#media.$state;\n    return disabled() || qualities().length <= 1 || !canSetQuality();\n  }\n  #throttledQualityChange = functionThrottle(this.#onQualityChange.bind(this), 25);\n  #onQualityChange(event) {\n    if (!event.trigger) return;\n    const { qualities } = this.#media, quality = peek(this.#sortedQualities)[event.detail];\n    this.#media.remote.changeQuality(qualities.indexOf(quality), event);\n  }\n  #onValueChange(event) {\n    this.#throttledQualityChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttledQualityChange(event);\n  }\n}\n\nclass TimeSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 0.1,\n    keyStep: 5,\n    shiftKeyMultiplier: 2,\n    pauseWhileDragging: false,\n    noSwipeGesture: false,\n    seekingRequestThrottle: 100\n  };\n  static state = sliderState;\n  #media;\n  #dispatchSeeking;\n  #chapter = signal(null);\n  constructor() {\n    super();\n    const { noSwipeGesture } = this.$props;\n    new SliderController({\n      swipeGesture: () => !noSwipeGesture(),\n      getValue: this.#getValue.bind(this),\n      getStep: this.#getStep.bind(this),\n      getKeyStep: this.#getKeyStep.bind(this),\n      roundValue: this.#roundValue,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragStart: this.#onDragStart.bind(this),\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onDragEnd: this.#onDragEnd.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(sliderValueFormatContext, {\n      default: \"time\",\n      value: this.#formatValue.bind(this),\n      time: this.#formatTime.bind(this)\n    });\n    this.setAttributes({\n      \"data-chapters\": this.#hasChapters.bind(this)\n    });\n    this.setStyles({\n      \"--slider-progress\": this.#calcBufferedPercent.bind(this)\n    });\n    effect(this.#watchCurrentTime.bind(this));\n    effect(this.#watchSeekingThrottle.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-time-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Seek\");\n  }\n  onConnect(el) {\n    effect(this.#watchPreviewing.bind(this));\n    watchActiveTextTrack(this.#media.textTracks, \"chapters\", this.#chapter.set);\n  }\n  #calcBufferedPercent() {\n    const { bufferedEnd, duration } = this.#media.$state;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1) * 100, 3) + \"%\";\n  }\n  #hasChapters() {\n    const { duration } = this.#media.$state;\n    return this.#chapter()?.cues.length && Number.isFinite(duration()) && duration() > 0;\n  }\n  #watchSeekingThrottle() {\n    this.#dispatchSeeking = functionThrottle(\n      this.#seeking.bind(this),\n      this.$props.seekingRequestThrottle()\n    );\n  }\n  #watchCurrentTime() {\n    if (this.$state.hidden()) return;\n    const { value, dragging } = this.$state, newValue = this.#getValue();\n    if (!peek(dragging)) {\n      value.set(newValue);\n      this.dispatch(\"value-change\", { detail: newValue });\n    }\n  }\n  #watchPreviewing() {\n    const player = this.#media.player.el, { preview } = useContext(sliderContext);\n    player && preview() && setAttribute(player, \"data-preview\", this.$state.active());\n  }\n  #seeking(time, event) {\n    this.#media.remote.seeking(time, event);\n  }\n  #seek(time, percent, event) {\n    this.#dispatchSeeking.cancel();\n    const { live } = this.#media.$state;\n    if (live() && percent >= 99) {\n      this.#media.remote.seekToLiveEdge(event);\n      return;\n    }\n    this.#media.remote.seek(time, event);\n  }\n  #playingBeforeDragStart = false;\n  #onDragStart(event) {\n    const { pauseWhileDragging } = this.$props;\n    if (pauseWhileDragging()) {\n      const { paused } = this.#media.$state;\n      this.#playingBeforeDragStart = !paused();\n      this.#media.remote.pause(event);\n    }\n  }\n  #onDragValueChange(event) {\n    this.#dispatchSeeking(this.#percentToTime(event.detail), event);\n  }\n  #onDragEnd(event) {\n    const { seeking } = this.#media.$state;\n    if (!peek(seeking)) this.#seeking(this.#percentToTime(event.detail), event);\n    const percent = event.detail;\n    this.#seek(this.#percentToTime(percent), percent, event);\n    const { pauseWhileDragging } = this.$props;\n    if (pauseWhileDragging() && this.#playingBeforeDragStart) {\n      this.#media.remote.play(event);\n      this.#playingBeforeDragStart = false;\n    }\n  }\n  #onValueChange(event) {\n    const { dragging } = this.$state;\n    if (dragging() || !event.trigger) return;\n    this.#onDragEnd(event);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  #getValue() {\n    const { currentTime } = this.#media.$state;\n    return this.#timeToPercent(currentTime());\n  }\n  #getStep() {\n    const value = this.$props.step() / this.#media.$state.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  #getKeyStep() {\n    const value = this.$props.keyStep() / this.#media.$state.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  #roundValue(value) {\n    return round(value, 3);\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSeek } = this.#media.$state;\n    return disabled() || !canSeek();\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const time = this.#percentToTime(this.$state.value()), { duration } = this.#media.$state;\n    return Number.isFinite(time) ? `${formatSpokenTime(time)} out of ${formatSpokenTime(duration())}` : \"live\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Format\n  // -------------------------------------------------------------------------------------------\n  #percentToTime(percent) {\n    const { duration } = this.#media.$state;\n    return round(percent / 100 * duration(), 5);\n  }\n  #timeToPercent(time) {\n    const { liveEdge, duration } = this.#media.$state, rate = Math.max(0, Math.min(1, liveEdge() ? 1 : Math.min(time, duration()) / duration()));\n    return Number.isNaN(rate) ? 0 : Number.isFinite(rate) ? rate * 100 : 100;\n  }\n  #formatValue(percent) {\n    const time = this.#percentToTime(percent), { live, duration } = this.#media.$state;\n    return Number.isFinite(time) ? (live() ? time - duration() : time).toFixed(0) : \"LIVE\";\n  }\n  #formatTime(percent, options) {\n    const time = this.#percentToTime(percent), { live, duration } = this.#media.$state, value = live() ? time - duration() : time;\n    return Number.isFinite(time) ? `${value < 0 ? \"-\" : \"\"}${formatTime(Math.abs(value), options)}` : \"LIVE\";\n  }\n}\n\nclass SliderChapters extends Component {\n  static props = {\n    disabled: false\n  };\n  #media;\n  #sliderState;\n  #updateScope;\n  #titleRef = null;\n  #refs = [];\n  #$track = signal(null);\n  #$cues = signal([]);\n  #activeIndex = signal(-1);\n  #activePointerIndex = signal(-1);\n  #bufferedIndex = 0;\n  get cues() {\n    return this.#$cues();\n  }\n  get activeCue() {\n    return this.#$cues()[this.#activeIndex()] || null;\n  }\n  get activePointerCue() {\n    return this.#$cues()[this.#activePointerIndex()] || null;\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#sliderState = useState(TimeSlider.state);\n  }\n  onAttach(el) {\n    watchActiveTextTrack(this.#media.textTracks, \"chapters\", this.#setTrack.bind(this));\n    effect(this.#watchSource.bind(this));\n  }\n  onConnect() {\n    onDispose(() => this.#reset.bind(this));\n  }\n  onDestroy() {\n    this.#setTrack(null);\n  }\n  setRefs(refs) {\n    this.#refs = refs;\n    this.#updateScope?.dispose();\n    if (this.#refs.length === 1) {\n      const el = this.#refs[0];\n      el.style.width = \"100%\";\n      el.style.setProperty(\"--chapter-fill\", \"var(--slider-fill)\");\n      el.style.setProperty(\"--chapter-progress\", \"var(--slider-progress)\");\n    } else if (this.#refs.length > 0) {\n      scoped(() => this.#watch(), this.#updateScope = createScope());\n    }\n  }\n  #setTrack(track) {\n    if (peek(this.#$track) === track) return;\n    this.#reset();\n    this.#$track.set(track);\n  }\n  #reset() {\n    this.#refs = [];\n    this.#$cues.set([]);\n    this.#activeIndex.set(-1);\n    this.#activePointerIndex.set(-1);\n    this.#bufferedIndex = 0;\n    this.#updateScope?.dispose();\n  }\n  #watch() {\n    if (!this.#refs.length) return;\n    effect(this.#watchUpdates.bind(this));\n  }\n  #watchUpdates() {\n    const { hidden } = this.#sliderState;\n    if (hidden()) return;\n    effect(this.#watchContainerWidths.bind(this));\n    effect(this.#watchFillPercent.bind(this));\n    effect(this.#watchPointerPercent.bind(this));\n    effect(this.#watchBufferedPercent.bind(this));\n  }\n  #watchContainerWidths() {\n    const cues = this.#$cues();\n    if (!cues.length) return;\n    let cue, { seekableStart, seekableEnd } = this.#media.$state, startTime = seekableStart(), endTime = seekableEnd() || cues[cues.length - 1].endTime, duration = endTime - startTime, remainingWidth = 100;\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n      if (this.#refs[i]) {\n        const width = i === cues.length - 1 ? remainingWidth : round((cue.endTime - Math.max(startTime, cue.startTime)) / duration * 100, 3);\n        this.#refs[i].style.width = width + \"%\";\n        remainingWidth -= width;\n      }\n    }\n  }\n  #watchFillPercent() {\n    let { liveEdge, seekableStart, seekableEnd } = this.#media.$state, { fillPercent, value } = this.#sliderState, cues = this.#$cues(), isLiveEdge = liveEdge(), prevActiveIndex = peek(this.#activeIndex), currentChapter = cues[prevActiveIndex];\n    let currentActiveIndex = isLiveEdge ? this.#$cues.length - 1 : this.#findActiveChapterIndex(\n      currentChapter ? currentChapter.startTime / seekableEnd() * 100 <= peek(value) ? prevActiveIndex : 0 : 0,\n      fillPercent()\n    );\n    if (isLiveEdge || !currentChapter) {\n      this.#updateFillPercents(0, cues.length, 100);\n    } else if (currentActiveIndex > prevActiveIndex) {\n      this.#updateFillPercents(prevActiveIndex, currentActiveIndex, 100);\n    } else if (currentActiveIndex < prevActiveIndex) {\n      this.#updateFillPercents(currentActiveIndex + 1, prevActiveIndex + 1, 0);\n    }\n    const percent = isLiveEdge ? 100 : this.#calcPercent(\n      cues[currentActiveIndex],\n      fillPercent(),\n      seekableStart(),\n      this.#getEndTime(cues)\n    );\n    this.#updateFillPercent(this.#refs[currentActiveIndex], percent);\n    this.#activeIndex.set(currentActiveIndex);\n  }\n  #watchPointerPercent() {\n    let { pointing, pointerPercent } = this.#sliderState;\n    if (!pointing()) {\n      this.#activePointerIndex.set(-1);\n      return;\n    }\n    const activeIndex = this.#findActiveChapterIndex(0, pointerPercent());\n    this.#activePointerIndex.set(activeIndex);\n  }\n  #updateFillPercents(start, end, percent) {\n    for (let i = start; i < end; i++) this.#updateFillPercent(this.#refs[i], percent);\n  }\n  #updateFillPercent(ref, percent) {\n    if (!ref) return;\n    ref.style.setProperty(\"--chapter-fill\", percent + \"%\");\n    setAttribute(ref, \"data-active\", percent > 0 && percent < 100);\n    setAttribute(ref, \"data-ended\", percent === 100);\n  }\n  #findActiveChapterIndex(startIndex, percent) {\n    let chapterPercent = 0, cues = this.#$cues();\n    if (percent === 0) return 0;\n    else if (percent === 100) return cues.length - 1;\n    let { seekableStart } = this.#media.$state, startTime = seekableStart(), endTime = this.#getEndTime(cues);\n    for (let i = startIndex; i < cues.length; i++) {\n      chapterPercent = this.#calcPercent(cues[i], percent, startTime, endTime);\n      if (chapterPercent >= 0 && chapterPercent < 100) return i;\n    }\n    return 0;\n  }\n  #watchBufferedPercent() {\n    this.#updateBufferedPercent(this.#bufferedPercent());\n  }\n  #updateBufferedPercent = animationFrameThrottle((bufferedPercent) => {\n    let percent, cues = this.#$cues(), { seekableStart } = this.#media.$state, startTime = seekableStart(), endTime = this.#getEndTime(cues);\n    for (let i = this.#bufferedIndex; i < this.#refs.length; i++) {\n      percent = this.#calcPercent(cues[i], bufferedPercent, startTime, endTime);\n      this.#refs[i]?.style.setProperty(\"--chapter-progress\", percent + \"%\");\n      if (percent < 100) {\n        this.#bufferedIndex = i;\n        break;\n      }\n    }\n  });\n  #bufferedPercent = computed(this.#calcMediaBufferedPercent.bind(this));\n  #calcMediaBufferedPercent() {\n    const { bufferedEnd, duration } = this.#media.$state;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1), 3) * 100;\n  }\n  #getEndTime(cues) {\n    const { seekableEnd } = this.#media.$state, endTime = seekableEnd();\n    return Number.isFinite(endTime) ? endTime : cues[cues.length - 1]?.endTime || 0;\n  }\n  #calcPercent(cue, percent, startTime, endTime) {\n    if (!cue) return 0;\n    const cues = this.#$cues();\n    if (cues.length === 0) return 0;\n    const duration = endTime - startTime, cueStartTime = Math.max(0, cue.startTime - startTime), cueEndTime = Math.min(endTime, cue.endTime) - startTime;\n    const startRatio = cueStartTime / duration, startPercent = startRatio * 100, endPercent = Math.min(1, startRatio + (cueEndTime - cueStartTime) / duration) * 100;\n    return Math.max(\n      0,\n      round(\n        percent >= endPercent ? 100 : (percent - startPercent) / (endPercent - startPercent) * 100,\n        3\n      )\n    );\n  }\n  #fillGaps(cues) {\n    let chapters = [], { seekableStart, seekableEnd, duration } = this.#media.$state, startTime = seekableStart(), endTime = seekableEnd();\n    cues = cues.filter((cue) => cue.startTime <= endTime && cue.endTime >= startTime);\n    const firstCue = cues[0];\n    if (firstCue && firstCue.startTime > startTime) {\n      chapters.push(new window.VTTCue(startTime, firstCue.startTime, \"\"));\n    }\n    for (let i = 0; i < cues.length - 1; i++) {\n      const currentCue = cues[i], nextCue = cues[i + 1];\n      chapters.push(currentCue);\n      if (nextCue) {\n        const timeDiff = nextCue.startTime - currentCue.endTime;\n        if (timeDiff > 0) {\n          chapters.push(new window.VTTCue(currentCue.endTime, currentCue.endTime + timeDiff, \"\"));\n        }\n      }\n    }\n    const lastCue = cues[cues.length - 1];\n    if (lastCue) {\n      chapters.push(lastCue);\n      const endTime2 = duration();\n      if (endTime2 >= 0 && endTime2 - lastCue.endTime > 1) {\n        chapters.push(new window.VTTCue(lastCue.endTime, duration(), \"\"));\n      }\n    }\n    return chapters;\n  }\n  #watchSource() {\n    const { source } = this.#media.$state;\n    source();\n    this.#onTrackChange();\n  }\n  #onTrackChange() {\n    if (!this.scope) return;\n    const { disabled } = this.$props;\n    if (disabled()) {\n      this.#$cues.set([]);\n      this.#activeIndex.set(0);\n      this.#bufferedIndex = 0;\n      return;\n    }\n    const track = this.#$track();\n    if (track) {\n      const onCuesChange = this.#onCuesChange.bind(this);\n      onCuesChange();\n      new EventsController(track).add(\"add-cue\", onCuesChange).add(\"remove-cue\", onCuesChange);\n      effect(this.#watchMediaDuration.bind(this));\n    }\n    this.#titleRef = this.#findChapterTitleRef();\n    if (this.#titleRef) effect(this.#onChapterTitleChange.bind(this));\n    return () => {\n      if (this.#titleRef) {\n        this.#titleRef.textContent = \"\";\n        this.#titleRef = null;\n      }\n    };\n  }\n  #watchMediaDuration() {\n    this.#media.$state.duration();\n    this.#onCuesChange();\n  }\n  #onCuesChange = functionDebounce(\n    () => {\n      const track = peek(this.#$track);\n      if (!this.scope || !track || !track.cues.length) return;\n      this.#$cues.set(this.#fillGaps(track.cues));\n      this.#activeIndex.set(0);\n      this.#bufferedIndex = 0;\n    },\n    150,\n    true\n  );\n  #onChapterTitleChange() {\n    const cue = this.activePointerCue || this.activeCue;\n    if (this.#titleRef) this.#titleRef.textContent = cue?.text || \"\";\n  }\n  #findParentSlider() {\n    let node = this.el;\n    while (node && node.getAttribute(\"role\") !== \"slider\") {\n      node = node.parentElement;\n    }\n    return node;\n  }\n  #findChapterTitleRef() {\n    const slider = this.#findParentSlider();\n    return slider ? slider.querySelector('[data-part=\"chapter-title\"]') : null;\n  }\n}\nconst sliderchapters__proto = SliderChapters.prototype;\nprop(sliderchapters__proto, \"cues\");\nprop(sliderchapters__proto, \"activeCue\");\nprop(sliderchapters__proto, \"activePointerCue\");\nmethod(sliderchapters__proto, \"setRefs\");\n\nconst menuContext = createContext();\n\nfunction scrollIntoView(el, options) {\n  const scrolls = r(el, options);\n  for (const { el: el2, top, left } of scrolls) {\n    el2.scroll({ top, left, behavior: options.behavior });\n  }\n}\nfunction scrollIntoCenter(el, options = {}) {\n  scrollIntoView(el, {\n    scrollMode: \"if-needed\",\n    block: \"center\",\n    inline: \"center\",\n    ...options\n  });\n}\n\nconst FOCUSABLE_ELEMENTS_SELECTOR = /* @__PURE__ */ [\n  \"a[href]\",\n  \"[tabindex]\",\n  \"input\",\n  \"select\",\n  \"button\"\n].map((selector) => `${selector}:not([aria-hidden='true'])`).join(\",\");\nconst VALID_KEYS = /* @__PURE__ */ new Set([\n  \"Escape\",\n  \"Tab\",\n  \"ArrowUp\",\n  \"ArrowDown\",\n  \"Home\",\n  \"PageUp\",\n  \"End\",\n  \"PageDown\",\n  \"Enter\",\n  \" \"\n]);\nclass MenuFocusController {\n  #index = -1;\n  #el = null;\n  #elements = [];\n  #delegate;\n  get items() {\n    return this.#elements;\n  }\n  constructor(delegate) {\n    this.#delegate = delegate;\n  }\n  attachMenu(el) {\n    listenEvent(el, \"focus\", this.#onFocus.bind(this));\n    this.#el = el;\n    onDispose(() => {\n      this.#el = null;\n    });\n  }\n  listen() {\n    if (!this.#el) return;\n    this.update();\n    new EventsController(this.#el).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this));\n    onDispose(() => {\n      this.#index = -1;\n      this.#elements = [];\n    });\n  }\n  update() {\n    this.#index = 0;\n    this.#elements = this.#getFocusableElements();\n  }\n  scroll(index = this.#findActiveIndex()) {\n    const element = this.#elements[index];\n    if (element) {\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          scrollIntoCenter(element, {\n            behavior: \"smooth\",\n            boundary: (el) => {\n              return !el.hasAttribute(\"data-root\");\n            }\n          });\n        });\n      });\n    }\n  }\n  focusActive(scroll = true) {\n    const index = this.#findActiveIndex();\n    this.#focusAt(index >= 0 ? index : 0, scroll);\n  }\n  #focusAt(index, scroll = true) {\n    this.#index = index;\n    if (this.#elements[index]) {\n      this.#elements[index].focus({ preventScroll: true });\n      if (scroll) this.scroll(index);\n    } else {\n      this.#el?.focus({ preventScroll: true });\n    }\n  }\n  #findActiveIndex() {\n    return this.#elements.findIndex(\n      (el) => document.activeElement === el || el.getAttribute(\"role\") === \"menuitemradio\" && el.getAttribute(\"aria-checked\") === \"true\"\n    );\n  }\n  #onFocus() {\n    if (this.#index >= 0) return;\n    this.update();\n    this.focusActive();\n  }\n  #validateKeyEvent(event) {\n    const el = event.target;\n    if (wasEnterKeyPressed(event) && el instanceof Element) {\n      const role = el.getAttribute(\"role\");\n      return !/a|input|select|button/.test(el.localName) && !role;\n    }\n    return VALID_KEYS.has(event.key);\n  }\n  #onKeyUp(event) {\n    if (!this.#validateKeyEvent(event)) return;\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  #onKeyDown(event) {\n    if (!this.#validateKeyEvent(event)) return;\n    event.stopPropagation();\n    event.preventDefault();\n    switch (event.key) {\n      case \"Escape\":\n        this.#delegate.closeMenu(event);\n        break;\n      case \"Tab\":\n        this.#focusAt(this.#nextIndex(event.shiftKey ? -1 : 1));\n        break;\n      case \"ArrowUp\":\n        this.#focusAt(this.#nextIndex(-1));\n        break;\n      case \"ArrowDown\":\n        this.#focusAt(this.#nextIndex(1));\n        break;\n      case \"Home\":\n      case \"PageUp\":\n        this.#focusAt(0);\n        break;\n      case \"End\":\n      case \"PageDown\":\n        this.#focusAt(this.#elements.length - 1);\n        break;\n    }\n  }\n  #nextIndex(delta) {\n    let index = this.#index;\n    do {\n      index = (index + delta + this.#elements.length) % this.#elements.length;\n    } while (this.#elements[index]?.offsetParent === null);\n    return index;\n  }\n  #getFocusableElements() {\n    if (!this.#el) return [];\n    const focusableElements = this.#el.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR), elements = [];\n    const is = (node) => {\n      return node.getAttribute(\"role\") === \"menu\";\n    };\n    for (const el of focusableElements) {\n      if (isHTMLElement(el) && el.offsetParent !== null && // does not have display: none\n      isElementParent(this.#el, el, is)) {\n        elements.push(el);\n      }\n    }\n    return elements;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = __getOwnPropDesc(target, key) ;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (decorator(target, key, result) ) || result;\n  if (result) __defProp(target, key, result);\n  return result;\n};\nlet idCount = 0;\nclass Menu extends Component {\n  static props = {\n    showDelay: 0\n  };\n  #media;\n  #menuId;\n  #menuButtonId;\n  #expanded = signal(false);\n  #disabled = signal(false);\n  #trigger = signal(null);\n  #content = signal(null);\n  #parentMenu;\n  #submenus = /* @__PURE__ */ new Set();\n  #menuObserver = null;\n  #popper;\n  #focus;\n  #isSliderActive = false;\n  #isTriggerDisabled = signal(false);\n  #transitionCallbacks = /* @__PURE__ */ new Set();\n  get triggerElement() {\n    return this.#trigger();\n  }\n  get contentElement() {\n    return this.#content();\n  }\n  get isSubmenu() {\n    return !!this.#parentMenu;\n  }\n  constructor() {\n    super();\n    const { showDelay } = this.$props;\n    this.#popper = new Popper({\n      trigger: this.#trigger,\n      content: this.#content,\n      showDelay,\n      listen: (trigger, show, hide) => {\n        onPress(trigger, (event) => {\n          if (this.#expanded()) hide(event);\n          else show(event);\n        });\n        const closeTarget = this.#getCloseTarget();\n        if (closeTarget) {\n          onPress(closeTarget, (event) => {\n            event.stopPropagation();\n            hide(event);\n          });\n        }\n      },\n      onChange: this.#onExpandedChange.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const currentIdCount = ++idCount;\n    this.#menuId = `media-menu-${currentIdCount}`;\n    this.#menuButtonId = `media-menu-button-${currentIdCount}`;\n    this.#focus = new MenuFocusController({\n      closeMenu: this.close.bind(this)\n    });\n    if (hasProvidedContext(menuContext)) {\n      this.#parentMenu = useContext(menuContext);\n    }\n    this.#observeSliders();\n    this.setAttributes({\n      \"data-open\": this.#expanded,\n      \"data-root\": !this.isSubmenu,\n      \"data-submenu\": this.isSubmenu,\n      \"data-disabled\": this.#isDisabled.bind(this)\n    });\n    provideContext(menuContext, {\n      button: this.#trigger,\n      content: this.#content,\n      expanded: this.#expanded,\n      hint: signal(\"\"),\n      submenu: !!this.#parentMenu,\n      disable: this.#disable.bind(this),\n      attachMenuButton: this.#attachMenuButton.bind(this),\n      attachMenuItems: this.#attachMenuItems.bind(this),\n      attachObserver: this.#attachObserver.bind(this),\n      disableMenuButton: this.#disableMenuButton.bind(this),\n      addSubmenu: this.#addSubmenu.bind(this),\n      onTransitionEvent: (callback) => {\n        this.#transitionCallbacks.add(callback);\n        onDispose(() => {\n          this.#transitionCallbacks.delete(callback);\n        });\n      }\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  onConnect(el) {\n    effect(this.#watchExpanded.bind(this));\n    if (this.isSubmenu) {\n      this.#parentMenu?.addSubmenu(this);\n    }\n  }\n  onDestroy() {\n    this.#trigger.set(null);\n    this.#content.set(null);\n    this.#menuObserver = null;\n    this.#transitionCallbacks.clear();\n  }\n  #observeSliders() {\n    let sliderActiveTimer = -1, parentSliderObserver = hasProvidedContext(sliderObserverContext) ? useContext(sliderObserverContext) : null;\n    provideContext(sliderObserverContext, {\n      onDragStart: () => {\n        parentSliderObserver?.onDragStart?.();\n        window.clearTimeout(sliderActiveTimer);\n        sliderActiveTimer = -1;\n        this.#isSliderActive = true;\n      },\n      onDragEnd: () => {\n        parentSliderObserver?.onDragEnd?.();\n        sliderActiveTimer = window.setTimeout(() => {\n          this.#isSliderActive = false;\n          sliderActiveTimer = -1;\n        }, 300);\n      }\n    });\n  }\n  #watchExpanded() {\n    const expanded = this.#isExpanded();\n    if (!this.isSubmenu) this.#onResize();\n    this.#updateMenuItemsHidden(expanded);\n    if (!expanded) return;\n    effect(() => {\n      const { height } = this.#media.$state, content = this.#content();\n      content && setStyle(content, \"--player-height\", height() + \"px\");\n    });\n    this.#focus.listen();\n    this.listen(\"pointerup\", this.#onPointerUp.bind(this));\n    listenEvent(window, \"pointerup\", this.#onWindowPointerUp.bind(this));\n  }\n  #attachMenuButton(button) {\n    const el = button.el, isMenuItem = this.isSubmenu, isARIADisabled = $ariaBool(this.#isDisabled.bind(this));\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitem\" : \"button\");\n    setAttribute(el, \"id\", this.#menuButtonId);\n    setAttribute(el, \"aria-haspopup\", \"menu\");\n    setAttribute(el, \"aria-expanded\", \"false\");\n    setAttribute(el, \"data-root\", !this.isSubmenu);\n    setAttribute(el, \"data-submenu\", this.isSubmenu);\n    const watchAttrs = () => {\n      setAttribute(el, \"data-open\", this.#expanded());\n      setAttribute(el, \"aria-disabled\", isARIADisabled());\n    };\n    if (IS_SERVER) watchAttrs();\n    else effect(watchAttrs);\n    this.#trigger.set(el);\n    onDispose(() => {\n      this.#trigger.set(null);\n    });\n  }\n  #attachMenuItems(items) {\n    const el = items.el;\n    el.style.setProperty(\"display\", \"none\");\n    setAttribute(el, \"id\", this.#menuId);\n    setAttributeIfEmpty(el, \"role\", \"menu\");\n    setAttributeIfEmpty(el, \"tabindex\", \"-1\");\n    setAttribute(el, \"data-root\", !this.isSubmenu);\n    setAttribute(el, \"data-submenu\", this.isSubmenu);\n    this.#content.set(el);\n    onDispose(() => this.#content.set(null));\n    const watchAttrs = () => setAttribute(el, \"data-open\", this.#expanded());\n    if (IS_SERVER) watchAttrs();\n    else effect(watchAttrs);\n    this.#focus.attachMenu(el);\n    this.#updateMenuItemsHidden(false);\n    const onTransition = this.#onResizeTransition.bind(this);\n    if (!this.isSubmenu) {\n      items.listen(\"transitionstart\", onTransition);\n      items.listen(\"transitionend\", onTransition);\n      items.listen(\"animationend\", this.#onResize);\n      items.listen(\"vds-menu-resize\", this.#onResize);\n    } else {\n      this.#parentMenu?.onTransitionEvent(onTransition);\n    }\n  }\n  #attachObserver(observer) {\n    this.#menuObserver = observer;\n  }\n  #updateMenuItemsHidden(expanded) {\n    const content = peek(this.#content);\n    if (content) setAttribute(content, \"aria-hidden\", ariaBool$1(!expanded));\n  }\n  #disableMenuButton(disabled) {\n    this.#isTriggerDisabled.set(disabled);\n  }\n  #wasKeyboardExpand = false;\n  #onExpandedChange(isExpanded, event) {\n    this.#wasKeyboardExpand = isKeyboardEvent(event);\n    event?.stopPropagation();\n    if (this.#expanded() === isExpanded) return;\n    if (this.#isDisabled()) {\n      if (isExpanded) this.#popper.hide(event);\n      return;\n    }\n    this.el?.dispatchEvent(\n      new Event(\"vds-menu-resize\", {\n        bubbles: true,\n        composed: true\n      })\n    );\n    const trigger = this.#trigger(), content = this.#content();\n    if (trigger) {\n      setAttribute(trigger, \"aria-controls\", isExpanded && this.#menuId);\n      setAttribute(trigger, \"aria-expanded\", ariaBool$1(isExpanded));\n    }\n    if (content) setAttribute(content, \"aria-labelledby\", isExpanded && this.#menuButtonId);\n    this.#expanded.set(isExpanded);\n    this.#toggleMediaControls(event);\n    tick();\n    if (this.#wasKeyboardExpand) {\n      if (isExpanded) content?.focus();\n      else trigger?.focus();\n      for (const el of [this.el, content]) {\n        el && el.setAttribute(\"data-keyboard\", \"\");\n      }\n    } else {\n      for (const el of [this.el, content]) {\n        el && el.removeAttribute(\"data-keyboard\");\n      }\n    }\n    this.dispatch(isExpanded ? \"open\" : \"close\", { trigger: event });\n    if (isExpanded) {\n      if (!this.isSubmenu && this.#media.activeMenu !== this) {\n        this.#media.activeMenu?.close(event);\n        this.#media.activeMenu = this;\n      }\n      this.#menuObserver?.onOpen?.(event);\n    } else {\n      if (this.isSubmenu) {\n        for (const el of this.#submenus) el.close(event);\n      } else {\n        this.#media.activeMenu = null;\n      }\n      this.#menuObserver?.onClose?.(event);\n    }\n    if (isExpanded) {\n      requestAnimationFrame(this.#updateFocus.bind(this));\n    }\n  }\n  #updateFocus() {\n    if (this.#isTransitionActive || this.#isSubmenuOpen) return;\n    this.#focus.update();\n    requestAnimationFrame(() => {\n      if (this.#wasKeyboardExpand) {\n        this.#focus.focusActive();\n      } else {\n        this.#focus.scroll();\n      }\n    });\n  }\n  #isExpanded() {\n    return !this.#isDisabled() && this.#expanded();\n  }\n  #isDisabled() {\n    return this.#disabled() || this.#isTriggerDisabled();\n  }\n  #disable(disabled) {\n    this.#disabled.set(disabled);\n  }\n  #onPointerUp(event) {\n    const content = this.#content();\n    if (this.#isSliderActive || content && isEventInside(content, event)) {\n      return;\n    }\n    event.stopPropagation();\n  }\n  #onWindowPointerUp(event) {\n    const content = this.#content();\n    if (this.#isSliderActive || content && isEventInside(content, event)) {\n      return;\n    }\n    this.close(event);\n  }\n  #getCloseTarget() {\n    const target = this.el?.querySelector('[data-part=\"close-target\"]');\n    return this.el && target && isElementParent(this.el, target, (node) => node.getAttribute(\"role\") === \"menu\") ? target : null;\n  }\n  #toggleMediaControls(trigger) {\n    if (this.isSubmenu) return;\n    if (this.#expanded()) this.#media.remote.pauseControls(trigger);\n    else this.#media.remote.resumeControls(trigger);\n  }\n  #addSubmenu(menu) {\n    this.#submenus.add(menu);\n    new EventsController(menu).add(\"open\", this.#onSubmenuOpenBind).add(\"close\", this.#onSubmenuCloseBind);\n    onDispose(this.#removeSubmenuBind);\n  }\n  #removeSubmenuBind = this.#removeSubmenu.bind(this);\n  #removeSubmenu(menu) {\n    this.#submenus.delete(menu);\n  }\n  #isSubmenuOpen = false;\n  #onSubmenuOpenBind = this.#onSubmenuOpen.bind(this);\n  #onSubmenuOpen(event) {\n    this.#isSubmenuOpen = true;\n    const content = this.#content();\n    if (this.isSubmenu) {\n      this.triggerElement?.setAttribute(\"aria-hidden\", \"true\");\n    }\n    for (const target of this.#submenus) {\n      if (target !== event.target) {\n        for (const el of [target.el, target.triggerElement]) {\n          el?.setAttribute(\"aria-hidden\", \"true\");\n        }\n      }\n    }\n    if (content) {\n      const el = event.target.el;\n      for (const child of content.children) {\n        if (child.contains(el)) {\n          child.setAttribute(\"data-open\", \"\");\n        } else if (child !== el) {\n          child.setAttribute(\"data-hidden\", \"\");\n        }\n      }\n    }\n  }\n  #onSubmenuCloseBind = this.#onSubmenuClose.bind(this);\n  #onSubmenuClose(event) {\n    this.#isSubmenuOpen = false;\n    const content = this.#content();\n    if (this.isSubmenu) {\n      this.triggerElement?.setAttribute(\"aria-hidden\", \"false\");\n    }\n    for (const target of this.#submenus) {\n      for (const el of [target.el, target.triggerElement]) {\n        el?.setAttribute(\"aria-hidden\", \"false\");\n      }\n    }\n    if (content) {\n      for (const child of content.children) {\n        child.removeAttribute(\"data-open\");\n        child.removeAttribute(\"data-hidden\");\n      }\n    }\n  }\n  #onResize = animationFrameThrottle(() => {\n    const content = peek(this.#content);\n    if (!content || IS_SERVER) return;\n    let height = 0, styles = getComputedStyle(content), children = [...content.children];\n    for (const prop2 of [\"paddingTop\", \"paddingBottom\", \"borderTopWidth\", \"borderBottomWidth\"]) {\n      height += parseFloat(styles[prop2]) || 0;\n    }\n    for (const child of children) {\n      if (isHTMLElement(child) && child.style.display === \"contents\") {\n        children.push(...child.children);\n      } else if (child.nodeType === 3) {\n        height += parseFloat(getComputedStyle(child).fontSize);\n      } else if (isHTMLElement(child)) {\n        if (!isElementVisible(child)) continue;\n        const style = getComputedStyle(child);\n        height += child.offsetHeight + (parseFloat(style.marginTop) || 0) + (parseFloat(style.marginBottom) || 0);\n      }\n    }\n    setStyle(content, \"--menu-height\", height + \"px\");\n  });\n  #isTransitionActive = false;\n  #onResizeTransition(event) {\n    const content = this.#content();\n    if (content && event.propertyName === \"height\") {\n      this.#isTransitionActive = event.type === \"transitionstart\";\n      setAttribute(content, \"data-transition\", this.#isTransitionActive ? \"height\" : null);\n      if (this.#expanded()) this.#updateFocus();\n    }\n    for (const callback of this.#transitionCallbacks) callback(event);\n  }\n  open(trigger) {\n    if (peek(this.#expanded)) return;\n    this.#popper.show(trigger);\n    tick();\n  }\n  close(trigger) {\n    if (!peek(this.#expanded)) return;\n    this.#popper.hide(trigger);\n    tick();\n  }\n}\n__decorateClass([\n  prop\n], Menu.prototype, \"triggerElement\");\n__decorateClass([\n  prop\n], Menu.prototype, \"contentElement\");\n__decorateClass([\n  prop\n], Menu.prototype, \"isSubmenu\");\n__decorateClass([\n  method\n], Menu.prototype, \"open\");\n__decorateClass([\n  method\n], Menu.prototype, \"close\");\n\nclass MenuButton extends Component {\n  static props = {\n    disabled: false\n  };\n  #menu;\n  #hintEl = signal(null);\n  get expanded() {\n    return this.#menu?.expanded() ?? false;\n  }\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#menu = useContext(menuContext);\n  }\n  onAttach(el) {\n    this.#menu.attachMenuButton(this);\n    effect(this.#watchDisabled.bind(this));\n    setAttributeIfEmpty(el, \"type\", \"button\");\n  }\n  onConnect(el) {\n    effect(this.#watchHintEl.bind(this));\n    this.#onMutation();\n    const mutations = new MutationObserver(this.#onMutation.bind(this));\n    mutations.observe(el, { attributeFilter: [\"data-part\"], childList: true, subtree: true });\n    onDispose(() => mutations.disconnect());\n    onPress(el, (trigger) => {\n      this.dispatch(\"select\", { trigger });\n    });\n  }\n  #watchDisabled() {\n    this.#menu.disableMenuButton(this.$props.disabled());\n  }\n  #watchHintEl() {\n    const el = this.#hintEl();\n    if (!el) return;\n    effect(() => {\n      const text = this.#menu.hint();\n      if (text) el.textContent = text;\n    });\n  }\n  #onMutation() {\n    const hintEl = this.el?.querySelector('[data-part=\"hint\"]');\n    this.#hintEl.set(hintEl ?? null);\n  }\n}\nconst menubutton__proto = MenuButton.prototype;\nprop(menubutton__proto, \"expanded\");\n\nclass MenuItem extends MenuButton {\n}\n\nclass MenuPortal extends Component {\n  static props = {\n    container: null,\n    disabled: false\n  };\n  #target = null;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(menuPortalContext, {\n      attach: this.#attachElement.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  // Need this so connect scope is defined.\n  onConnect(el) {\n  }\n  onDestroy() {\n    this.#target?.remove();\n    this.#target = null;\n  }\n  #attachElement(el) {\n    this.#portal(false);\n    this.#target = el;\n    requestScopedAnimationFrame(() => {\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        effect(this.#watchDisabled.bind(this));\n      });\n    });\n  }\n  #watchDisabled() {\n    const { fullscreen } = this.#media.$state, { disabled } = this.$props;\n    this.#portal(disabled() === \"fullscreen\" ? !fullscreen() : !disabled());\n  }\n  #portal(shouldPortal) {\n    if (!this.#target) return;\n    let container = this.#getContainer(this.$props.container());\n    if (!container) return;\n    const isPortalled = this.#target.parentElement === container;\n    setAttribute(this.#target, \"data-portal\", shouldPortal);\n    if (shouldPortal) {\n      if (!isPortalled) {\n        this.#target.remove();\n        container.append(this.#target);\n      }\n    } else if (isPortalled && this.#target.parentElement === container) {\n      this.#target.remove();\n      this.el?.append(this.#target);\n    }\n  }\n  #getContainer(selector) {\n    if (isHTMLElement(selector)) return selector;\n    return selector ? document.querySelector(selector) : document.body;\n  }\n}\nconst menuPortalContext = createContext();\n\nclass MenuItems extends Component {\n  static props = {\n    placement: null,\n    offset: 0,\n    alignOffset: 0\n  };\n  #menu;\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const { placement } = this.$props;\n    this.setAttributes({\n      \"data-placement\": placement\n    });\n  }\n  onAttach(el) {\n    this.#menu = useContext(menuContext);\n    this.#menu.attachMenuItems(this);\n    if (hasProvidedContext(menuPortalContext)) {\n      const portal = useContext(menuPortalContext);\n      if (portal) {\n        provideContext(menuPortalContext, null);\n        portal.attach(el);\n        onDispose(() => portal.attach(null));\n      }\n    }\n  }\n  onConnect(el) {\n    effect(this.#watchPlacement.bind(this));\n  }\n  #watchPlacement() {\n    const { expanded } = this.#menu;\n    if (!this.el || !expanded()) return;\n    const placement = this.$props.placement();\n    if (!placement) return;\n    Object.assign(this.el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n    const { offset: mainOffset, alignOffset } = this.$props;\n    onDispose(\n      autoPlacement(this.el, this.#getButton(), placement, {\n        offsetVarName: \"media-menu\",\n        xOffset: alignOffset(),\n        yOffset: mainOffset()\n      })\n    );\n    onDispose(this.#hide.bind(this));\n  }\n  #hide() {\n    if (!this.el) return;\n    this.el.removeAttribute(\"style\");\n    this.el.style.display = \"none\";\n  }\n  #getButton() {\n    return this.#menu.button();\n  }\n}\n\nconst radioControllerContext = createContext();\n\nclass RadioGroupController extends ViewController {\n  #group = /* @__PURE__ */ new Set();\n  #value = signal(\"\");\n  #controller = null;\n  onValueChange;\n  get values() {\n    return Array.from(this.#group).map((radio) => radio.value());\n  }\n  get value() {\n    return this.#value();\n  }\n  set value(value) {\n    this.#onChange(value);\n  }\n  onSetup() {\n    provideContext(radioControllerContext, {\n      add: this.#addRadio.bind(this),\n      remove: this.#removeRadio.bind(this)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    if (!isMenuItem) setAttributeIfEmpty(el, \"role\", \"radiogroup\");\n    this.setAttributes({ value: this.#value });\n  }\n  onDestroy() {\n    this.#group.clear();\n  }\n  #addRadio(radio) {\n    if (this.#group.has(radio)) return;\n    this.#group.add(radio);\n    radio.onCheck = this.#onChangeBind;\n    radio.check(radio.value() === this.#value());\n  }\n  #removeRadio(radio) {\n    radio.onCheck = null;\n    this.#group.delete(radio);\n  }\n  #onChangeBind = this.#onChange.bind(this);\n  #onChange(newValue, trigger) {\n    const currentValue = peek(this.#value);\n    if (!newValue || newValue === currentValue) return;\n    const currentRadio = this.#findRadio(currentValue), newRadio = this.#findRadio(newValue);\n    currentRadio?.check(false, trigger);\n    newRadio?.check(true, trigger);\n    this.#value.set(newValue);\n    this.onValueChange?.(newValue, trigger);\n  }\n  #findRadio(newValue) {\n    for (const radio of this.#group) {\n      if (newValue === peek(radio.value)) return radio;\n    }\n    return null;\n  }\n}\n\nclass RadioGroup extends Component {\n  static props = {\n    value: \"\"\n  };\n  #controller;\n  /**\n   * A list of radio values that belong this group.\n   */\n  get values() {\n    return this.#controller.values;\n  }\n  /**\n   * The radio value that is checked in this group.\n   */\n  get value() {\n    return this.#controller.value;\n  }\n  set value(newValue) {\n    this.#controller.value = newValue;\n  }\n  constructor() {\n    super();\n    this.#controller = new RadioGroupController();\n    this.#controller.onValueChange = this.#onValueChange.bind(this);\n  }\n  onSetup() {\n    if (IS_SERVER) this.#watchValue();\n    else effect(this.#watchValue.bind(this));\n  }\n  #watchValue() {\n    this.#controller.value = this.$props.value();\n  }\n  #onValueChange(value, trigger) {\n    const event = this.createEvent(\"change\", { detail: value, trigger });\n    this.dispatch(event);\n  }\n}\nconst radiogroup__proto = RadioGroup.prototype;\nprop(radiogroup__proto, \"values\");\nprop(radiogroup__proto, \"value\");\n\nclass Radio extends Component {\n  static props = {\n    value: \"\"\n  };\n  #checked = signal(false);\n  #controller = {\n    value: this.$props.value,\n    check: this.#check.bind(this),\n    onCheck: null\n  };\n  /**\n   * Whether this radio is currently checked.\n   */\n  get checked() {\n    return this.#checked();\n  }\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.setAttributes({\n      value: this.$props.value,\n      \"data-checked\": this.#checked,\n      \"aria-checked\": $ariaBool(this.#checked)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitemradio\" : \"radio\");\n    effect(this.#watchValue.bind(this));\n  }\n  onConnect(el) {\n    this.#addToGroup();\n    onPress(el, this.#onPress.bind(this));\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  #onDisconnect() {\n    scoped(() => {\n      const group = useContext(radioControllerContext);\n      group.remove(this.#controller);\n    }, this.connectScope);\n  }\n  #addToGroup() {\n    const group = useContext(radioControllerContext);\n    group.add(this.#controller);\n  }\n  #watchValue() {\n    const { value } = this.$props, newValue = value();\n    if (peek(this.#checked)) {\n      this.#controller.onCheck?.(newValue);\n    }\n  }\n  #onPress(event) {\n    if (peek(this.#checked)) return;\n    this.#onChange(true, event);\n    this.#onSelect(event);\n    this.#controller.onCheck?.(peek(this.$props.value), event);\n  }\n  #check(value, trigger) {\n    if (peek(this.#checked) === value) return;\n    this.#onChange(value, trigger);\n  }\n  #onChange(value, trigger) {\n    this.#checked.set(value);\n    this.dispatch(\"change\", { detail: value, trigger });\n  }\n  #onSelect(trigger) {\n    this.dispatch(\"select\", { trigger });\n  }\n}\nconst radio__proto = Radio.prototype;\nprop(radio__proto, \"checked\");\n\nclass Gesture extends Component {\n  static props = {\n    disabled: false,\n    event: void 0,\n    action: void 0\n  };\n  #media;\n  #provider = null;\n  onSetup() {\n    this.#media = useMediaContext();\n    const { event, action } = this.$props;\n    this.setAttributes({\n      event,\n      action\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-gesture\", \"\");\n    el.style.setProperty(\"pointer-events\", \"none\");\n  }\n  onConnect(el) {\n    this.#provider = this.#media.player.el?.querySelector(\n      \"[data-media-provider]\"\n    );\n    effect(this.#attachListener.bind(this));\n  }\n  #attachListener() {\n    let eventType = this.$props.event(), disabled = this.$props.disabled();\n    if (!this.#provider || !eventType || disabled) return;\n    if (/^dbl/.test(eventType)) {\n      eventType = eventType.split(/^dbl/)[1];\n    }\n    if (eventType === \"pointerup\" || eventType === \"pointerdown\") {\n      const pointer = this.#media.$state.pointer();\n      if (pointer === \"coarse\") {\n        eventType = eventType === \"pointerup\" ? \"touchend\" : \"touchstart\";\n      }\n    }\n    listenEvent(\n      this.#provider,\n      eventType,\n      this.#acceptEvent.bind(this),\n      { passive: false }\n    );\n  }\n  #presses = 0;\n  #pressTimerId = -1;\n  #acceptEvent(event) {\n    if (this.$props.disabled() || isPointerEvent(event) && (event.button !== 0 || this.#media.activeMenu) || isTouchEvent(event) && this.#media.activeMenu || isTouchPinchEvent(event) || !this.#inBounds(event)) {\n      return;\n    }\n    event.MEDIA_GESTURE = true;\n    event.preventDefault();\n    const eventType = peek(this.$props.event), isDblEvent = eventType?.startsWith(\"dbl\");\n    if (!isDblEvent) {\n      if (this.#presses === 0) {\n        setTimeout(() => {\n          if (this.#presses === 1) this.#handleEvent(event);\n        }, 250);\n      }\n    } else if (this.#presses === 1) {\n      queueMicrotask(() => this.#handleEvent(event));\n      clearTimeout(this.#pressTimerId);\n      this.#presses = 0;\n      return;\n    }\n    if (this.#presses === 0) {\n      this.#pressTimerId = window.setTimeout(() => {\n        this.#presses = 0;\n      }, 275);\n    }\n    this.#presses++;\n  }\n  #handleEvent(event) {\n    this.el.setAttribute(\"data-triggered\", \"\");\n    requestAnimationFrame(() => {\n      if (this.#isTopLayer()) {\n        this.#performAction(peek(this.$props.action), event);\n      }\n      requestAnimationFrame(() => {\n        this.el.removeAttribute(\"data-triggered\");\n      });\n    });\n  }\n  /** Validate event occurred in gesture bounds. */\n  #inBounds(event) {\n    if (!this.el) return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.changedTouches[0] ?? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.el.getBoundingClientRect();\n      const inBounds = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !inBounds : inBounds;\n    }\n    return true;\n  }\n  /** Validate gesture has the highest z-index in this triggered group. */\n  #isTopLayer() {\n    const gestures = this.#media.player.el.querySelectorAll(\n      \"[data-media-gesture][data-triggered]\"\n    );\n    return Array.from(gestures).sort(\n      (a, b) => +getComputedStyle(b).zIndex - +getComputedStyle(a).zIndex\n    )[0] === this.el;\n  }\n  #performAction(action, trigger) {\n    if (!action) return;\n    const willTriggerEvent = new DOMEvent(\"will-trigger\", {\n      detail: action,\n      cancelable: true,\n      trigger\n    });\n    this.dispatchEvent(willTriggerEvent);\n    if (willTriggerEvent.defaultPrevented) return;\n    const [method, value] = action.replace(/:([a-z])/, \"-$1\").split(\":\");\n    if (action.includes(\":fullscreen\")) {\n      this.#media.remote.toggleFullscreen(\"prefer-media\", trigger);\n    } else if (action.includes(\"seek:\")) {\n      this.#media.remote.seek(peek(this.#media.$state.currentTime) + (+value || 0), trigger);\n    } else {\n      this.#media.remote[kebabToCamelCase(method)](trigger);\n    }\n    this.dispatch(\"trigger\", {\n      detail: action,\n      trigger\n    });\n  }\n}\n\nclass CaptionsTextRenderer {\n  priority = 10;\n  #track = null;\n  #renderer;\n  #events;\n  constructor(renderer) {\n    this.#renderer = renderer;\n  }\n  attach() {\n  }\n  canRender() {\n    return true;\n  }\n  detach() {\n    this.#events?.abort();\n    this.#events = void 0;\n    this.#renderer.reset();\n    this.#track = null;\n  }\n  changeTrack(track) {\n    if (!track || this.#track === track) return;\n    this.#events?.abort();\n    this.#events = new EventsController(track);\n    if (track.readyState < 2) {\n      this.#renderer.reset();\n      this.#events.add(\"load\", () => this.#changeTrack(track), { once: true });\n    } else {\n      this.#changeTrack(track);\n    }\n    this.#events.add(\"add-cue\", (event) => {\n      this.#renderer.addCue(event.detail);\n    }).add(\"remove-cue\", (event) => {\n      this.#renderer.removeCue(event.detail);\n    });\n    this.#track = track;\n  }\n  #changeTrack(track) {\n    this.#renderer.changeTrack({\n      cues: [...track.cues],\n      regions: [...track.regions]\n    });\n  }\n}\n\nclass Captions extends Component {\n  static props = {\n    textDir: \"ltr\",\n    exampleText: \"Captions look like this.\"\n  };\n  #media;\n  static lib = signal(null);\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this.#isHidden.bind(this))\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"pointer-events\", \"none\");\n  }\n  onConnect(el) {\n    if (!Captions.lib()) {\n      import('media-captions').then((lib) => Captions.lib.set(lib));\n    }\n    effect(this.#watchViewType.bind(this));\n  }\n  #isHidden() {\n    const { textTrack, remotePlaybackState, iOSControls } = this.#media.$state, track = textTrack();\n    return iOSControls() || remotePlaybackState() === \"connected\" || !track || !isTrackCaptionKind(track);\n  }\n  #watchViewType() {\n    if (!Captions.lib()) return;\n    const { viewType } = this.#media.$state;\n    if (viewType() === \"audio\") {\n      return this.#setupAudioView();\n    } else {\n      return this.#setupVideoView();\n    }\n  }\n  #setupAudioView() {\n    effect(this.#onTrackChange.bind(this));\n    this.#listenToFontStyleChanges(null);\n    return () => {\n      this.el.textContent = \"\";\n    };\n  }\n  #onTrackChange() {\n    if (this.#isHidden()) return;\n    this.#onCueChange();\n    const { textTrack } = this.#media.$state;\n    listenEvent(textTrack(), \"cue-change\", this.#onCueChange.bind(this));\n    effect(this.#onUpdateTimedNodes.bind(this));\n  }\n  #onCueChange() {\n    this.el.textContent = \"\";\n    if (this.#hideExampleTimer >= 0) {\n      this.#removeExample();\n    }\n    const { realCurrentTime, textTrack } = this.#media.$state, { renderVTTCueString } = Captions.lib(), time = peek(realCurrentTime), activeCues = peek(textTrack).activeCues;\n    for (const cue of activeCues) {\n      const displayEl = this.#createCueDisplayElement(), cueEl = this.#createCueElement();\n      cueEl.innerHTML = renderVTTCueString(cue, time);\n      displayEl.append(cueEl);\n      this.el.append(cueEl);\n    }\n  }\n  #onUpdateTimedNodes() {\n    const { realCurrentTime } = this.#media.$state, { updateTimedVTTCueNodes } = Captions.lib();\n    updateTimedVTTCueNodes(this.el, realCurrentTime());\n  }\n  #setupVideoView() {\n    const { CaptionsRenderer } = Captions.lib(), renderer = new CaptionsRenderer(this.el), textRenderer = new CaptionsTextRenderer(renderer);\n    this.#media.textRenderers.add(textRenderer);\n    effect(this.#watchTextDirection.bind(this, renderer));\n    effect(this.#watchMediaTime.bind(this, renderer));\n    this.#listenToFontStyleChanges(renderer);\n    return () => {\n      this.el.textContent = \"\";\n      this.#media.textRenderers.remove(textRenderer);\n      renderer.destroy();\n    };\n  }\n  #watchTextDirection(renderer) {\n    renderer.dir = this.$props.textDir();\n  }\n  #watchMediaTime(renderer) {\n    if (this.#isHidden()) return;\n    const { realCurrentTime, textTrack } = this.#media.$state;\n    renderer.currentTime = realCurrentTime();\n    if (this.#hideExampleTimer >= 0 && textTrack()?.activeCues[0]) {\n      this.#removeExample();\n    }\n  }\n  #listenToFontStyleChanges(renderer) {\n    const player = this.#media.player;\n    if (!player) return;\n    const onChange = this.#onFontStyleChange.bind(this, renderer);\n    listenEvent(player, \"vds-font-change\", onChange);\n  }\n  #onFontStyleChange(renderer) {\n    if (this.#hideExampleTimer >= 0) {\n      this.#hideExample();\n      return;\n    }\n    const { textTrack } = this.#media.$state;\n    if (!textTrack()?.activeCues[0]) {\n      this.#showExample();\n    } else {\n      renderer?.update(true);\n    }\n  }\n  #showExample() {\n    const display = this.#createCueDisplayElement();\n    setAttribute(display, \"data-example\", \"\");\n    const cue = this.#createCueElement();\n    setAttribute(cue, \"data-example\", \"\");\n    cue.textContent = this.$props.exampleText();\n    display?.append(cue);\n    this.el?.append(display);\n    this.el?.setAttribute(\"data-example\", \"\");\n    this.#hideExample();\n  }\n  #hideExampleTimer = -1;\n  #hideExample() {\n    window.clearTimeout(this.#hideExampleTimer);\n    this.#hideExampleTimer = window.setTimeout(this.#removeExample.bind(this), 2500);\n  }\n  #removeExample() {\n    this.el?.removeAttribute(\"data-example\");\n    if (this.el?.querySelector(\"[data-example]\")) this.el.textContent = \"\";\n    this.#hideExampleTimer = -1;\n  }\n  #createCueDisplayElement() {\n    const el = document.createElement(\"div\");\n    setAttribute(el, \"data-part\", \"cue-display\");\n    return el;\n  }\n  #createCueElement() {\n    const el = document.createElement(\"div\");\n    setAttribute(el, \"data-part\", \"cue\");\n    return el;\n  }\n}\n\nclass Poster extends Component {\n  static props = {\n    src: null,\n    alt: null,\n    crossOrigin: null\n  };\n  static state = new State({\n    img: null,\n    src: null,\n    alt: null,\n    crossOrigin: null,\n    loading: true,\n    error: null,\n    hidden: false\n  });\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#watchSrc();\n    this.#watchAlt();\n    this.#watchCrossOrigin();\n    this.#watchHidden();\n  }\n  onAttach(el) {\n    el.style.setProperty(\"pointer-events\", \"none\");\n    effect(this.#watchImg.bind(this));\n    effect(this.#watchSrc.bind(this));\n    effect(this.#watchAlt.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#watchHidden.bind(this));\n    const { started } = this.#media.$state;\n    this.setAttributes({\n      \"data-visible\": () => !started() && !this.$state.hidden(),\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-error\": this.#hasError.bind(this),\n      \"data-hidden\": this.$state.hidden\n    });\n  }\n  onConnect(el) {\n    effect(this.#onPreconnect.bind(this));\n    effect(this.#onLoadStart.bind(this));\n  }\n  #hasError() {\n    const { error } = this.$state;\n    return !isNull(error());\n  }\n  #onPreconnect() {\n    const { canLoadPoster, poster } = this.#media.$state;\n    if (!canLoadPoster() && poster()) preconnect(poster(), \"preconnect\");\n  }\n  #watchHidden() {\n    const { src } = this.$props, { poster, nativeControls } = this.#media.$state;\n    this.el && setAttribute(this.el, \"display\", nativeControls() ? \"none\" : null);\n    this.$state.hidden.set(this.#hasError() || !(src() || poster()) || nativeControls());\n  }\n  #isLoading() {\n    const { loading, hidden } = this.$state;\n    return !hidden() && loading();\n  }\n  #watchImg() {\n    const img = this.$state.img();\n    if (!img) return;\n    new EventsController(img).add(\"load\", this.#onLoad.bind(this)).add(\"error\", this.#onError.bind(this));\n    if (img.complete) this.#onLoad();\n  }\n  #prevSrc = \"\";\n  #watchSrc() {\n    const { poster: defaultPoster } = this.#media.$props, { canLoadPoster, providedPoster, inferredPoster } = this.#media.$state;\n    const src = this.$props.src() || \"\", poster = src || defaultPoster() || inferredPoster();\n    if (this.#prevSrc === providedPoster()) {\n      providedPoster.set(src);\n    }\n    this.$state.src.set(canLoadPoster() && poster.length ? poster : null);\n    this.#prevSrc = src;\n  }\n  #watchAlt() {\n    const { src } = this.$props, { alt } = this.$state, { poster } = this.#media.$state;\n    alt.set(src() || poster() ? this.$props.alt() : null);\n  }\n  #watchCrossOrigin() {\n    const { crossOrigin: crossOriginProp } = this.$props, { crossOrigin: crossOriginState } = this.$state, { crossOrigin: mediaCrossOrigin, poster: src } = this.#media.$state, crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(\n      /ytimg\\.com|vimeo/.test(src() || \"\") ? null : crossOrigin === true ? \"anonymous\" : crossOrigin\n    );\n  }\n  #onLoadStart() {\n    const { loading, error } = this.$state, { canLoadPoster, poster } = this.#media.$state;\n    loading.set(canLoadPoster() && !!poster());\n    error.set(null);\n  }\n  #onLoad() {\n    const { loading, error } = this.$state;\n    loading.set(false);\n    error.set(null);\n  }\n  #onError(event) {\n    const { loading, error } = this.$state;\n    loading.set(false);\n    error.set(event);\n  }\n}\n\nclass Time extends Component {\n  static props = {\n    type: \"current\",\n    showHours: false,\n    padHours: null,\n    padMinutes: null,\n    remainder: false,\n    toggle: false,\n    hidden: false\n  };\n  static state = new State({\n    timeText: \"\",\n    hidden: false\n  });\n  #media;\n  #invert = signal(null);\n  #isVisible = signal(true);\n  #isIntersecting = signal(true);\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#watchTime();\n    const { type } = this.$props;\n    this.setAttributes({\n      \"data-type\": type,\n      \"data-remainder\": this.#shouldInvert.bind(this)\n    });\n    new IntersectionObserverController({\n      callback: this.#onIntersectionChange.bind(this)\n    }).attach(this);\n  }\n  onAttach(el) {\n    if (!el.hasAttribute(\"role\")) effect(this.#watchRole.bind(this));\n    effect(this.#watchTime.bind(this));\n  }\n  onConnect(el) {\n    onDispose(observeVisibility(el, this.#isVisible.set));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#watchToggle.bind(this));\n  }\n  #onIntersectionChange(entries) {\n    this.#isIntersecting.set(entries[0].isIntersecting);\n  }\n  #watchHidden() {\n    const { hidden } = this.$props;\n    this.$state.hidden.set(hidden() || !this.#isVisible() || !this.#isIntersecting());\n  }\n  #watchToggle() {\n    if (!this.$props.toggle()) {\n      this.#invert.set(null);\n      return;\n    }\n    if (this.el) {\n      onPress(this.el, this.#onToggle.bind(this));\n    }\n  }\n  #watchTime() {\n    const { hidden, timeText } = this.$state, { duration } = this.#media.$state;\n    if (hidden()) return;\n    const { type, padHours, padMinutes, showHours } = this.$props, seconds = this.#getSeconds(type()), $duration = duration(), shouldInvert = this.#shouldInvert();\n    if (!Number.isFinite(seconds + $duration)) {\n      timeText.set(\"LIVE\");\n      return;\n    }\n    const time = shouldInvert ? Math.max(0, $duration - seconds) : seconds, formattedTime = formatTime(time, {\n      padHrs: padHours(),\n      padMins: padMinutes(),\n      showHrs: showHours()\n    });\n    timeText.set((shouldInvert ? \"-\" : \"\") + formattedTime);\n  }\n  #watchRole() {\n    if (!this.el) return;\n    const { toggle } = this.$props;\n    setAttribute(this.el, \"role\", toggle() ? \"timer\" : null);\n    setAttribute(this.el, \"tabindex\", toggle() ? 0 : null);\n  }\n  #getSeconds(type) {\n    const { bufferedEnd, duration, currentTime } = this.#media.$state;\n    switch (type) {\n      case \"buffered\":\n        return bufferedEnd();\n      case \"duration\":\n        return duration();\n      default:\n        return currentTime();\n    }\n  }\n  #shouldInvert() {\n    return this.$props.remainder() && this.#invert() !== false;\n  }\n  #onToggle(event) {\n    event.preventDefault();\n    if (this.#invert() === null) {\n      this.#invert.set(!this.$props.remainder());\n      return;\n    }\n    this.#invert.set((v) => !v);\n  }\n}\n\nclass MediaPlayerInstance extends MediaPlayer {\n}\nclass MediaProviderInstance extends MediaProvider {\n}\nclass MediaAnnouncerInstance extends MediaAnnouncer {\n}\nclass ControlsInstance extends Controls {\n}\nclass ControlsGroupInstance extends ControlsGroup {\n}\nclass ToggleButtonInstance extends ToggleButton {\n}\nclass CaptionButtonInstance extends CaptionButton {\n}\nclass FullscreenButtonInstance extends FullscreenButton {\n}\nclass LiveButtonInstance extends LiveButton {\n}\nclass MuteButtonInstance extends MuteButton {\n}\nclass PIPButtonInstance extends PIPButton {\n}\nclass PlayButtonInstance extends PlayButton {\n}\nclass AirPlayButtonInstance extends AirPlayButton {\n}\nclass GoogleCastButtonInstance extends GoogleCastButton {\n}\nclass SeekButtonInstance extends SeekButton {\n}\nclass TooltipInstance extends Tooltip {\n}\nclass TooltipTriggerInstance extends TooltipTrigger {\n}\nclass TooltipContentInstance extends TooltipContent {\n}\nclass SliderInstance extends Slider {\n}\nclass TimeSliderInstance extends TimeSlider {\n}\nclass VolumeSliderInstance extends VolumeSlider {\n}\nclass AudioGainSliderInstance extends AudioGainSlider {\n}\nclass SpeedSliderInstance extends SpeedSlider {\n}\nclass QualitySliderInstance extends QualitySlider {\n}\nclass SliderThumbnailInstance extends SliderThumbnail {\n}\nclass SliderValueInstance extends SliderValue {\n}\nclass SliderVideoInstance extends SliderVideo {\n}\nclass SliderPreviewInstance extends SliderPreview {\n}\nclass SliderChaptersInstance extends SliderChapters {\n}\nclass MenuInstance extends Menu {\n}\nclass MenuButtonInstance extends MenuButton {\n}\nclass MenuItemsInstance extends MenuItems {\n}\nclass MenuItemInstance extends MenuItem {\n}\nclass MenuPortalInstance extends MenuPortal {\n}\nclass RadioGroupInstance extends RadioGroup {\n}\nclass RadioInstance extends Radio {\n}\nclass CaptionsInstance extends Captions {\n}\nclass GestureInstance extends Gesture {\n}\nclass PosterInstance extends Poster {\n}\nclass ThumbnailInstance extends Thumbnail {\n}\nclass TimeInstance extends Time {\n}\n\nconst Slot = React.forwardRef((props, forwardedRef) => {\n  const { children, ...slotProps } = props;\n  const childrenArray = React.Children.toArray(children);\n  const slottable = childrenArray.find(isSlottable);\n  if (slottable) {\n    const newElement = slottable.props.children;\n    const newChildren = childrenArray.map((child) => {\n      if (child === slottable) {\n        if (React.Children.count(newElement) > 1) return React.Children.only(null);\n        return React.isValidElement(newElement) ? newElement.props.children : null;\n      } else {\n        return child;\n      }\n    });\n    return /* @__PURE__ */ React.createElement(SlotClone, { ...slotProps, ref: forwardedRef }, React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null);\n  }\n  return /* @__PURE__ */ React.createElement(SlotClone, { ...slotProps, ref: forwardedRef }, children);\n});\nSlot.displayName = \"Slot\";\nconst SlotClone = React.forwardRef((props, forwardedRef) => {\n  const { children, ...slotProps } = props;\n  if (React.isValidElement(children)) {\n    return React.cloneElement(children, {\n      ...mergeProps(slotProps, children.props),\n      ref: forwardedRef ? composeRefs(forwardedRef, children.ref) : children.ref\n    });\n  }\n  return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n});\nSlotClone.displayName = \"SlotClone\";\nconst Slottable = ({ children }) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\nfunction isSlottable(child) {\n  return React.isValidElement(child) && child.type === Slottable;\n}\nfunction mergeProps(slotProps, childProps) {\n  const overrideProps = { ...childProps };\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args) => {\n          childPropValue(...args);\n          slotPropValue(...args);\n        };\n      } else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    } else if (propName === \"style\") {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === \"className\") {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(\" \");\n    }\n  }\n  return { ...slotProps, ...overrideProps };\n}\n\nconst NODES = [\"button\", \"div\", \"span\", \"img\", \"video\", \"audio\"];\nconst Primitive = NODES.reduce((primitives, node) => {\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    return /* @__PURE__ */ React.createElement(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitives, [node]: Node };\n}, {});\n\nfunction isRemotionProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"REMOTION\";\n}\nfunction isRemotionSrc(src) {\n  return src?.type === \"video/remotion\";\n}\n\nconst sliderStateRecord = SliderInstance.state.record, initialSliderStore = Object.keys(sliderStateRecord).reduce(\n  (store, prop) => ({\n    ...store,\n    [prop]() {\n      return sliderStateRecord[prop];\n    }\n  }),\n  {}\n);\nfunction useSliderState(prop, ref) {\n  const $state = useStateContext(sliderState);\n  if (!$state && !ref) {\n    console.warn(\n      `[vidstack] \\`useSliderState\\` requires \\`RefObject<SliderInstance>\\` argument if called outside of a slider component`\n    );\n  }\n  return useSignal((ref?.current?.$state || $state || initialSliderStore)[prop]);\n}\nfunction useSliderStore(ref) {\n  const $state = useStateContext(sliderState);\n  if (!$state && !ref) {\n    console.warn(\n      `[vidstack] \\`useSliderStore\\` requires \\`RefObject<SliderInstance>\\` argument if called outside of a slider component`\n    );\n  }\n  return useSignalRecord(ref?.current ? ref.current.$state : $state || initialSliderStore);\n}\n\nconst mediaStateRecord = MediaPlayerInstance.state.record, initialMediaStore = Object.keys(mediaStateRecord).reduce(\n  (store, prop) => ({\n    ...store,\n    [prop]() {\n      return mediaStateRecord[prop];\n    }\n  }),\n  {}\n);\nfunction useMediaState(prop, ref) {\n  const $state = useStateContext(mediaState);\n  if (!$state && !ref) {\n    console.warn(\n      `[vidstack] \\`useMediaState\\` requires \\`RefObject<MediaPlayerInstance>\\` argument if called outside the \\`<MediaPlayer>\\` component`\n    );\n  }\n  return useSignal((ref?.current?.$state || $state || initialMediaStore)[prop]);\n}\nfunction useMediaStore(ref) {\n  const $state = useStateContext(mediaState);\n  if (!$state && !ref) {\n    console.warn(\n      `[vidstack] \\`useMediaStore\\` requires \\`RefObject<MediaPlayerInstance>\\` argument if called outside the \\`<MediaPlayer>\\` component`\n    );\n  }\n  return useSignalRecord(ref?.current ? ref.current.$state : $state || initialMediaStore);\n}\n\nexport { ARIAKeyShortcuts, AUDIO_EXTENSIONS, AUDIO_TYPES, AirPlayButtonInstance, AudioGainSliderInstance, AudioProviderLoader, AudioTrackList, CaptionButtonInstance, CaptionsInstance, ControlsGroupInstance, ControlsInstance, DASHProviderLoader, DASH_VIDEO_EXTENSIONS, DASH_VIDEO_TYPES, FullscreenButtonInstance, FullscreenController, GestureInstance, GoogleCastButtonInstance, HLSProviderLoader, HLS_VIDEO_EXTENSIONS, HLS_VIDEO_TYPES, HTMLAirPlayAdapter, HTMLMediaProvider, IS_CHROME, IS_IOS, IS_SERVER, List, ListSymbol, LiveButtonInstance, LocalMediaStorage, Logger, MEDIA_KEY_SHORTCUTS, MediaAnnouncerInstance, MediaControls, MediaPlayerInstance, MediaProviderInstance, MediaRemoteControl, MenuButtonInstance, MenuInstance, MenuItemInstance, MenuItemsInstance, MenuPortalInstance, MuteButtonInstance, PIPButtonInstance, PlayButtonInstance, PosterInstance, Primitive, QualitySliderInstance, QualitySymbol, RAFLoop, RadioGroupController, RadioGroupInstance, RadioInstance, ScreenOrientationController, SeekButtonInstance, SliderChaptersInstance, SliderInstance, SliderPreviewInstance, SliderThumbnailInstance, SliderValueInstance, SliderVideoInstance, SpeedSliderInstance, TextRenderers, TextTrack, TextTrackList, TextTrackSymbol, ThumbnailInstance, ThumbnailsLoader, TimeInstance, TimeRange, TimeSliderInstance, ToggleButtonInstance, TooltipContentInstance, TooltipInstance, TooltipTriggerInstance, VIDEO_EXTENSIONS, VIDEO_TYPES, VideoProvider, VideoProviderLoader, VideoQualityList, VimeoProviderLoader, VolumeSliderInstance, YouTubeProviderLoader, appendParamsToURL, boundTime, canChangeVolume, canFullscreen, canGoogleCastSrc, canOrientScreen, canPlayHLSNatively, canRotateScreen, canUsePictureInPicture, canUseVideoPresentation, coerceToError, findActiveCue, formatSpokenTime, formatTime, getDownloadFile, getTimeRangesEnd, getTimeRangesStart, isAudioProvider, isAudioSrc, isCueActive, isDASHProvider, isDASHSrc, isGoogleCastProvider, isHLSProvider, isHLSSrc, isHLSSupported, isHTMLAudioElement, isHTMLIFrameElement, isHTMLMediaElement, isHTMLVideoElement, isMediaStream, isRemotionProvider, isRemotionSrc, isTrackCaptionKind, isVideoProvider, isVideoQualitySrc, isVideoSrc, isVimeoProvider, isYouTubeProvider, loadScript, mediaContext, mediaState, menuContext, normalizeTimeIntervals, parseJSONCaptionsFile, preconnect, sliderState, softResetMediaState, sortVideoQualities, updateSliderPreviewPlacement, updateTimeIntervals, useMediaContext, useMediaState, useMediaStore, useSliderState, useSliderStore, watchActiveTextTrack, watchCueTextChange };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}